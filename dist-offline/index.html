<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>cy-experiment-graph-editor</title>


  <!-- 自分が作ったスタイルシート -->

  <!-- マイクロモーダルのCSS 【MITライセンス】-->
  <!-- https://github.com/ghosh/Micromodal -->

  <script type="module" crossorigin>(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}})();function gr(r){"@babel/helpers - typeof";return gr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gr(r)}function yg(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function aT(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function mg(r,e,t){return e&&aT(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function jx(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function hn(r,e){return iT(r)||oT(r,e)||Wx(r,e)||sT()}function iT(r){if(Array.isArray(r))return r}function oT(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n=[],a=!0,i=!1,o,s;try{for(t=t.call(r);!(a=(o=t.next()).done)&&(n.push(o.value),!(e&&n.length===e));a=!0);}catch(u){i=!0,s=u}finally{try{!a&&t.return!=null&&t.return()}finally{if(i)throw s}}return n}}function Wx(r,e){if(r){if(typeof r=="string")return Iy(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Iy(r,e)}}function Iy(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function sT(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uT(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=Wx(r))||e){t&&(r=t);var n=0,a=function(){};return{s:a,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return i=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}}}var vr=typeof window>"u"?null:window,Ly=vr?vr.navigator:null;vr&&vr.document;var lT=gr(""),Kx=gr({}),cT=gr(function(){}),fT=typeof HTMLElement>"u"?"undefined":gr(HTMLElement),jo=function(e){return e&&e.instanceString&&rr(e.instanceString)?e.instanceString():null},Qe=function(e){return e!=null&&gr(e)==lT},rr=function(e){return e!=null&&gr(e)===cT},zt=function(e){return!Zr(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},Et=function(e){return e!=null&&gr(e)===Kx&&!zt(e)&&e.constructor===Object},dT=function(e){return e!=null&&gr(e)===Kx},Ge=function(e){return e!=null&&gr(e)===gr(1)&&!isNaN(e)},hT=function(e){return Ge(e)&&Math.floor(e)===e},js=function(e){if(fT!=="undefined")return e!=null&&e instanceof HTMLElement},Zr=function(e){return Wo(e)||Yx(e)},Wo=function(e){return jo(e)==="collection"&&e._private.single},Yx=function(e){return jo(e)==="collection"&&!e._private.single},bg=function(e){return jo(e)==="core"},Xx=function(e){return jo(e)==="stylesheet"},vT=function(e){return jo(e)==="event"},wa=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},pT=function(e){return typeof HTMLElement>"u"?!1:e instanceof HTMLElement},gT=function(e){return Et(e)&&Ge(e.x1)&&Ge(e.x2)&&Ge(e.y1)&&Ge(e.y2)},yT=function(e){return dT(e)&&rr(e.then)},mT=function(){return Ly&&Ly.userAgent.match(/msie|trident|edge/i)},Ro=function(e,t){t||(t=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);return i.join("$")});var n=function a(){var i=this,o=arguments,s,u=t.apply(i,o),l=a.cache;return(s=l[u])||(s=l[u]=e.apply(i,o)),s};return n.cache={},n},wg=Ro(function(r){return r.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),lu=Ro(function(r){return r.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),Zx=Ro(function(r,e){return r+e[0].toUpperCase()+e.substring(1)},function(r,e){return r+"$"+e}),Ny=function(e){return wa(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},pr="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",bT="rgb[a]?\\(("+pr+"[%]?)\\s*,\\s*("+pr+"[%]?)\\s*,\\s*("+pr+"[%]?)(?:\\s*,\\s*("+pr+"))?\\)",wT="rgb[a]?\\((?:"+pr+"[%]?)\\s*,\\s*(?:"+pr+"[%]?)\\s*,\\s*(?:"+pr+"[%]?)(?:\\s*,\\s*(?:"+pr+"))?\\)",_T="hsl[a]?\\(("+pr+")\\s*,\\s*("+pr+"[%])\\s*,\\s*("+pr+"[%])(?:\\s*,\\s*("+pr+"))?\\)",xT="hsl[a]?\\((?:"+pr+")\\s*,\\s*(?:"+pr+"[%])\\s*,\\s*(?:"+pr+"[%])(?:\\s*,\\s*(?:"+pr+"))?\\)",ST="\\#[0-9a-fA-F]{3}",CT="\\#[0-9a-fA-F]{6}",Qx=function(e,t){return e<t?-1:e>t?1:0},ET=function(e,t){return-1*Qx(e,t)},rt=Object.assign!=null?Object.assign.bind(Object):function(r){for(var e=arguments,t=1;t<e.length;t++){var n=e[t];if(n!=null)for(var a=Object.keys(n),i=0;i<a.length;i++){var o=a[i];r[o]=n[o]}}return r},TT=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var t=e.length===4,n,a,i,o=16;return t?(n=parseInt(e[1]+e[1],o),a=parseInt(e[2]+e[2],o),i=parseInt(e[3]+e[3],o)):(n=parseInt(e[1]+e[2],o),a=parseInt(e[3]+e[4],o),i=parseInt(e[5]+e[6],o)),[n,a,i]}},PT=function(e){var t,n,a,i,o,s,u,l;function c(v,m,_){return _<0&&(_+=1),_>1&&(_-=1),_<1/6?v+(m-v)*6*_:_<1/2?m:_<2/3?v+(m-v)*(2/3-_)*6:v}var f=new RegExp("^"+_T+"$").exec(e);if(f){if(n=parseInt(f[1]),n<0?n=(360- -1*n%360)%360:n>360&&(n=n%360),n/=360,a=parseFloat(f[2]),a<0||a>100||(a=a/100,i=parseFloat(f[3]),i<0||i>100)||(i=i/100,o=f[4],o!==void 0&&(o=parseFloat(o),o<0||o>1)))return;if(a===0)s=u=l=Math.round(i*255);else{var d=i<.5?i*(1+a):i+a-i*a,h=2*i-d;s=Math.round(255*c(h,d,n+1/3)),u=Math.round(255*c(h,d,n)),l=Math.round(255*c(h,d,n-1/3))}t=[s,u,l,o]}return t},AT=function(e){var t,n=new RegExp("^"+bT+"$").exec(e);if(n){t=[];for(var a=[],i=1;i<=3;i++){var o=n[i];if(o[o.length-1]==="%"&&(a[i]=!0),o=parseFloat(o),a[i]&&(o=o/100*255),o<0||o>255)return;t.push(Math.floor(o))}var s=a[1]||a[2]||a[3],u=a[1]&&a[2]&&a[3];if(s&&!u)return;var l=n[4];if(l!==void 0){if(l=parseFloat(l),l<0||l>1)return;t.push(l)}}return t},kT=function(e){return OT[e.toLowerCase()]},MT=function(e){return(zt(e)?e:null)||kT(e)||TT(e)||AT(e)||PT(e)},OT={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Jx=function(e){for(var t=e.map,n=e.keys,a=n.length,i=0;i<a;i++){var o=n[i];if(Et(o))throw Error("Tried to set map with object key");i<n.length-1?(t[o]==null&&(t[o]={}),t=t[o]):t[o]=e.value}},eS=function(e){for(var t=e.map,n=e.keys,a=n.length,i=0;i<a;i++){var o=n[i];if(Et(o))throw Error("Tried to get map with object key");if(t=t[o],t==null)return t}return t};function DT(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}var Ka=DT,xo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function RT(r,e){return e={exports:{}},r(e,e.exports),e.exports}var IT=typeof xo=="object"&&xo&&xo.Object===Object&&xo,LT=IT,NT=typeof self=="object"&&self&&self.Object===Object&&self,FT=LT||NT||Function("return this")(),cu=FT,BT=function(){return cu.Date.now()},ec=BT,qT=/\s/;function zT(r){for(var e=r.length;e--&&qT.test(r.charAt(e)););return e}var GT=zT,$T=/^\s+/;function VT(r){return r&&r.slice(0,GT(r)+1).replace($T,"")}var UT=VT,HT=cu.Symbol,Ii=HT,tS=Object.prototype,jT=tS.hasOwnProperty,WT=tS.toString,vo=Ii?Ii.toStringTag:void 0;function KT(r){var e=jT.call(r,vo),t=r[vo];try{r[vo]=void 0;var n=!0}catch{}var a=WT.call(r);return n&&(e?r[vo]=t:delete r[vo]),a}var YT=KT,XT=Object.prototype,ZT=XT.toString;function QT(r){return ZT.call(r)}var JT=QT,eP="[object Null]",tP="[object Undefined]",Fy=Ii?Ii.toStringTag:void 0;function rP(r){return r==null?r===void 0?tP:eP:Fy&&Fy in Object(r)?YT(r):JT(r)}var rS=rP;function nP(r){return r!=null&&typeof r=="object"}var aP=nP,iP="[object Symbol]";function oP(r){return typeof r=="symbol"||aP(r)&&rS(r)==iP}var Ko=oP,By=NaN,sP=/^[-+]0x[0-9a-f]+$/i,uP=/^0b[01]+$/i,lP=/^0o[0-7]+$/i,cP=parseInt;function fP(r){if(typeof r=="number")return r;if(Ko(r))return By;if(Ka(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=Ka(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=UT(r);var t=uP.test(r);return t||lP.test(r)?cP(r.slice(2),t?2:8):sP.test(r)?By:+r}var qy=fP,dP="Expected a function",hP=Math.max,vP=Math.min;function pP(r,e,t){var n,a,i,o,s,u,l=0,c=!1,f=!1,d=!0;if(typeof r!="function")throw new TypeError(dP);e=qy(e)||0,Ka(t)&&(c=!!t.leading,f="maxWait"in t,i=f?hP(qy(t.maxWait)||0,e):i,d="trailing"in t?!!t.trailing:d);function h(E){var p=n,P=a;return n=a=void 0,l=E,o=r.apply(P,p),o}function v(E){return l=E,s=setTimeout(b,e),c?h(E):o}function m(E){var p=E-u,P=E-l,T=e-p;return f?vP(T,i-P):T}function _(E){var p=E-u,P=E-l;return u===void 0||p>=e||p<0||f&&P>=i}function b(){var E=ec();if(_(E))return w(E);s=setTimeout(b,m(E))}function w(E){return s=void 0,d&&n?h(E):(n=a=void 0,o)}function y(){s!==void 0&&clearTimeout(s),l=0,n=u=a=s=void 0}function x(){return s===void 0?o:w(ec())}function C(){var E=ec(),p=_(E);if(n=arguments,a=this,u=E,p){if(s===void 0)return v(u);if(f)return clearTimeout(s),s=setTimeout(b,e),h(u)}return s===void 0&&(s=setTimeout(b,e)),o}return C.cancel=y,C.flush=x,C}var fu=pP,tc=vr?vr.performance:null,nS=tc&&tc.now?function(){return tc.now()}:function(){return Date.now()},gP=function(){if(vr){if(vr.requestAnimationFrame)return function(r){vr.requestAnimationFrame(r)};if(vr.mozRequestAnimationFrame)return function(r){vr.mozRequestAnimationFrame(r)};if(vr.webkitRequestAnimationFrame)return function(r){vr.webkitRequestAnimationFrame(r)};if(vr.msRequestAnimationFrame)return function(r){vr.msRequestAnimationFrame(r)}}return function(r){r&&setTimeout(function(){r(nS())},1e3/60)}}(),Ws=function(e){return gP(e)},Kn=nS,Ti=9261,aS=65599,So=5381,iS=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ti,n=t,a;a=e.next(),!a.done;)n=n*aS+a.value|0;return n},Io=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ti;return t*aS+e|0},Lo=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:So;return(t<<5)+t+e|0},yP=function(e,t){return e*2097152+t},fa=function(e){return e[0]*2097152+e[1]},ys=function(e,t){return[Io(e[0],t[0]),Lo(e[1],t[1])]},mP=function(e,t){var n={value:0,done:!1},a=0,i=e.length,o={next:function(){return a<i?n.value=e[a++]:n.done=!0,n}};return iS(o,t)},Ya=function(e,t){var n={value:0,done:!1},a=0,i=e.length,o={next:function(){return a<i?n.value=e.charCodeAt(a++):n.done=!0,n}};return iS(o,t)},oS=function(){return bP(arguments)},bP=function(e){for(var t,n=0;n<e.length;n++){var a=e[n];n===0?t=Ya(a):t=Ya(a,t)}return t},zy=!0,wP=console.warn!=null,_P=console.trace!=null,_g=Number.MAX_SAFE_INTEGER||9007199254740991,sS=function(){return!0},Ks=function(){return!1},Gy=function(){return 0},xg=function(){},ar=function(e){throw new Error(e)},uS=function(e){if(e!==void 0)zy=!!e;else return zy},Mt=function(e){uS()&&(wP?console.warn(e):(console.log(e),_P&&console.trace()))},xP=function(e){return rt({},e)},Dn=function(e){return e==null?e:zt(e)?e.slice():Et(e)?xP(e):e},SP=function(e){return e.slice()},lS=function(e,t){for(t=e="";e++<36;t+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return t},CP={},cS=function(){return CP},kr=function(e){var t=Object.keys(e);return function(n){for(var a={},i=0;i<t.length;i++){var o=t[i],s=n==null?void 0:n[o];a[o]=s===void 0?e[o]:s}return a}},_a=function(e,t,n){for(var a=e.length-1;a>=0;a--)e[a]===t&&e.splice(a,1)},Sg=function(e){e.splice(0,e.length)},EP=function(e,t){for(var n=0;n<t.length;n++){var a=t[n];e.push(a)}},pn=function(e,t,n){return n&&(t=Zx(n,t)),e[t]},ga=function(e,t,n,a){n&&(t=Zx(n,t)),e[t]=a},TP=function(){function r(){yg(this,r),this._obj={}}return mg(r,[{key:"set",value:function(t,n){return this._obj[t]=n,this}},{key:"delete",value:function(t){return this._obj[t]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(t){return this._obj[t]!==void 0}},{key:"get",value:function(t){return this._obj[t]}}]),r}(),Rn=typeof Map<"u"?Map:TP,PP="undefined",AP=function(){function r(e){if(yg(this,r),this._obj=Object.create(null),this.size=0,e!=null){var t;e.instanceString!=null&&e.instanceString()===this.instanceString()?t=e.toArray():t=e;for(var n=0;n<t.length;n++)this.add(t[n])}}return mg(r,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(t){var n=this._obj;n[t]!==1&&(n[t]=1,this.size++)}},{key:"delete",value:function(t){var n=this._obj;n[t]===1&&(n[t]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(t){return this._obj[t]===1}},{key:"toArray",value:function(){var t=this;return Object.keys(this._obj).filter(function(n){return t.has(n)})}},{key:"forEach",value:function(t,n){return this.toArray().forEach(t,n)}}]),r}(),Gi=(typeof Set>"u"?"undefined":gr(Set))!==PP?Set:AP,du=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||t===void 0||!bg(e)){ar("An element must have a core reference and parameters set");return}var a=t.group;if(a==null&&(t.data&&t.data.source!=null&&t.data.target!=null?a="edges":a="nodes"),a!=="nodes"&&a!=="edges"){ar("An element must be of type `nodes` or `edges`; you specified `"+a+"`");return}this.length=1,this[0]=this;var i=this._private={cy:e,single:!0,data:t.data||{},position:t.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:a,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!t.selected,selectable:t.selectable===void 0?!0:!!t.selectable,locked:!!t.locked,grabbed:!1,grabbable:t.grabbable===void 0?!0:!!t.grabbable,pannable:t.pannable===void 0?a==="edges":!!t.pannable,active:!1,classes:new Gi,animation:{current:[],queue:[]},rscratch:{},scratch:t.scratch||{},edges:[],children:[],parent:t.parent&&t.parent.isNode()?t.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(i.position.x==null&&(i.position.x=0),i.position.y==null&&(i.position.y=0),t.renderedPosition){var o=t.renderedPosition,s=e.pan(),u=e.zoom();i.position={x:(o.x-s.x)/u,y:(o.y-s.y)/u}}var l=[];zt(t.classes)?l=t.classes:Qe(t.classes)&&(l=t.classes.split(/\s+/));for(var c=0,f=l.length;c<f;c++){var d=l[c];!d||d===""||i.classes.add(d)}this.createEmitter();var h=t.style||t.css;h&&(Mt("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(h)),(n===void 0||n)&&this.restore()},$y=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(n,a,i){var o;Et(n)&&!Zr(n)&&(o=n,n=o.roots||o.root,a=o.visit,i=o.directed),i=arguments.length===2&&!rr(a)?a:i,a=rr(a)?a:function(){};for(var s=this._private.cy,u=n=Qe(n)?this.filter(n):n,l=[],c=[],f={},d={},h={},v=0,m,_=this.byGroup(),b=_.nodes,w=_.edges,y=0;y<u.length;y++){var x=u[y],C=x.id();x.isNode()&&(l.unshift(x),e.bfs&&(h[C]=!0,c.push(x)),d[C]=0)}for(var E=function(){var B=e.bfs?l.shift():l.pop(),q=B.id();if(e.dfs){if(h[q])return"continue";h[q]=!0,c.push(B)}var Z=d[q],Q=f[q],Y=Q!=null?Q.source():null,J=Q!=null?Q.target():null,X=Q==null?void 0:B.same(Y)?J[0]:Y[0],k=void 0;if(k=a(B,Q,X,v++,Z),k===!0)return m=B,"break";if(k===!1)return"break";for(var D=B.connectedEdges().filter(function(j){return(!i||j.source().same(B))&&w.has(j)}),I=0;I<D.length;I++){var F=D[I],L=F.connectedNodes().filter(function(j){return!j.same(B)&&b.has(j)}),H=L.id();L.length!==0&&!h[H]&&(L=L[0],l.push(L),e.bfs&&(h[H]=!0,c.push(L)),f[H]=F,d[H]=d[q]+1)}};l.length!==0;){var p=E();if(p!=="continue"&&p==="break")break}for(var P=s.collection(),T=0;T<c.length;T++){var R=c[T],M=f[R.id()];M!=null&&P.push(M),P.push(R)}return{path:s.collection(P),found:s.collection(m)}}},No={breadthFirstSearch:$y({bfs:!0}),depthFirstSearch:$y({dfs:!0})};No.bfs=No.breadthFirstSearch;No.dfs=No.depthFirstSearch;var kP=RT(function(r,e){(function(){var t,n,a,i,o,s,u,l,c,f,d,h,v,m,_;a=Math.floor,f=Math.min,n=function(b,w){return b<w?-1:b>w?1:0},c=function(b,w,y,x,C){var E;if(y==null&&(y=0),C==null&&(C=n),y<0)throw new Error("lo must be non-negative");for(x==null&&(x=b.length);y<x;)E=a((y+x)/2),C(w,b[E])<0?x=E:y=E+1;return[].splice.apply(b,[y,y-y].concat(w)),w},s=function(b,w,y){return y==null&&(y=n),b.push(w),m(b,0,b.length-1,y)},o=function(b,w){var y,x;return w==null&&(w=n),y=b.pop(),b.length?(x=b[0],b[0]=y,_(b,0,w)):x=y,x},l=function(b,w,y){var x;return y==null&&(y=n),x=b[0],b[0]=w,_(b,0,y),x},u=function(b,w,y){var x;return y==null&&(y=n),b.length&&y(b[0],w)<0&&(x=[b[0],w],w=x[0],b[0]=x[1],_(b,0,y)),w},i=function(b,w){var y,x,C,E,p,P;for(w==null&&(w=n),E=(function(){P=[];for(var T=0,R=a(b.length/2);0<=R?T<R:T>R;0<=R?T++:T--)P.push(T);return P}).apply(this).reverse(),p=[],x=0,C=E.length;x<C;x++)y=E[x],p.push(_(b,y,w));return p},v=function(b,w,y){var x;if(y==null&&(y=n),x=b.indexOf(w),x!==-1)return m(b,0,x,y),_(b,x,y)},d=function(b,w,y){var x,C,E,p,P;if(y==null&&(y=n),C=b.slice(0,w),!C.length)return C;for(i(C,y),P=b.slice(w),E=0,p=P.length;E<p;E++)x=P[E],u(C,x,y);return C.sort(y).reverse()},h=function(b,w,y){var x,C,E,p,P,T,R,M,N;if(y==null&&(y=n),w*10<=b.length){if(E=b.slice(0,w).sort(y),!E.length)return E;for(C=E[E.length-1],R=b.slice(w),p=0,T=R.length;p<T;p++)x=R[p],y(x,C)<0&&(c(E,x,0,null,y),E.pop(),C=E[E.length-1]);return E}for(i(b,y),N=[],P=0,M=f(w,b.length);0<=M?P<M:P>M;0<=M?++P:--P)N.push(o(b,y));return N},m=function(b,w,y,x){var C,E,p;for(x==null&&(x=n),C=b[y];y>w;){if(p=y-1>>1,E=b[p],x(C,E)<0){b[y]=E,y=p;continue}break}return b[y]=C},_=function(b,w,y){var x,C,E,p,P;for(y==null&&(y=n),C=b.length,P=w,E=b[w],x=2*w+1;x<C;)p=x+1,p<C&&!(y(b[x],b[p])<0)&&(x=p),b[w]=b[x],w=x,x=2*w+1;return b[w]=E,m(b,P,w,y)},t=function(){b.push=s,b.pop=o,b.replace=l,b.pushpop=u,b.heapify=i,b.updateItem=v,b.nlargest=d,b.nsmallest=h;function b(w){this.cmp=w??n,this.nodes=[]}return b.prototype.push=function(w){return s(this.nodes,w,this.cmp)},b.prototype.pop=function(){return o(this.nodes,this.cmp)},b.prototype.peek=function(){return this.nodes[0]},b.prototype.contains=function(w){return this.nodes.indexOf(w)!==-1},b.prototype.replace=function(w){return l(this.nodes,w,this.cmp)},b.prototype.pushpop=function(w){return u(this.nodes,w,this.cmp)},b.prototype.heapify=function(){return i(this.nodes,this.cmp)},b.prototype.updateItem=function(w){return v(this.nodes,w,this.cmp)},b.prototype.clear=function(){return this.nodes=[]},b.prototype.empty=function(){return this.nodes.length===0},b.prototype.size=function(){return this.nodes.length},b.prototype.clone=function(){var w;return w=new b,w.nodes=this.nodes.slice(0),w},b.prototype.toArray=function(){return this.nodes.slice(0)},b.prototype.insert=b.prototype.push,b.prototype.top=b.prototype.peek,b.prototype.front=b.prototype.peek,b.prototype.has=b.prototype.contains,b.prototype.copy=b.prototype.clone,b}(),function(b,w){return r.exports=w()}(this,function(){return t})}).call(xo)}),Yo=kP,MP=kr({root:null,weight:function(e){return 1},directed:!1}),OP={dijkstra:function(e){if(!Et(e)){var t=arguments;e={root:t[0],weight:t[1],directed:t[2]}}var n=MP(e),a=n.root,i=n.weight,o=n.directed,s=this,u=i,l=Qe(a)?this.filter(a)[0]:a[0],c={},f={},d={},h=this.byGroup(),v=h.nodes,m=h.edges;m.unmergeBy(function(Z){return Z.isLoop()});for(var _=function(Q){return c[Q.id()]},b=function(Q,Y){c[Q.id()]=Y,w.updateItem(Q)},w=new Yo(function(Z,Q){return _(Z)-_(Q)}),y=0;y<v.length;y++){var x=v[y];c[x.id()]=x.same(l)?0:1/0,w.push(x)}for(var C=function(Q,Y){for(var J=(o?Q.edgesTo(Y):Q.edgesWith(Y)).intersect(m),X=1/0,k,D=0;D<J.length;D++){var I=J[D],F=u(I);(F<X||!k)&&(X=F,k=I)}return{edge:k,dist:X}};w.size()>0;){var E=w.pop(),p=_(E),P=E.id();if(d[P]=p,p!==1/0)for(var T=E.neighborhood().intersect(v),R=0;R<T.length;R++){var M=T[R],N=M.id(),B=C(E,M),q=p+B.dist;q<_(M)&&(b(M,q),f[N]={node:E,edge:B.edge})}}return{distanceTo:function(Q){var Y=Qe(Q)?v.filter(Q)[0]:Q[0];return d[Y.id()]},pathTo:function(Q){var Y=Qe(Q)?v.filter(Q)[0]:Q[0],J=[],X=Y,k=X.id();if(Y.length>0)for(J.unshift(Y);f[k];){var D=f[k];J.unshift(D.edge),J.unshift(D.node),X=D.node,k=X.id()}return s.spawn(J)}}}},DP={kruskal:function(e){e=e||function(y){return 1};for(var t=this.byGroup(),n=t.nodes,a=t.edges,i=n.length,o=new Array(i),s=n,u=function(x){for(var C=0;C<o.length;C++){var E=o[C];if(E.has(x))return C}},l=0;l<i;l++)o[l]=this.spawn(n[l]);for(var c=a.sort(function(y,x){return e(y)-e(x)}),f=0;f<c.length;f++){var d=c[f],h=d.source()[0],v=d.target()[0],m=u(h),_=u(v),b=o[m],w=o[_];m!==_&&(s.merge(d),b.merge(w),o.splice(_,1))}return s}},RP=kr({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),IP={aStar:function(e){var t=this.cy(),n=RP(e),a=n.root,i=n.goal,o=n.heuristic,s=n.directed,u=n.weight;a=t.collection(a)[0],i=t.collection(i)[0];var l=a.id(),c=i.id(),f={},d={},h={},v=new Yo(function(k,D){return d[k.id()]-d[D.id()]}),m=new Gi,_={},b={},w=function(D,I){v.push(D),m.add(I)},y,x,C=function(){y=v.pop(),x=y.id(),m.delete(x)},E=function(D){return m.has(D)};w(a,l),f[l]=0,d[l]=o(a);for(var p=0;v.size()>0;){if(C(),p++,x===c){for(var P=[],T=i,R=c,M=b[R];P.unshift(T),M!=null&&P.unshift(M),T=_[R],T!=null;)R=T.id(),M=b[R];return{found:!0,distance:f[x],path:this.spawn(P),steps:p}}h[x]=!0;for(var N=y._private.edges,B=0;B<N.length;B++){var q=N[B];if(this.hasElementWithId(q.id())&&!(s&&q.data("source")!==x)){var Z=q.source(),Q=q.target(),Y=Z.id()!==x?Z:Q,J=Y.id();if(this.hasElementWithId(J)&&!h[J]){var X=f[x]+u(q);if(!E(J)){f[J]=X,d[J]=X+o(Y),w(Y,J),_[J]=y,b[J]=q;continue}X<f[J]&&(f[J]=X,d[J]=X+o(Y),_[J]=y,b[J]=q)}}}}return{found:!1,distance:void 0,path:void 0,steps:p}}},LP=kr({weight:function(e){return 1},directed:!1}),NP={floydWarshall:function(e){for(var t=this.cy(),n=LP(e),a=n.weight,i=n.directed,o=a,s=this.byGroup(),u=s.nodes,l=s.edges,c=u.length,f=c*c,d=function(F){return u.indexOf(F)},h=function(F){return u[F]},v=new Array(f),m=0;m<f;m++){var _=m%c,b=(m-_)/c;b===_?v[m]=0:v[m]=1/0}for(var w=new Array(f),y=new Array(f),x=0;x<l.length;x++){var C=l[x],E=C.source()[0],p=C.target()[0];if(E!==p){var P=d(E),T=d(p),R=P*c+T,M=o(C);if(v[R]>M&&(v[R]=M,w[R]=T,y[R]=C),!i){var N=T*c+P;!i&&v[N]>M&&(v[N]=M,w[N]=P,y[N]=C)}}}for(var B=0;B<c;B++)for(var q=0;q<c;q++)for(var Z=q*c+B,Q=0;Q<c;Q++){var Y=q*c+Q,J=B*c+Q;v[Z]+v[J]<v[Y]&&(v[Y]=v[Z]+v[J],w[Y]=w[Z])}var X=function(F){return(Qe(F)?t.filter(F):F)[0]},k=function(F){return d(X(F))},D={distance:function(F,L){var H=k(F),j=k(L);return v[H*c+j]},path:function(F,L){var H=k(F),j=k(L),W=h(H);if(H===j)return W.collection();if(w[H*c+j]==null)return t.collection();var re=t.collection(),se=H,ce;for(re.merge(W);H!==j;)se=H,H=w[H*c+j],ce=y[se*c+H],re.merge(ce),re.merge(h(H));return re}};return D}},FP=kr({weight:function(e){return 1},directed:!1,root:null}),BP={bellmanFord:function(e){var t=this,n=FP(e),a=n.weight,i=n.directed,o=n.root,s=a,u=this,l=this.cy(),c=this.byGroup(),f=c.edges,d=c.nodes,h=d.length,v=new Rn,m=!1,_=[];o=l.collection(o)[0],f.unmergeBy(function(ne){return ne.isLoop()});for(var b=f.length,w=function(de){var Ce=v.get(de.id());return Ce||(Ce={},v.set(de.id(),Ce)),Ce},y=function(de){return(Qe(de)?l.$(de):de)[0]},x=function(de){return w(y(de)).dist},C=function(de){for(var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o,Le=y(de),$e=[],Ne=Le;;){if(Ne==null)return t.spawn();var De=w(Ne),me=De.edge,G=De.pred;if($e.unshift(Ne[0]),Ne.same(Ce)&&$e.length>0)break;me!=null&&$e.unshift(me),Ne=G}return u.spawn($e)},E=0;E<h;E++){var p=d[E],P=w(p);p.same(o)?P.dist=0:P.dist=1/0,P.pred=null,P.edge=null}for(var T=!1,R=function(de,Ce,Le,$e,Ne,De){var me=$e.dist+De;me<Ne.dist&&!Le.same($e.edge)&&(Ne.dist=me,Ne.pred=de,Ne.edge=Le,T=!0)},M=1;M<h;M++){T=!1;for(var N=0;N<b;N++){var B=f[N],q=B.source(),Z=B.target(),Q=s(B),Y=w(q),J=w(Z);R(q,Z,B,Y,J,Q),i||R(Z,q,B,J,Y,Q)}if(!T)break}if(T)for(var X=[],k=0;k<b;k++){var D=f[k],I=D.source(),F=D.target(),L=s(D),H=w(I).dist,j=w(F).dist;if(H+L<j||!i&&j+L<H)if(m||(Mt("Graph contains a negative weight cycle for Bellman-Ford"),m=!0),e.findNegativeWeightCycles!==!1){var W=[];H+L<j&&W.push(I),!i&&j+L<H&&W.push(F);for(var re=W.length,se=0;se<re;se++){var ce=W[se],ge=[ce];ge.push(w(ce).edge);for(var Pe=w(ce).pred;ge.indexOf(Pe)===-1;)ge.push(Pe),ge.push(w(Pe).edge),Pe=w(Pe).pred;ge=ge.slice(ge.indexOf(Pe));for(var Oe=ge[0].id(),Se=0,le=2;le<ge.length;le+=2)ge[le].id()<Oe&&(Oe=ge[le].id(),Se=le);ge=ge.slice(Se).concat(ge.slice(0,Se)),ge.push(ge[0]);var te=ge.map(function(ne){return ne.id()}).join(",");X.indexOf(te)===-1&&(_.push(u.spawn(ge)),X.push(te))}}else break}return{distanceTo:x,pathTo:C,hasNegativeWeightCycle:m,negativeWeightCycles:_}}},qP=Math.sqrt(2),zP=function(e,t,n){n.length===0&&ar("Karger-Stein must be run on a connected (sub)graph");for(var a=n[e],i=a[1],o=a[2],s=t[i],u=t[o],l=n,c=l.length-1;c>=0;c--){var f=l[c],d=f[1],h=f[2];(t[d]===s&&t[h]===u||t[d]===u&&t[h]===s)&&l.splice(c,1)}for(var v=0;v<l.length;v++){var m=l[v];m[1]===u?(l[v]=m.slice(),l[v][1]=s):m[2]===u&&(l[v]=m.slice(),l[v][2]=s)}for(var _=0;_<t.length;_++)t[_]===u&&(t[_]=s);return l},rc=function(e,t,n,a){for(;n>a;){var i=Math.floor(Math.random()*t.length);t=zP(i,e,t),n--}return t},GP={kargerStein:function(){var e=this,t=this.byGroup(),n=t.nodes,a=t.edges;a.unmergeBy(function(J){return J.isLoop()});var i=n.length,o=a.length,s=Math.ceil(Math.pow(Math.log(i)/Math.LN2,2)),u=Math.floor(i/qP);if(i<2){ar("At least 2 nodes are required for Karger-Stein algorithm");return}for(var l=[],c=0;c<o;c++){var f=a[c];l.push([c,n.indexOf(f.source()),n.indexOf(f.target())])}for(var d=1/0,h=[],v=new Array(i),m=new Array(i),_=new Array(i),b=function(X,k){for(var D=0;D<i;D++)k[D]=X[D]},w=0;w<=s;w++){for(var y=0;y<i;y++)m[y]=y;var x=rc(m,l.slice(),i,u),C=x.slice();b(m,_);var E=rc(m,x,u,2),p=rc(_,C,u,2);E.length<=p.length&&E.length<d?(d=E.length,h=E,b(m,v)):p.length<=E.length&&p.length<d&&(d=p.length,h=p,b(_,v))}for(var P=this.spawn(h.map(function(J){return a[J[0]]})),T=this.spawn(),R=this.spawn(),M=v[0],N=0;N<v.length;N++){var B=v[N],q=n[N];B===M?T.merge(q):R.merge(q)}var Z=function(X){var k=e.spawn();return X.forEach(function(D){k.merge(D),D.connectedEdges().forEach(function(I){e.contains(I)&&!P.contains(I)&&k.merge(I)})}),k},Q=[Z(T),Z(R)],Y={cut:P,components:Q,partition1:T,partition2:R};return Y}},$P=function(e){return{x:e.x,y:e.y}},hu=function(e,t,n){return{x:e.x*t+n.x,y:e.y*t+n.y}},fS=function(e,t,n){return{x:(e.x-n.x)/t,y:(e.y-n.y)/t}},Pi=function(e){return{x:e[0],y:e[1]}},VP=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=1/0,i=t;i<n;i++){var o=e[i];isFinite(o)&&(a=Math.min(o,a))}return a},UP=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=-1/0,i=t;i<n;i++){var o=e[i];isFinite(o)&&(a=Math.max(o,a))}return a},HP=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=0,i=0,o=t;o<n;o++){var s=e[o];isFinite(s)&&(a+=s,i++)}return a/i},jP=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;a?e=e.slice(t,n):(n<e.length&&e.splice(n,e.length-n),t>0&&e.splice(0,t));for(var s=0,u=e.length-1;u>=0;u--){var l=e[u];o?isFinite(l)||(e[u]=-1/0,s++):e.splice(u,1)}i&&e.sort(function(d,h){return d-h});var c=e.length,f=Math.floor(c/2);return c%2!==0?e[f+1+s]:(e[f-1+s]+e[f+s])/2},WP=function(e){return Math.PI*e/180},ms=function(e,t){return Math.atan2(t,e)-Math.PI/2},Cg=Math.log2||function(r){return Math.log(r)/Math.log(2)},dS=function(e){return e>0?1:e<0?-1:0},Xa=function(e,t){return Math.sqrt($a(e,t))},$a=function(e,t){var n=t.x-e.x,a=t.y-e.y;return n*n+a*a},KP=function(e){for(var t=e.length,n=0,a=0;a<t;a++)n+=e[a];for(var i=0;i<t;i++)e[i]=e[i]/n;return e},_r=function(e,t,n,a){return(1-a)*(1-a)*e+2*(1-a)*a*t+a*a*n},ki=function(e,t,n,a){return{x:_r(e.x,t.x,n.x,a),y:_r(e.y,t.y,n.y,a)}},YP=function(e,t,n,a){var i={x:t.x-e.x,y:t.y-e.y},o=Xa(e,t),s={x:i.x/o,y:i.y/o};return n=n??0,a=a??n*o,{x:e.x+s.x*a,y:e.y+s.y*a}},Fo=function(e,t,n){return Math.max(e,Math.min(n,t))},Yr=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},XP=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},ZP=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},QP=function(e,t,n){return{x1:e.x1+t,x2:e.x2+t,y1:e.y1+n,y2:e.y2+n,w:e.w,h:e.h}},hS=function(e,t){e.x1=Math.min(e.x1,t.x1),e.x2=Math.max(e.x2,t.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,t.y1),e.y2=Math.max(e.y2,t.y2),e.h=e.y2-e.y1},JP=function(e,t,n){e.x1=Math.min(e.x1,t),e.x2=Math.max(e.x2,t),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},Ns=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=t,e.x2+=t,e.y1-=t,e.y2+=t,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},Fs=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],n,a,i,o;if(t.length===1)n=a=i=o=t[0];else if(t.length===2)n=i=t[0],o=a=t[1];else if(t.length===4){var s=hn(t,4);n=s[0],a=s[1],i=s[2],o=s[3]}return e.x1-=o,e.x2+=a,e.y1-=n,e.y2+=i,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},Vy=function(e,t){e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},Eg=function(e,t){return!(e.x1>t.x2||t.x1>e.x2||e.x2<t.x1||t.x2<e.x1||e.y2<t.y1||t.y2<e.y1||e.y1>t.y2||t.y1>e.y2)},Li=function(e,t,n){return e.x1<=t&&t<=e.x2&&e.y1<=n&&n<=e.y2},eA=function(e,t){return Li(e,t.x,t.y)},vS=function(e,t){return Li(e,t.x1,t.y1)&&Li(e,t.x2,t.y2)},pS=function(e,t,n,a,i,o,s){var u=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"auto",l=u==="auto"?Za(i,o):u,c=i/2,f=o/2;l=Math.min(l,c,f);var d=l!==c,h=l!==f,v;if(d){var m=n-c+l-s,_=a-f-s,b=n+c-l+s,w=_;if(v=ya(e,t,n,a,m,_,b,w,!1),v.length>0)return v}if(h){var y=n+c+s,x=a-f+l-s,C=y,E=a+f-l+s;if(v=ya(e,t,n,a,y,x,C,E,!1),v.length>0)return v}if(d){var p=n-c+l-s,P=a+f+s,T=n+c-l+s,R=P;if(v=ya(e,t,n,a,p,P,T,R,!1),v.length>0)return v}if(h){var M=n-c-s,N=a-f+l-s,B=M,q=a+f-l+s;if(v=ya(e,t,n,a,M,N,B,q,!1),v.length>0)return v}var Z;{var Q=n-c+l,Y=a-f+l;if(Z=Co(e,t,n,a,Q,Y,l+s),Z.length>0&&Z[0]<=Q&&Z[1]<=Y)return[Z[0],Z[1]]}{var J=n+c-l,X=a-f+l;if(Z=Co(e,t,n,a,J,X,l+s),Z.length>0&&Z[0]>=J&&Z[1]<=X)return[Z[0],Z[1]]}{var k=n+c-l,D=a+f-l;if(Z=Co(e,t,n,a,k,D,l+s),Z.length>0&&Z[0]>=k&&Z[1]>=D)return[Z[0],Z[1]]}{var I=n-c+l,F=a+f-l;if(Z=Co(e,t,n,a,I,F,l+s),Z.length>0&&Z[0]<=I&&Z[1]>=F)return[Z[0],Z[1]]}return[]},tA=function(e,t,n,a,i,o,s){var u=s,l=Math.min(n,i),c=Math.max(n,i),f=Math.min(a,o),d=Math.max(a,o);return l-u<=e&&e<=c+u&&f-u<=t&&t<=d+u},rA=function(e,t,n,a,i,o,s,u,l){var c={x1:Math.min(n,s,i)-l,x2:Math.max(n,s,i)+l,y1:Math.min(a,u,o)-l,y2:Math.max(a,u,o)+l};return!(e<c.x1||e>c.x2||t<c.y1||t>c.y2)},nA=function(e,t,n,a){n-=a;var i=t*t-4*e*n;if(i<0)return[];var o=Math.sqrt(i),s=2*e,u=(-t+o)/s,l=(-t-o)/s;return[u,l]},aA=function(e,t,n,a,i){var o=1e-5;e===0&&(e=o),t/=e,n/=e,a/=e;var s,u,l,c,f,d,h,v;if(u=(3*n-t*t)/9,l=-(27*a)+t*(9*n-2*(t*t)),l/=54,s=u*u*u+l*l,i[1]=0,h=t/3,s>0){f=l+Math.sqrt(s),f=f<0?-Math.pow(-f,1/3):Math.pow(f,1/3),d=l-Math.sqrt(s),d=d<0?-Math.pow(-d,1/3):Math.pow(d,1/3),i[0]=-h+f+d,h+=(f+d)/2,i[4]=i[2]=-h,h=Math.sqrt(3)*(-d+f)/2,i[3]=h,i[5]=-h;return}if(i[5]=i[3]=0,s===0){v=l<0?-Math.pow(-l,1/3):Math.pow(l,1/3),i[0]=-h+2*v,i[4]=i[2]=-(v+h);return}u=-u,c=u*u*u,c=Math.acos(l/Math.sqrt(c)),v=2*Math.sqrt(u),i[0]=-h+v*Math.cos(c/3),i[2]=-h+v*Math.cos((c+2*Math.PI)/3),i[4]=-h+v*Math.cos((c+4*Math.PI)/3)},iA=function(e,t,n,a,i,o,s,u){var l=1*n*n-4*n*i+2*n*s+4*i*i-4*i*s+s*s+a*a-4*a*o+2*a*u+4*o*o-4*o*u+u*u,c=1*9*n*i-3*n*n-3*n*s-6*i*i+3*i*s+9*a*o-3*a*a-3*a*u-6*o*o+3*o*u,f=1*3*n*n-6*n*i+n*s-n*e+2*i*i+2*i*e-s*e+3*a*a-6*a*o+a*u-a*t+2*o*o+2*o*t-u*t,d=1*n*i-n*n+n*e-i*e+a*o-a*a+a*t-o*t,h=[];aA(l,c,f,d,h);for(var v=1e-7,m=[],_=0;_<6;_+=2)Math.abs(h[_+1])<v&&h[_]>=0&&h[_]<=1&&m.push(h[_]);m.push(1),m.push(0);for(var b=-1,w,y,x,C=0;C<m.length;C++)w=Math.pow(1-m[C],2)*n+2*(1-m[C])*m[C]*i+m[C]*m[C]*s,y=Math.pow(1-m[C],2)*a+2*(1-m[C])*m[C]*o+m[C]*m[C]*u,x=Math.pow(w-e,2)+Math.pow(y-t,2),b>=0?x<b&&(b=x):b=x;return b},oA=function(e,t,n,a,i,o){var s=[e-n,t-a],u=[i-n,o-a],l=u[0]*u[0]+u[1]*u[1],c=s[0]*s[0]+s[1]*s[1],f=s[0]*u[0]+s[1]*u[1],d=f*f/l;return f<0?c:d>l?(e-i)*(e-i)+(t-o)*(t-o):c-d},Wr=function(e,t,n){for(var a,i,o,s,u,l=0,c=0;c<n.length/2;c++)if(a=n[c*2],i=n[c*2+1],c+1<n.length/2?(o=n[(c+1)*2],s=n[(c+1)*2+1]):(o=n[(c+1-n.length/2)*2],s=n[(c+1-n.length/2)*2+1]),!(a==e&&o==e))if(a>=e&&e>=o||a<=e&&e<=o)u=(e-a)/(o-a)*(s-i)+i,u>t&&l++;else continue;return l%2!==0},Yn=function(e,t,n,a,i,o,s,u,l){var c=new Array(n.length),f;u[0]!=null?(f=Math.atan(u[1]/u[0]),u[0]<0?f=f+Math.PI/2:f=-f-Math.PI/2):f=u;for(var d=Math.cos(-f),h=Math.sin(-f),v=0;v<c.length/2;v++)c[v*2]=o/2*(n[v*2]*d-n[v*2+1]*h),c[v*2+1]=s/2*(n[v*2+1]*d+n[v*2]*h),c[v*2]+=a,c[v*2+1]+=i;var m;if(l>0){var _=Xs(c,-l);m=Ys(_)}else m=c;return Wr(e,t,m)},sA=function(e,t,n,a,i,o,s,u){for(var l=new Array(n.length*2),c=0;c<u.length;c++){var f=u[c];l[c*4+0]=f.startX,l[c*4+1]=f.startY,l[c*4+2]=f.stopX,l[c*4+3]=f.stopY;var d=Math.pow(f.cx-e,2)+Math.pow(f.cy-t,2);if(d<=Math.pow(f.radius,2))return!0}return Wr(e,t,l)},Ys=function(e){for(var t=new Array(e.length/2),n,a,i,o,s,u,l,c,f=0;f<e.length/4;f++){n=e[f*4],a=e[f*4+1],i=e[f*4+2],o=e[f*4+3],f<e.length/4-1?(s=e[(f+1)*4],u=e[(f+1)*4+1],l=e[(f+1)*4+2],c=e[(f+1)*4+3]):(s=e[0],u=e[1],l=e[2],c=e[3]);var d=ya(n,a,i,o,s,u,l,c,!0);t[f*2]=d[0],t[f*2+1]=d[1]}return t},Xs=function(e,t){for(var n=new Array(e.length*2),a,i,o,s,u=0;u<e.length/2;u++){a=e[u*2],i=e[u*2+1],u<e.length/2-1?(o=e[(u+1)*2],s=e[(u+1)*2+1]):(o=e[0],s=e[1]);var l=s-i,c=-(o-a),f=Math.sqrt(l*l+c*c),d=l/f,h=c/f;n[u*4]=a+d*t,n[u*4+1]=i+h*t,n[u*4+2]=o+d*t,n[u*4+3]=s+h*t}return n},uA=function(e,t,n,a,i,o){var s=n-e,u=a-t;s/=i,u/=o;var l=Math.sqrt(s*s+u*u),c=l-1;if(c<0)return[];var f=c/l;return[(n-e)*f+e,(a-t)*f+t]},Wa=function(e,t,n,a,i,o,s){return e-=i,t-=o,e/=n/2+s,t/=a/2+s,e*e+t*t<=1},Co=function(e,t,n,a,i,o,s){var u=[n-e,a-t],l=[e-i,t-o],c=u[0]*u[0]+u[1]*u[1],f=2*(l[0]*u[0]+l[1]*u[1]),d=l[0]*l[0]+l[1]*l[1]-s*s,h=f*f-4*c*d;if(h<0)return[];var v=(-f+Math.sqrt(h))/(2*c),m=(-f-Math.sqrt(h))/(2*c),_=Math.min(v,m),b=Math.max(v,m),w=[];if(_>=0&&_<=1&&w.push(_),b>=0&&b<=1&&w.push(b),w.length===0)return[];var y=w[0]*u[0]+e,x=w[0]*u[1]+t;if(w.length>1){if(w[0]==w[1])return[y,x];var C=w[1]*u[0]+e,E=w[1]*u[1]+t;return[y,x,C,E]}else return[y,x]},nc=function(e,t,n){return t<=e&&e<=n||n<=e&&e<=t?e:e<=t&&t<=n||n<=t&&t<=e?t:n},ya=function(e,t,n,a,i,o,s,u,l){var c=e-i,f=n-e,d=s-i,h=t-o,v=a-t,m=u-o,_=d*h-m*c,b=f*h-v*c,w=m*f-d*v;if(w!==0){var y=_/w,x=b/w,C=.001,E=0-C,p=1+C;return E<=y&&y<=p&&E<=x&&x<=p?[e+y*f,t+y*v]:l?[e+y*f,t+y*v]:[]}else return _===0||b===0?nc(e,n,s)===s?[s,u]:nc(e,n,i)===i?[i,o]:nc(i,s,n)===n?[n,a]:[]:[]},Bo=function(e,t,n,a,i,o,s,u){var l=[],c,f=new Array(n.length),d=!0;o==null&&(d=!1);var h;if(d){for(var v=0;v<f.length/2;v++)f[v*2]=n[v*2]*o+a,f[v*2+1]=n[v*2+1]*s+i;if(u>0){var m=Xs(f,-u);h=Ys(m)}else h=f}else h=n;for(var _,b,w,y,x=0;x<h.length/2;x++)_=h[x*2],b=h[x*2+1],x<h.length/2-1?(w=h[(x+1)*2],y=h[(x+1)*2+1]):(w=h[0],y=h[1]),c=ya(e,t,a,i,_,b,w,y),c.length!==0&&l.push(c[0],c[1]);return l},lA=function(e,t,n,a,i,o,s,u,l){var c=[],f,d=new Array(n.length*2);l.forEach(function(w,y){y===0?(d[d.length-2]=w.startX,d[d.length-1]=w.startY):(d[y*4-2]=w.startX,d[y*4-1]=w.startY),d[y*4]=w.stopX,d[y*4+1]=w.stopY,f=Co(e,t,a,i,w.cx,w.cy,w.radius),f.length!==0&&c.push(f[0],f[1])});for(var h=0;h<d.length/4;h++)f=ya(e,t,a,i,d[h*4],d[h*4+1],d[h*4+2],d[h*4+3],!1),f.length!==0&&c.push(f[0],f[1]);if(c.length>2){for(var v=[c[0],c[1]],m=Math.pow(v[0]-e,2)+Math.pow(v[1]-t,2),_=1;_<c.length/2;_++){var b=Math.pow(c[_*2]-e,2)+Math.pow(c[_*2+1]-t,2);b<=m&&(v[0]=c[_*2],v[1]=c[_*2+1],m=b)}return v}return c},bs=function(e,t,n){var a=[e[0]-t[0],e[1]-t[1]],i=Math.sqrt(a[0]*a[0]+a[1]*a[1]),o=(i-n)/i;return o<0&&(o=1e-5),[t[0]+o*a[0],t[1]+o*a[1]]},zr=function(e,t){var n=jp(e,t);return n=gS(n),n},gS=function(e){for(var t,n,a=e.length/2,i=1/0,o=1/0,s=-1/0,u=-1/0,l=0;l<a;l++)t=e[2*l],n=e[2*l+1],i=Math.min(i,t),s=Math.max(s,t),o=Math.min(o,n),u=Math.max(u,n);for(var c=2/(s-i),f=2/(u-o),d=0;d<a;d++)t=e[2*d]=e[2*d]*c,n=e[2*d+1]=e[2*d+1]*f,i=Math.min(i,t),s=Math.max(s,t),o=Math.min(o,n),u=Math.max(u,n);if(o<-1)for(var h=0;h<a;h++)n=e[2*h+1]=e[2*h+1]+(-1-o);return e},jp=function(e,t){var n=1/e*2*Math.PI,a=e%2===0?Math.PI/2+n/2:Math.PI/2;a+=t;for(var i=new Array(e*2),o,s=0;s<e;s++)o=s*n+a,i[2*s]=Math.cos(o),i[2*s+1]=Math.sin(-o);return i},Za=function(e,t){return Math.min(e/4,t/4,8)},yS=function(e,t){return Math.min(e/10,t/10,8)},Tg=function(){return 8},cA=function(e,t,n){return[e-2*t+n,2*(t-e),e]},Wp=function(e,t){return{heightOffset:Math.min(15,.05*t),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}},fA=kr({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),dA={pageRank:function(e){for(var t=fA(e),n=t.dampingFactor,a=t.precision,i=t.iterations,o=t.weight,s=this._private.cy,u=this.byGroup(),l=u.nodes,c=u.edges,f=l.length,d=f*f,h=c.length,v=new Array(d),m=new Array(f),_=(1-n)/f,b=0;b<f;b++){for(var w=0;w<f;w++){var y=b*f+w;v[y]=0}m[b]=0}for(var x=0;x<h;x++){var C=c[x],E=C.data("source"),p=C.data("target");if(E!==p){var P=l.indexOfId(E),T=l.indexOfId(p),R=o(C),M=T*f+P;v[M]+=R,m[P]+=R}}for(var N=1/f+_,B=0;B<f;B++)if(m[B]===0)for(var q=0;q<f;q++){var Z=q*f+B;v[Z]=N}else for(var Q=0;Q<f;Q++){var Y=Q*f+B;v[Y]=v[Y]/m[B]+_}for(var J=new Array(f),X=new Array(f),k,D=0;D<f;D++)J[D]=1;for(var I=0;I<i;I++){for(var F=0;F<f;F++)X[F]=0;for(var L=0;L<f;L++)for(var H=0;H<f;H++){var j=L*f+H;X[L]+=v[j]*J[H]}KP(X),k=J,J=X,X=k;for(var W=0,re=0;re<f;re++){var se=k[re]-J[re];W+=se*se}if(W<a)break}var ce={rank:function(Pe){return Pe=s.collection(Pe)[0],J[l.indexOf(Pe)]}};return ce}},Uy=kr({root:null,weight:function(e){return 1},directed:!1,alpha:0}),Mi={degreeCentralityNormalized:function(e){e=Uy(e);var t=this.cy(),n=this.nodes(),a=n.length;if(e.directed){for(var c={},f={},d=0,h=0,v=0;v<a;v++){var m=n[v],_=m.id();e.root=m;var b=this.degreeCentrality(e);d<b.indegree&&(d=b.indegree),h<b.outdegree&&(h=b.outdegree),c[_]=b.indegree,f[_]=b.outdegree}return{indegree:function(y){return d==0?0:(Qe(y)&&(y=t.filter(y)),c[y.id()]/d)},outdegree:function(y){return h===0?0:(Qe(y)&&(y=t.filter(y)),f[y.id()]/h)}}}else{for(var i={},o=0,s=0;s<a;s++){var u=n[s];e.root=u;var l=this.degreeCentrality(e);o<l.degree&&(o=l.degree),i[u.id()]=l.degree}return{degree:function(y){return o===0?0:(Qe(y)&&(y=t.filter(y)),i[y.id()]/o)}}}},degreeCentrality:function(e){e=Uy(e);var t=this.cy(),n=this,a=e,i=a.root,o=a.weight,s=a.directed,u=a.alpha;if(i=t.collection(i)[0],s){for(var h=i.connectedEdges(),v=h.filter(function(E){return E.target().same(i)&&n.has(E)}),m=h.filter(function(E){return E.source().same(i)&&n.has(E)}),_=v.length,b=m.length,w=0,y=0,x=0;x<v.length;x++)w+=o(v[x]);for(var C=0;C<m.length;C++)y+=o(m[C]);return{indegree:Math.pow(_,1-u)*Math.pow(w,u),outdegree:Math.pow(b,1-u)*Math.pow(y,u)}}else{for(var l=i.connectedEdges().intersection(n),c=l.length,f=0,d=0;d<l.length;d++)f+=o(l[d]);return{degree:Math.pow(c,1-u)*Math.pow(f,u)}}}};Mi.dc=Mi.degreeCentrality;Mi.dcn=Mi.degreeCentralityNormalised=Mi.degreeCentralityNormalized;var Hy=kr({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),Oi={closenessCentralityNormalized:function(e){for(var t=Hy(e),n=t.harmonic,a=t.weight,i=t.directed,o=this.cy(),s={},u=0,l=this.nodes(),c=this.floydWarshall({weight:a,directed:i}),f=0;f<l.length;f++){for(var d=0,h=l[f],v=0;v<l.length;v++)if(f!==v){var m=c.distance(h,l[v]);n?d+=1/m:d+=m}n||(d=1/d),u<d&&(u=d),s[h.id()]=d}return{closeness:function(b){return u==0?0:(Qe(b)?b=o.filter(b)[0].id():b=b.id(),s[b]/u)}}},closenessCentrality:function(e){var t=Hy(e),n=t.root,a=t.weight,i=t.directed,o=t.harmonic;n=this.filter(n)[0];for(var s=this.dijkstra({root:n,weight:a,directed:i}),u=0,l=this.nodes(),c=0;c<l.length;c++){var f=l[c];if(!f.same(n)){var d=s.distanceTo(f);o?u+=1/d:u+=d}}return o?u:1/u}};Oi.cc=Oi.closenessCentrality;Oi.ccn=Oi.closenessCentralityNormalised=Oi.closenessCentralityNormalized;var hA=kr({weight:null,directed:!1}),Kp={betweennessCentrality:function(e){for(var t=hA(e),n=t.directed,a=t.weight,i=a!=null,o=this.cy(),s=this.nodes(),u={},l={},c=0,f={set:function(y,x){l[y]=x,x>c&&(c=x)},get:function(y){return l[y]}},d=0;d<s.length;d++){var h=s[d],v=h.id();n?u[v]=h.outgoers().nodes():u[v]=h.openNeighborhood().nodes(),f.set(v,0)}for(var m=function(y){for(var x=s[y].id(),C=[],E={},p={},P={},T=new Yo(function(H,j){return P[H]-P[j]}),R=0;R<s.length;R++){var M=s[R].id();E[M]=[],p[M]=0,P[M]=1/0}for(p[x]=1,P[x]=0,T.push(x);!T.empty();){var N=T.pop();if(C.push(N),i)for(var B=0;B<u[N].length;B++){var q=u[N][B],Z=o.getElementById(N),Q=void 0;Z.edgesTo(q).length>0?Q=Z.edgesTo(q)[0]:Q=q.edgesTo(Z)[0];var Y=a(Q);q=q.id(),P[q]>P[N]+Y&&(P[q]=P[N]+Y,T.nodes.indexOf(q)<0?T.push(q):T.updateItem(q),p[q]=0,E[q]=[]),P[q]==P[N]+Y&&(p[q]=p[q]+p[N],E[q].push(N))}else for(var J=0;J<u[N].length;J++){var X=u[N][J].id();P[X]==1/0&&(T.push(X),P[X]=P[N]+1),P[X]==P[N]+1&&(p[X]=p[X]+p[N],E[X].push(N))}}for(var k={},D=0;D<s.length;D++)k[s[D].id()]=0;for(;C.length>0;){for(var I=C.pop(),F=0;F<E[I].length;F++){var L=E[I][F];k[L]=k[L]+p[L]/p[I]*(1+k[I])}I!=s[y].id()&&f.set(I,f.get(I)+k[I])}},_=0;_<s.length;_++)m(_);var b={betweenness:function(y){var x=o.collection(y).id();return f.get(x)},betweennessNormalized:function(y){if(c==0)return 0;var x=o.collection(y).id();return f.get(x)/c}};return b.betweennessNormalised=b.betweennessNormalized,b}};Kp.bc=Kp.betweennessCentrality;var vA=kr({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(r){return 1}]}),pA=function(e){return vA(e)},gA=function(e,t){for(var n=0,a=0;a<t.length;a++)n+=t[a](e);return n},yA=function(e,t,n){for(var a=0;a<t;a++)e[a*t+a]=n},mS=function(e,t){for(var n,a=0;a<t;a++){n=0;for(var i=0;i<t;i++)n+=e[i*t+a];for(var o=0;o<t;o++)e[o*t+a]=e[o*t+a]/n}},mA=function(e,t,n){for(var a=new Array(n*n),i=0;i<n;i++){for(var o=0;o<n;o++)a[i*n+o]=0;for(var s=0;s<n;s++)for(var u=0;u<n;u++)a[i*n+u]+=e[i*n+s]*t[s*n+u]}return a},bA=function(e,t,n){for(var a=e.slice(0),i=1;i<n;i++)e=mA(e,a,t);return e},wA=function(e,t,n){for(var a=new Array(t*t),i=0;i<t*t;i++)a[i]=Math.pow(e[i],n);return mS(a,t),a},_A=function(e,t,n,a){for(var i=0;i<n;i++){var o=Math.round(e[i]*Math.pow(10,a))/Math.pow(10,a),s=Math.round(t[i]*Math.pow(10,a))/Math.pow(10,a);if(o!==s)return!1}return!0},xA=function(e,t,n,a){for(var i=[],o=0;o<t;o++){for(var s=[],u=0;u<t;u++)Math.round(e[o*t+u]*1e3)/1e3>0&&s.push(n[u]);s.length!==0&&i.push(a.collection(s))}return i},SA=function(e,t){for(var n=0;n<e.length;n++)if(!t[n]||e[n].id()!==t[n].id())return!1;return!0},CA=function(e){for(var t=0;t<e.length;t++)for(var n=0;n<e.length;n++)t!=n&&SA(e[t],e[n])&&e.splice(n,1);return e},jy=function(e){for(var t=this.nodes(),n=this.edges(),a=this.cy(),i=pA(e),o={},s=0;s<t.length;s++)o[t[s].id()]=s;for(var u=t.length,l=u*u,c=new Array(l),f,d=0;d<l;d++)c[d]=0;for(var h=0;h<n.length;h++){var v=n[h],m=o[v.source().id()],_=o[v.target().id()],b=gA(v,i.attributes);c[m*u+_]+=b,c[_*u+m]+=b}yA(c,u,i.multFactor),mS(c,u);for(var w=!0,y=0;w&&y<i.maxIterations;)w=!1,f=bA(c,u,i.expandFactor),c=wA(f,u,i.inflateFactor),_A(c,f,l,4)||(w=!0),y++;var x=xA(c,u,t,a);return x=CA(x),x},EA={markovClustering:jy,mcl:jy},TA=function(e){return e},bS=function(e,t){return Math.abs(t-e)},Wy=function(e,t,n){return e+bS(t,n)},Ky=function(e,t,n){return e+Math.pow(n-t,2)},PA=function(e){return Math.sqrt(e)},AA=function(e,t,n){return Math.max(e,bS(t,n))},po=function(e,t,n,a,i){for(var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:TA,s=a,u,l,c=0;c<e;c++)u=t(c),l=n(c),s=i(s,u,l);return o(s)},Ni={euclidean:function(e,t,n){return e>=2?po(e,t,n,0,Ky,PA):po(e,t,n,0,Wy)},squaredEuclidean:function(e,t,n){return po(e,t,n,0,Ky)},manhattan:function(e,t,n){return po(e,t,n,0,Wy)},max:function(e,t,n){return po(e,t,n,-1/0,AA)}};Ni["squared-euclidean"]=Ni.squaredEuclidean;Ni.squaredeuclidean=Ni.squaredEuclidean;function vu(r,e,t,n,a,i){var o;return rr(r)?o=r:o=Ni[r]||Ni.euclidean,e===0&&rr(r)?o(a,i):o(e,t,n,a,i)}var kA=kr({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),Pg=function(e){return kA(e)},Zs=function(e,t,n,a,i){var o=i!=="kMedoids",s=o?function(f){return n[f]}:function(f){return a[f](n)},u=function(d){return a[d](t)},l=n,c=t;return vu(e,a.length,s,u,l,c)},ac=function(e,t,n){for(var a=n.length,i=new Array(a),o=new Array(a),s=new Array(t),u=null,l=0;l<a;l++)i[l]=e.min(n[l]).value,o[l]=e.max(n[l]).value;for(var c=0;c<t;c++){u=[];for(var f=0;f<a;f++)u[f]=Math.random()*(o[f]-i[f])+i[f];s[c]=u}return s},wS=function(e,t,n,a,i){for(var o=1/0,s=0,u=0;u<t.length;u++){var l=Zs(n,e,t[u],a,i);l<o&&(o=l,s=u)}return s},_S=function(e,t,n){for(var a=[],i=null,o=0;o<t.length;o++)i=t[o],n[i.id()]===e&&a.push(i);return a},MA=function(e,t,n){return Math.abs(t-e)<=n},OA=function(e,t,n){for(var a=0;a<e.length;a++)for(var i=0;i<e[a].length;i++){var o=Math.abs(e[a][i]-t[a][i]);if(o>n)return!1}return!0},DA=function(e,t,n){for(var a=0;a<n;a++)if(e===t[a])return!0;return!1},Yy=function(e,t){var n=new Array(t);if(e.length<50)for(var a=0;a<t;a++){for(var i=e[Math.floor(Math.random()*e.length)];DA(i,n,a);)i=e[Math.floor(Math.random()*e.length)];n[a]=i}else for(var o=0;o<t;o++)n[o]=e[Math.floor(Math.random()*e.length)];return n},Xy=function(e,t,n){for(var a=0,i=0;i<t.length;i++)a+=Zs("manhattan",t[i],e,n,"kMedoids");return a},RA=function(e){var t=this.cy(),n=this.nodes(),a=null,i=Pg(e),o=new Array(i.k),s={},u;i.testMode?typeof i.testCentroids=="number"?(i.testCentroids,u=ac(n,i.k,i.attributes)):gr(i.testCentroids)==="object"?u=i.testCentroids:u=ac(n,i.k,i.attributes):u=ac(n,i.k,i.attributes);for(var l=!0,c=0;l&&c<i.maxIterations;){for(var f=0;f<n.length;f++)a=n[f],s[a.id()]=wS(a,u,i.distance,i.attributes,"kMeans");l=!1;for(var d=0;d<i.k;d++){var h=_S(d,n,s);if(h.length!==0){for(var v=i.attributes.length,m=u[d],_=new Array(v),b=new Array(v),w=0;w<v;w++){b[w]=0;for(var y=0;y<h.length;y++)a=h[y],b[w]+=i.attributes[w](a);_[w]=b[w]/h.length,MA(_[w],m[w],i.sensitivityThreshold)||(l=!0)}u[d]=_,o[d]=t.collection(h)}}c++}return o},IA=function(e){var t=this.cy(),n=this.nodes(),a=null,i=Pg(e),o=new Array(i.k),s,u={},l,c=new Array(i.k);i.testMode?typeof i.testCentroids=="number"||(gr(i.testCentroids)==="object"?s=i.testCentroids:s=Yy(n,i.k)):s=Yy(n,i.k);for(var f=!0,d=0;f&&d<i.maxIterations;){for(var h=0;h<n.length;h++)a=n[h],u[a.id()]=wS(a,s,i.distance,i.attributes,"kMedoids");f=!1;for(var v=0;v<s.length;v++){var m=_S(v,n,u);if(m.length!==0){c[v]=Xy(s[v],m,i.attributes);for(var _=0;_<m.length;_++)l=Xy(m[_],m,i.attributes),l<c[v]&&(c[v]=l,s[v]=m[_],f=!0);o[v]=t.collection(m)}}d++}return o},LA=function(e,t,n,a,i){for(var o,s,u=0;u<t.length;u++)for(var l=0;l<e.length;l++)a[u][l]=Math.pow(n[u][l],i.m);for(var c=0;c<e.length;c++)for(var f=0;f<i.attributes.length;f++){o=0,s=0;for(var d=0;d<t.length;d++)o+=a[d][c]*i.attributes[f](t[d]),s+=a[d][c];e[c][f]=o/s}},NA=function(e,t,n,a,i){for(var o=0;o<e.length;o++)t[o]=e[o].slice();for(var s,u,l,c=2/(i.m-1),f=0;f<n.length;f++)for(var d=0;d<a.length;d++){s=0;for(var h=0;h<n.length;h++)u=Zs(i.distance,a[d],n[f],i.attributes,"cmeans"),l=Zs(i.distance,a[d],n[h],i.attributes,"cmeans"),s+=Math.pow(u/l,c);e[d][f]=1/s}},FA=function(e,t,n,a){for(var i=new Array(n.k),o=0;o<i.length;o++)i[o]=[];for(var s,u,l=0;l<t.length;l++){s=-1/0,u=-1;for(var c=0;c<t[0].length;c++)t[l][c]>s&&(s=t[l][c],u=c);i[u].push(e[l])}for(var f=0;f<i.length;f++)i[f]=a.collection(i[f]);return i},Zy=function(e){var t=this.cy(),n=this.nodes(),a=Pg(e),i,o,s,u,l;u=new Array(n.length);for(var c=0;c<n.length;c++)u[c]=new Array(a.k);s=new Array(n.length);for(var f=0;f<n.length;f++)s[f]=new Array(a.k);for(var d=0;d<n.length;d++){for(var h=0,v=0;v<a.k;v++)s[d][v]=Math.random(),h+=s[d][v];for(var m=0;m<a.k;m++)s[d][m]=s[d][m]/h}o=new Array(a.k);for(var _=0;_<a.k;_++)o[_]=new Array(a.attributes.length);l=new Array(n.length);for(var b=0;b<n.length;b++)l[b]=new Array(a.k);for(var w=!0,y=0;w&&y<a.maxIterations;)w=!1,LA(o,n,s,l,a),NA(s,u,o,n,a),OA(s,u,a.sensitivityThreshold)||(w=!0),y++;return i=FA(n,s,a,t),{clusters:i,degreeOfMembership:s}},BA={kMeans:RA,kMedoids:IA,fuzzyCMeans:Zy,fcm:Zy},qA=kr({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),zA={single:"min",complete:"max"},GA=function(e){var t=qA(e),n=zA[t.linkage];return n!=null&&(t.linkage=n),t},Qy=function(e,t,n,a,i){for(var o=0,s=1/0,u,l=i.attributes,c=function(T,R){return vu(i.distance,l.length,function(M){return l[M](T)},function(M){return l[M](R)},T,R)},f=0;f<e.length;f++){var d=e[f].key,h=n[d][a[d]];h<s&&(o=d,s=h)}if(i.mode==="threshold"&&s>=i.threshold||i.mode==="dendrogram"&&e.length===1)return!1;var v=t[o],m=t[a[o]],_;i.mode==="dendrogram"?_={left:v,right:m,key:v.key}:_={value:v.value.concat(m.value),key:v.key},e[v.index]=_,e.splice(m.index,1),t[v.key]=_;for(var b=0;b<e.length;b++){var w=e[b];v.key===w.key?u=1/0:i.linkage==="min"?(u=n[v.key][w.key],n[v.key][w.key]>n[m.key][w.key]&&(u=n[m.key][w.key])):i.linkage==="max"?(u=n[v.key][w.key],n[v.key][w.key]<n[m.key][w.key]&&(u=n[m.key][w.key])):i.linkage==="mean"?u=(n[v.key][w.key]*v.size+n[m.key][w.key]*m.size)/(v.size+m.size):i.mode==="dendrogram"?u=c(w.value,v.value):u=c(w.value[0],v.value[0]),n[v.key][w.key]=n[w.key][v.key]=u}for(var y=0;y<e.length;y++){var x=e[y].key;if(a[x]===v.key||a[x]===m.key){for(var C=x,E=0;E<e.length;E++){var p=e[E].key;n[x][p]<n[x][C]&&(C=p)}a[x]=C}e[y].index=y}return v.key=m.key=v.index=m.index=null,!0},ws=function r(e,t,n){e&&(e.value?t.push(e.value):(e.left&&r(e.left,t),e.right&&r(e.right,t)))},$A=function r(e,t){if(!e)return"";if(e.left&&e.right){var n=r(e.left,t),a=r(e.right,t),i=t.add({group:"nodes",data:{id:n+","+a}});return t.add({group:"edges",data:{source:n,target:i.id()}}),t.add({group:"edges",data:{source:a,target:i.id()}}),i.id()}else if(e.value)return e.value.id()},VA=function r(e,t,n){if(!e)return[];var a=[],i=[],o=[];return t===0?(e.left&&ws(e.left,a),e.right&&ws(e.right,i),o=a.concat(i),[n.collection(o)]):t===1?e.value?[n.collection(e.value)]:(e.left&&ws(e.left,a),e.right&&ws(e.right,i),[n.collection(a),n.collection(i)]):e.value?[n.collection(e.value)]:(e.left&&(a=r(e.left,t-1,n)),e.right&&(i=r(e.right,t-1,n)),a.concat(i))},Jy=function(e){for(var t=this.cy(),n=this.nodes(),a=GA(e),i=a.attributes,o=function(y,x){return vu(a.distance,i.length,function(C){return i[C](y)},function(C){return i[C](x)},y,x)},s=[],u=[],l=[],c=[],f=0;f<n.length;f++){var d={value:a.mode==="dendrogram"?n[f]:[n[f]],key:f,index:f};s[f]=d,c[f]=d,u[f]=[],l[f]=0}for(var h=0;h<s.length;h++)for(var v=0;v<=h;v++){var m=void 0;a.mode==="dendrogram"?m=h===v?1/0:o(s[h].value,s[v].value):m=h===v?1/0:o(s[h].value[0],s[v].value[0]),u[h][v]=m,u[v][h]=m,m<u[h][l[h]]&&(l[h]=v)}for(var _=Qy(s,c,u,l,a);_;)_=Qy(s,c,u,l,a);var b;return a.mode==="dendrogram"?(b=VA(s[0],a.dendrogramDepth,t),a.addDendrogram&&$A(s[0],t)):(b=new Array(s.length),s.forEach(function(w,y){w.key=w.index=null,b[y]=t.collection(w.value)})),b},UA={hierarchicalClustering:Jy,hca:Jy},HA=kr({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),jA=function(e){var t=e.damping,n=e.preference;.5<=t&&t<1||ar("Damping must range on [0.5, 1).  Got: ".concat(t));var a=["median","mean","min","max"];return a.some(function(i){return i===n})||Ge(n)||ar("Preference must be one of [".concat(a.map(function(i){return"'".concat(i,"'")}).join(", "),"] or a number.  Got: ").concat(n)),HA(e)},WA=function(e,t,n,a){var i=function(s,u){return a[u](s)};return-vu(e,a.length,function(o){return i(t,o)},function(o){return i(n,o)},t,n)},KA=function(e,t){var n=null;return t==="median"?n=jP(e):t==="mean"?n=HP(e):t==="min"?n=VP(e):t==="max"?n=UP(e):n=t,n},YA=function(e,t,n){for(var a=[],i=0;i<e;i++)t[i*e+i]+n[i*e+i]>0&&a.push(i);return a},em=function(e,t,n){for(var a=[],i=0;i<e;i++){for(var o=-1,s=-1/0,u=0;u<n.length;u++){var l=n[u];t[i*e+l]>s&&(o=l,s=t[i*e+l])}o>0&&a.push(o)}for(var c=0;c<n.length;c++)a[n[c]]=n[c];return a},XA=function(e,t,n){for(var a=em(e,t,n),i=0;i<n.length;i++){for(var o=[],s=0;s<a.length;s++)a[s]===n[i]&&o.push(s);for(var u=-1,l=-1/0,c=0;c<o.length;c++){for(var f=0,d=0;d<o.length;d++)f+=t[o[d]*e+o[c]];f>l&&(u=c,l=f)}n[i]=o[u]}return a=em(e,t,n),a},tm=function(e){for(var t=this.cy(),n=this.nodes(),a=jA(e),i={},o=0;o<n.length;o++)i[n[o].id()]=o;var s,u,l,c,f,d;s=n.length,u=s*s,l=new Array(u);for(var h=0;h<u;h++)l[h]=-1/0;for(var v=0;v<s;v++)for(var m=0;m<s;m++)v!==m&&(l[v*s+m]=WA(a.distance,n[v],n[m],a.attributes));c=KA(l,a.preference);for(var _=0;_<s;_++)l[_*s+_]=c;f=new Array(u);for(var b=0;b<u;b++)f[b]=0;d=new Array(u);for(var w=0;w<u;w++)d[w]=0;for(var y=new Array(s),x=new Array(s),C=new Array(s),E=0;E<s;E++)y[E]=0,x[E]=0,C[E]=0;for(var p=new Array(s*a.minIterations),P=0;P<p.length;P++)p[P]=0;var T;for(T=0;T<a.maxIterations;T++){for(var R=0;R<s;R++){for(var M=-1/0,N=-1/0,B=-1,q=0,Z=0;Z<s;Z++)y[Z]=f[R*s+Z],q=d[R*s+Z]+l[R*s+Z],q>=M?(N=M,M=q,B=Z):q>N&&(N=q);for(var Q=0;Q<s;Q++)f[R*s+Q]=(1-a.damping)*(l[R*s+Q]-M)+a.damping*y[Q];f[R*s+B]=(1-a.damping)*(l[R*s+B]-N)+a.damping*y[B]}for(var Y=0;Y<s;Y++){for(var J=0,X=0;X<s;X++)y[X]=d[X*s+Y],x[X]=Math.max(0,f[X*s+Y]),J+=x[X];J-=x[Y],x[Y]=f[Y*s+Y],J+=x[Y];for(var k=0;k<s;k++)d[k*s+Y]=(1-a.damping)*Math.min(0,J-x[k])+a.damping*y[k];d[Y*s+Y]=(1-a.damping)*(J-x[Y])+a.damping*y[Y]}for(var D=0,I=0;I<s;I++){var F=d[I*s+I]+f[I*s+I]>0?1:0;p[T%a.minIterations*s+I]=F,D+=F}if(D>0&&(T>=a.minIterations-1||T==a.maxIterations-1)){for(var L=0,H=0;H<s;H++){C[H]=0;for(var j=0;j<a.minIterations;j++)C[H]+=p[j*s+H];(C[H]===0||C[H]===a.minIterations)&&L++}if(L===s)break}}for(var W=YA(s,f,d),re=XA(s,l,W),se={},ce=0;ce<W.length;ce++)se[W[ce]]=[];for(var ge=0;ge<n.length;ge++){var Pe=i[n[ge].id()],Oe=re[Pe];Oe!=null&&se[Oe].push(n[ge])}for(var Se=new Array(W.length),le=0;le<W.length;le++)Se[le]=t.collection(se[W[le]]);return Se},ZA={affinityPropagation:tm,ap:tm},QA=kr({root:void 0,directed:!1}),JA={hierholzer:function(e){if(!Et(e)){var t=arguments;e={root:t[0],directed:t[1]}}var n=QA(e),a=n.root,i=n.directed,o=this,s=!1,u,l,c;a&&(c=Qe(a)?this.filter(a)[0].id():a[0].id());var f={},d={};i?o.forEach(function(w){var y=w.id();if(w.isNode()){var x=w.indegree(!0),C=w.outdegree(!0),E=x-C,p=C-x;E==1?u?s=!0:u=y:p==1?l?s=!0:l=y:(p>1||E>1)&&(s=!0),f[y]=[],w.outgoers().forEach(function(P){P.isEdge()&&f[y].push(P.id())})}else d[y]=[void 0,w.target().id()]}):o.forEach(function(w){var y=w.id();if(w.isNode()){var x=w.degree(!0);x%2&&(u?l?s=!0:l=y:u=y),f[y]=[],w.connectedEdges().forEach(function(C){return f[y].push(C.id())})}else d[y]=[w.source().id(),w.target().id()]});var h={found:!1,trail:void 0};if(s)return h;if(l&&u)if(i){if(c&&l!=c)return h;c=l}else{if(c&&l!=c&&u!=c)return h;c||(c=l)}else c||(c=o[0].id());var v=function(y){for(var x=y,C=[y],E,p,P;f[x].length;)E=f[x].shift(),p=d[E][0],P=d[E][1],x!=P?(f[P]=f[P].filter(function(T){return T!=E}),x=P):!i&&x!=p&&(f[p]=f[p].filter(function(T){return T!=E}),x=p),C.unshift(E),C.unshift(x);return C},m=[],_=[];for(_=v(c);_.length!=1;)f[_[0]].length==0?(m.unshift(o.getElementById(_.shift())),m.unshift(o.getElementById(_.shift()))):_=v(_.shift()).concat(_);m.unshift(o.getElementById(_.shift()));for(var b in f)if(f[b].length)return h;return h.found=!0,h.trail=this.spawn(m,!0),h}},_s=function(){var e=this,t={},n=0,a=0,i=[],o=[],s={},u=function(d,h){for(var v=o.length-1,m=[],_=e.spawn();o[v].x!=d||o[v].y!=h;)m.push(o.pop().edge),v--;m.push(o.pop().edge),m.forEach(function(b){var w=b.connectedNodes().intersection(e);_.merge(b),w.forEach(function(y){var x=y.id(),C=y.connectedEdges().intersection(e);_.merge(y),t[x].cutVertex?_.merge(C.filter(function(E){return E.isLoop()})):_.merge(C)})}),i.push(_)},l=function f(d,h,v){d===v&&(a+=1),t[h]={id:n,low:n++,cutVertex:!1};var m=e.getElementById(h).connectedEdges().intersection(e);if(m.size()===0)i.push(e.spawn(e.getElementById(h)));else{var _,b,w,y;m.forEach(function(x){_=x.source().id(),b=x.target().id(),w=_===h?b:_,w!==v&&(y=x.id(),s[y]||(s[y]=!0,o.push({x:h,y:w,edge:x})),w in t?t[h].low=Math.min(t[h].low,t[w].id):(f(d,w,h),t[h].low=Math.min(t[h].low,t[w].low),t[h].id<=t[w].low&&(t[h].cutVertex=!0,u(h,w))))})}};e.forEach(function(f){if(f.isNode()){var d=f.id();d in t||(a=0,l(d,d),t[d].cutVertex=a>1)}});var c=Object.keys(t).filter(function(f){return t[f].cutVertex}).map(function(f){return e.getElementById(f)});return{cut:e.spawn(c),components:i}},ek={hopcroftTarjanBiconnected:_s,htbc:_s,htb:_s,hopcroftTarjanBiconnectedComponents:_s},xs=function(){var e=this,t={},n=0,a=[],i=[],o=e.spawn(e),s=function u(l){i.push(l),t[l]={index:n,low:n++,explored:!1};var c=e.getElementById(l).connectedEdges().intersection(e);if(c.forEach(function(m){var _=m.target().id();_!==l&&(_ in t||u(_),t[_].explored||(t[l].low=Math.min(t[l].low,t[_].low)))}),t[l].index===t[l].low){for(var f=e.spawn();;){var d=i.pop();if(f.merge(e.getElementById(d)),t[d].low=t[l].index,t[d].explored=!0,d===l)break}var h=f.edgesWith(f),v=f.merge(h);a.push(v),o=o.difference(v)}};return e.forEach(function(u){if(u.isNode()){var l=u.id();l in t||s(l)}}),{cut:o,components:a}},tk={tarjanStronglyConnected:xs,tsc:xs,tscc:xs,tarjanStronglyConnectedComponents:xs},xS={};[No,OP,DP,IP,NP,BP,GP,dA,Mi,Oi,Kp,EA,BA,UA,ZA,JA,ek,tk].forEach(function(r){rt(xS,r)});/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/var SS=0,CS=1,ES=2,Xn=function r(e){if(!(this instanceof r))return new r(e);this.id="Thenable/1.0.7",this.state=SS,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof e=="function"&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};Xn.prototype={fulfill:function(e){return rm(this,CS,"fulfillValue",e)},reject:function(e){return rm(this,ES,"rejectReason",e)},then:function(e,t){var n=this,a=new Xn;return n.onFulfilled.push(am(e,a,"fulfill")),n.onRejected.push(am(t,a,"reject")),TS(n),a.proxy}};var rm=function(e,t,n,a){return e.state===SS&&(e.state=t,e[n]=a,TS(e)),e},TS=function(e){e.state===CS?nm(e,"onFulfilled",e.fulfillValue):e.state===ES&&nm(e,"onRejected",e.rejectReason)},nm=function(e,t,n){if(e[t].length!==0){var a=e[t];e[t]=[];var i=function(){for(var s=0;s<a.length;s++)a[s](n)};typeof setImmediate=="function"?setImmediate(i):setTimeout(i,0)}},am=function(e,t,n){return function(a){if(typeof e!="function")t[n].call(t,a);else{var i;try{i=e(a)}catch(o){t.reject(o);return}rk(t,i)}}},rk=function r(e,t){if(e===t||e.proxy===t){e.reject(new TypeError("cannot resolve promise with itself"));return}var n;if(gr(t)==="object"&&t!==null||typeof t=="function")try{n=t.then}catch(i){e.reject(i);return}if(typeof n=="function"){var a=!1;try{n.call(t,function(i){a||(a=!0,i===t?e.reject(new TypeError("circular thenable chain")):r(e,i))},function(i){a||(a=!0,e.reject(i))})}catch(i){a||e.reject(i)}return}e.fulfill(t)};Xn.all=function(r){return new Xn(function(e,t){for(var n=new Array(r.length),a=0,i=function(u,l){n[u]=l,a++,a===r.length&&e(n)},o=0;o<r.length;o++)(function(s){var u=r[s],l=u!=null&&u.then!=null;if(l)u.then(function(f){i(s,f)},function(f){t(f)});else{var c=u;i(s,c)}})(o)})};Xn.resolve=function(r){return new Xn(function(e,t){e(r)})};Xn.reject=function(r){return new Xn(function(e,t){t(r)})};var $i=typeof Promise<"u"?Promise:Xn,Yp=function(e,t,n){var a=bg(e),i=!a,o=this._private=rt({duration:1e3},t,n);if(o.target=e,o.style=o.style||o.css,o.started=!1,o.playing=!1,o.hooked=!1,o.applying=!1,o.progress=0,o.completes=[],o.frames=[],o.complete&&rr(o.complete)&&o.completes.push(o.complete),i){var s=e.position();o.startPosition=o.startPosition||{x:s.x,y:s.y},o.startStyle=o.startStyle||e.cy().style().getAnimationStartStyle(e,o.style)}if(a){var u=e.pan();o.startPan={x:u.x,y:u.y},o.startZoom=e.zoom()}this.length=1,this[0]=this},Qa=Yp.prototype;rt(Qa,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var t,n=e.target._private.animation;e.queue?t=n.queue:t=n.current,t.push(this),Zr(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var t=this._private;return e===void 0?t.progress*t.duration:this.progress(e/t.duration)},progress:function(e){var t=this._private,n=t.playing;return e===void 0?t.progress:(n&&this.pause(),t.progress=e,t.started=!1,n&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,t=e.playing;t&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(l,c){var f=e[l];f!=null&&(e[l]=e[c],e[c]=f)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var a=0;a<e.style.length;a++){var i=e.style[a],o=i.name,s=e.startStyle[o];e.startStyle[o]=i,e.style[a]=s}return t&&this.play(),this},promise:function(e){var t=this._private,n;switch(e){case"frame":n=t.frames;break;default:case"complete":case"completed":n=t.completes}return new $i(function(a,i){n.push(function(){a()})})}});Qa.complete=Qa.completed;Qa.run=Qa.play;Qa.running=Qa.playing;var nk={animated:function(){return function(){var t=this,n=t.length!==void 0,a=n?t:[t],i=this._private.cy||this;if(!i.styleEnabled())return!1;var o=a[0];if(o)return o._private.animation.current.length>0}},clearQueue:function(){return function(){var t=this,n=t.length!==void 0,a=n?t:[t],i=this._private.cy||this;if(!i.styleEnabled())return this;for(var o=0;o<a.length;o++){var s=a[o];s._private.animation.queue=[]}return this}},delay:function(){return function(t,n){var a=this._private.cy||this;return a.styleEnabled()?this.animate({delay:t,duration:t,complete:n}):this}},delayAnimation:function(){return function(t,n){var a=this._private.cy||this;return a.styleEnabled()?this.animation({delay:t,duration:t,complete:n}):this}},animation:function(){return function(t,n){var a=this,i=a.length!==void 0,o=i?a:[a],s=this._private.cy||this,u=!i,l=!u;if(!s.styleEnabled())return this;var c=s.style();t=rt({},t,n);var f=Object.keys(t).length===0;if(f)return new Yp(o[0],t);switch(t.duration===void 0&&(t.duration=400),t.duration){case"slow":t.duration=600;break;case"fast":t.duration=200;break}if(l&&(t.style=c.getPropsList(t.style||t.css),t.css=void 0),l&&t.renderedPosition!=null){var d=t.renderedPosition,h=s.pan(),v=s.zoom();t.position=fS(d,v,h)}if(u&&t.panBy!=null){var m=t.panBy,_=s.pan();t.pan={x:_.x+m.x,y:_.y+m.y}}var b=t.center||t.centre;if(u&&b!=null){var w=s.getCenterPan(b.eles,t.zoom);w!=null&&(t.pan=w)}if(u&&t.fit!=null){var y=t.fit,x=s.getFitViewport(y.eles||y.boundingBox,y.padding);x!=null&&(t.pan=x.pan,t.zoom=x.zoom)}if(u&&Et(t.zoom)){var C=s.getZoomedViewport(t.zoom);C!=null?(C.zoomed&&(t.zoom=C.zoom),C.panned&&(t.pan=C.pan)):t.zoom=null}return new Yp(o[0],t)}},animate:function(){return function(t,n){var a=this,i=a.length!==void 0,o=i?a:[a],s=this._private.cy||this;if(!s.styleEnabled())return this;n&&(t=rt({},t,n));for(var u=0;u<o.length;u++){var l=o[u],c=l.animated()&&(t.queue===void 0||t.queue),f=l.animation(t,c?{queue:!0}:void 0);f.play()}return this}},stop:function(){return function(t,n){var a=this,i=a.length!==void 0,o=i?a:[a],s=this._private.cy||this;if(!s.styleEnabled())return this;for(var u=0;u<o.length;u++){for(var l=o[u],c=l._private,f=c.animation.current,d=0;d<f.length;d++){var h=f[d],v=h._private;n&&(v.duration=0)}t&&(c.animation.queue=[]),n||(c.animation.current=[])}return s.notify("draw"),this}}},ak=Array.isArray,pu=ak,ik=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ok=/^\w*$/;function sk(r,e){if(pu(r))return!1;var t=typeof r;return t=="number"||t=="symbol"||t=="boolean"||r==null||Ko(r)?!0:ok.test(r)||!ik.test(r)||e!=null&&r in Object(e)}var uk=sk,lk="[object AsyncFunction]",ck="[object Function]",fk="[object GeneratorFunction]",dk="[object Proxy]";function hk(r){if(!Ka(r))return!1;var e=rS(r);return e==ck||e==fk||e==lk||e==dk}var vk=hk,pk=cu["__core-js_shared__"],ic=pk,im=function(){var r=/[^.]+$/.exec(ic&&ic.keys&&ic.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function gk(r){return!!im&&im in r}var yk=gk,mk=Function.prototype,bk=mk.toString;function wk(r){if(r!=null){try{return bk.call(r)}catch{}try{return r+""}catch{}}return""}var _k=wk,xk=/[\\^$.*+?()[\]{}|]/g,Sk=/^\[object .+?Constructor\]$/,Ck=Function.prototype,Ek=Object.prototype,Tk=Ck.toString,Pk=Ek.hasOwnProperty,Ak=RegExp("^"+Tk.call(Pk).replace(xk,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function kk(r){if(!Ka(r)||yk(r))return!1;var e=vk(r)?Ak:Sk;return e.test(_k(r))}var Mk=kk;function Ok(r,e){return r==null?void 0:r[e]}var Dk=Ok;function Rk(r,e){var t=Dk(r,e);return Mk(t)?t:void 0}var Ag=Rk,Ik=Ag(Object,"create"),qo=Ik;function Lk(){this.__data__=qo?qo(null):{},this.size=0}var Nk=Lk;function Fk(r){var e=this.has(r)&&delete this.__data__[r];return this.size-=e?1:0,e}var Bk=Fk,qk="__lodash_hash_undefined__",zk=Object.prototype,Gk=zk.hasOwnProperty;function $k(r){var e=this.__data__;if(qo){var t=e[r];return t===qk?void 0:t}return Gk.call(e,r)?e[r]:void 0}var Vk=$k,Uk=Object.prototype,Hk=Uk.hasOwnProperty;function jk(r){var e=this.__data__;return qo?e[r]!==void 0:Hk.call(e,r)}var Wk=jk,Kk="__lodash_hash_undefined__";function Yk(r,e){var t=this.__data__;return this.size+=this.has(r)?0:1,t[r]=qo&&e===void 0?Kk:e,this}var Xk=Yk;function Vi(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Vi.prototype.clear=Nk;Vi.prototype.delete=Bk;Vi.prototype.get=Vk;Vi.prototype.has=Wk;Vi.prototype.set=Xk;var om=Vi;function Zk(){this.__data__=[],this.size=0}var Qk=Zk;function Jk(r,e){return r===e||r!==r&&e!==e}var PS=Jk;function eM(r,e){for(var t=r.length;t--;)if(PS(r[t][0],e))return t;return-1}var gu=eM,tM=Array.prototype,rM=tM.splice;function nM(r){var e=this.__data__,t=gu(e,r);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():rM.call(e,t,1),--this.size,!0}var aM=nM;function iM(r){var e=this.__data__,t=gu(e,r);return t<0?void 0:e[t][1]}var oM=iM;function sM(r){return gu(this.__data__,r)>-1}var uM=sM;function lM(r,e){var t=this.__data__,n=gu(t,r);return n<0?(++this.size,t.push([r,e])):t[n][1]=e,this}var cM=lM;function Ui(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Ui.prototype.clear=Qk;Ui.prototype.delete=aM;Ui.prototype.get=oM;Ui.prototype.has=uM;Ui.prototype.set=cM;var fM=Ui,dM=Ag(cu,"Map"),hM=dM;function vM(){this.size=0,this.__data__={hash:new om,map:new(hM||fM),string:new om}}var pM=vM;function gM(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null}var yM=gM;function mM(r,e){var t=r.__data__;return yM(e)?t[typeof e=="string"?"string":"hash"]:t.map}var yu=mM;function bM(r){var e=yu(this,r).delete(r);return this.size-=e?1:0,e}var wM=bM;function _M(r){return yu(this,r).get(r)}var xM=_M;function SM(r){return yu(this,r).has(r)}var CM=SM;function EM(r,e){var t=yu(this,r),n=t.size;return t.set(r,e),this.size+=t.size==n?0:1,this}var TM=EM;function Hi(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Hi.prototype.clear=pM;Hi.prototype.delete=wM;Hi.prototype.get=xM;Hi.prototype.has=CM;Hi.prototype.set=TM;var AS=Hi,PM="Expected a function";function kg(r,e){if(typeof r!="function"||e!=null&&typeof e!="function")throw new TypeError(PM);var t=function(){var n=arguments,a=e?e.apply(this,n):n[0],i=t.cache;if(i.has(a))return i.get(a);var o=r.apply(this,n);return t.cache=i.set(a,o)||i,o};return t.cache=new(kg.Cache||AS),t}kg.Cache=AS;var AM=kg,kM=500;function MM(r){var e=AM(r,function(n){return t.size===kM&&t.clear(),n}),t=e.cache;return e}var OM=MM,DM=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,RM=/\\(\\)?/g,IM=OM(function(r){var e=[];return r.charCodeAt(0)===46&&e.push(""),r.replace(DM,function(t,n,a,i){e.push(a?i.replace(RM,"$1"):n||t)}),e}),kS=IM;function LM(r,e){for(var t=-1,n=r==null?0:r.length,a=Array(n);++t<n;)a[t]=e(r[t],t,r);return a}var MS=LM,NM=1/0,sm=Ii?Ii.prototype:void 0,um=sm?sm.toString:void 0;function OS(r){if(typeof r=="string")return r;if(pu(r))return MS(r,OS)+"";if(Ko(r))return um?um.call(r):"";var e=r+"";return e=="0"&&1/r==-NM?"-0":e}var FM=OS;function BM(r){return r==null?"":FM(r)}var DS=BM;function qM(r,e){return pu(r)?r:uk(r,e)?[r]:kS(DS(r))}var RS=qM,zM=1/0;function GM(r){if(typeof r=="string"||Ko(r))return r;var e=r+"";return e=="0"&&1/r==-zM?"-0":e}var Mg=GM;function $M(r,e){e=RS(e,r);for(var t=0,n=e.length;r!=null&&t<n;)r=r[Mg(e[t++])];return t&&t==n?r:void 0}var VM=$M;function UM(r,e,t){var n=r==null?void 0:VM(r,e);return n===void 0?t:n}var HM=UM,jM=function(){try{var r=Ag(Object,"defineProperty");return r({},"",{}),r}catch{}}(),lm=jM;function WM(r,e,t){e=="__proto__"&&lm?lm(r,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):r[e]=t}var KM=WM,YM=Object.prototype,XM=YM.hasOwnProperty;function ZM(r,e,t){var n=r[e];(!(XM.call(r,e)&&PS(n,t))||t===void 0&&!(e in r))&&KM(r,e,t)}var QM=ZM,JM=9007199254740991,eO=/^(?:0|[1-9]\d*)$/;function tO(r,e){var t=typeof r;return e=e??JM,!!e&&(t=="number"||t!="symbol"&&eO.test(r))&&r>-1&&r%1==0&&r<e}var rO=tO;function nO(r,e,t,n){if(!Ka(r))return r;e=RS(e,r);for(var a=-1,i=e.length,o=i-1,s=r;s!=null&&++a<i;){var u=Mg(e[a]),l=t;if(u==="__proto__"||u==="constructor"||u==="prototype")return r;if(a!=o){var c=s[u];l=n?n(c,u,s):void 0,l===void 0&&(l=Ka(c)?c:rO(e[a+1])?[]:{})}QM(s,u,l),s=s[u]}return r}var aO=nO;function iO(r,e,t){return r==null?r:aO(r,e,t)}var oO=iO;function sO(r,e){var t=-1,n=r.length;for(e||(e=Array(n));++t<n;)e[t]=r[t];return e}var uO=sO;function lO(r){return pu(r)?MS(r,Mg):Ko(r)?[r]:uO(kS(DS(r)))}var cO=lO,fO={data:function(e){var t={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(a){},beforeSet:function(a,i){},onSet:function(a){},canSet:function(a){return!0}};return e=rt({},t,e),function(a,i){var o=e,s=this,u=s.length!==void 0,l=u?s:[s],c=u?s[0]:s;if(Qe(a)){var f=a.indexOf(".")!==-1,d=f&&cO(a);if(o.allowGetting&&i===void 0){var h;return c&&(o.beforeGet(c),d&&c._private[o.field][a]===void 0?h=HM(c._private[o.field],d):h=c._private[o.field][a]),h}else if(o.allowSetting&&i!==void 0){var v=!o.immutableKeys[a];if(v){var m=jx({},a,i);o.beforeSet(s,m);for(var _=0,b=l.length;_<b;_++){var w=l[_];o.canSet(w)&&(d&&c._private[o.field][a]===void 0?oO(w._private[o.field],d,i):w._private[o.field][a]=i)}o.updateStyle&&s.updateStyle(),o.onSet(s),o.settingTriggersEvent&&s[o.triggerFnName](o.settingEvent)}}}else if(o.allowSetting&&Et(a)){var y=a,x,C,E=Object.keys(y);o.beforeSet(s,y);for(var p=0;p<E.length;p++){x=E[p],C=y[x];var P=!o.immutableKeys[x];if(P)for(var T=0;T<l.length;T++){var R=l[T];o.canSet(R)&&(R._private[o.field][x]=C)}}o.updateStyle&&s.updateStyle(),o.onSet(s),o.settingTriggersEvent&&s[o.triggerFnName](o.settingEvent)}else if(o.allowBinding&&rr(a)){var M=a;s.on(o.bindingEvent,M)}else if(o.allowGetting&&a===void 0){var N;return c&&(o.beforeGet(c),N=c._private[o.field]),N}return s}},removeData:function(e){var t={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=rt({},t,e),function(a){var i=e,o=this,s=o.length!==void 0,u=s?o:[o];if(Qe(a)){for(var l=a.split(/\s+/),c=l.length,f=0;f<c;f++){var d=l[f];if(!wa(d)){var h=!i.immutableKeys[d];if(h)for(var v=0,m=u.length;v<m;v++)u[v]._private[i.field][d]=void 0}}i.triggerEvent&&o[i.triggerFnName](i.event)}else if(a===void 0){for(var _=0,b=u.length;_<b;_++)for(var w=u[_]._private[i.field],y=Object.keys(w),x=0;x<y.length;x++){var C=y[x],E=!i.immutableKeys[C];E&&(w[C]=void 0)}i.triggerEvent&&o[i.triggerFnName](i.event)}return o}}},dO={eventAliasesOn:function(e){var t=e;t.addListener=t.listen=t.bind=t.on,t.unlisten=t.unbind=t.off=t.removeListener,t.trigger=t.emit,t.pon=t.promiseOn=function(n,a){var i=this,o=Array.prototype.slice.call(arguments,0);return new $i(function(s,u){var l=function(h){i.off.apply(i,f),s(h)},c=o.concat([l]),f=c.concat([]);i.on.apply(i,c)})}}},kt={};[nk,fO,dO].forEach(function(r){rt(kt,r)});var hO={animate:kt.animate(),animation:kt.animation(),animated:kt.animated(),clearQueue:kt.clearQueue(),delay:kt.delay(),delayAnimation:kt.delayAnimation(),stop:kt.stop()},Bs={classes:function(e){var t=this;if(e===void 0){var n=[];return t[0]._private.classes.forEach(function(v){return n.push(v)}),n}else zt(e)||(e=(e||"").match(/\S+/g)||[]);for(var a=[],i=new Gi(e),o=0;o<t.length;o++){for(var s=t[o],u=s._private,l=u.classes,c=!1,f=0;f<e.length;f++){var d=e[f],h=l.has(d);if(!h){c=!0;break}}c||(c=l.size!==e.length),c&&(u.classes=i,a.push(s))}return a.length>0&&this.spawn(a).updateStyle().emit("class"),t},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var t=this[0];return t!=null&&t._private.classes.has(e)},toggleClass:function(e,t){zt(e)||(e=e.match(/\S+/g)||[]);for(var n=this,a=t===void 0,i=[],o=0,s=n.length;o<s;o++)for(var u=n[o],l=u._private.classes,c=!1,f=0;f<e.length;f++){var d=e[f],h=l.has(d),v=!1;t||a&&!h?(l.add(d),v=!0):(!t||a&&h)&&(l.delete(d),v=!0),!c&&v&&(i.push(u),c=!0)}return i.length>0&&this.spawn(i).updateStyle().emit("class"),n},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,t){var n=this;if(t==null)t=250;else if(t===0)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},t),n}};Bs.className=Bs.classNames=Bs.classes;var Ct={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:pr,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};Ct.variable="(?:[\\w-.]|(?:\\\\"+Ct.metaChar+"))+";Ct.className="(?:[\\w-]|(?:\\\\"+Ct.metaChar+"))+";Ct.value=Ct.string+"|"+Ct.number;Ct.id=Ct.variable;(function(){var r,e,t;for(r=Ct.comparatorOp.split("|"),t=0;t<r.length;t++)e=r[t],Ct.comparatorOp+="|@"+e;for(r=Ct.comparatorOp.split("|"),t=0;t<r.length;t++)e=r[t],!(e.indexOf("!")>=0)&&e!=="="&&(Ct.comparatorOp+="|\\!"+e)})();var Lt=function(){return{checks:[]}},Ke={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},Xp=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(r,e){return ET(r.selector,e.selector)}),vO=function(){for(var r={},e,t=0;t<Xp.length;t++)e=Xp[t],r[e.selector]=e.matches;return r}(),pO=function(e,t){return vO[e](t)},gO="("+Xp.map(function(r){return r.selector}).join("|")+")",yi=function(e){return e.replace(new RegExp("\\\\("+Ct.metaChar+")","g"),function(t,n){return n})},da=function(e,t,n){e[e.length-1]=n},Zp=[{name:"group",query:!0,regex:"("+Ct.group+")",populate:function(e,t,n){var a=hn(n,1),i=a[0];t.checks.push({type:Ke.GROUP,value:i==="*"?i:i+"s"})}},{name:"state",query:!0,regex:gO,populate:function(e,t,n){var a=hn(n,1),i=a[0];t.checks.push({type:Ke.STATE,value:i})}},{name:"id",query:!0,regex:"\\#("+Ct.id+")",populate:function(e,t,n){var a=hn(n,1),i=a[0];t.checks.push({type:Ke.ID,value:yi(i)})}},{name:"className",query:!0,regex:"\\.("+Ct.className+")",populate:function(e,t,n){var a=hn(n,1),i=a[0];t.checks.push({type:Ke.CLASS,value:yi(i)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+Ct.variable+")\\s*\\]",populate:function(e,t,n){var a=hn(n,1),i=a[0];t.checks.push({type:Ke.DATA_EXIST,field:yi(i)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+Ct.variable+")\\s*("+Ct.comparatorOp+")\\s*("+Ct.value+")\\s*\\]",populate:function(e,t,n){var a=hn(n,3),i=a[0],o=a[1],s=a[2],u=new RegExp("^"+Ct.string+"$").exec(s)!=null;u?s=s.substring(1,s.length-1):s=parseFloat(s),t.checks.push({type:Ke.DATA_COMPARE,field:yi(i),operator:o,value:s})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+Ct.boolOp+")\\s*("+Ct.variable+")\\s*\\]",populate:function(e,t,n){var a=hn(n,2),i=a[0],o=a[1];t.checks.push({type:Ke.DATA_BOOL,field:yi(o),operator:i})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+Ct.meta+")\\s*("+Ct.comparatorOp+")\\s*("+Ct.number+")\\s*\\]\\]",populate:function(e,t,n){var a=hn(n,3),i=a[0],o=a[1],s=a[2];t.checks.push({type:Ke.META_COMPARE,field:yi(i),operator:o,value:parseFloat(s)})}},{name:"nextQuery",separator:!0,regex:Ct.separator,populate:function(e,t){var n=e.currentSubject,a=e.edgeCount,i=e.compoundCount,o=e[e.length-1];n!=null&&(o.subject=n,e.currentSubject=null),o.edgeCount=a,o.compoundCount=i,e.edgeCount=0,e.compoundCount=0;var s=e[e.length++]=Lt();return s}},{name:"directedEdge",separator:!0,regex:Ct.directedEdge,populate:function(e,t){if(e.currentSubject==null){var n=Lt(),a=t,i=Lt();return n.checks.push({type:Ke.DIRECTED_EDGE,source:a,target:i}),da(e,t,n),e.edgeCount++,i}else{var o=Lt(),s=t,u=Lt();return o.checks.push({type:Ke.NODE_SOURCE,source:s,target:u}),da(e,t,o),e.edgeCount++,u}}},{name:"undirectedEdge",separator:!0,regex:Ct.undirectedEdge,populate:function(e,t){if(e.currentSubject==null){var n=Lt(),a=t,i=Lt();return n.checks.push({type:Ke.UNDIRECTED_EDGE,nodes:[a,i]}),da(e,t,n),e.edgeCount++,i}else{var o=Lt(),s=t,u=Lt();return o.checks.push({type:Ke.NODE_NEIGHBOR,node:s,neighbor:u}),da(e,t,o),u}}},{name:"child",separator:!0,regex:Ct.child,populate:function(e,t){if(e.currentSubject==null){var n=Lt(),a=Lt(),i=e[e.length-1];return n.checks.push({type:Ke.CHILD,parent:i,child:a}),da(e,t,n),e.compoundCount++,a}else if(e.currentSubject===t){var o=Lt(),s=e[e.length-1],u=Lt(),l=Lt(),c=Lt(),f=Lt();return o.checks.push({type:Ke.COMPOUND_SPLIT,left:s,right:u,subject:l}),l.checks=t.checks,t.checks=[{type:Ke.TRUE}],f.checks.push({type:Ke.TRUE}),u.checks.push({type:Ke.PARENT,parent:f,child:c}),da(e,s,o),e.currentSubject=l,e.compoundCount++,c}else{var d=Lt(),h=Lt(),v=[{type:Ke.PARENT,parent:d,child:h}];return d.checks=t.checks,t.checks=v,e.compoundCount++,h}}},{name:"descendant",separator:!0,regex:Ct.descendant,populate:function(e,t){if(e.currentSubject==null){var n=Lt(),a=Lt(),i=e[e.length-1];return n.checks.push({type:Ke.DESCENDANT,ancestor:i,descendant:a}),da(e,t,n),e.compoundCount++,a}else if(e.currentSubject===t){var o=Lt(),s=e[e.length-1],u=Lt(),l=Lt(),c=Lt(),f=Lt();return o.checks.push({type:Ke.COMPOUND_SPLIT,left:s,right:u,subject:l}),l.checks=t.checks,t.checks=[{type:Ke.TRUE}],f.checks.push({type:Ke.TRUE}),u.checks.push({type:Ke.ANCESTOR,ancestor:f,descendant:c}),da(e,s,o),e.currentSubject=l,e.compoundCount++,c}else{var d=Lt(),h=Lt(),v=[{type:Ke.ANCESTOR,ancestor:d,descendant:h}];return d.checks=t.checks,t.checks=v,e.compoundCount++,h}}},{name:"subject",modifier:!0,regex:Ct.subject,populate:function(e,t){if(e.currentSubject!=null&&e.currentSubject!==t)return Mt("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=t;var n=e[e.length-1],a=n.checks[0],i=a==null?null:a.type;i===Ke.DIRECTED_EDGE?a.type=Ke.NODE_TARGET:i===Ke.UNDIRECTED_EDGE&&(a.type=Ke.NODE_NEIGHBOR,a.node=a.nodes[1],a.neighbor=a.nodes[0],a.nodes=null)}}];Zp.forEach(function(r){return r.regexObj=new RegExp("^"+r.regex)});var yO=function(e){for(var t,n,a,i=0;i<Zp.length;i++){var o=Zp[i],s=o.name,u=e.match(o.regexObj);if(u!=null){n=u,t=o,a=s;var l=u[0];e=e.substring(l.length);break}}return{expr:t,match:n,name:a,remaining:e}},mO=function(e){var t=e.match(/^\s+/);if(t){var n=t[0];e=e.substring(n.length)}return e},bO=function(e){var t=this,n=t.inputText=e,a=t[0]=Lt();for(t.length=1,n=mO(n);;){var i=yO(n);if(i.expr==null)return Mt("The selector `"+e+"`is invalid"),!1;var o=i.match.slice(1),s=i.expr.populate(t,a,o);if(s===!1)return!1;if(s!=null&&(a=s),n=i.remaining,n.match(/^\s*$/))break}var u=t[t.length-1];t.currentSubject!=null&&(u.subject=t.currentSubject),u.edgeCount=t.edgeCount,u.compoundCount=t.compoundCount;for(var l=0;l<t.length;l++){var c=t[l];if(c.compoundCount>0&&c.edgeCount>0)return Mt("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(c.edgeCount>1)return Mt("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;c.edgeCount===1&&Mt("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},wO=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(c){return c??""},t=function(c){return Qe(c)?'"'+c+'"':e(c)},n=function(c){return" "+c+" "},a=function(c,f){var d=c.type,h=c.value;switch(d){case Ke.GROUP:{var v=e(h);return v.substring(0,v.length-1)}case Ke.DATA_COMPARE:{var m=c.field,_=c.operator;return"["+m+n(e(_))+t(h)+"]"}case Ke.DATA_BOOL:{var b=c.operator,w=c.field;return"["+e(b)+w+"]"}case Ke.DATA_EXIST:{var y=c.field;return"["+y+"]"}case Ke.META_COMPARE:{var x=c.operator,C=c.field;return"[["+C+n(e(x))+t(h)+"]]"}case Ke.STATE:return h;case Ke.ID:return"#"+h;case Ke.CLASS:return"."+h;case Ke.PARENT:case Ke.CHILD:return i(c.parent,f)+n(">")+i(c.child,f);case Ke.ANCESTOR:case Ke.DESCENDANT:return i(c.ancestor,f)+" "+i(c.descendant,f);case Ke.COMPOUND_SPLIT:{var E=i(c.left,f),p=i(c.subject,f),P=i(c.right,f);return E+(E.length>0?" ":"")+p+P}case Ke.TRUE:return""}},i=function(c,f){return c.checks.reduce(function(d,h,v){return d+(f===c&&v===0?"$":"")+a(h,f)},"")},o="",s=0;s<this.length;s++){var u=this[s];o+=i(u,u.subject),this.length>1&&s<this.length-1&&(o+=", ")}return this.toStringCache=o,o},_O={parse:bO,toString:wO},IS=function(e,t,n){var a,i=Qe(e),o=Ge(e),s=Qe(n),u,l,c=!1,f=!1,d=!1;switch(t.indexOf("!")>=0&&(t=t.replace("!",""),f=!0),t.indexOf("@")>=0&&(t=t.replace("@",""),c=!0),(i||s||c)&&(u=!i&&!o?"":""+e,l=""+n),c&&(e=u=u.toLowerCase(),n=l=l.toLowerCase()),t){case"*=":a=u.indexOf(l)>=0;break;case"$=":a=u.indexOf(l,u.length-l.length)>=0;break;case"^=":a=u.indexOf(l)===0;break;case"=":a=e===n;break;case">":d=!0,a=e>n;break;case">=":d=!0,a=e>=n;break;case"<":d=!0,a=e<n;break;case"<=":d=!0,a=e<=n;break;default:a=!1;break}return f&&(e!=null||!d)&&(a=!a),a},xO=function(e,t){switch(t){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},SO=function(e){return e!==void 0},Og=function(e,t){return e.data(t)},CO=function(e,t){return e[t]()},or=[],jt=function(e,t){return e.checks.every(function(n){return or[n.type](n,t)})};or[Ke.GROUP]=function(r,e){var t=r.value;return t==="*"||t===e.group()};or[Ke.STATE]=function(r,e){var t=r.value;return pO(t,e)};or[Ke.ID]=function(r,e){var t=r.value;return e.id()===t};or[Ke.CLASS]=function(r,e){var t=r.value;return e.hasClass(t)};or[Ke.META_COMPARE]=function(r,e){var t=r.field,n=r.operator,a=r.value;return IS(CO(e,t),n,a)};or[Ke.DATA_COMPARE]=function(r,e){var t=r.field,n=r.operator,a=r.value;return IS(Og(e,t),n,a)};or[Ke.DATA_BOOL]=function(r,e){var t=r.field,n=r.operator;return xO(Og(e,t),n)};or[Ke.DATA_EXIST]=function(r,e){var t=r.field;return r.operator,SO(Og(e,t))};or[Ke.UNDIRECTED_EDGE]=function(r,e){var t=r.nodes[0],n=r.nodes[1],a=e.source(),i=e.target();return jt(t,a)&&jt(n,i)||jt(n,a)&&jt(t,i)};or[Ke.NODE_NEIGHBOR]=function(r,e){return jt(r.node,e)&&e.neighborhood().some(function(t){return t.isNode()&&jt(r.neighbor,t)})};or[Ke.DIRECTED_EDGE]=function(r,e){return jt(r.source,e.source())&&jt(r.target,e.target())};or[Ke.NODE_SOURCE]=function(r,e){return jt(r.source,e)&&e.outgoers().some(function(t){return t.isNode()&&jt(r.target,t)})};or[Ke.NODE_TARGET]=function(r,e){return jt(r.target,e)&&e.incomers().some(function(t){return t.isNode()&&jt(r.source,t)})};or[Ke.CHILD]=function(r,e){return jt(r.child,e)&&jt(r.parent,e.parent())};or[Ke.PARENT]=function(r,e){return jt(r.parent,e)&&e.children().some(function(t){return jt(r.child,t)})};or[Ke.DESCENDANT]=function(r,e){return jt(r.descendant,e)&&e.ancestors().some(function(t){return jt(r.ancestor,t)})};or[Ke.ANCESTOR]=function(r,e){return jt(r.ancestor,e)&&e.descendants().some(function(t){return jt(r.descendant,t)})};or[Ke.COMPOUND_SPLIT]=function(r,e){return jt(r.subject,e)&&jt(r.left,e)&&jt(r.right,e)};or[Ke.TRUE]=function(){return!0};or[Ke.COLLECTION]=function(r,e){var t=r.value;return t.has(e)};or[Ke.FILTER]=function(r,e){var t=r.value;return t(e)};var EO=function(e){var t=this;if(t.length===1&&t[0].checks.length===1&&t[0].checks[0].type===Ke.ID)return e.getElementById(t[0].checks[0].value).collection();var n=function(i){for(var o=0;o<t.length;o++){var s=t[o];if(jt(s,i))return!0}return!1};return t.text()==null&&(n=function(){return!0}),e.filter(n)},TO=function(e){for(var t=this,n=0;n<t.length;n++){var a=t[n];if(jt(a,e))return!0}return!1},PO={matches:TO,filter:EO},xa=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||Qe(e)&&e.match(/^\s*$/)||(Zr(e)?this.addQuery({checks:[{type:Ke.COLLECTION,value:e.collection()}]}):rr(e)?this.addQuery({checks:[{type:Ke.FILTER,value:e}]}):Qe(e)?this.parse(e)||(this.invalid=!0):ar("A selector must be created from a string; found "))},Sa=xa.prototype;[_O,PO].forEach(function(r){return rt(Sa,r)});Sa.text=function(){return this.inputText};Sa.size=function(){return this.length};Sa.eq=function(r){return this[r]};Sa.sameText=function(r){return!this.invalid&&!r.invalid&&this.text()===r.text()};Sa.addQuery=function(r){this[this.length++]=r};Sa.selector=Sa.toString;var ma={allAre:function(e){var t=new xa(e);return this.every(function(n){return t.matches(n)})},is:function(e){var t=new xa(e);return this.some(function(n){return t.matches(n)})},some:function(e,t){for(var n=0;n<this.length;n++){var a=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(a)return!0}return!1},every:function(e,t){for(var n=0;n<this.length;n++){var a=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(!a)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var t=this.length,n=e.length;return t!==n?!1:t===1?this[0]===e[0]:this.every(function(a){return e.hasElementWithId(a.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(t){return e.hasElementWithId(t.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var t=this.neighborhood();return e.every(function(n){return t.hasElementWithId(n.id())})},contains:function(e){e=this.cy().collection(e);var t=this;return e.every(function(n){return t.hasElementWithId(n.id())})}};ma.allAreNeighbours=ma.allAreNeighbors;ma.has=ma.contains;ma.equal=ma.equals=ma.same;var on=function(e,t){return function(a,i,o,s){var u=a,l=this,c;if(u==null?c="":Zr(u)&&u.length===1&&(c=u.id()),l.length===1&&c){var f=l[0]._private,d=f.traversalCache=f.traversalCache||{},h=d[t]=d[t]||[],v=Ya(c),m=h[v];return m||(h[v]=e.call(l,a,i,o,s))}else return e.call(l,a,i,o,s)}},Fi={parent:function(e){var t=[];if(this.length===1){var n=this[0]._private.parent;if(n)return n}for(var a=0;a<this.length;a++){var i=this[a],o=i._private.parent;o&&t.push(o)}return this.spawn(t,!0).filter(e)},parents:function(e){for(var t=[],n=this.parent();n.nonempty();){for(var a=0;a<n.length;a++){var i=n[a];t.push(i)}n=n.parent()}return this.spawn(t,!0).filter(e)},commonAncestors:function(e){for(var t,n=0;n<this.length;n++){var a=this[n],i=a.parents();t=t||i,t=t.intersect(i)}return t.filter(e)},orphans:function(e){return this.stdFilter(function(t){return t.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(t){return t.isChild()}).filter(e)},children:on(function(r){for(var e=[],t=0;t<this.length;t++)for(var n=this[t],a=n._private.children,i=0;i<a.length;i++)e.push(a[i]);return this.spawn(e,!0).filter(r)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var t=[];function n(a){for(var i=0;i<a.length;i++){var o=a[i];t.push(o),o.children().nonempty()&&n(o.children())}}return n(this.children()),this.spawn(t,!0).filter(e)}};function Dg(r,e,t,n){for(var a=[],i=new Gi,o=r.cy(),s=o.hasCompoundNodes(),u=0;u<r.length;u++){var l=r[u];t?a.push(l):s&&n(a,i,l)}for(;a.length>0;){var c=a.shift();e(c),i.add(c.id()),s&&n(a,i,c)}return r}function LS(r,e,t){if(t.isParent())for(var n=t._private.children,a=0;a<n.length;a++){var i=n[a];e.has(i.id())||r.push(i)}}Fi.forEachDown=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Dg(this,r,e,LS)};function NS(r,e,t){if(t.isChild()){var n=t._private.parent;e.has(n.id())||r.push(n)}}Fi.forEachUp=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Dg(this,r,e,NS)};function AO(r,e,t){NS(r,e,t),LS(r,e,t)}Fi.forEachUpAndDown=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Dg(this,r,e,AO)};Fi.ancestors=Fi.parents;var zo,FS;zo=FS={data:kt.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:kt.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:kt.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:kt.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:kt.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:kt.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}};zo.attr=zo.data;zo.removeAttr=zo.removeData;var kO=FS,mu={};function oc(r){return function(e){var t=this;if(e===void 0&&(e=!0),t.length!==0)if(t.isNode()&&!t.removed()){for(var n=0,a=t[0],i=a._private.edges,o=0;o<i.length;o++){var s=i[o];!e&&s.isLoop()||(n+=r(a,s))}return n}else return}}rt(mu,{degree:oc(function(r,e){return e.source().same(e.target())?2:1}),indegree:oc(function(r,e){return e.target().same(r)?1:0}),outdegree:oc(function(r,e){return e.source().same(r)?1:0})});function mi(r,e){return function(t){for(var n,a=this.nodes(),i=0;i<a.length;i++){var o=a[i],s=o[r](t);s!==void 0&&(n===void 0||e(s,n))&&(n=s)}return n}}rt(mu,{minDegree:mi("degree",function(r,e){return r<e}),maxDegree:mi("degree",function(r,e){return r>e}),minIndegree:mi("indegree",function(r,e){return r<e}),maxIndegree:mi("indegree",function(r,e){return r>e}),minOutdegree:mi("outdegree",function(r,e){return r<e}),maxOutdegree:mi("outdegree",function(r,e){return r>e})});rt(mu,{totalDegree:function(e){for(var t=0,n=this.nodes(),a=0;a<n.length;a++)t+=n[a].degree(e);return t}});var gn,BS,qS=function(e,t,n){for(var a=0;a<e.length;a++){var i=e[a];if(!i.locked()){var o=i._private.position,s={x:t.x!=null?t.x-o.x:0,y:t.y!=null?t.y-o.y:0};i.isParent()&&!(s.x===0&&s.y===0)&&i.children().shift(s,n),i.dirtyBoundingBoxCache()}}},cm={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,t){qS(e,t,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};gn=BS={position:kt.data(cm),silentPosition:kt.data(rt({},cm,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,t){qS(e,t,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,t){if(Et(e))t?this.silentPosition(e):this.position(e);else if(rr(e)){var n=e,a=this.cy();a.startBatch();for(var i=0;i<this.length;i++){var o=this[i],s=void 0;(s=n(o,i))&&(t?o.silentPosition(s):o.position(s))}a.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,t,n){var a;if(Et(e)?(a={x:Ge(e.x)?e.x:0,y:Ge(e.y)?e.y:0},n=t):Qe(e)&&Ge(t)&&(a={x:0,y:0},a[e]=t),a!=null){var i=this.cy();i.startBatch();for(var o=0;o<this.length;o++){var s=this[o];if(!(i.hasCompoundNodes()&&s.isChild()&&s.ancestors().anySame(this))){var u=s.position(),l={x:u.x+a.x,y:u.y+a.y};n?s.silentPosition(l):s.position(l)}}i.endBatch()}return this},silentShift:function(e,t){return Et(e)?this.shift(e,!0):Qe(e)&&Ge(t)&&this.shift(e,t,!0),this},renderedPosition:function(e,t){var n=this[0],a=this.cy(),i=a.zoom(),o=a.pan(),s=Et(e)?e:void 0,u=s!==void 0||t!==void 0&&Qe(e);if(n&&n.isNode())if(u)for(var l=0;l<this.length;l++){var c=this[l];t!==void 0?c.position(e,(t-o[e])/i):s!==void 0&&c.position(fS(s,i,o))}else{var f=n.position();return s=hu(f,i,o),e===void 0?s:s[e]}else if(!u)return;return this},relativePosition:function(e,t){var n=this[0],a=this.cy(),i=Et(e)?e:void 0,o=i!==void 0||t!==void 0&&Qe(e),s=a.hasCompoundNodes();if(n&&n.isNode())if(o)for(var u=0;u<this.length;u++){var l=this[u],c=s?l.parent():null,f=c&&c.length>0,d=f;f&&(c=c[0]);var h=d?c.position():{x:0,y:0};t!==void 0?l.position(e,t+h[e]):i!==void 0&&l.position({x:i.x+h.x,y:i.y+h.y})}else{var v=n.position(),m=s?n.parent():null,_=m&&m.length>0,b=_;_&&(m=m[0]);var w=b?m.position():{x:0,y:0};return i={x:v.x-w.x,y:v.y-w.y},e===void 0?i:i[e]}else if(!o)return;return this}};gn.modelPosition=gn.point=gn.position;gn.modelPositions=gn.points=gn.positions;gn.renderedPoint=gn.renderedPosition;gn.relativePoint=gn.relativePosition;var MO=BS,Di,Ta;Di=Ta={};Ta.renderedBoundingBox=function(r){var e=this.boundingBox(r),t=this.cy(),n=t.zoom(),a=t.pan(),i=e.x1*n+a.x,o=e.x2*n+a.x,s=e.y1*n+a.y,u=e.y2*n+a.y;return{x1:i,x2:o,y1:s,y2:u,w:o-i,h:u-s}};Ta.dirtyCompoundBoundsCache=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();return!e.styleEnabled()||!e.hasCompoundNodes()?this:(this.forEachUp(function(t){if(t.isParent()){var n=t._private;n.compoundBoundsClean=!1,n.bbCache=null,r||t.emitAndNotify("bounds")}}),this)};Ta.updateCompoundBounds=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!r&&e.batching())return this;function t(o){if(!o.isParent())return;var s=o._private,u=o.children(),l=o.pstyle("compound-sizing-wrt-labels").value==="include",c={width:{val:o.pstyle("min-width").pfValue,left:o.pstyle("min-width-bias-left"),right:o.pstyle("min-width-bias-right")},height:{val:o.pstyle("min-height").pfValue,top:o.pstyle("min-height-bias-top"),bottom:o.pstyle("min-height-bias-bottom")}},f=u.boundingBox({includeLabels:l,includeOverlays:!1,useCache:!1}),d=s.position;(f.w===0||f.h===0)&&(f={w:o.pstyle("width").pfValue,h:o.pstyle("height").pfValue},f.x1=d.x-f.w/2,f.x2=d.x+f.w/2,f.y1=d.y-f.h/2,f.y2=d.y+f.h/2);function h(T,R,M){var N=0,B=0,q=R+M;return T>0&&q>0&&(N=R/q*T,B=M/q*T),{biasDiff:N,biasComplementDiff:B}}function v(T,R,M,N){if(M.units==="%")switch(N){case"width":return T>0?M.pfValue*T:0;case"height":return R>0?M.pfValue*R:0;case"average":return T>0&&R>0?M.pfValue*(T+R)/2:0;case"min":return T>0&&R>0?T>R?M.pfValue*R:M.pfValue*T:0;case"max":return T>0&&R>0?T>R?M.pfValue*T:M.pfValue*R:0;default:return 0}else return M.units==="px"?M.pfValue:0}var m=c.width.left.value;c.width.left.units==="px"&&c.width.val>0&&(m=m*100/c.width.val);var _=c.width.right.value;c.width.right.units==="px"&&c.width.val>0&&(_=_*100/c.width.val);var b=c.height.top.value;c.height.top.units==="px"&&c.height.val>0&&(b=b*100/c.height.val);var w=c.height.bottom.value;c.height.bottom.units==="px"&&c.height.val>0&&(w=w*100/c.height.val);var y=h(c.width.val-f.w,m,_),x=y.biasDiff,C=y.biasComplementDiff,E=h(c.height.val-f.h,b,w),p=E.biasDiff,P=E.biasComplementDiff;s.autoPadding=v(f.w,f.h,o.pstyle("padding"),o.pstyle("padding-relative-to").value),s.autoWidth=Math.max(f.w,c.width.val),d.x=(-x+f.x1+f.x2+C)/2,s.autoHeight=Math.max(f.h,c.height.val),d.y=(-p+f.y1+f.y2+P)/2}for(var n=0;n<this.length;n++){var a=this[n],i=a._private;(!i.compoundBoundsClean||r)&&(t(a),e.batching()||(i.compoundBoundsClean=!0))}return this};var an=function(e){return e===1/0||e===-1/0?0:e},vn=function(e,t,n,a,i){a-t===0||i-n===0||t==null||n==null||a==null||i==null||(e.x1=t<e.x1?t:e.x1,e.x2=a>e.x2?a:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=i>e.y2?i:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},Va=function(e,t){return t==null?e:vn(e,t.x1,t.y1,t.x2,t.y2)},go=function(e,t,n){return pn(e,t,n)},Ss=function(e,t,n){if(!t.cy().headless()){var a=t._private,i=a.rstyle,o=i.arrowWidth/2,s=t.pstyle(n+"-arrow-shape").value,u,l;if(s!=="none"){n==="source"?(u=i.srcX,l=i.srcY):n==="target"?(u=i.tgtX,l=i.tgtY):(u=i.midX,l=i.midY);var c=a.arrowBounds=a.arrowBounds||{},f=c[n]=c[n]||{};f.x1=u-o,f.y1=l-o,f.x2=u+o,f.y2=l+o,f.w=f.x2-f.x1,f.h=f.y2-f.y1,Ns(f,1),vn(e,f.x1,f.y1,f.x2,f.y2)}}},sc=function(e,t,n){if(!t.cy().headless()){var a;n?a=n+"-":a="";var i=t._private,o=i.rstyle,s=t.pstyle(a+"label").strValue;if(s){var u=t.pstyle("text-halign"),l=t.pstyle("text-valign"),c=go(o,"labelWidth",n),f=go(o,"labelHeight",n),d=go(o,"labelX",n),h=go(o,"labelY",n),v=t.pstyle(a+"text-margin-x").pfValue,m=t.pstyle(a+"text-margin-y").pfValue,_=t.isEdge(),b=t.pstyle(a+"text-rotation"),w=t.pstyle("text-outline-width").pfValue,y=t.pstyle("text-border-width").pfValue,x=y/2,C=t.pstyle("text-background-padding").pfValue,E=2,p=f,P=c,T=P/2,R=p/2,M,N,B,q;if(_)M=d-T,N=d+T,B=h-R,q=h+R;else{switch(u.value){case"left":M=d-P,N=d;break;case"center":M=d-T,N=d+T;break;case"right":M=d,N=d+P;break}switch(l.value){case"top":B=h-p,q=h;break;case"center":B=h-R,q=h+R;break;case"bottom":B=h,q=h+p;break}}M+=v-Math.max(w,x)-C-E,N+=v+Math.max(w,x)+C+E,B+=m-Math.max(w,x)-C-E,q+=m+Math.max(w,x)+C+E;var Z=n||"main",Q=i.labelBounds,Y=Q[Z]=Q[Z]||{};Y.x1=M,Y.y1=B,Y.x2=N,Y.y2=q,Y.w=N-M,Y.h=q-B;var J=_&&b.strValue==="autorotate",X=b.pfValue!=null&&b.pfValue!==0;if(J||X){var k=J?go(i.rstyle,"labelAngle",n):b.pfValue,D=Math.cos(k),I=Math.sin(k),F=(M+N)/2,L=(B+q)/2;if(!_){switch(u.value){case"left":F=N;break;case"right":F=M;break}switch(l.value){case"top":L=q;break;case"bottom":L=B;break}}var H=function(Oe,Se){return Oe=Oe-F,Se=Se-L,{x:Oe*D-Se*I+F,y:Oe*I+Se*D+L}},j=H(M,B),W=H(M,q),re=H(N,B),se=H(N,q);M=Math.min(j.x,W.x,re.x,se.x),N=Math.max(j.x,W.x,re.x,se.x),B=Math.min(j.y,W.y,re.y,se.y),q=Math.max(j.y,W.y,re.y,se.y)}var ce=Z+"Rot",ge=Q[ce]=Q[ce]||{};ge.x1=M,ge.y1=B,ge.x2=N,ge.y2=q,ge.w=N-M,ge.h=q-B,vn(e,M,B,N,q),vn(i.labelBounds.all,M,B,N,q)}return e}},OO=function(e,t){if(!t.cy().headless()){var n=t.pstyle("outline-opacity").value,a=t.pstyle("outline-width").value;if(n>0&&a>0){var i=t.pstyle("outline-offset").value,o=t.pstyle("shape").value,s=a+i,u=(e.w+s*2)/e.w,l=(e.h+s*2)/e.h,c=0,f=0;["diamond","pentagon","round-triangle"].includes(o)?(u=(e.w+s*2.4)/e.w,f=-s/3.6):["concave-hexagon","rhomboid","right-rhomboid"].includes(o)?u=(e.w+s*2.4)/e.w:o==="star"?(u=(e.w+s*2.8)/e.w,l=(e.h+s*2.6)/e.h,f=-s/3.8):o==="triangle"?(u=(e.w+s*2.8)/e.w,l=(e.h+s*2.4)/e.h,f=-s/1.4):o==="vee"&&(u=(e.w+s*4.4)/e.w,l=(e.h+s*3.8)/e.h,f=-s*.5);var d=e.h*l-e.h,h=e.w*u-e.w;if(Fs(e,[Math.ceil(d/2),Math.ceil(h/2)]),c!=0||f!==0){var v=QP(e,c,f);hS(e,v)}}}},DO=function(e,t){var n=e._private.cy,a=n.styleEnabled(),i=n.headless(),o=Yr(),s=e._private,u=e.isNode(),l=e.isEdge(),c,f,d,h,v,m,_=s.rstyle,b=u&&a?e.pstyle("bounds-expansion").pfValue:[0],w=function(te){return te.pstyle("display").value!=="none"},y=!a||w(e)&&(!l||w(e.source())&&w(e.target()));if(y){var x=0,C=0;a&&t.includeOverlays&&(x=e.pstyle("overlay-opacity").value,x!==0&&(C=e.pstyle("overlay-padding").value));var E=0,p=0;a&&t.includeUnderlays&&(E=e.pstyle("underlay-opacity").value,E!==0&&(p=e.pstyle("underlay-padding").value));var P=Math.max(C,p),T=0,R=0;if(a&&(T=e.pstyle("width").pfValue,R=T/2),u&&t.includeNodes){var M=e.position();v=M.x,m=M.y;var N=e.outerWidth(),B=N/2,q=e.outerHeight(),Z=q/2;c=v-B,f=v+B,d=m-Z,h=m+Z,vn(o,c,d,f,h),a&&t.includeOutlines&&OO(o,e)}else if(l&&t.includeEdges)if(a&&!i){var Q=e.pstyle("curve-style").strValue;if(c=Math.min(_.srcX,_.midX,_.tgtX),f=Math.max(_.srcX,_.midX,_.tgtX),d=Math.min(_.srcY,_.midY,_.tgtY),h=Math.max(_.srcY,_.midY,_.tgtY),c-=R,f+=R,d-=R,h+=R,vn(o,c,d,f,h),Q==="haystack"){var Y=_.haystackPts;if(Y&&Y.length===2){if(c=Y[0].x,d=Y[0].y,f=Y[1].x,h=Y[1].y,c>f){var J=c;c=f,f=J}if(d>h){var X=d;d=h,h=X}vn(o,c-R,d-R,f+R,h+R)}}else if(Q==="bezier"||Q==="unbundled-bezier"||Q.endsWith("segments")||Q.endsWith("taxi")){var k;switch(Q){case"bezier":case"unbundled-bezier":k=_.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":k=_.linePts;break}if(k!=null)for(var D=0;D<k.length;D++){var I=k[D];c=I.x-R,f=I.x+R,d=I.y-R,h=I.y+R,vn(o,c,d,f,h)}}}else{var F=e.source(),L=F.position(),H=e.target(),j=H.position();if(c=L.x,f=j.x,d=L.y,h=j.y,c>f){var W=c;c=f,f=W}if(d>h){var re=d;d=h,h=re}c-=R,f+=R,d-=R,h+=R,vn(o,c,d,f,h)}if(a&&t.includeEdges&&l&&(Ss(o,e,"mid-source"),Ss(o,e,"mid-target"),Ss(o,e,"source"),Ss(o,e,"target")),a){var se=e.pstyle("ghost").value==="yes";if(se){var ce=e.pstyle("ghost-offset-x").pfValue,ge=e.pstyle("ghost-offset-y").pfValue;vn(o,o.x1+ce,o.y1+ge,o.x2+ce,o.y2+ge)}}var Pe=s.bodyBounds=s.bodyBounds||{};Vy(Pe,o),Fs(Pe,b),Ns(Pe,1),a&&(c=o.x1,f=o.x2,d=o.y1,h=o.y2,vn(o,c-P,d-P,f+P,h+P));var Oe=s.overlayBounds=s.overlayBounds||{};Vy(Oe,o),Fs(Oe,b),Ns(Oe,1);var Se=s.labelBounds=s.labelBounds||{};Se.all!=null?ZP(Se.all):Se.all=Yr(),a&&t.includeLabels&&(t.includeMainLabels&&sc(o,e,null),l&&(t.includeSourceLabels&&sc(o,e,"source"),t.includeTargetLabels&&sc(o,e,"target")))}return o.x1=an(o.x1),o.y1=an(o.y1),o.x2=an(o.x2),o.y2=an(o.y2),o.w=an(o.x2-o.x1),o.h=an(o.y2-o.y1),o.w>0&&o.h>0&&y&&(Fs(o,b),Ns(o,1)),o},zS=function(e){var t=0,n=function(o){return(o?1:0)<<t++},a=0;return a+=n(e.incudeNodes),a+=n(e.includeEdges),a+=n(e.includeLabels),a+=n(e.includeMainLabels),a+=n(e.includeSourceLabels),a+=n(e.includeTargetLabels),a+=n(e.includeOverlays),a+=n(e.includeOutlines),a},GS=function(e){if(e.isEdge()){var t=e.source().position(),n=e.target().position(),a=function(o){return Math.round(o)};return mP([a(t.x),a(t.y),a(n.x),a(n.y)])}else return 0},fm=function(e,t){var n=e._private,a,i=e.isEdge(),o=t==null?dm:zS(t),s=o===dm,u=GS(e),l=n.bbCachePosKey===u,c=t.useCache&&l,f=function(m){return m._private.bbCache==null||m._private.styleDirty},d=!c||f(e)||i&&f(e.source())||f(e.target());if(d?(l||e.recalculateRenderedStyle(c),a=DO(e,Go),n.bbCache=a,n.bbCachePosKey=u):a=n.bbCache,!s){var h=e.isNode();a=Yr(),(t.includeNodes&&h||t.includeEdges&&!h)&&(t.includeOverlays?Va(a,n.overlayBounds):Va(a,n.bodyBounds)),t.includeLabels&&(t.includeMainLabels&&(!i||t.includeSourceLabels&&t.includeTargetLabels)?Va(a,n.labelBounds.all):(t.includeMainLabels&&Va(a,n.labelBounds.mainRot),t.includeSourceLabels&&Va(a,n.labelBounds.sourceRot),t.includeTargetLabels&&Va(a,n.labelBounds.targetRot))),a.w=a.x2-a.x1,a.h=a.y2-a.y1}return a},Go={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},dm=zS(Go),hm=kr(Go);Ta.boundingBox=function(r){var e;if(this.length===1&&this[0]._private.bbCache!=null&&!this[0]._private.styleDirty&&(r===void 0||r.useCache===void 0||r.useCache===!0))r===void 0?r=Go:r=hm(r),e=fm(this[0],r);else{e=Yr(),r=r||Go;var t=hm(r),n=this,a=n.cy(),i=a.styleEnabled();if(i)for(var o=0;o<n.length;o++){var s=n[o],u=s._private,l=GS(s),c=u.bbCachePosKey===l,f=t.useCache&&c&&!u.styleDirty;s.recalculateRenderedStyle(f)}this.updateCompoundBounds(!r.useCache);for(var d=0;d<n.length;d++){var h=n[d];Va(e,fm(h,t))}}return e.x1=an(e.x1),e.y1=an(e.y1),e.x2=an(e.x2),e.y2=an(e.y2),e.w=an(e.x2-e.x1),e.h=an(e.y2-e.y1),e};Ta.dirtyBoundingBoxCache=function(){for(var r=0;r<this.length;r++){var e=this[r]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};Ta.boundingBoxAt=function(r){var e=this.nodes(),t=this.cy(),n=t.hasCompoundNodes(),a=t.collection();if(n&&(a=e.filter(function(l){return l.isParent()}),e=e.not(a)),Et(r)){var i=r;r=function(){return i}}var o=function(c,f){return c._private.bbAtOldPos=r(c,f)},s=function(c){return c._private.bbAtOldPos};t.startBatch(),e.forEach(o).silentPositions(r),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0));var u=XP(this.boundingBox({useCache:!1}));return e.silentPositions(s),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0)),t.endBatch(),u};Di.boundingbox=Di.bb=Di.boundingBox;Di.renderedBoundingbox=Di.renderedBoundingBox;var RO=Ta,Eo,Xo;Eo=Xo={};var $S=function(e){e.uppercaseName=Ny(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=Ny(e.outerName),Eo[e.name]=function(){var n=this[0],a=n._private,i=a.cy,o=i._private.styleEnabled;if(n)if(o){if(n.isParent())return n.updateCompoundBounds(),a[e.autoName]||0;var s=n.pstyle(e.name);switch(s.strValue){case"label":return n.recalculateRenderedStyle(),a.rstyle[e.labelName]||0;default:return s.pfValue}}else return 1},Eo["outer"+e.uppercaseName]=function(){var n=this[0],a=n._private,i=a.cy,o=i._private.styleEnabled;if(n)if(o){var s=n[e.name](),u=n.pstyle("border-width").pfValue,l=2*n.padding();return s+u+l}else return 1},Eo["rendered"+e.uppercaseName]=function(){var n=this[0];if(n){var a=n[e.name]();return a*this.cy().zoom()}},Eo["rendered"+e.uppercaseOuterName]=function(){var n=this[0];if(n){var a=n[e.outerName]();return a*this.cy().zoom()}}};$S({name:"width"});$S({name:"height"});Xo.padding=function(){var r=this[0],e=r._private;return r.isParent()?(r.updateCompoundBounds(),e.autoPadding!==void 0?e.autoPadding:r.pstyle("padding").pfValue):r.pstyle("padding").pfValue};Xo.paddedHeight=function(){var r=this[0];return r.height()+2*r.padding()};Xo.paddedWidth=function(){var r=this[0];return r.width()+2*r.padding()};var IO=Xo,LO=function(e,t){if(e.isEdge())return t(e)},NO=function(e,t){if(e.isEdge()){var n=e.cy();return hu(t(e),n.zoom(),n.pan())}},FO=function(e,t){if(e.isEdge()){var n=e.cy(),a=n.pan(),i=n.zoom();return t(e).map(function(o){return hu(o,i,a)})}},BO=function(e){return e.renderer().getControlPoints(e)},qO=function(e){return e.renderer().getSegmentPoints(e)},zO=function(e){return e.renderer().getSourceEndpoint(e)},GO=function(e){return e.renderer().getTargetEndpoint(e)},$O=function(e){return e.renderer().getEdgeMidpoint(e)},vm={controlPoints:{get:BO,mult:!0},segmentPoints:{get:qO,mult:!0},sourceEndpoint:{get:zO},targetEndpoint:{get:GO},midpoint:{get:$O}},VO=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},UO=Object.keys(vm).reduce(function(r,e){var t=vm[e],n=VO(e);return r[e]=function(){return LO(this,t.get)},t.mult?r[n]=function(){return FO(this,t.get)}:r[n]=function(){return NO(this,t.get)},r},{}),HO=rt({},MO,RO,IO,UO);/*!
Event object based on jQuery events, MIT license

https://jquery.org/license/
https://tldrlegal.com/license/mit-license
https://github.com/jquery/jquery/blob/master/src/event.js
*/var VS=function(e,t){this.recycle(e,t)};function yo(){return!1}function Cs(){return!0}VS.prototype={instanceString:function(){return"event"},recycle:function(e,t){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=yo,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?Cs:yo):e!=null&&e.type?t=e:this.type=e,t!=null&&(this.originalEvent=t.originalEvent,this.type=t.type!=null?t.type:this.type,this.cy=t.cy,this.target=t.target,this.position=t.position,this.renderedPosition=t.renderedPosition,this.namespace=t.namespace,this.layout=t.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var n=this.position,a=this.cy.zoom(),i=this.cy.pan();this.renderedPosition={x:n.x*a+i.x,y:n.y*a+i.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=Cs;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=Cs;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Cs,this.stopPropagation()},isDefaultPrevented:yo,isPropagationStopped:yo,isImmediatePropagationStopped:yo};var US=/^([^.]+)(\.(?:[^.]+))?$/,jO=".*",HS={qualifierCompare:function(e,t){return e===t},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},pm=Object.keys(HS),WO={};function bu(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:WO,e=arguments.length>1?arguments[1]:void 0,t=0;t<pm.length;t++){var n=pm[t];this[n]=r[n]||HS[n]}this.context=e||this.context,this.listeners=[],this.emitting=0}var Ca=bu.prototype,jS=function(e,t,n,a,i,o,s){rr(a)&&(i=a,a=null),s&&(o==null?o=s:o=rt({},o,s));for(var u=zt(n)?n:n.split(/\s+/),l=0;l<u.length;l++){var c=u[l];if(!wa(c)){var f=c.match(US);if(f){var d=f[1],h=f[2]?f[2]:null,v=t(e,c,d,h,a,i,o);if(v===!1)break}}}},gm=function(e,t){return e.addEventFields(e.context,t),new VS(t.type,t)},KO=function(e,t,n){if(vT(n)){t(e,n);return}else if(Et(n)){t(e,gm(e,n));return}for(var a=zt(n)?n:n.split(/\s+/),i=0;i<a.length;i++){var o=a[i];if(!wa(o)){var s=o.match(US);if(s){var u=s[1],l=s[2]?s[2]:null,c=gm(e,{type:u,namespace:l,target:e.context});t(e,c)}}}};Ca.on=Ca.addListener=function(r,e,t,n,a){return jS(this,function(i,o,s,u,l,c,f){rr(c)&&i.listeners.push({event:o,callback:c,type:s,namespace:u,qualifier:l,conf:f})},r,e,t,n,a),this};Ca.one=function(r,e,t,n){return this.on(r,e,t,n,{one:!0})};Ca.removeListener=Ca.off=function(r,e,t,n){var a=this;this.emitting!==0&&(this.listeners=SP(this.listeners));for(var i=this.listeners,o=function(l){var c=i[l];jS(a,function(f,d,h,v,m,_){if((c.type===h||r==="*")&&(!v&&c.namespace!==".*"||c.namespace===v)&&(!m||f.qualifierCompare(c.qualifier,m))&&(!_||c.callback===_))return i.splice(l,1),!1},r,e,t,n)},s=i.length-1;s>=0;s--)o(s);return this};Ca.removeAllListeners=function(){return this.removeListener("*")};Ca.emit=Ca.trigger=function(r,e,t){var n=this.listeners,a=n.length;return this.emitting++,zt(e)||(e=[e]),KO(this,function(i,o){t!=null&&(n=[{event:o.event,type:o.type,namespace:o.namespace,callback:t}],a=n.length);for(var s=function(c){var f=n[c];if(f.type===o.type&&(!f.namespace||f.namespace===o.namespace||f.namespace===jO)&&i.eventMatches(i.context,f,o)){var d=[o];e!=null&&EP(d,e),i.beforeEmit(i.context,f,o),f.conf&&f.conf.one&&(i.listeners=i.listeners.filter(function(m){return m!==f}));var h=i.callbackContext(i.context,f,o),v=f.callback.apply(h,d);i.afterEmit(i.context,f,o),v===!1&&(o.stopPropagation(),o.preventDefault())}},u=0;u<a;u++)s(u);i.bubble(i.context)&&!o.isPropagationStopped()&&i.parent(i.context).emit(o,e)},r),this.emitting--,this};var YO={qualifierCompare:function(e,t){return e==null||t==null?e==null&&t==null:e.sameText(t)},eventMatches:function(e,t,n){var a=t.qualifier;return a!=null?e!==n.target&&Wo(n.target)&&a.matches(n.target):!0},addEventFields:function(e,t){t.cy=e.cy(),t.target=e},callbackContext:function(e,t,n){return t.qualifier!=null?n.target:e},beforeEmit:function(e,t){t.conf&&t.conf.once&&t.conf.onceCollection.removeListener(t.event,t.qualifier,t.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},Es=function(e){return Qe(e)?new xa(e):e},WS={createEmitter:function(){for(var e=0;e<this.length;e++){var t=this[e],n=t._private;n.emitter||(n.emitter=new bu(YO,t))}return this},emitter:function(){return this._private.emitter},on:function(e,t,n){for(var a=Es(t),i=0;i<this.length;i++){var o=this[i];o.emitter().on(e,a,n)}return this},removeListener:function(e,t,n){for(var a=Es(t),i=0;i<this.length;i++){var o=this[i];o.emitter().removeListener(e,a,n)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var t=this[e];t.emitter().removeAllListeners()}return this},one:function(e,t,n){for(var a=Es(t),i=0;i<this.length;i++){var o=this[i];o.emitter().one(e,a,n)}return this},once:function(e,t,n){for(var a=Es(t),i=0;i<this.length;i++){var o=this[i];o.emitter().on(e,a,n,{once:!0,onceCollection:this})}},emit:function(e,t){for(var n=0;n<this.length;n++){var a=this[n];a.emitter().emit(e,t)}return this},emitAndNotify:function(e,t){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,t),this}};kt.eventAliasesOn(WS);var KS={nodes:function(e){return this.filter(function(t){return t.isNode()}).filter(e)},edges:function(e){return this.filter(function(t){return t.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),t=this.spawn(),n=0;n<this.length;n++){var a=this[n];a.isNode()?e.push(a):t.push(a)}return{nodes:e,edges:t}},filter:function(e,t){if(e===void 0)return this;if(Qe(e)||Zr(e))return new xa(e).filter(this);if(rr(e)){for(var n=this.spawn(),a=this,i=0;i<a.length;i++){var o=a[i],s=t?e.apply(t,[o,i,a]):e(o,i,a);s&&n.push(o)}return n}return this.spawn()},not:function(e){if(e){Qe(e)&&(e=this.filter(e));for(var t=this.spawn(),n=0;n<this.length;n++){var a=this[n],i=e.has(a);i||t.push(a)}return t}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(Qe(e)){var t=e;return this.filter(t)}for(var n=this.spawn(),a=this,i=e,o=this.length<e.length,s=o?a:i,u=o?i:a,l=0;l<s.length;l++){var c=s[l];u.has(c)&&n.push(c)}return n},xor:function(e){var t=this._private.cy;Qe(e)&&(e=t.$(e));var n=this.spawn(),a=this,i=e,o=function(u,l){for(var c=0;c<u.length;c++){var f=u[c],d=f._private.data.id,h=l.hasElementWithId(d);h||n.push(f)}};return o(a,i),o(i,a),n},diff:function(e){var t=this._private.cy;Qe(e)&&(e=t.$(e));var n=this.spawn(),a=this.spawn(),i=this.spawn(),o=this,s=e,u=function(c,f,d){for(var h=0;h<c.length;h++){var v=c[h],m=v._private.data.id,_=f.hasElementWithId(m);_?i.merge(v):d.push(v)}};return u(o,s,n),u(s,o,a),{left:n,right:a,both:i}},add:function(e){var t=this._private.cy;if(!e)return this;if(Qe(e)){var n=e;e=t.mutableElements().filter(n)}for(var a=this.spawnSelf(),i=0;i<e.length;i++){var o=e[i],s=!this.has(o);s&&a.push(o)}return a},merge:function(e){var t=this._private,n=t.cy;if(!e)return this;if(e&&Qe(e)){var a=e;e=n.mutableElements().filter(a)}for(var i=t.map,o=0;o<e.length;o++){var s=e[o],u=s._private.data.id,l=!i.has(u);if(l){var c=this.length++;this[c]=s,i.set(u,{ele:s,index:c})}}return this},unmergeAt:function(e){var t=this[e],n=t.id(),a=this._private,i=a.map;this[e]=void 0,i.delete(n);var o=e===this.length-1;if(this.length>1&&!o){var s=this.length-1,u=this[s],l=u._private.data.id;this[s]=void 0,this[e]=u,i.set(l,{ele:u,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var t=this._private,n=e._private.data.id,a=t.map,i=a.get(n);if(!i)return this;var o=i.index;return this.unmergeAt(o),this},unmerge:function(e){var t=this._private.cy;if(!e)return this;if(e&&Qe(e)){var n=e;e=t.mutableElements().filter(n)}for(var a=0;a<e.length;a++)this.unmergeOne(e[a]);return this},unmergeBy:function(e){for(var t=this.length-1;t>=0;t--){var n=this[t];e(n)&&this.unmergeAt(t)}return this},map:function(e,t){for(var n=[],a=this,i=0;i<a.length;i++){var o=a[i],s=t?e.apply(t,[o,i,a]):e(o,i,a);n.push(s)}return n},reduce:function(e,t){for(var n=t,a=this,i=0;i<a.length;i++)n=e(n,a[i],i,a);return n},max:function(e,t){for(var n=-1/0,a,i=this,o=0;o<i.length;o++){var s=i[o],u=t?e.apply(t,[s,o,i]):e(s,o,i);u>n&&(n=u,a=s)}return{value:n,ele:a}},min:function(e,t){for(var n=1/0,a,i=this,o=0;o<i.length;o++){var s=i[o],u=t?e.apply(t,[s,o,i]):e(s,o,i);u<n&&(n=u,a=s)}return{value:n,ele:a}}},Pt=KS;Pt.u=Pt["|"]=Pt["+"]=Pt.union=Pt.or=Pt.add;Pt["\\"]=Pt["!"]=Pt["-"]=Pt.difference=Pt.relativeComplement=Pt.subtract=Pt.not;Pt.n=Pt["&"]=Pt["."]=Pt.and=Pt.intersection=Pt.intersect;Pt["^"]=Pt["(+)"]=Pt["(-)"]=Pt.symmetricDifference=Pt.symdiff=Pt.xor;Pt.fnFilter=Pt.filterFn=Pt.stdFilter=Pt.filter;Pt.complement=Pt.abscomp=Pt.absoluteComplement;var XO={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},YS=function(e,t){var n=e.cy(),a=n.hasCompoundNodes();function i(c){var f=c.pstyle("z-compound-depth");return f.value==="auto"?a?c.zDepth():0:f.value==="bottom"?-1:f.value==="top"?_g:0}var o=i(e)-i(t);if(o!==0)return o;function s(c){var f=c.pstyle("z-index-compare");return f.value==="auto"&&c.isNode()?1:0}var u=s(e)-s(t);if(u!==0)return u;var l=e.pstyle("z-index").value-t.pstyle("z-index").value;return l!==0?l:e.poolIndex()-t.poolIndex()},Qs={forEach:function(e,t){if(rr(e))for(var n=this.length,a=0;a<n;a++){var i=this[a],o=t?e.apply(t,[i,a,this]):e(i,a,this);if(o===!1)break}return this},toArray:function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},slice:function(e,t){var n=[],a=this.length;t==null&&(t=a),e==null&&(e=0),e<0&&(e=a+e),t<0&&(t=a+t);for(var i=e;i>=0&&i<t&&i<a;i++)n.push(this[i]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!rr(e))return this;var t=this.toArray().sort(e);return this.spawn(t)},sortByZIndex:function(){return this.sort(YS)},zDepth:function(){var e=this[0];if(e){var t=e._private,n=t.group;if(n==="nodes"){var a=t.data.parent?e.parents().size():0;return e.isParent()?a:_g-1}else{var i=t.source,o=t.target,s=i.zDepth(),u=o.zDepth();return Math.max(s,u,0)}}}};Qs.each=Qs.forEach;var ZO=function(){var e="undefined",t=(typeof Symbol>"u"?"undefined":gr(Symbol))!=e&&gr(Symbol.iterator)!=e;t&&(Qs[Symbol.iterator]=function(){var n=this,a={value:void 0,done:!1},i=0,o=this.length;return jx({next:function(){return i<o?a.value=n[i++]:(a.value=void 0,a.done=!0),a}},Symbol.iterator,function(){return this})})};ZO();var QO=kr({nodeDimensionsIncludeLabels:!1}),qs={layoutDimensions:function(e){e=QO(e);var t;if(!this.takesUpSpace())t={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var n=this.boundingBox();t={w:n.w,h:n.h}}else t={w:this.outerWidth(),h:this.outerHeight()};return(t.w===0||t.h===0)&&(t.w=t.h=1),t},layoutPositions:function(e,t,n){var a=this.nodes().filter(function(C){return!C.isParent()}),i=this.cy(),o=t.eles,s=function(E){return E.id()},u=Ro(n,s);e.emit({type:"layoutstart",layout:e}),e.animations=[];var l=function(E,p,P){var T={x:p.x1+p.w/2,y:p.y1+p.h/2},R={x:(P.x-T.x)*E,y:(P.y-T.y)*E};return{x:T.x+R.x,y:T.y+R.y}},c=t.spacingFactor&&t.spacingFactor!==1,f=function(){if(!c)return null;for(var E=Yr(),p=0;p<a.length;p++){var P=a[p],T=u(P,p);JP(E,T.x,T.y)}return E},d=f(),h=Ro(function(C,E){var p=u(C,E);if(c){var P=Math.abs(t.spacingFactor);p=l(P,d,p)}return t.transform!=null&&(p=t.transform(C,p)),p},s);if(t.animate){for(var v=0;v<a.length;v++){var m=a[v],_=h(m,v),b=t.animateFilter==null||t.animateFilter(m,v);if(b){var w=m.animation({position:_,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(w)}else m.position(_)}if(t.fit){var y=i.animation({fit:{boundingBox:o.boundingBoxAt(h),padding:t.padding},duration:t.animationDuration,easing:t.animationEasing});e.animations.push(y)}else if(t.zoom!==void 0&&t.pan!==void 0){var x=i.animation({zoom:t.zoom,pan:t.pan,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(x)}e.animations.forEach(function(C){return C.play()}),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),$i.all(e.animations.map(function(C){return C.promise()})).then(function(){e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e})})}else a.positions(h),t.fit&&i.fit(t.eles,t.padding),t.zoom!=null&&i.zoom(t.zoom),t.pan&&i.pan(t.pan),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var t=this.cy();return t.makeLayout(rt({},e,{eles:this}))}};qs.createLayout=qs.makeLayout=qs.layout;function XS(r,e,t){var n=t._private,a=n.styleCache=n.styleCache||[],i;return(i=a[r])!=null||(i=a[r]=e(t)),i}function wu(r,e){return r=Ya(r),function(n){return XS(r,e,n)}}function _u(r,e){r=Ya(r);var t=function(a){return e.call(a)};return function(){var a=this[0];if(a)return XS(r,t,a)}}var Pr={recalculateRenderedStyle:function(e){var t=this.cy(),n=t.renderer(),a=t.styleEnabled();return n&&a&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),t=function(i){return i._private.styleCache=null};if(e.hasCompoundNodes()){var n;n=this.spawnSelf().merge(this.descendants()).merge(this.parents()),n.merge(n.connectedEdges()),n.forEach(t)}else this.forEach(function(a){t(a),a.connectedEdges().forEach(t)});return this},updateStyle:function(e){var t=this._private.cy;if(!t.styleEnabled())return this;if(t.batching()){var n=t._private.batchStyleEles;return n.merge(this),this}var a=t.hasCompoundNodes(),i=this;e=!!(e||e===void 0),a&&(i=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var o=i;return e?o.emitAndNotify("style"):o.emit("style"),i.forEach(function(s){return s._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var t=0;t<this.length;t++){var n=this[t];n._private.styleDirty&&(n._private.styleDirty=!1,e.style().apply(n))}},parsedStyle:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this[0],a=n.cy();if(a.styleEnabled()&&n){this.cleanStyle();var i=n._private.style[e];return i??(t?a.style().getDefaultProperty(e):null)}},numericStyle:function(e){var t=this[0];if(t.cy().styleEnabled()&&t){var n=t.pstyle(e);return n.pfValue!==void 0?n.pfValue:n.value}},numericStyleUnits:function(e){var t=this[0];if(t.cy().styleEnabled()&&t)return t.pstyle(e).units},renderedStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=this[0];if(n)return t.style().getRenderedStyle(n,e)},style:function(e,t){var n=this.cy();if(!n.styleEnabled())return this;var a=!1,i=n.style();if(Et(e)){var o=e;i.applyBypass(this,o,a),this.emitAndNotify("style")}else if(Qe(e))if(t===void 0){var s=this[0];return s?i.getStylePropertyValue(s,e):void 0}else i.applyBypass(this,e,t,a),this.emitAndNotify("style");else if(e===void 0){var u=this[0];return u?i.getRawStyle(u):void 0}return this},removeStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=!1,a=t.style(),i=this;if(e===void 0)for(var o=0;o<i.length;o++){var s=i[o];a.removeAllBypasses(s,n)}else{e=e.split(/\s+/);for(var u=0;u<i.length;u++){var l=i[u];a.removeBypasses(l,e,n)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var t=e.hasCompoundNodes(),n=this[0];if(n){var a=n._private,i=n.pstyle("opacity").value;if(!t)return i;var o=a.data.parent?n.parents():null;if(o)for(var s=0;s<o.length;s++){var u=o[s],l=u.pstyle("opacity").value;i=l*i}return i}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0],n=t.cy().hasCompoundNodes();if(t)return n?t.effectiveOpacity()===0:t.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0];return!!t._private.backgrounding}};function uc(r,e){var t=r._private,n=t.data.parent?r.parents():null;if(n)for(var a=0;a<n.length;a++){var i=n[a];if(!e(i))return!1}return!0}function Rg(r){var e=r.ok,t=r.edgeOkViaNode||r.ok,n=r.parentOk||r.ok;return function(){var a=this.cy();if(!a.styleEnabled())return!0;var i=this[0],o=a.hasCompoundNodes();if(i){var s=i._private;if(!e(i))return!1;if(i.isNode())return!o||uc(i,n);var u=s.source,l=s.target;return t(u)&&(!o||uc(u,t))&&(u===l||t(l)&&(!o||uc(l,t)))}}}var ji=wu("eleTakesUpSpace",function(r){return r.pstyle("display").value==="element"&&r.width()!==0&&(r.isNode()?r.height()!==0:!0)});Pr.takesUpSpace=_u("takesUpSpace",Rg({ok:ji}));var JO=wu("eleInteractive",function(r){return r.pstyle("events").value==="yes"&&r.pstyle("visibility").value==="visible"&&ji(r)}),eD=wu("parentInteractive",function(r){return r.pstyle("visibility").value==="visible"&&ji(r)});Pr.interactive=_u("interactive",Rg({ok:JO,parentOk:eD,edgeOkViaNode:ji}));Pr.noninteractive=function(){var r=this[0];if(r)return!r.interactive()};var tD=wu("eleVisible",function(r){return r.pstyle("visibility").value==="visible"&&r.pstyle("opacity").pfValue!==0&&ji(r)}),rD=ji;Pr.visible=_u("visible",Rg({ok:tD,edgeOkViaNode:rD}));Pr.hidden=function(){var r=this[0];if(r)return!r.visible()};Pr.isBundledBezier=_u("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});Pr.bypass=Pr.css=Pr.style;Pr.renderedCss=Pr.renderedStyle;Pr.removeBypass=Pr.removeCss=Pr.removeStyle;Pr.pstyle=Pr.parsedStyle;var ba={};function ym(r){return function(){var e=arguments,t=[];if(e.length===2){var n=e[0],a=e[1];this.on(r.event,n,a)}else if(e.length===1&&rr(e[0])){var i=e[0];this.on(r.event,i)}else if(e.length===0||e.length===1&&zt(e[0])){for(var o=e.length===1?e[0]:null,s=0;s<this.length;s++){var u=this[s],l=!r.ableField||u._private[r.ableField],c=u._private[r.field]!=r.value;if(r.overrideAble){var f=r.overrideAble(u);if(f!==void 0&&(l=f,!f))return this}l&&(u._private[r.field]=r.value,c&&t.push(u))}var d=this.spawn(t);d.updateStyle(),d.emit(r.event),o&&d.emit(o)}return this}}function Wi(r){ba[r.field]=function(){var e=this[0];if(e){if(r.overrideField){var t=r.overrideField(e);if(t!==void 0)return t}return e._private[r.field]}},ba[r.on]=ym({event:r.on,field:r.field,ableField:r.ableField,overrideAble:r.overrideAble,value:!0}),ba[r.off]=ym({event:r.off,field:r.field,ableField:r.ableField,overrideAble:r.overrideAble,value:!1})}Wi({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});Wi({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});Wi({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});Wi({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});ba.deselect=ba.unselect;ba.grabbed=function(){var r=this[0];if(r)return r._private.grabbed};Wi({field:"active",on:"activate",off:"unactivate"});Wi({field:"pannable",on:"panify",off:"unpanify"});ba.inactive=function(){var r=this[0];if(r)return!r._private.active};var Ir={},mm=function(e){return function(n){for(var a=this,i=[],o=0;o<a.length;o++){var s=a[o];if(s.isNode()){for(var u=!1,l=s.connectedEdges(),c=0;c<l.length;c++){var f=l[c],d=f.source(),h=f.target();if(e.noIncomingEdges&&h===s&&d!==s||e.noOutgoingEdges&&d===s&&h!==s){u=!0;break}}u||i.push(s)}}return this.spawn(i,!0).filter(n)}},bm=function(e){return function(t){for(var n=this,a=[],i=0;i<n.length;i++){var o=n[i];if(o.isNode())for(var s=o.connectedEdges(),u=0;u<s.length;u++){var l=s[u],c=l.source(),f=l.target();e.outgoing&&c===o?(a.push(l),a.push(f)):e.incoming&&f===o&&(a.push(l),a.push(c))}}return this.spawn(a,!0).filter(t)}},wm=function(e){return function(t){for(var n=this,a=[],i={};;){var o=e.outgoing?n.outgoers():n.incomers();if(o.length===0)break;for(var s=!1,u=0;u<o.length;u++){var l=o[u],c=l.id();i[c]||(i[c]=!0,a.push(l),s=!0)}if(!s)break;n=o}return this.spawn(a,!0).filter(t)}};Ir.clearTraversalCache=function(){for(var r=0;r<this.length;r++)this[r]._private.traversalCache=null};rt(Ir,{roots:mm({noIncomingEdges:!0}),leaves:mm({noOutgoingEdges:!0}),outgoers:on(bm({outgoing:!0}),"outgoers"),successors:wm({outgoing:!0}),incomers:on(bm({incoming:!0}),"incomers"),predecessors:wm({incoming:!0})});rt(Ir,{neighborhood:on(function(r){for(var e=[],t=this.nodes(),n=0;n<t.length;n++)for(var a=t[n],i=a.connectedEdges(),o=0;o<i.length;o++){var s=i[o],u=s.source(),l=s.target(),c=a===u?l:u;c.length>0&&e.push(c[0]),e.push(s[0])}return this.spawn(e,!0).filter(r)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});Ir.neighbourhood=Ir.neighborhood;Ir.closedNeighbourhood=Ir.closedNeighborhood;Ir.openNeighbourhood=Ir.openNeighborhood;rt(Ir,{source:on(function(e){var t=this[0],n;return t&&(n=t._private.source||t.cy().collection()),n&&e?n.filter(e):n},"source"),target:on(function(e){var t=this[0],n;return t&&(n=t._private.target||t.cy().collection()),n&&e?n.filter(e):n},"target"),sources:_m({attr:"source"}),targets:_m({attr:"target"})});function _m(r){return function(t){for(var n=[],a=0;a<this.length;a++){var i=this[a],o=i._private[r.attr];o&&n.push(o)}return this.spawn(n,!0).filter(t)}}rt(Ir,{edgesWith:on(xm(),"edgesWith"),edgesTo:on(xm({thisIsSrc:!0}),"edgesTo")});function xm(r){return function(t){var n=[],a=this._private.cy,i=r||{};Qe(t)&&(t=a.$(t));for(var o=0;o<t.length;o++)for(var s=t[o]._private.edges,u=0;u<s.length;u++){var l=s[u],c=l._private.data,f=this.hasElementWithId(c.source)&&t.hasElementWithId(c.target),d=t.hasElementWithId(c.source)&&this.hasElementWithId(c.target),h=f||d;h&&((i.thisIsSrc||i.thisIsTgt)&&(i.thisIsSrc&&!f||i.thisIsTgt&&!d)||n.push(l))}return this.spawn(n,!0)}}rt(Ir,{connectedEdges:on(function(r){for(var e=[],t=this,n=0;n<t.length;n++){var a=t[n];if(a.isNode())for(var i=a._private.edges,o=0;o<i.length;o++){var s=i[o];e.push(s)}}return this.spawn(e,!0).filter(r)},"connectedEdges"),connectedNodes:on(function(r){for(var e=[],t=this,n=0;n<t.length;n++){var a=t[n];a.isEdge()&&(e.push(a.source()[0]),e.push(a.target()[0]))}return this.spawn(e,!0).filter(r)},"connectedNodes"),parallelEdges:on(Sm(),"parallelEdges"),codirectedEdges:on(Sm({codirected:!0}),"codirectedEdges")});function Sm(r){var e={codirected:!1};return r=rt({},e,r),function(n){for(var a=[],i=this.edges(),o=r,s=0;s<i.length;s++)for(var u=i[s],l=u._private,c=l.source,f=c._private.data.id,d=l.data.target,h=c._private.edges,v=0;v<h.length;v++){var m=h[v],_=m._private.data,b=_.target,w=_.source,y=b===d&&w===f,x=f===b&&d===w;(o.codirected&&y||!o.codirected&&(y||x))&&a.push(m)}return this.spawn(a,!0).filter(n)}}rt(Ir,{components:function(e){var t=this,n=t.cy(),a=n.collection(),i=e==null?t.nodes():e.nodes(),o=[];e!=null&&i.empty()&&(i=e.sources());var s=function(c,f){a.merge(c),i.unmerge(c),f.merge(c)};if(i.empty())return t.spawn();var u=function(){var c=n.collection();o.push(c);var f=i[0];s(f,c),t.bfs({directed:!1,roots:f,visit:function(h){return s(h,c)}}),c.forEach(function(d){d.connectedEdges().forEach(function(h){t.has(h)&&c.has(h.source())&&c.has(h.target())&&c.merge(h)})})};do u();while(i.length>0);return o},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}});Ir.componentsOf=Ir.components;var Ar=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e===void 0){ar("A collection must have a reference to the core");return}var i=new Rn,o=!1;if(!t)t=[];else if(t.length>0&&Et(t[0])&&!Wo(t[0])){o=!0;for(var s=[],u=new Gi,l=0,c=t.length;l<c;l++){var f=t[l];f.data==null&&(f.data={});var d=f.data;if(d.id==null)d.id=lS();else if(e.hasElementWithId(d.id)||u.has(d.id))continue;var h=new du(e,f,!1);s.push(h),u.add(d.id)}t=s}this.length=0;for(var v=0,m=t.length;v<m;v++){var _=t[v][0];if(_!=null){var b=_._private.data.id;(!n||!i.has(b))&&(n&&i.set(b,{index:this.length,ele:_}),this[this.length]=_,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(w){this.lazyMap=w},rebuildMap:function(){for(var y=this.lazyMap=new Rn,x=this.eles,C=0;C<x.length;C++){var E=x[C];y.set(E.id(),{index:C,ele:E})}}},n&&(this._private.map=i),o&&!a&&this.restore()},Vt=du.prototype=Ar.prototype=Object.create(Array.prototype);Vt.instanceString=function(){return"collection"};Vt.spawn=function(r,e){return new Ar(this.cy(),r,e)};Vt.spawnSelf=function(){return this.spawn(this)};Vt.cy=function(){return this._private.cy};Vt.renderer=function(){return this._private.cy.renderer()};Vt.element=function(){return this[0]};Vt.collection=function(){return Yx(this)?this:new Ar(this._private.cy,[this])};Vt.unique=function(){return new Ar(this._private.cy,this,!0)};Vt.hasElementWithId=function(r){return r=""+r,this._private.map.has(r)};Vt.getElementById=function(r){r=""+r;var e=this._private.cy,t=this._private.map.get(r);return t?t.ele:new Ar(e)};Vt.$id=Vt.getElementById;Vt.poolIndex=function(){var r=this._private.cy,e=r._private.elements,t=this[0]._private.data.id;return e._private.map.get(t).index};Vt.indexOf=function(r){var e=r[0]._private.data.id;return this._private.map.get(e).index};Vt.indexOfId=function(r){return r=""+r,this._private.map.get(r).index};Vt.json=function(r){var e=this.element(),t=this.cy();if(e==null&&r)return this;if(e!=null){var n=e._private;if(Et(r)){if(t.startBatch(),r.data){e.data(r.data);var a=n.data;if(e.isEdge()){var i=!1,o={},s=r.data.source,u=r.data.target;s!=null&&s!=a.source&&(o.source=""+s,i=!0),u!=null&&u!=a.target&&(o.target=""+u,i=!0),i&&(e=e.move(o))}else{var l="parent"in r.data,c=r.data.parent;l&&(c!=null||a.parent!=null)&&c!=a.parent&&(c===void 0&&(c=null),c!=null&&(c=""+c),e=e.move({parent:c}))}}r.position&&e.position(r.position);var f=function(m,_,b){var w=r[m];w!=null&&w!==n[m]&&(w?e[_]():e[b]())};return f("removed","remove","restore"),f("selected","select","unselect"),f("selectable","selectify","unselectify"),f("locked","lock","unlock"),f("grabbable","grabify","ungrabify"),f("pannable","panify","unpanify"),r.classes!=null&&e.classes(r.classes),t.endBatch(),this}else if(r===void 0){var d={data:Dn(n.data),position:Dn(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:null};d.classes="";var h=0;return n.classes.forEach(function(v){return d.classes+=h++===0?v:" "+v}),d}}};Vt.jsons=function(){for(var r=[],e=0;e<this.length;e++){var t=this[e],n=t.json();r.push(n)}return r};Vt.clone=function(){for(var r=this.cy(),e=[],t=0;t<this.length;t++){var n=this[t],a=n.json(),i=new du(r,a,!1);e.push(i)}return new Ar(r,e)};Vt.copy=Vt.clone;Vt.restore=function(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this,n=t.cy(),a=n._private,i=[],o=[],s,u=0,l=t.length;u<l;u++){var c=t[u];e&&!c.removed()||(c.isNode()?i.push(c):o.push(c))}s=i.concat(o);var f,d=function(){s.splice(f,1),f--};for(f=0;f<s.length;f++){var h=s[f],v=h._private,m=v.data;if(h.clearTraversalCache(),!(!e&&!v.removed)){if(m.id===void 0)m.id=lS();else if(Ge(m.id))m.id=""+m.id;else if(wa(m.id)||!Qe(m.id)){ar("Can not create element with invalid string ID `"+m.id+"`"),d();continue}else if(n.hasElementWithId(m.id)){ar("Can not create second element with ID `"+m.id+"`"),d();continue}}var _=m.id;if(h.isNode()){var b=v.position;b.x==null&&(b.x=0),b.y==null&&(b.y=0)}if(h.isEdge()){for(var w=h,y=["source","target"],x=y.length,C=!1,E=0;E<x;E++){var p=y[E],P=m[p];Ge(P)&&(P=m[p]=""+m[p]),P==null||P===""?(ar("Can not create edge `"+_+"` with unspecified "+p),C=!0):n.hasElementWithId(P)||(ar("Can not create edge `"+_+"` with nonexistant "+p+" `"+P+"`"),C=!0)}if(C){d();continue}var T=n.getElementById(m.source),R=n.getElementById(m.target);T.same(R)?T._private.edges.push(w):(T._private.edges.push(w),R._private.edges.push(w)),w._private.source=T,w._private.target=R}v.map=new Rn,v.map.set(_,{ele:h,index:0}),v.removed=!1,e&&n.addToPool(h)}for(var M=0;M<i.length;M++){var N=i[M],B=N._private.data;Ge(B.parent)&&(B.parent=""+B.parent);var q=B.parent,Z=q!=null;if(Z||N._private.parent){var Q=N._private.parent?n.collection().merge(N._private.parent):n.getElementById(q);if(Q.empty())B.parent=void 0;else if(Q[0].removed())Mt("Node added with missing parent, reference to parent removed"),B.parent=void 0,N._private.parent=null;else{for(var Y=!1,J=Q;!J.empty();){if(N.same(J)){Y=!0,B.parent=void 0;break}J=J.parent()}Y||(Q[0]._private.children.push(N),N._private.parent=Q[0],a.hasCompoundNodes=!0)}}}if(s.length>0){for(var X=s.length===t.length?t:new Ar(n,s),k=0;k<X.length;k++){var D=X[k];D.isNode()||(D.parallelEdges().clearTraversalCache(),D.source().clearTraversalCache(),D.target().clearTraversalCache())}var I;a.hasCompoundNodes?I=n.collection().merge(X).merge(X.connectedNodes()).merge(X.parent()):I=X,I.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(r),r?X.emitAndNotify("add"):e&&X.emit("add")}return t};Vt.removed=function(){var r=this[0];return r&&r._private.removed};Vt.inside=function(){var r=this[0];return r&&!r._private.removed};Vt.remove=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this,n=[],a={},i=t._private.cy;function o(q){for(var Z=q._private.edges,Q=0;Q<Z.length;Q++)u(Z[Q])}function s(q){for(var Z=q._private.children,Q=0;Q<Z.length;Q++)u(Z[Q])}function u(q){var Z=a[q.id()];e&&q.removed()||Z||(a[q.id()]=!0,q.isNode()?(n.push(q),o(q),s(q)):n.unshift(q))}for(var l=0,c=t.length;l<c;l++){var f=t[l];u(f)}function d(q,Z){var Q=q._private.edges;_a(Q,Z),q.clearTraversalCache()}function h(q){q.clearTraversalCache()}var v=[];v.ids={};function m(q,Z){Z=Z[0],q=q[0];var Q=q._private.children,Y=q.id();_a(Q,Z),Z._private.parent=null,v.ids[Y]||(v.ids[Y]=!0,v.push(q))}t.dirtyCompoundBoundsCache(),e&&i.removeFromPool(n);for(var _=0;_<n.length;_++){var b=n[_];if(b.isEdge()){var w=b.source()[0],y=b.target()[0];d(w,b),d(y,b);for(var x=b.parallelEdges(),C=0;C<x.length;C++){var E=x[C];h(E),E.isBundledBezier()&&E.dirtyBoundingBoxCache()}}else{var p=b.parent();p.length!==0&&m(p,b)}e&&(b._private.removed=!0)}var P=i._private.elements;i._private.hasCompoundNodes=!1;for(var T=0;T<P.length;T++){var R=P[T];if(R.isParent()){i._private.hasCompoundNodes=!0;break}}var M=new Ar(this.cy(),n);M.size()>0&&(r?M.emitAndNotify("remove"):e&&M.emit("remove"));for(var N=0;N<v.length;N++){var B=v[N];(!e||!B.removed())&&B.updateStyle()}return M};Vt.move=function(r){var e=this._private.cy,t=this,n=!1,a=!1,i=function(v){return v==null?v:""+v};if(r.source!==void 0||r.target!==void 0){var o=i(r.source),s=i(r.target),u=o!=null&&e.hasElementWithId(o),l=s!=null&&e.hasElementWithId(s);(u||l)&&(e.batch(function(){t.remove(n,a),t.emitAndNotify("moveout");for(var h=0;h<t.length;h++){var v=t[h],m=v._private.data;v.isEdge()&&(u&&(m.source=o),l&&(m.target=s))}t.restore(n,a)}),t.emitAndNotify("move"))}else if(r.parent!==void 0){var c=i(r.parent),f=c===null||e.hasElementWithId(c);if(f){var d=c===null?void 0:c;e.batch(function(){var h=t.remove(n,a);h.emitAndNotify("moveout");for(var v=0;v<t.length;v++){var m=t[v],_=m._private.data;m.isNode()&&(_.parent=d)}h.restore(n,a)}),t.emitAndNotify("move")}}return this};[xS,hO,Bs,ma,Fi,kO,mu,HO,WS,KS,XO,Qs,qs,Pr,ba,Ir].forEach(function(r){rt(Vt,r)});var nD={add:function(e){var t,n=this;if(Zr(e)){var a=e;if(a._private.cy===n)t=a.restore();else{for(var i=[],o=0;o<a.length;o++){var s=a[o];i.push(s.json())}t=new Ar(n,i)}}else if(zt(e)){var u=e;t=new Ar(n,u)}else if(Et(e)&&(zt(e.nodes)||zt(e.edges))){for(var l=e,c=[],f=["nodes","edges"],d=0,h=f.length;d<h;d++){var v=f[d],m=l[v];if(zt(m))for(var _=0,b=m.length;_<b;_++){var w=rt({group:v},m[_]);c.push(w)}}t=new Ar(n,c)}else{var y=e;t=new du(n,y).collection()}return t},remove:function(e){if(!Zr(e)){if(Qe(e)){var t=e;e=this.$(t)}}return e.remove()}};/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function aD(r,e,t,n){var a=4,i=.001,o=1e-7,s=10,u=11,l=1/(u-1),c=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var f=0;f<4;++f)if(typeof arguments[f]!="number"||isNaN(arguments[f])||!isFinite(arguments[f]))return!1;r=Math.min(r,1),t=Math.min(t,1),r=Math.max(r,0),t=Math.max(t,0);var d=c?new Float32Array(u):new Array(u);function h(R,M){return 1-3*M+3*R}function v(R,M){return 3*M-6*R}function m(R){return 3*R}function _(R,M,N){return((h(M,N)*R+v(M,N))*R+m(M))*R}function b(R,M,N){return 3*h(M,N)*R*R+2*v(M,N)*R+m(M)}function w(R,M){for(var N=0;N<a;++N){var B=b(M,r,t);if(B===0)return M;var q=_(M,r,t)-R;M-=q/B}return M}function y(){for(var R=0;R<u;++R)d[R]=_(R*l,r,t)}function x(R,M,N){var B,q,Z=0;do q=M+(N-M)/2,B=_(q,r,t)-R,B>0?N=q:M=q;while(Math.abs(B)>o&&++Z<s);return q}function C(R){for(var M=0,N=1,B=u-1;N!==B&&d[N]<=R;++N)M+=l;--N;var q=(R-d[N])/(d[N+1]-d[N]),Z=M+q*l,Q=b(Z,r,t);return Q>=i?w(R,Z):Q===0?Z:x(R,M,M+l)}var E=!1;function p(){E=!0,(r!==e||t!==n)&&y()}var P=function(M){return E||p(),r===e&&t===n?M:M===0?0:M===1?1:_(C(M),e,n)};P.getControlPoints=function(){return[{x:r,y:e},{x:t,y:n}]};var T="generateBezier("+[r,e,t,n]+")";return P.toString=function(){return T},P}/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var iD=function(){function r(n){return-n.tension*n.x-n.friction*n.v}function e(n,a,i){var o={x:n.x+i.dx*a,v:n.v+i.dv*a,tension:n.tension,friction:n.friction};return{dx:o.v,dv:r(o)}}function t(n,a){var i={dx:n.v,dv:r(n)},o=e(n,a*.5,i),s=e(n,a*.5,o),u=e(n,a,s),l=1/6*(i.dx+2*(o.dx+s.dx)+u.dx),c=1/6*(i.dv+2*(o.dv+s.dv)+u.dv);return n.x=n.x+l*a,n.v=n.v+c*a,n}return function n(a,i,o){var s={x:-1,v:0,tension:null,friction:null},u=[0],l=0,c=1/1e4,f=16/1e3,d,h,v;for(a=parseFloat(a)||500,i=parseFloat(i)||20,o=o||null,s.tension=a,s.friction=i,d=o!==null,d?(l=n(a,i),h=l/o*f):h=f;v=t(v||s,h),u.push(1+v.x),l+=16,Math.abs(v.x)>c&&Math.abs(v.v)>c;);return d?function(m){return u[m*(u.length-1)|0]}:l}}(),$t=function(e,t,n,a){var i=aD(e,t,n,a);return function(o,s,u){return o+(s-o)*i(u)}},zs={linear:function(e,t,n){return e+(t-e)*n},ease:$t(.25,.1,.25,1),"ease-in":$t(.42,0,1,1),"ease-out":$t(0,0,.58,1),"ease-in-out":$t(.42,0,.58,1),"ease-in-sine":$t(.47,0,.745,.715),"ease-out-sine":$t(.39,.575,.565,1),"ease-in-out-sine":$t(.445,.05,.55,.95),"ease-in-quad":$t(.55,.085,.68,.53),"ease-out-quad":$t(.25,.46,.45,.94),"ease-in-out-quad":$t(.455,.03,.515,.955),"ease-in-cubic":$t(.55,.055,.675,.19),"ease-out-cubic":$t(.215,.61,.355,1),"ease-in-out-cubic":$t(.645,.045,.355,1),"ease-in-quart":$t(.895,.03,.685,.22),"ease-out-quart":$t(.165,.84,.44,1),"ease-in-out-quart":$t(.77,0,.175,1),"ease-in-quint":$t(.755,.05,.855,.06),"ease-out-quint":$t(.23,1,.32,1),"ease-in-out-quint":$t(.86,0,.07,1),"ease-in-expo":$t(.95,.05,.795,.035),"ease-out-expo":$t(.19,1,.22,1),"ease-in-out-expo":$t(1,0,0,1),"ease-in-circ":$t(.6,.04,.98,.335),"ease-out-circ":$t(.075,.82,.165,1),"ease-in-out-circ":$t(.785,.135,.15,.86),spring:function(e,t,n){if(n===0)return zs.linear;var a=iD(e,t,n);return function(i,o,s){return i+(o-i)*a(s)}},"cubic-bezier":$t};function Cm(r,e,t,n,a){if(n===1||e===t)return t;var i=a(e,t,n);return r==null||((r.roundValue||r.color)&&(i=Math.round(i)),r.min!==void 0&&(i=Math.max(i,r.min)),r.max!==void 0&&(i=Math.min(i,r.max))),i}function Em(r,e){return r.pfValue!=null||r.value!=null?r.pfValue!=null&&(e==null||e.type.units!=="%")?r.pfValue:r.value:r}function bi(r,e,t,n,a){var i=a!=null?a.type:null;t<0?t=0:t>1&&(t=1);var o=Em(r,a),s=Em(e,a);if(Ge(o)&&Ge(s))return Cm(i,o,s,t,n);if(zt(o)&&zt(s)){for(var u=[],l=0;l<s.length;l++){var c=o[l],f=s[l];if(c!=null&&f!=null){var d=Cm(i,c,f,t,n);u.push(d)}else u.push(f)}return u}}function oD(r,e,t,n){var a=!n,i=r._private,o=e._private,s=o.easing,u=o.startTime,l=n?r:r.cy(),c=l.style();if(!o.easingImpl)if(s==null)o.easingImpl=zs.linear;else{var f;if(Qe(s)){var d=c.parse("transition-timing-function",s);f=d.value}else f=s;var h,v;Qe(f)?(h=f,v=[]):(h=f[1],v=f.slice(2).map(function(X){return+X})),v.length>0?(h==="spring"&&v.push(o.duration),o.easingImpl=zs[h].apply(null,v)):o.easingImpl=zs[h]}var m=o.easingImpl,_;if(o.duration===0?_=1:_=(t-u)/o.duration,o.applying&&(_=o.progress),_<0?_=0:_>1&&(_=1),o.delay==null){var b=o.startPosition,w=o.position;if(w&&a&&!r.locked()){var y={};mo(b.x,w.x)&&(y.x=bi(b.x,w.x,_,m)),mo(b.y,w.y)&&(y.y=bi(b.y,w.y,_,m)),r.position(y)}var x=o.startPan,C=o.pan,E=i.pan,p=C!=null&&n;p&&(mo(x.x,C.x)&&(E.x=bi(x.x,C.x,_,m)),mo(x.y,C.y)&&(E.y=bi(x.y,C.y,_,m)),r.emit("pan"));var P=o.startZoom,T=o.zoom,R=T!=null&&n;R&&(mo(P,T)&&(i.zoom=Fo(i.minZoom,bi(P,T,_,m),i.maxZoom)),r.emit("zoom")),(p||R)&&r.emit("viewport");var M=o.style;if(M&&M.length>0&&a){for(var N=0;N<M.length;N++){var B=M[N],q=B.name,Z=B,Q=o.startStyle[q],Y=c.properties[Q.name],J=bi(Q,Z,_,m,Y);c.overrideBypass(r,q,J)}r.emit("style")}}return o.progress=_,_}function mo(r,e){return r==null||e==null?!1:Ge(r)&&Ge(e)?!0:!!(r&&e)}function sD(r,e,t,n){var a=e._private;a.started=!0,a.startTime=t-a.progress*a.duration}function Tm(r,e){var t=e._private.aniEles,n=[];function a(c,f){var d=c._private,h=d.animation.current,v=d.animation.queue,m=!1;if(h.length===0){var _=v.shift();_&&h.push(_)}for(var b=function(E){for(var p=E.length-1;p>=0;p--){var P=E[p];P()}E.splice(0,E.length)},w=h.length-1;w>=0;w--){var y=h[w],x=y._private;if(x.stopped){h.splice(w,1),x.hooked=!1,x.playing=!1,x.started=!1,b(x.frames);continue}!x.playing&&!x.applying||(x.playing&&x.applying&&(x.applying=!1),x.started||sD(c,y,r),oD(c,y,r,f),x.applying&&(x.applying=!1),b(x.frames),x.step!=null&&x.step(r),y.completed()&&(h.splice(w,1),x.hooked=!1,x.playing=!1,x.started=!1,b(x.completes)),m=!0)}return!f&&h.length===0&&v.length===0&&n.push(c),m}for(var i=!1,o=0;o<t.length;o++){var s=t[o],u=a(s);i=i||u}var l=a(e,!0);(i||l)&&(t.length>0?e.notify("draw",t):e.notify("draw")),t.unmerge(n),e.emit("step")}var uD={animate:kt.animate(),animation:kt.animation(),animated:kt.animated(),clearQueue:kt.clearQueue(),delay:kt.delay(),delayAnimation:kt.delayAnimation(),stop:kt.stop(),addToAnimationPool:function(e){var t=this;t.styleEnabled()&&t._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function t(){e._private.animationsRunning&&Ws(function(i){Tm(i,e),t()})}var n=e.renderer();n&&n.beforeRender?n.beforeRender(function(i,o){Tm(o,e)},n.beforeRenderPriorities.animations):t()}},lD={qualifierCompare:function(e,t){return e==null||t==null?e==null&&t==null:e.sameText(t)},eventMatches:function(e,t,n){var a=t.qualifier;return a!=null?e!==n.target&&Wo(n.target)&&a.matches(n.target):!0},addEventFields:function(e,t){t.cy=e,t.target=e},callbackContext:function(e,t,n){return t.qualifier!=null?n.target:e}},Ts=function(e){return Qe(e)?new xa(e):e},ZS={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new bu(lD,this)),this},emitter:function(){return this._private.emitter},on:function(e,t,n){return this.emitter().on(e,Ts(t),n),this},removeListener:function(e,t,n){return this.emitter().removeListener(e,Ts(t),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,t,n){return this.emitter().one(e,Ts(t),n),this},once:function(e,t,n){return this.emitter().one(e,Ts(t),n),this},emit:function(e,t){return this.emitter().emit(e,t),this},emitAndNotify:function(e,t){return this.emit(e),this.notify(e,t),this}};kt.eventAliasesOn(ZS);var Qp={png:function(e){var t=this._private.renderer;return e=e||{},t.png(e)},jpg:function(e){var t=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",t.jpg(e)}};Qp.jpeg=Qp.jpg;var Gs={layout:function(e){var t=this;if(e==null){ar("Layout options must be specified to make a layout");return}if(e.name==null){ar("A `name` must be specified to make a layout");return}var n=e.name,a=t.extension("layout",n);if(a==null){ar("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var i;Qe(e.eles)?i=t.$(e.eles):i=e.eles!=null?e.eles:t.$();var o=new a(rt({},e,{cy:t,eles:i}));return o}};Gs.createLayout=Gs.makeLayout=Gs.layout;var cD={notify:function(e,t){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var a=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();t!=null&&a.merge(t);return}if(n.notificationsEnabled){var i=this.renderer();this.destroyed()||!i||i.notify(e,t)}},notifications:function(e){var t=this._private;return e===void 0?t.notificationsEnabled:(t.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var t=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var a=e.batchNotifications[n];a.empty()?t.notify(n):t.notify(n,a)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var t=this;return this.batch(function(){for(var n=Object.keys(e),a=0;a<n.length;a++){var i=n[a],o=e[i],s=t.getElementById(i);s.data(o)}})}},fD=kr({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),Jp={renderTo:function(e,t,n,a){var i=this._private.renderer;return i.renderTo(e,t,n,a),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var t=this,n=t.extension("renderer",e.name);if(n==null){ar("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&Mt("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var a=fD(e);a.cy=t,t._private.renderer=new n(a),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var t=e.container();if(t)for(t._cyreg=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(n){var a=n._private;a.rscratch={},a.rstyle={},a.animation.current=[],a.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};Jp.invalidateDimensions=Jp.resize;var $s={collection:function(e,t){return Qe(e)?this.$(e):Zr(e)?e.collection():zt(e)?(t||(t={}),new Ar(this,e,t.unique,t.removed)):new Ar(this)},nodes:function(e){var t=this.$(function(n){return n.isNode()});return e?t.filter(e):t},edges:function(e){var t=this.$(function(n){return n.isEdge()});return e?t.filter(e):t},$:function(e){var t=this._private.elements;return e?t.filter(e):t.spawnSelf()},mutableElements:function(){return this._private.elements}};$s.elements=$s.filter=$s.$;var Nr={},Oo="t",dD="f";Nr.apply=function(r){for(var e=this,t=e._private,n=t.cy,a=n.collection(),i=0;i<r.length;i++){var o=r[i],s=e.getContextMeta(o);if(!s.empty){var u=e.getContextStyle(s),l=e.applyContextStyle(s,u,o);o._private.appliedInitStyle?e.updateTransitions(o,l.diffProps):o._private.appliedInitStyle=!0;var c=e.updateStyleHints(o);c&&a.push(o)}}return a};Nr.getPropertiesDiff=function(r,e){var t=this,n=t._private.propDiffs=t._private.propDiffs||{},a=r+"-"+e,i=n[a];if(i)return i;for(var o=[],s={},u=0;u<t.length;u++){var l=t[u],c=r[u]===Oo,f=e[u]===Oo,d=c!==f,h=l.mappedProperties.length>0;if(d||f&&h){var v=void 0;d&&h||d?v=l.properties:h&&(v=l.mappedProperties);for(var m=0;m<v.length;m++){for(var _=v[m],b=_.name,w=!1,y=u+1;y<t.length;y++){var x=t[y],C=e[y]===Oo;if(C&&(w=x.properties[_.name]!=null,w))break}!s[b]&&!w&&(s[b]=!0,o.push(b))}}}return n[a]=o,o};Nr.getContextMeta=function(r){for(var e=this,t="",n,a=r._private.styleCxtKey||"",i=0;i<e.length;i++){var o=e[i],s=o.selector&&o.selector.matches(r);s?t+=Oo:t+=dD}return n=e.getPropertiesDiff(a,t),r._private.styleCxtKey=t,{key:t,diffPropNames:n,empty:n.length===0}};Nr.getContextStyle=function(r){var e=r.key,t=this,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var a={_private:{key:e}},i=0;i<t.length;i++){var o=t[i],s=e[i]===Oo;if(s)for(var u=0;u<o.properties.length;u++){var l=o.properties[u];a[l.name]=l}}return n[e]=a,a};Nr.applyContextStyle=function(r,e,t){for(var n=this,a=r.diffPropNames,i={},o=n.types,s=0;s<a.length;s++){var u=a[s],l=e[u],c=t.pstyle(u);if(!l)if(c)c.bypass?l={name:u,deleteBypassed:!0}:l={name:u,delete:!0};else continue;if(c!==l){if(l.mapped===o.fn&&c!=null&&c.mapping!=null&&c.mapping.value===l.value){var f=c.mapping,d=f.fnValue=l.value(t);if(d===f.prevFnValue)continue}var h=i[u]={prev:c};n.applyParsedProperty(t,l),h.next=t.pstyle(u),h.next&&h.next.bypass&&(h.next=h.next.bypassed)}}return{diffProps:i}};Nr.updateStyleHints=function(r){var e=r._private,t=this,n=t.propertyGroupNames,a=t.propertyGroupKeys,i=function(ge,Pe,Oe){return t.getPropertiesHash(ge,Pe,Oe)},o=e.styleKey;if(r.removed())return!1;var s=e.group==="nodes",u=r._private.style;n=Object.keys(u);for(var l=0;l<a.length;l++){var c=a[l];e.styleKeys[c]=[Ti,So]}for(var f=function(ge,Pe){return e.styleKeys[Pe][0]=Io(ge,e.styleKeys[Pe][0])},d=function(ge,Pe){return e.styleKeys[Pe][1]=Lo(ge,e.styleKeys[Pe][1])},h=function(ge,Pe){f(ge,Pe),d(ge,Pe)},v=function(ge,Pe){for(var Oe=0;Oe<ge.length;Oe++){var Se=ge.charCodeAt(Oe);f(Se,Pe),d(Se,Pe)}},m=2e9,_=function(ge){return-128<ge&&ge<128&&Math.floor(ge)!==ge?m-(ge*1024|0):ge},b=0;b<n.length;b++){var w=n[b],y=u[w];if(y!=null){var x=this.properties[w],C=x.type,E=x.groupKey,p=void 0;x.hashOverride!=null?p=x.hashOverride(r,y):y.pfValue!=null&&(p=y.pfValue);var P=x.enums==null?y.value:null,T=p!=null,R=P!=null,M=T||R,N=y.units;if(C.number&&M&&!C.multiple){var B=T?p:P;h(_(B),E),!T&&N!=null&&v(N,E)}else v(y.strValue,E)}}for(var q=[Ti,So],Z=0;Z<a.length;Z++){var Q=a[Z],Y=e.styleKeys[Q];q[0]=Io(Y[0],q[0]),q[1]=Lo(Y[1],q[1])}e.styleKey=yP(q[0],q[1]);var J=e.styleKeys;e.labelDimsKey=fa(J.labelDimensions);var X=i(r,["label"],J.labelDimensions);if(e.labelKey=fa(X),e.labelStyleKey=fa(ys(J.commonLabel,X)),!s){var k=i(r,["source-label"],J.labelDimensions);e.sourceLabelKey=fa(k),e.sourceLabelStyleKey=fa(ys(J.commonLabel,k));var D=i(r,["target-label"],J.labelDimensions);e.targetLabelKey=fa(D),e.targetLabelStyleKey=fa(ys(J.commonLabel,D))}if(s){var I=e.styleKeys,F=I.nodeBody,L=I.nodeBorder,H=I.nodeOutline,j=I.backgroundImage,W=I.compound,re=I.pie,se=[F,L,H,j,W,re].filter(function(ce){return ce!=null}).reduce(ys,[Ti,So]);e.nodeKey=fa(se),e.hasPie=re!=null&&re[0]!==Ti&&re[1]!==So}return o!==e.styleKey};Nr.clearStyleHints=function(r){var e=r._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null};Nr.applyParsedProperty=function(r,e){var t=this,n=e,a=r._private.style,i,o=t.types,s=t.properties[n.name].type,u=n.bypass,l=a[n.name],c=l&&l.bypass,f=r._private,d="mapping",h=function(F){return F==null?null:F.pfValue!=null?F.pfValue:F.value},v=function(){var F=h(l),L=h(n);t.checkTriggers(r,n.name,F,L)};if(e.name==="curve-style"&&r.isEdge()&&(e.value!=="bezier"&&r.isLoop()||e.value==="haystack"&&(r.source().isParent()||r.target().isParent()))&&(n=e=this.parse(e.name,"bezier",u)),n.delete)return a[n.name]=void 0,v(),!0;if(n.deleteBypassed)return l?l.bypass?(l.bypassed=void 0,v(),!0):!1:(v(),!0);if(n.deleteBypass)return l?l.bypass?(a[n.name]=l.bypassed,v(),!0):!1:(v(),!0);var m=function(){Mt("Do not assign mappings to elements without corresponding data (i.e. ele `"+r.id()+"` has no mapping for property `"+n.name+"` with data field `"+n.field+"`); try a `["+n.field+"]` selector to limit scope to elements with `"+n.field+"` defined")};switch(n.mapped){case o.mapData:{for(var _=n.field.split("."),b=f.data,w=0;w<_.length&&b;w++){var y=_[w];b=b[y]}if(b==null)return m(),!1;var x;if(Ge(b)){var C=n.fieldMax-n.fieldMin;C===0?x=0:x=(b-n.fieldMin)/C}else return Mt("Do not use continuous mappers without specifying numeric data (i.e. `"+n.field+": "+b+"` for `"+r.id()+"` is non-numeric)"),!1;if(x<0?x=0:x>1&&(x=1),s.color){var E=n.valueMin[0],p=n.valueMax[0],P=n.valueMin[1],T=n.valueMax[1],R=n.valueMin[2],M=n.valueMax[2],N=n.valueMin[3]==null?1:n.valueMin[3],B=n.valueMax[3]==null?1:n.valueMax[3],q=[Math.round(E+(p-E)*x),Math.round(P+(T-P)*x),Math.round(R+(M-R)*x),Math.round(N+(B-N)*x)];i={bypass:n.bypass,name:n.name,value:q,strValue:"rgb("+q[0]+", "+q[1]+", "+q[2]+")"}}else if(s.number){var Z=n.valueMin+(n.valueMax-n.valueMin)*x;i=this.parse(n.name,Z,n.bypass,d)}else return!1;if(!i)return m(),!1;i.mapping=n,n=i;break}case o.data:{for(var Q=n.field.split("."),Y=f.data,J=0;J<Q.length&&Y;J++){var X=Q[J];Y=Y[X]}if(Y!=null&&(i=this.parse(n.name,Y,n.bypass,d)),!i)return m(),!1;i.mapping=n,n=i;break}case o.fn:{var k=n.value,D=n.fnValue!=null?n.fnValue:k(r);if(n.prevFnValue=D,D==null)return Mt("Custom function mappers may not return null (i.e. `"+n.name+"` for ele `"+r.id()+"` is null)"),!1;if(i=this.parse(n.name,D,n.bypass,d),!i)return Mt("Custom function mappers may not return invalid values for the property type (i.e. `"+n.name+"` for ele `"+r.id()+"` is invalid)"),!1;i.mapping=Dn(n),n=i;break}case void 0:break;default:return!1}return u?(c?n.bypassed=l.bypassed:n.bypassed=l,a[n.name]=n):c?l.bypassed=n:a[n.name]=n,v(),!0};Nr.cleanElements=function(r,e){for(var t=0;t<r.length;t++){var n=r[t];if(this.clearStyleHints(n),n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),!e)n._private.style={};else for(var a=n._private.style,i=Object.keys(a),o=0;o<i.length;o++){var s=i[o],u=a[s];u!=null&&(u.bypass?u.bypassed=null:a[s]=null)}}};Nr.update=function(){var r=this._private.cy,e=r.mutableElements();e.updateStyle()};Nr.updateTransitions=function(r,e){var t=this,n=r._private,a=r.pstyle("transition-property").value,i=r.pstyle("transition-duration").pfValue,o=r.pstyle("transition-delay").pfValue;if(a.length>0&&i>0){for(var s={},u=!1,l=0;l<a.length;l++){var c=a[l],f=r.pstyle(c),d=e[c];if(d){var h=d.prev,v=h,m=d.next!=null?d.next:f,_=!1,b=void 0,w=1e-6;v&&(Ge(v.pfValue)&&Ge(m.pfValue)?(_=m.pfValue-v.pfValue,b=v.pfValue+w*_):Ge(v.value)&&Ge(m.value)?(_=m.value-v.value,b=v.value+w*_):zt(v.value)&&zt(m.value)&&(_=v.value[0]!==m.value[0]||v.value[1]!==m.value[1]||v.value[2]!==m.value[2],b=v.strValue),_&&(s[c]=m.strValue,this.applyBypass(r,c,b),u=!0))}}if(!u)return;n.transitioning=!0,new $i(function(y){o>0?r.delayAnimation(o).play().promise().then(y):y()}).then(function(){return r.animation({style:s,duration:i,easing:r.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){t.removeBypasses(r,a),r.emitAndNotify("style"),n.transitioning=!1})}else n.transitioning&&(this.removeBypasses(r,a),r.emitAndNotify("style"),n.transitioning=!1)};Nr.checkTrigger=function(r,e,t,n,a,i){var o=this.properties[e],s=a(o);s!=null&&s(t,n)&&i(o)};Nr.checkZOrderTrigger=function(r,e,t,n){var a=this;this.checkTrigger(r,e,t,n,function(i){return i.triggersZOrder},function(){a._private.cy.notify("zorder",r)})};Nr.checkBoundsTrigger=function(r,e,t,n){this.checkTrigger(r,e,t,n,function(a){return a.triggersBounds},function(a){r.dirtyCompoundBoundsCache(),r.dirtyBoundingBoxCache(),a.triggersBoundsOfParallelBeziers&&e==="curve-style"&&(t==="bezier"||n==="bezier")&&r.parallelEdges().forEach(function(i){i.isBundledBezier()&&i.dirtyBoundingBoxCache()}),a.triggersBoundsOfConnectedEdges&&e==="display"&&(t==="none"||n==="none")&&r.connectedEdges().forEach(function(i){i.dirtyBoundingBoxCache()})})};Nr.checkTriggers=function(r,e,t,n){r.dirtyStyleCache(),this.checkZOrderTrigger(r,e,t,n),this.checkBoundsTrigger(r,e,t,n)};var Zo={};Zo.applyBypass=function(r,e,t,n){var a=this,i=[],o=!0;if(e==="*"||e==="**"){if(t!==void 0)for(var s=0;s<a.properties.length;s++){var u=a.properties[s],l=u.name,c=this.parse(l,t,!0);c&&i.push(c)}}else if(Qe(e)){var f=this.parse(e,t,!0);f&&i.push(f)}else if(Et(e)){var d=e;n=t;for(var h=Object.keys(d),v=0;v<h.length;v++){var m=h[v],_=d[m];if(_===void 0&&(_=d[lu(m)]),_!==void 0){var b=this.parse(m,_,!0);b&&i.push(b)}}}else return!1;if(i.length===0)return!1;for(var w=!1,y=0;y<r.length;y++){for(var x=r[y],C={},E=void 0,p=0;p<i.length;p++){var P=i[p];if(n){var T=x.pstyle(P.name);E=C[P.name]={prev:T}}w=this.applyParsedProperty(x,Dn(P))||w,n&&(E.next=x.pstyle(P.name))}w&&this.updateStyleHints(x),n&&this.updateTransitions(x,C,o)}return w};Zo.overrideBypass=function(r,e,t){e=wg(e);for(var n=0;n<r.length;n++){var a=r[n],i=a._private.style[e],o=this.properties[e].type,s=o.color,u=o.mutiple,l=i?i.pfValue!=null?i.pfValue:i.value:null;!i||!i.bypass?this.applyBypass(a,e,t):(i.value=t,i.pfValue!=null&&(i.pfValue=t),s?i.strValue="rgb("+t.join(",")+")":u?i.strValue=t.join(" "):i.strValue=""+t,this.updateStyleHints(a)),this.checkTriggers(a,e,l,t)}};Zo.removeAllBypasses=function(r,e){return this.removeBypasses(r,this.propertyNames,e)};Zo.removeBypasses=function(r,e,t){for(var n=!0,a=0;a<r.length;a++){for(var i=r[a],o={},s=0;s<e.length;s++){var u=e[s],l=this.properties[u],c=i.pstyle(l.name);if(!(!c||!c.bypass)){var f="",d=this.parse(u,f,!0),h=o[l.name]={prev:c};this.applyParsedProperty(i,d),h.next=i.pstyle(l.name)}}this.updateStyleHints(i),t&&this.updateTransitions(i,o,n)}};var Ig={};Ig.getEmSizeInPixels=function(){var r=this.containerCss("font-size");return r!=null?parseFloat(r):1};Ig.containerCss=function(r){var e=this._private.cy,t=e.container(),n=e.window();if(n&&t&&n.getComputedStyle)return n.getComputedStyle(t).getPropertyValue(r)};var In={};In.getRenderedStyle=function(r,e){return e?this.getStylePropertyValue(r,e,!0):this.getRawStyle(r,!0)};In.getRawStyle=function(r,e){var t=this;if(r=r[0],r){for(var n={},a=0;a<t.properties.length;a++){var i=t.properties[a],o=t.getStylePropertyValue(r,i.name,e);o!=null&&(n[i.name]=o,n[lu(i.name)]=o)}return n}};In.getIndexedStyle=function(r,e,t,n){var a=r.pstyle(e)[t][n];return a??r.cy().style().getDefaultProperty(e)[t][0]};In.getStylePropertyValue=function(r,e,t){var n=this;if(r=r[0],r){var a=n.properties[e];a.alias&&(a=a.pointsTo);var i=a.type,o=r.pstyle(a.name);if(o){var s=o.value,u=o.units,l=o.strValue;if(t&&i.number&&s!=null&&Ge(s)){var c=r.cy().zoom(),f=function(_){return _*c},d=function(_,b){return f(_)+b},h=zt(s),v=h?u.every(function(m){return m!=null}):u!=null;return v?h?s.map(function(m,_){return d(m,u[_])}).join(" "):d(s,u):h?s.map(function(m){return Qe(m)?m:""+f(m)}).join(" "):""+f(s)}else if(l!=null)return l}return null}};In.getAnimationStartStyle=function(r,e){for(var t={},n=0;n<e.length;n++){var a=e[n],i=a.name,o=r.pstyle(i);o!==void 0&&(Et(o)?o=this.parse(i,o.strValue):o=this.parse(i,o)),o&&(t[i]=o)}return t};In.getPropsList=function(r){var e=this,t=[],n=r,a=e.properties;if(n)for(var i=Object.keys(n),o=0;o<i.length;o++){var s=i[o],u=n[s],l=a[s]||a[wg(s)],c=this.parse(l.name,u);c&&t.push(c)}return t};In.getNonDefaultPropertiesHash=function(r,e,t){var n=t.slice(),a,i,o,s,u,l;for(u=0;u<e.length;u++)if(a=e[u],i=r.pstyle(a,!1),i!=null)if(i.pfValue!=null)n[0]=Io(s,n[0]),n[1]=Lo(s,n[1]);else for(o=i.strValue,l=0;l<o.length;l++)s=o.charCodeAt(l),n[0]=Io(s,n[0]),n[1]=Lo(s,n[1]);return n};In.getPropertiesHash=In.getNonDefaultPropertiesHash;var xu={};xu.appendFromJson=function(r){for(var e=this,t=0;t<r.length;t++){var n=r[t],a=n.selector,i=n.style||n.css,o=Object.keys(i);e.selector(a);for(var s=0;s<o.length;s++){var u=o[s],l=i[u];e.css(u,l)}}return e};xu.fromJson=function(r){var e=this;return e.resetToDefault(),e.appendFromJson(r),e};xu.json=function(){for(var r=[],e=this.defaultLength;e<this.length;e++){for(var t=this[e],n=t.selector,a=t.properties,i={},o=0;o<a.length;o++){var s=a[o];i[s.name]=s.strValue}r.push({selector:n?n.toString():"core",style:i})}return r};var Lg={};Lg.appendFromString=function(r){var e=this,t=this,n=""+r,a,i,o;n=n.replace(/[/][*](\s|.)+?[*][/]/g,"");function s(){n.length>a.length?n=n.substr(a.length):n=""}function u(){i.length>o.length?i=i.substr(o.length):i=""}for(;;){var l=n.match(/^\s*$/);if(l)break;var c=n.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!c){Mt("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+n);break}a=c[0];var f=c[1];if(f!=="core"){var d=new xa(f);if(d.invalid){Mt("Skipping parsing of block: Invalid selector found in string stylesheet: "+f),s();continue}}var h=c[2],v=!1;i=h;for(var m=[];;){var _=i.match(/^\s*$/);if(_)break;var b=i.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!b){Mt("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+h),v=!0;break}o=b[0];var w=b[1],y=b[2],x=e.properties[w];if(!x){Mt("Skipping property: Invalid property name in: "+o),u();continue}var C=t.parse(w,y);if(!C){Mt("Skipping property: Invalid property definition in: "+o),u();continue}m.push({name:w,val:y}),u()}if(v){s();break}t.selector(f);for(var E=0;E<m.length;E++){var p=m[E];t.css(p.name,p.val)}s()}return t};Lg.fromString=function(r){var e=this;return e.resetToDefault(),e.appendFromString(r),e};var Tr={};(function(){var r=pr,e=wT,t=xT,n=ST,a=CT,i=function(se){return"^"+se+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},o=function(se){var ce=r+"|\\w+|"+e+"|"+t+"|"+n+"|"+a;return"^"+se+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+r+")\\s*\\,\\s*("+r+")\\s*,\\s*("+ce+")\\s*\\,\\s*("+ce+")\\)$"},s=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];Tr.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:i("data")},layoutData:{mapping:!0,regex:i("layoutData")},scratch:{mapping:!0,regex:i("scratch")},mapData:{mapping:!0,regex:o("mapData")},mapLayoutData:{mapping:!0,regex:o("mapLayoutData")},mapScratch:{mapping:!0,regex:o("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:s,singleRegexMatchValue:!0},urls:{regexes:s,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(se,ce){switch(se.length){case 2:return ce[0]!=="deg"&&ce[0]!=="rad"&&ce[1]!=="deg"&&ce[1]!=="rad";case 1:return Qe(se[0])||ce[0]==="deg"||ce[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+r+")\\s*,\\s*("+r+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+r+")\\s*,\\s*("+r+")\\s*,\\s*("+r+")\\s*,\\s*("+r+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(se){var ce=se.length;return ce===1||ce===2||ce===4}}};var u={zeroNonZero:function(se,ce){return(se==null||ce==null)&&se!==ce||se==0&&ce!=0?!0:se!=0&&ce==0},any:function(se,ce){return se!=ce},emptyNonEmpty:function(se,ce){var ge=wa(se),Pe=wa(ce);return ge&&!Pe||!ge&&Pe}},l=Tr.types,c=[{name:"label",type:l.text,triggersBounds:u.any,triggersZOrder:u.emptyNonEmpty},{name:"text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any}],f=[{name:"source-label",type:l.text,triggersBounds:u.any},{name:"source-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"source-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-offset",type:l.size,triggersBounds:u.any}],d=[{name:"target-label",type:l.text,triggersBounds:u.any},{name:"target-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"target-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-offset",type:l.size,triggersBounds:u.any}],h=[{name:"font-family",type:l.fontFamily,triggersBounds:u.any},{name:"font-style",type:l.fontStyle,triggersBounds:u.any},{name:"font-weight",type:l.fontWeight,triggersBounds:u.any},{name:"font-size",type:l.size,triggersBounds:u.any},{name:"text-transform",type:l.textTransform,triggersBounds:u.any},{name:"text-wrap",type:l.textWrap,triggersBounds:u.any},{name:"text-overflow-wrap",type:l.textOverflowWrap,triggersBounds:u.any},{name:"text-max-width",type:l.size,triggersBounds:u.any},{name:"text-outline-width",type:l.size,triggersBounds:u.any},{name:"line-height",type:l.positiveNumber,triggersBounds:u.any}],v=[{name:"text-valign",type:l.valign,triggersBounds:u.any},{name:"text-halign",type:l.halign,triggersBounds:u.any},{name:"color",type:l.color},{name:"text-outline-color",type:l.color},{name:"text-outline-opacity",type:l.zeroOneNumber},{name:"text-background-color",type:l.color},{name:"text-background-opacity",type:l.zeroOneNumber},{name:"text-background-padding",type:l.size,triggersBounds:u.any},{name:"text-border-opacity",type:l.zeroOneNumber},{name:"text-border-color",type:l.color},{name:"text-border-width",type:l.size,triggersBounds:u.any},{name:"text-border-style",type:l.borderStyle,triggersBounds:u.any},{name:"text-background-shape",type:l.textBackgroundShape,triggersBounds:u.any},{name:"text-justification",type:l.justification}],m=[{name:"events",type:l.bool,triggersZOrder:u.any},{name:"text-events",type:l.bool,triggersZOrder:u.any}],_=[{name:"display",type:l.display,triggersZOrder:u.any,triggersBounds:u.any,triggersBoundsOfConnectedEdges:!0},{name:"visibility",type:l.visibility,triggersZOrder:u.any},{name:"opacity",type:l.zeroOneNumber,triggersZOrder:u.zeroNonZero},{name:"text-opacity",type:l.zeroOneNumber},{name:"min-zoomed-font-size",type:l.size},{name:"z-compound-depth",type:l.zCompoundDepth,triggersZOrder:u.any},{name:"z-index-compare",type:l.zIndexCompare,triggersZOrder:u.any},{name:"z-index",type:l.number,triggersZOrder:u.any}],b=[{name:"overlay-padding",type:l.size,triggersBounds:u.any},{name:"overlay-color",type:l.color},{name:"overlay-opacity",type:l.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"overlay-shape",type:l.overlayShape,triggersBounds:u.any},{name:"overlay-corner-radius",type:l.cornerRadius}],w=[{name:"underlay-padding",type:l.size,triggersBounds:u.any},{name:"underlay-color",type:l.color},{name:"underlay-opacity",type:l.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"underlay-shape",type:l.overlayShape,triggersBounds:u.any},{name:"underlay-corner-radius",type:l.cornerRadius}],y=[{name:"transition-property",type:l.propList},{name:"transition-duration",type:l.time},{name:"transition-delay",type:l.time},{name:"transition-timing-function",type:l.easing}],x=function(se,ce){return ce.value==="label"?-se.poolIndex():ce.pfValue},C=[{name:"height",type:l.nodeSize,triggersBounds:u.any,hashOverride:x},{name:"width",type:l.nodeSize,triggersBounds:u.any,hashOverride:x},{name:"shape",type:l.nodeShape,triggersBounds:u.any},{name:"shape-polygon-points",type:l.polygonPointList,triggersBounds:u.any},{name:"corner-radius",type:l.cornerRadius},{name:"background-color",type:l.color},{name:"background-fill",type:l.fill},{name:"background-opacity",type:l.zeroOneNumber},{name:"background-blacken",type:l.nOneOneNumber},{name:"background-gradient-stop-colors",type:l.colors},{name:"background-gradient-stop-positions",type:l.percentages},{name:"background-gradient-direction",type:l.gradientDirection},{name:"padding",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"padding-relative-to",type:l.paddingRelativeTo,triggersBounds:u.any},{name:"bounds-expansion",type:l.boundsExpansion,triggersBounds:u.any}],E=[{name:"border-color",type:l.color},{name:"border-opacity",type:l.zeroOneNumber},{name:"border-width",type:l.size,triggersBounds:u.any},{name:"border-style",type:l.borderStyle},{name:"border-cap",type:l.lineCap},{name:"border-join",type:l.lineJoin},{name:"border-dash-pattern",type:l.numbers},{name:"border-dash-offset",type:l.number},{name:"border-position",type:l.linePosition}],p=[{name:"outline-color",type:l.color},{name:"outline-opacity",type:l.zeroOneNumber},{name:"outline-width",type:l.size,triggersBounds:u.any},{name:"outline-style",type:l.borderStyle},{name:"outline-offset",type:l.size,triggersBounds:u.any}],P=[{name:"background-image",type:l.urls},{name:"background-image-crossorigin",type:l.bgCrossOrigin},{name:"background-image-opacity",type:l.zeroOneNumbers},{name:"background-image-containment",type:l.bgContainment},{name:"background-image-smoothing",type:l.bools},{name:"background-position-x",type:l.bgPos},{name:"background-position-y",type:l.bgPos},{name:"background-width-relative-to",type:l.bgRelativeTo},{name:"background-height-relative-to",type:l.bgRelativeTo},{name:"background-repeat",type:l.bgRepeat},{name:"background-fit",type:l.bgFit},{name:"background-clip",type:l.bgClip},{name:"background-width",type:l.bgWH},{name:"background-height",type:l.bgWH},{name:"background-offset-x",type:l.bgPos},{name:"background-offset-y",type:l.bgPos}],T=[{name:"position",type:l.position,triggersBounds:u.any},{name:"compound-sizing-wrt-labels",type:l.compoundIncludeLabels,triggersBounds:u.any},{name:"min-width",type:l.size,triggersBounds:u.any},{name:"min-width-bias-left",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-width-bias-right",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height",type:l.size,triggersBounds:u.any},{name:"min-height-bias-top",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height-bias-bottom",type:l.sizeMaybePercent,triggersBounds:u.any}],R=[{name:"line-style",type:l.lineStyle},{name:"line-color",type:l.color},{name:"line-fill",type:l.fill},{name:"line-cap",type:l.lineCap},{name:"line-opacity",type:l.zeroOneNumber},{name:"line-dash-pattern",type:l.numbers},{name:"line-dash-offset",type:l.number},{name:"line-gradient-stop-colors",type:l.colors},{name:"line-gradient-stop-positions",type:l.percentages},{name:"curve-style",type:l.curveStyle,triggersBounds:u.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:l.zeroOneNumber,triggersBounds:u.any},{name:"source-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"target-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"control-point-step-size",type:l.size,triggersBounds:u.any},{name:"control-point-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"control-point-weights",type:l.numbers,triggersBounds:u.any},{name:"segment-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"segment-weights",type:l.numbers,triggersBounds:u.any},{name:"segment-radii",type:l.numbers,triggersBounds:u.any},{name:"radius-type",type:l.radiusType,triggersBounds:u.any},{name:"taxi-turn",type:l.bidirectionalSizeMaybePercent,triggersBounds:u.any},{name:"taxi-turn-min-distance",type:l.size,triggersBounds:u.any},{name:"taxi-direction",type:l.axisDirection,triggersBounds:u.any},{name:"taxi-radius",type:l.number,triggersBounds:u.any},{name:"edge-distances",type:l.edgeDistances,triggersBounds:u.any},{name:"arrow-scale",type:l.positiveNumber,triggersBounds:u.any},{name:"loop-direction",type:l.angle,triggersBounds:u.any},{name:"loop-sweep",type:l.angle,triggersBounds:u.any},{name:"source-distance-from-node",type:l.size,triggersBounds:u.any},{name:"target-distance-from-node",type:l.size,triggersBounds:u.any}],M=[{name:"ghost",type:l.bool,triggersBounds:u.any},{name:"ghost-offset-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-offset-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-opacity",type:l.zeroOneNumber}],N=[{name:"selection-box-color",type:l.color},{name:"selection-box-opacity",type:l.zeroOneNumber},{name:"selection-box-border-color",type:l.color},{name:"selection-box-border-width",type:l.size},{name:"active-bg-color",type:l.color},{name:"active-bg-opacity",type:l.zeroOneNumber},{name:"active-bg-size",type:l.size},{name:"outside-texture-bg-color",type:l.color},{name:"outside-texture-bg-opacity",type:l.zeroOneNumber}],B=[];Tr.pieBackgroundN=16,B.push({name:"pie-size",type:l.sizeMaybePercent});for(var q=1;q<=Tr.pieBackgroundN;q++)B.push({name:"pie-"+q+"-background-color",type:l.color}),B.push({name:"pie-"+q+"-background-size",type:l.percent}),B.push({name:"pie-"+q+"-background-opacity",type:l.zeroOneNumber});var Z=[],Q=Tr.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:l.arrowShape,triggersBounds:u.any},{name:"arrow-color",type:l.color},{name:"arrow-fill",type:l.arrowFill},{name:"arrow-width",type:l.arrowWidth}].forEach(function(re){Q.forEach(function(se){var ce=se+"-"+re.name,ge=re.type,Pe=re.triggersBounds;Z.push({name:ce,type:ge,triggersBounds:Pe})})},{});var Y=Tr.properties=[].concat(m,y,_,b,w,M,v,h,c,f,d,C,E,p,P,B,T,R,Z,N),J=Tr.propertyGroups={behavior:m,transition:y,visibility:_,overlay:b,underlay:w,ghost:M,commonLabel:v,labelDimensions:h,mainLabel:c,sourceLabel:f,targetLabel:d,nodeBody:C,nodeBorder:E,nodeOutline:p,backgroundImage:P,pie:B,compound:T,edgeLine:R,edgeArrow:Z,core:N},X=Tr.propertyGroupNames={},k=Tr.propertyGroupKeys=Object.keys(J);k.forEach(function(re){X[re]=J[re].map(function(se){return se.name}),J[re].forEach(function(se){return se.groupKey=re})});var D=Tr.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];Tr.propertyNames=Y.map(function(re){return re.name});for(var I=0;I<Y.length;I++){var F=Y[I];Y[F.name]=F}for(var L=0;L<D.length;L++){var H=D[L],j=Y[H.pointsTo],W={name:H.name,alias:!0,pointsTo:j};Y.push(W),Y[H.name]=W}})();Tr.getDefaultProperty=function(r){return this.getDefaultProperties()[r]};Tr.getDefaultProperties=function(){var r=this._private;if(r.defaultProperties!=null)return r.defaultProperties;for(var e=rt({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(u,l){for(var c=1;c<=Tr.pieBackgroundN;c++){var f=l.name.replace("{{i}}",c),d=l.value;u[f]=d}return u},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(u,l){return Tr.arrowPrefixes.forEach(function(c){var f=c+"-"+l.name,d=l.value;u[f]=d}),u},{})),t={},n=0;n<this.properties.length;n++){var a=this.properties[n];if(!a.pointsTo){var i=a.name,o=e[i],s=this.parse(i,o);t[i]=s}}return r.defaultProperties=t,r.defaultProperties};Tr.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var Su={};Su.parse=function(r,e,t,n){var a=this;if(rr(e))return a.parseImplWarn(r,e,t,n);var i=n==="mapping"||n===!0||n===!1||n==null?"dontcare":n,o=t?"t":"f",s=""+e,u=oS(r,s,o,i),l=a.propCache=a.propCache||[],c;return(c=l[u])||(c=l[u]=a.parseImplWarn(r,e,t,n)),(t||n==="mapping")&&(c=Dn(c),c&&(c.value=Dn(c.value))),c};Su.parseImplWarn=function(r,e,t,n){var a=this.parseImpl(r,e,t,n);return!a&&e!=null&&Mt("The style property `".concat(r,": ").concat(e,"` is invalid")),a&&(a.name==="width"||a.name==="height")&&e==="label"&&Mt("The style value of `label` is deprecated for `"+a.name+"`"),a};Su.parseImpl=function(r,e,t,n){var a=this;r=wg(r);var i=a.properties[r],o=e,s=a.types;if(!i||e===void 0)return null;i.alias&&(i=i.pointsTo,r=i.name);var u=Qe(e);u&&(e=e.trim());var l=i.type;if(!l)return null;if(t&&(e===""||e===null))return{name:r,value:e,bypass:!0,deleteBypass:!0};if(rr(e))return{name:r,value:e,strValue:"fn",mapped:s.fn,bypass:t};var c,f;if(!(!u||n||e.length<7||e[1]!=="a")){if(e.length>=7&&e[0]==="d"&&(c=new RegExp(s.data.regex).exec(e))){if(t)return!1;var d=s.data;return{name:r,value:c,strValue:""+e,mapped:d,field:c[1],bypass:t}}else if(e.length>=10&&e[0]==="m"&&(f=new RegExp(s.mapData.regex).exec(e))){if(t||l.multiple)return!1;var h=s.mapData;if(!(l.color||l.number))return!1;var v=this.parse(r,f[4]);if(!v||v.mapped)return!1;var m=this.parse(r,f[5]);if(!m||m.mapped)return!1;if(v.pfValue===m.pfValue||v.strValue===m.strValue)return Mt("`"+r+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+r+": "+v.strValue+"`"),this.parse(r,v.strValue);if(l.color){var _=v.value,b=m.value,w=_[0]===b[0]&&_[1]===b[1]&&_[2]===b[2]&&(_[3]===b[3]||(_[3]==null||_[3]===1)&&(b[3]==null||b[3]===1));if(w)return!1}return{name:r,value:f,strValue:""+e,mapped:h,field:f[1],fieldMin:parseFloat(f[2]),fieldMax:parseFloat(f[3]),valueMin:v.value,valueMax:m.value,bypass:t}}}if(l.multiple&&n!=="multiple"){var y;if(u?y=e.split(/\s+/):zt(e)?y=e:y=[e],l.evenMultiple&&y.length%2!==0)return null;for(var x=[],C=[],E=[],p="",P=!1,T=0;T<y.length;T++){var R=a.parse(r,y[T],t,"multiple");P=P||Qe(R.value),x.push(R.value),E.push(R.pfValue!=null?R.pfValue:R.value),C.push(R.units),p+=(T>0?" ":"")+R.strValue}return l.validate&&!l.validate(x,C)?null:l.singleEnum&&P?x.length===1&&Qe(x[0])?{name:r,value:x[0],strValue:x[0],bypass:t}:null:{name:r,value:x,pfValue:E,strValue:p,bypass:t,units:C}}var M=function(){for(var se=0;se<l.enums.length;se++){var ce=l.enums[se];if(ce===e)return{name:r,value:e,strValue:""+e,bypass:t}}return null};if(l.number){var N,B="px";if(l.units&&(N=l.units),l.implicitUnits&&(B=l.implicitUnits),!l.unitless)if(u){var q="px|em"+(l.allowPercent?"|\\%":"");N&&(q=N);var Z=e.match("^("+pr+")("+q+")?$");Z&&(e=Z[1],N=Z[2]||B)}else(!N||l.implicitUnits)&&(N=B);if(e=parseFloat(e),isNaN(e)&&l.enums===void 0)return null;if(isNaN(e)&&l.enums!==void 0)return e=o,M();if(l.integer&&!hT(e)||l.min!==void 0&&(e<l.min||l.strictMin&&e===l.min)||l.max!==void 0&&(e>l.max||l.strictMax&&e===l.max))return null;var Q={name:r,value:e,strValue:""+e+(N||""),units:N,bypass:t};return l.unitless||N!=="px"&&N!=="em"?Q.pfValue=e:Q.pfValue=N==="px"||!N?e:this.getEmSizeInPixels()*e,(N==="ms"||N==="s")&&(Q.pfValue=N==="ms"?e:1e3*e),(N==="deg"||N==="rad")&&(Q.pfValue=N==="rad"?e:WP(e)),N==="%"&&(Q.pfValue=e/100),Q}else if(l.propList){var Y=[],J=""+e;if(J!=="none"){for(var X=J.split(/\s*,\s*|\s+/),k=0;k<X.length;k++){var D=X[k].trim();a.properties[D]?Y.push(D):Mt("`"+D+"` is not a valid property name")}if(Y.length===0)return null}return{name:r,value:Y,strValue:Y.length===0?"none":Y.join(" "),bypass:t}}else if(l.color){var I=MT(e);return I?{name:r,value:I,pfValue:I,strValue:"rgb("+I[0]+","+I[1]+","+I[2]+")",bypass:t}:null}else if(l.regex||l.regexes){if(l.enums){var F=M();if(F)return F}for(var L=l.regexes?l.regexes:[l.regex],H=0;H<L.length;H++){var j=new RegExp(L[H]),W=j.exec(e);if(W)return{name:r,value:l.singleRegexMatchValue?W[1]:W,strValue:""+e,bypass:t}}return null}else return l.string?{name:r,value:""+e,strValue:""+e,bypass:t}:l.enums?M():null};var Rr=function r(e){if(!(this instanceof r))return new r(e);if(!bg(e)){ar("A style must have a core reference");return}this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()},Lr=Rr.prototype;Lr.instanceString=function(){return"style"};Lr.clear=function(){for(var r=this._private,e=r.cy,t=e.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,r.contextStyles={},r.propDiffs={},this.cleanElements(t,!0),t.forEach(function(a){var i=a[0]._private;i.styleDirty=!0,i.appliedInitStyle=!1}),this};Lr.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};Lr.core=function(r){return this._private.coreStyle[r]||this.getDefaultProperty(r)};Lr.selector=function(r){var e=r==="core"?null:new xa(r),t=this.length++;return this[t]={selector:e,properties:[],mappedProperties:[],index:t},this};Lr.css=function(){var r=this,e=arguments;if(e.length===1)for(var t=e[0],n=0;n<r.properties.length;n++){var a=r.properties[n],i=t[a.name];i===void 0&&(i=t[lu(a.name)]),i!==void 0&&this.cssRule(a.name,i)}else e.length===2&&this.cssRule(e[0],e[1]);return this};Lr.style=Lr.css;Lr.cssRule=function(r,e){var t=this.parse(r,e);if(t){var n=this.length-1;this[n].properties.push(t),this[n].properties[t.name]=t,t.name.match(/pie-(\d+)-background-size/)&&t.value&&(this._private.hasPie=!0),t.mapped&&this[n].mappedProperties.push(t);var a=!this[n].selector;a&&(this._private.coreStyle[t.name]=t)}return this};Lr.append=function(r){return Xx(r)?r.appendToStyle(this):zt(r)?this.appendFromJson(r):Qe(r)&&this.appendFromString(r),this};Rr.fromJson=function(r,e){var t=new Rr(r);return t.fromJson(e),t};Rr.fromString=function(r,e){return new Rr(r).fromString(e)};[Nr,Zo,Ig,In,xu,Lg,Tr,Su].forEach(function(r){rt(Lr,r)});Rr.types=Lr.types;Rr.properties=Lr.properties;Rr.propertyGroups=Lr.propertyGroups;Rr.propertyGroupNames=Lr.propertyGroupNames;Rr.propertyGroupKeys=Lr.propertyGroupKeys;var hD={style:function(e){if(e){var t=this.setStyle(e);t.update()}return this._private.style},setStyle:function(e){var t=this._private;return Xx(e)?t.style=e.generateStyle(this):zt(e)?t.style=Rr.fromJson(this,e):Qe(e)?t.style=Rr.fromString(this,e):t.style=Rr(this),t.style},updateStyle:function(){this.mutableElements().updateStyle()}},vD="single",Ja={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var t=this._private;if(t.selectionType==null&&(t.selectionType=vD),e!==void 0)(e==="additive"||e==="single")&&(t.selectionType=e);else return t.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,t=this._private.pan,n,a,i,o,s;switch(e.length){case 0:return t;case 1:if(Qe(e[0]))return n=e[0],t[n];if(Et(e[0])){if(!this._private.panningEnabled)return this;i=e[0],o=i.x,s=i.y,Ge(o)&&(t.x=o),Ge(s)&&(t.y=s),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;n=e[0],a=e[1],(n==="x"||n==="y")&&Ge(a)&&(t[n]=a),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,t){var n=arguments,a=this._private.pan,i,o,s,u,l;if(!this._private.panningEnabled)return this;switch(n.length){case 1:Et(e)&&(s=n[0],u=s.x,l=s.y,Ge(u)&&(a.x+=u),Ge(l)&&(a.y+=l),this.emit("pan viewport"));break;case 2:i=e,o=t,(i==="x"||i==="y")&&Ge(o)&&(a[i]+=o),this.emit("pan viewport");break}return this.notify("viewport"),this},fit:function(e,t){var n=this.getFitViewport(e,t);if(n){var a=this._private;a.zoom=n.zoom,a.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,t){if(Ge(e)&&t===void 0&&(t=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var n;if(Qe(e)){var a=e;e=this.$(a)}else if(gT(e)){var i=e;n={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else Zr(e)||(e=this.mutableElements());if(!(Zr(e)&&e.empty())){n=n||e.boundingBox();var o=this.width(),s=this.height(),u;if(t=Ge(t)?t:0,!isNaN(o)&&!isNaN(s)&&o>0&&s>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){u=Math.min((o-2*t)/n.w,(s-2*t)/n.h),u=u>this._private.maxZoom?this._private.maxZoom:u,u=u<this._private.minZoom?this._private.minZoom:u;var l={x:(o-u*(n.x1+n.x2))/2,y:(s-u*(n.y1+n.y2))/2};return{zoom:u,pan:l}}}}},zoomRange:function(e,t){var n=this._private;if(t==null){var a=e;e=a.min,t=a.max}return Ge(e)&&Ge(t)&&e<=t?(n.minZoom=e,n.maxZoom=t):Ge(e)&&t===void 0&&e<=n.maxZoom?n.minZoom=e:Ge(t)&&e===void 0&&t>=n.minZoom&&(n.maxZoom=t),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var t=this._private,n=t.pan,a=t.zoom,i,o,s=!1;if(t.zoomingEnabled||(s=!0),Ge(e)?o=e:Et(e)&&(o=e.level,e.position!=null?i=hu(e.position,a,n):e.renderedPosition!=null&&(i=e.renderedPosition),i!=null&&!t.panningEnabled&&(s=!0)),o=o>t.maxZoom?t.maxZoom:o,o=o<t.minZoom?t.minZoom:o,s||!Ge(o)||o===a||i!=null&&(!Ge(i.x)||!Ge(i.y)))return null;if(i!=null){var u=n,l=a,c=o,f={x:-c/l*(i.x-u.x)+i.x,y:-c/l*(i.y-u.y)+i.y};return{zoomed:!0,panned:!0,zoom:c,pan:f}}else return{zoomed:!0,panned:!1,zoom:o,pan:n}},zoom:function(e){if(e===void 0)return this._private.zoom;var t=this.getZoomedViewport(e),n=this._private;return t==null||!t.zoomed?this:(n.zoom=t.zoom,t.panned&&(n.pan.x=t.pan.x,n.pan.y=t.pan.y),this.emit("zoom"+(t.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var t=this._private,n=!0,a=!0,i=[],o=!1,s=!1;if(!e)return this;if(Ge(e.zoom)||(n=!1),Et(e.pan)||(a=!1),!n&&!a)return this;if(n){var u=e.zoom;u<t.minZoom||u>t.maxZoom||!t.zoomingEnabled?o=!0:(t.zoom=u,i.push("zoom"))}if(a&&(!o||!e.cancelOnFailedZoom)&&t.panningEnabled){var l=e.pan;Ge(l.x)&&(t.pan.x=l.x,s=!1),Ge(l.y)&&(t.pan.y=l.y,s=!1),s||i.push("pan")}return i.length>0&&(i.push("viewport"),this.emit(i.join(" ")),this.notify("viewport")),this},center:function(e){var t=this.getCenterPan(e);return t&&(this._private.pan=t,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,t){if(this._private.panningEnabled){if(Qe(e)){var n=e;e=this.mutableElements().filter(n)}else Zr(e)||(e=this.mutableElements());if(e.length!==0){var a=e.boundingBox(),i=this.width(),o=this.height();t=t===void 0?this._private.zoom:t;var s={x:(i-t*(a.x1+a.x2))/2,y:(o-t*(a.y1+a.y2))/2};return s}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,t=e.container,n=this;return e.sizeCache=e.sizeCache||(t?function(){var a=n.window().getComputedStyle(t),i=function(s){return parseFloat(a.getPropertyValue(s))};return{width:t.clientWidth-i("padding-left")-i("padding-right"),height:t.clientHeight-i("padding-top")-i("padding-bottom")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,t=this._private.zoom,n=this.renderedExtent(),a={x1:(n.x1-e.x)/t,x2:(n.x2-e.x)/t,y1:(n.y1-e.y)/t,y2:(n.y2-e.y)/t};return a.w=a.x2-a.x1,a.h=a.y2-a.y1,a},renderedExtent:function(){var e=this.width(),t=this.height();return{x1:0,y1:0,x2:e,y2:t,w:e,h:t}},multiClickDebounceTime:function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this}};Ja.centre=Ja.center;Ja.autolockNodes=Ja.autolock;Ja.autoungrabifyNodes=Ja.autoungrabify;var $o={data:kt.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:kt.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:kt.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:kt.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};$o.attr=$o.data;$o.removeAttr=$o.removeData;var Vo=function(e){var t=this;e=rt({},e);var n=e.container;n&&!js(n)&&js(n[0])&&(n=n[0]);var a=n?n._cyreg:null;a=a||{},a&&a.cy&&(a.cy.destroy(),a={});var i=a.readies=a.readies||[];n&&(n._cyreg=a),a.cy=t;var o=vr!==void 0&&n!==void 0&&!e.headless,s=e;s.layout=rt({name:o?"grid":"null"},s.layout),s.renderer=rt({name:o?"canvas":"null"},s.renderer);var u=function(v,m,_){return m!==void 0?m:_!==void 0?_:v},l=this._private={container:n,ready:!1,options:s,elements:new Ar(this),listeners:[],aniEles:new Ar(this),data:s.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:u(!0,s.zoomingEnabled),userZoomingEnabled:u(!0,s.userZoomingEnabled),panningEnabled:u(!0,s.panningEnabled),userPanningEnabled:u(!0,s.userPanningEnabled),boxSelectionEnabled:u(!0,s.boxSelectionEnabled),autolock:u(!1,s.autolock,s.autolockNodes),autoungrabify:u(!1,s.autoungrabify,s.autoungrabifyNodes),autounselectify:u(!1,s.autounselectify),styleEnabled:s.styleEnabled===void 0?o:s.styleEnabled,zoom:Ge(s.zoom)?s.zoom:1,pan:{x:Et(s.pan)&&Ge(s.pan.x)?s.pan.x:0,y:Et(s.pan)&&Ge(s.pan.y)?s.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:u(250,s.multiClickDebounceTime)};this.createEmitter(),this.selectionType(s.selectionType),this.zoomRange({min:s.minZoom,max:s.maxZoom});var c=function(v,m){var _=v.some(yT);if(_)return $i.all(v).then(m);m(v)};l.styleEnabled&&t.setStyle([]);var f=rt({},s,s.renderer);t.initRenderer(f);var d=function(v,m,_){t.notifications(!1);var b=t.mutableElements();b.length>0&&b.remove(),v!=null&&(Et(v)||zt(v))&&t.add(v),t.one("layoutready",function(y){t.notifications(!0),t.emit(y),t.one("load",m),t.emitAndNotify("load")}).one("layoutstop",function(){t.one("done",_),t.emit("done")});var w=rt({},t._private.options.layout);w.eles=t.elements(),t.layout(w).run()};c([s.style,s.elements],function(h){var v=h[0],m=h[1];l.styleEnabled&&t.style().append(v),d(m,function(){t.startAnimationLoop(),l.ready=!0,rr(s.ready)&&t.on("ready",s.ready);for(var _=0;_<i.length;_++){var b=i[_];t.on("ready",b)}a&&(a.readies=[]),t.emit("ready")},s.done)})},Js=Vo.prototype;rt(Js,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},window:function(){var e=this._private.container;if(e==null)return vr;var t=this._private.container.ownerDocument;return t===void 0||t==null?vr:t.defaultView||vr},mount:function(e){if(e!=null){var t=this,n=t._private,a=n.options;return!js(e)&&js(e[0])&&(e=e[0]),t.stopAnimationLoop(),t.destroyRenderer(),n.container=e,n.styleEnabled=!0,t.invalidateSize(),t.initRenderer(rt({},a,a.renderer,{name:a.renderer.name==="null"?"canvas":a.renderer.name})),t.startAnimationLoop(),t.style(a.style),t.emit("mount"),t}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return Dn(this._private.options)},json:function(e){var t=this,n=t._private,a=t.mutableElements(),i=function(x){return t.getElementById(x.id())};if(Et(e)){if(t.startBatch(),e.elements){var o={},s=function(x,C){for(var E=[],p=[],P=0;P<x.length;P++){var T=x[P];if(!T.data.id){Mt("cy.json() cannot handle elements without an ID attribute");continue}var R=""+T.data.id,M=t.getElementById(R);o[R]=!0,M.length!==0?p.push({ele:M,json:T}):(C&&(T.group=C),E.push(T))}t.add(E);for(var N=0;N<p.length;N++){var B=p[N],q=B.ele,Z=B.json;q.json(Z)}};if(zt(e.elements))s(e.elements);else for(var u=["nodes","edges"],l=0;l<u.length;l++){var c=u[l],f=e.elements[c];zt(f)&&s(f,c)}var d=t.collection();a.filter(function(y){return!o[y.id()]}).forEach(function(y){y.isParent()?d.merge(y):y.remove()}),d.forEach(function(y){return y.children().move({parent:null})}),d.forEach(function(y){return i(y).remove()})}e.style&&t.style(e.style),e.zoom!=null&&e.zoom!==n.zoom&&t.zoom(e.zoom),e.pan&&(e.pan.x!==n.pan.x||e.pan.y!==n.pan.y)&&t.pan(e.pan),e.data&&t.data(e.data);for(var h=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],v=0;v<h.length;v++){var m=h[v];e[m]!=null&&t[m](e[m])}return t.endBatch(),this}else{var _=!!e,b={};_?b.elements=this.elements().map(function(y){return y.json()}):(b.elements={},a.forEach(function(y){var x=y.group();b.elements[x]||(b.elements[x]=[]),b.elements[x].push(y.json())})),this._private.styleEnabled&&(b.style=t.style().json()),b.data=Dn(t.data());var w=n.options;return b.zoomingEnabled=n.zoomingEnabled,b.userZoomingEnabled=n.userZoomingEnabled,b.zoom=n.zoom,b.minZoom=n.minZoom,b.maxZoom=n.maxZoom,b.panningEnabled=n.panningEnabled,b.userPanningEnabled=n.userPanningEnabled,b.pan=Dn(n.pan),b.boxSelectionEnabled=n.boxSelectionEnabled,b.renderer=Dn(w.renderer),b.hideEdgesOnViewport=w.hideEdgesOnViewport,b.textureOnViewport=w.textureOnViewport,b.wheelSensitivity=w.wheelSensitivity,b.motionBlur=w.motionBlur,b.multiClickDebounceTime=w.multiClickDebounceTime,b}}});Js.$id=Js.getElementById;[nD,uD,ZS,Qp,Gs,cD,Jp,$s,hD,Ja,$o].forEach(function(r){rt(Js,r)});var pD={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}},gD={maximal:!1,acyclic:!1},wi=function(e){return e.scratch("breadthfirst")},Pm=function(e,t){return e.scratch("breadthfirst",t)};function QS(r){this.options=rt({},pD,gD,r)}QS.prototype.run=function(){var r=this.options,e=r,t=r.cy,n=e.eles,a=n.nodes().filter(function(Se){return!Se.isParent()}),i=n,o=e.directed,s=e.acyclic||e.maximal||e.maximalAdjustments>0,u=Yr(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),l;if(Zr(e.roots))l=e.roots;else if(zt(e.roots)){for(var c=[],f=0;f<e.roots.length;f++){var d=e.roots[f],h=t.getElementById(d);c.push(h)}l=t.collection(c)}else if(Qe(e.roots))l=t.$(e.roots);else if(o)l=a.roots();else{var v=n.components();l=t.collection();for(var m=function(le){var te=v[le],ne=te.maxDegree(!1),de=te.filter(function(Ce){return Ce.degree(!1)===ne});l=l.add(de)},_=0;_<v.length;_++)m(_)}var b=[],w={},y=function(le,te){b[te]==null&&(b[te]=[]);var ne=b[te].length;b[te].push(le),Pm(le,{index:ne,depth:te})},x=function(le,te){var ne=wi(le),de=ne.depth,Ce=ne.index;b[de][Ce]=null,y(le,te)};i.bfs({roots:l,directed:e.directed,visit:function(le,te,ne,de,Ce){var Le=le[0],$e=Le.id();y(Le,Ce),w[$e]=!0}});for(var C=[],E=0;E<a.length;E++){var p=a[E];w[p.id()]||C.push(p)}var P=function(le){for(var te=b[le],ne=0;ne<te.length;ne++){var de=te[ne];if(de==null){te.splice(ne,1),ne--;continue}Pm(de,{depth:le,index:ne})}},T=function(){for(var le=0;le<b.length;le++)P(le)},R=function(le,te){for(var ne=wi(le),de=le.incomers().filter(function(G){return G.isNode()&&n.has(G)}),Ce=-1,Le=le.id(),$e=0;$e<de.length;$e++){var Ne=de[$e],De=wi(Ne);Ce=Math.max(Ce,De.depth)}if(ne.depth<=Ce){if(!e.acyclic&&te[Le])return null;var me=Ce+1;return x(le,me),te[Le]=me,!0}return!1};if(o&&s){var M=[],N={},B=function(le){return M.push(le)},q=function(){return M.shift()};for(a.forEach(function(Se){return M.push(Se)});M.length>0;){var Z=q(),Q=R(Z,N);if(Q)Z.outgoers().filter(function(Se){return Se.isNode()&&n.has(Se)}).forEach(B);else if(Q===null){Mt("Detected double maximal shift for node `"+Z.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}T();var Y=0;if(e.avoidOverlap)for(var J=0;J<a.length;J++){var X=a[J],k=X.layoutDimensions(e),D=k.w,I=k.h;Y=Math.max(Y,D,I)}var F={},L=function(le){if(F[le.id()])return F[le.id()];for(var te=wi(le).depth,ne=le.neighborhood(),de=0,Ce=0,Le=0;Le<ne.length;Le++){var $e=ne[Le];if(!($e.isEdge()||$e.isParent()||!a.has($e))){var Ne=wi($e);if(Ne!=null){var De=Ne.index,me=Ne.depth;if(!(De==null||me==null)){var G=b[me].length;me<te&&(de+=De/G,Ce++)}}}}return Ce=Math.max(1,Ce),de=de/Ce,Ce===0&&(de=0),F[le.id()]=de,de},H=function(le,te){var ne=L(le),de=L(te),Ce=ne-de;return Ce===0?Qx(le.id(),te.id()):Ce};e.depthSort!==void 0&&(H=e.depthSort);for(var j=0;j<b.length;j++)b[j].sort(H),P(j);for(var W=[],re=0;re<C.length;re++)W.push(C[re]);b.unshift(W),T();for(var se=0,ce=0;ce<b.length;ce++)se=Math.max(b[ce].length,se);var ge={x:u.x1+u.w/2,y:u.x1+u.h/2},Pe=b.reduce(function(Se,le){return Math.max(Se,le.length)},0),Oe=function(le){var te=wi(le),ne=te.depth,de=te.index,Ce=b[ne].length,Le=Math.max(u.w/((e.grid?Pe:Ce)+1),Y),$e=Math.max(u.h/(b.length+1),Y),Ne=Math.min(u.w/2/b.length,u.h/2/b.length);if(Ne=Math.max(Ne,Y),e.circle){var me=Ne*ne+Ne-(b.length>0&&b[0].length<=3?Ne/2:0),G=2*Math.PI/b[ne].length*de;return ne===0&&b[0].length===1&&(me=1),{x:ge.x+me*Math.cos(G),y:ge.y+me*Math.sin(G)}}else{var De={x:ge.x+(de+1-(Ce+1)/2)*Le,y:(ne+1)*$e};return De}};return n.nodes().layoutPositions(this,e,Oe),this};var yD={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function JS(r){this.options=rt({},yD,r)}JS.prototype.run=function(){var r=this.options,e=r,t=r.cy,n=e.eles,a=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,i=n.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));for(var o=Yr(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),s={x:o.x1+o.w/2,y:o.y1+o.h/2},u=e.sweep===void 0?2*Math.PI-2*Math.PI/i.length:e.sweep,l=u/Math.max(1,i.length-1),c,f=0,d=0;d<i.length;d++){var h=i[d],v=h.layoutDimensions(e),m=v.w,_=v.h;f=Math.max(f,m,_)}if(Ge(e.radius)?c=e.radius:i.length<=1?c=0:c=Math.min(o.h,o.w)/2-f,i.length>1&&e.avoidOverlap){f*=1.75;var b=Math.cos(l)-Math.cos(0),w=Math.sin(l)-Math.sin(0),y=Math.sqrt(f*f/(b*b+w*w));c=Math.max(y,c)}var x=function(E,p){var P=e.startAngle+p*l*(a?1:-1),T=c*Math.cos(P),R=c*Math.sin(P),M={x:s.x+T,y:s.y+R};return M};return n.nodes().layoutPositions(this,e,x),this};var mD={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function eC(r){this.options=rt({},mD,r)}eC.prototype.run=function(){for(var r=this.options,e=r,t=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,n=r.cy,a=e.eles,i=a.nodes().not(":parent"),o=Yr(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),s={x:o.x1+o.w/2,y:o.y1+o.h/2},u=[],l=0,c=0;c<i.length;c++){var f=i[c],d=void 0;d=e.concentric(f),u.push({value:d,node:f}),f._private.scratch.concentric=d}i.updateStyle();for(var h=0;h<i.length;h++){var v=i[h],m=v.layoutDimensions(e);l=Math.max(l,m.w,m.h)}u.sort(function(Se,le){return le.value-Se.value});for(var _=e.levelWidth(i),b=[[]],w=b[0],y=0;y<u.length;y++){var x=u[y];if(w.length>0){var C=Math.abs(w[0].value-x.value);C>=_&&(w=[],b.push(w))}w.push(x)}var E=l+e.minNodeSpacing;if(!e.avoidOverlap){var p=b.length>0&&b[0].length>1,P=Math.min(o.w,o.h)/2-E,T=P/(b.length+p?1:0);E=Math.min(E,T)}for(var R=0,M=0;M<b.length;M++){var N=b[M],B=e.sweep===void 0?2*Math.PI-2*Math.PI/N.length:e.sweep,q=N.dTheta=B/Math.max(1,N.length-1);if(N.length>1&&e.avoidOverlap){var Z=Math.cos(q)-Math.cos(0),Q=Math.sin(q)-Math.sin(0),Y=Math.sqrt(E*E/(Z*Z+Q*Q));R=Math.max(Y,R)}N.r=R,R+=E}if(e.equidistant){for(var J=0,X=0,k=0;k<b.length;k++){var D=b[k],I=D.r-X;J=Math.max(J,I)}X=0;for(var F=0;F<b.length;F++){var L=b[F];F===0&&(X=L.r),L.r=X,X+=J}}for(var H={},j=0;j<b.length;j++)for(var W=b[j],re=W.dTheta,se=W.r,ce=0;ce<W.length;ce++){var ge=W[ce],Pe=e.startAngle+(t?1:-1)*re*ce,Oe={x:s.x+se*Math.cos(Pe),y:s.y+se*Math.sin(Pe)};H[ge.node.id()]=Oe}return a.nodes().layoutPositions(this,e,function(Se){var le=Se.id();return H[le]}),this};var lc,bD={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,t){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function Cu(r){this.options=rt({},bD,r),this.options.layout=this;var e=this.options.eles.nodes(),t=this.options.eles.edges(),n=t.filter(function(a){var i=a.source().data("id"),o=a.target().data("id"),s=e.some(function(l){return l.data("id")===i}),u=e.some(function(l){return l.data("id")===o});return!s||!u});this.options.eles=this.options.eles.not(n)}Cu.prototype.run=function(){var r=this.options,e=r.cy,t=this;t.stopped=!1,(r.animate===!0||r.animate===!1)&&t.emit({type:"layoutstart",layout:t}),r.debug===!0?lc=!0:lc=!1;var n=wD(e,t,r);lc&&SD(n),r.randomize&&CD(n);var a=Kn(),i=function(){ED(n,e,r),r.fit===!0&&e.fit(r.padding)},o=function(d){return!(t.stopped||d>=r.numIter||(TD(n,r),n.temperature=n.temperature*r.coolingFactor,n.temperature<r.minTemp))},s=function(){if(r.animate===!0||r.animate===!1)i(),t.one("layoutstop",r.stop),t.emit({type:"layoutstop",layout:t});else{var d=r.eles.nodes(),h=tC(n,r,d);d.layoutPositions(t,r,h)}},u=0,l=!0;if(r.animate===!0){var c=function f(){for(var d=0;l&&d<r.refresh;)l=o(u),u++,d++;if(!l)km(n,r),s();else{var h=Kn();h-a>=r.animationThreshold&&i(),Ws(f)}};c()}else{for(;l;)l=o(u),u++;km(n,r),s()}return this};Cu.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};Cu.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var wD=function(e,t,n){for(var a=n.eles.edges(),i=n.eles.nodes(),o=Yr(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),s={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:a.size(),temperature:n.initialTemp,clientWidth:o.w,clientHeight:o.h,boundingBox:o},u=n.eles.components(),l={},c=0;c<u.length;c++)for(var f=u[c],d=0;d<f.length;d++){var h=f[d];l[h.id()]=c}for(var c=0;c<s.nodeSize;c++){var v=i[c],m=v.layoutDimensions(n),_={};_.isLocked=v.locked(),_.id=v.data("id"),_.parentId=v.data("parent"),_.cmptId=l[v.id()],_.children=[],_.positionX=v.position("x"),_.positionY=v.position("y"),_.offsetX=0,_.offsetY=0,_.height=m.w,_.width=m.h,_.maxX=_.positionX+_.width/2,_.minX=_.positionX-_.width/2,_.maxY=_.positionY+_.height/2,_.minY=_.positionY-_.height/2,_.padLeft=parseFloat(v.style("padding")),_.padRight=parseFloat(v.style("padding")),_.padTop=parseFloat(v.style("padding")),_.padBottom=parseFloat(v.style("padding")),_.nodeRepulsion=rr(n.nodeRepulsion)?n.nodeRepulsion(v):n.nodeRepulsion,s.layoutNodes.push(_),s.idToIndex[_.id]=c}for(var b=[],w=0,y=-1,x=[],c=0;c<s.nodeSize;c++){var v=s.layoutNodes[c],C=v.parentId;C!=null?s.layoutNodes[s.idToIndex[C]].children.push(v.id):(b[++y]=v.id,x.push(v.id))}for(s.graphSet.push(x);w<=y;){var E=b[w++],p=s.idToIndex[E],h=s.layoutNodes[p],P=h.children;if(P.length>0){s.graphSet.push(P);for(var c=0;c<P.length;c++)b[++y]=P[c]}}for(var c=0;c<s.graphSet.length;c++)for(var T=s.graphSet[c],d=0;d<T.length;d++){var R=s.idToIndex[T[d]];s.indexToGraph[R]=c}for(var c=0;c<s.edgeSize;c++){var M=a[c],N={};N.id=M.data("id"),N.sourceId=M.data("source"),N.targetId=M.data("target");var B=rr(n.idealEdgeLength)?n.idealEdgeLength(M):n.idealEdgeLength,q=rr(n.edgeElasticity)?n.edgeElasticity(M):n.edgeElasticity,Z=s.idToIndex[N.sourceId],Q=s.idToIndex[N.targetId],Y=s.indexToGraph[Z],J=s.indexToGraph[Q];if(Y!=J){for(var X=_D(N.sourceId,N.targetId,s),k=s.graphSet[X],D=0,_=s.layoutNodes[Z];k.indexOf(_.id)===-1;)_=s.layoutNodes[s.idToIndex[_.parentId]],D++;for(_=s.layoutNodes[Q];k.indexOf(_.id)===-1;)_=s.layoutNodes[s.idToIndex[_.parentId]],D++;B*=D*n.nestingFactor}N.idealLength=B,N.elasticity=q,s.layoutEdges.push(N)}return s},_D=function(e,t,n){var a=xD(e,t,0,n);return 2>a.count?0:a.graph},xD=function r(e,t,n,a){var i=a.graphSet[n];if(-1<i.indexOf(e)&&-1<i.indexOf(t))return{count:2,graph:n};for(var o=0,s=0;s<i.length;s++){var u=i[s],l=a.idToIndex[u],c=a.layoutNodes[l].children;if(c.length!==0){var f=a.indexToGraph[a.idToIndex[c[0]]],d=r(e,t,f,a);if(d.count!==0)if(d.count===1){if(o++,o===2)break}else return d}}return{count:o,graph:n}},SD,CD=function(e,t){for(var n=e.clientWidth,a=e.clientHeight,i=0;i<e.nodeSize;i++){var o=e.layoutNodes[i];o.children.length===0&&!o.isLocked&&(o.positionX=Math.random()*n,o.positionY=Math.random()*a)}},tC=function(e,t,n){var a=e.boundingBox,i={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return t.boundingBox&&(n.forEach(function(o){var s=e.layoutNodes[e.idToIndex[o.data("id")]];i.x1=Math.min(i.x1,s.positionX),i.x2=Math.max(i.x2,s.positionX),i.y1=Math.min(i.y1,s.positionY),i.y2=Math.max(i.y2,s.positionY)}),i.w=i.x2-i.x1,i.h=i.y2-i.y1),function(o,s){var u=e.layoutNodes[e.idToIndex[o.data("id")]];if(t.boundingBox){var l=(u.positionX-i.x1)/i.w,c=(u.positionY-i.y1)/i.h;return{x:a.x1+l*a.w,y:a.y1+c*a.h}}else return{x:u.positionX,y:u.positionY}}},ED=function(e,t,n){var a=n.layout,i=n.eles.nodes(),o=tC(e,n,i);i.positions(o),e.ready!==!0&&(e.ready=!0,a.one("layoutready",n.ready),a.emit({type:"layoutready",layout:this}))},TD=function(e,t,n){PD(e,t),MD(e),OD(e,t),DD(e),RD(e)},PD=function(e,t){for(var n=0;n<e.graphSet.length;n++)for(var a=e.graphSet[n],i=a.length,o=0;o<i;o++)for(var s=e.layoutNodes[e.idToIndex[a[o]]],u=o+1;u<i;u++){var l=e.layoutNodes[e.idToIndex[a[u]]];AD(s,l,e,t)}},Am=function(e){return-e+2*e*Math.random()},AD=function(e,t,n,a){var i=e.cmptId,o=t.cmptId;if(!(i!==o&&!n.isCompound)){var s=t.positionX-e.positionX,u=t.positionY-e.positionY,l=1;s===0&&u===0&&(s=Am(l),u=Am(l));var c=kD(e,t,s,u);if(c>0)var f=a.nodeOverlap*c,d=Math.sqrt(s*s+u*u),h=f*s/d,v=f*u/d;else var m=eu(e,s,u),_=eu(t,-1*s,-1*u),b=_.x-m.x,w=_.y-m.y,y=b*b+w*w,d=Math.sqrt(y),f=(e.nodeRepulsion+t.nodeRepulsion)/y,h=f*b/d,v=f*w/d;e.isLocked||(e.offsetX-=h,e.offsetY-=v),t.isLocked||(t.offsetX+=h,t.offsetY+=v)}},kD=function(e,t,n,a){if(n>0)var i=e.maxX-t.minX;else var i=t.maxX-e.minX;if(a>0)var o=e.maxY-t.minY;else var o=t.maxY-e.minY;return i>=0&&o>=0?Math.sqrt(i*i+o*o):0},eu=function(e,t,n){var a=e.positionX,i=e.positionY,o=e.height||1,s=e.width||1,u=n/t,l=o/s,c={};return t===0&&0<n||t===0&&0>n?(c.x=a,c.y=i+o/2,c):0<t&&-1*l<=u&&u<=l?(c.x=a+s/2,c.y=i+s*n/2/t,c):0>t&&-1*l<=u&&u<=l?(c.x=a-s/2,c.y=i-s*n/2/t,c):0<n&&(u<=-1*l||u>=l)?(c.x=a+o*t/2/n,c.y=i+o/2,c):(0>n&&(u<=-1*l||u>=l)&&(c.x=a-o*t/2/n,c.y=i-o/2),c)},MD=function(e,t){for(var n=0;n<e.edgeSize;n++){var a=e.layoutEdges[n],i=e.idToIndex[a.sourceId],o=e.layoutNodes[i],s=e.idToIndex[a.targetId],u=e.layoutNodes[s],l=u.positionX-o.positionX,c=u.positionY-o.positionY;if(!(l===0&&c===0)){var f=eu(o,l,c),d=eu(u,-1*l,-1*c),h=d.x-f.x,v=d.y-f.y,m=Math.sqrt(h*h+v*v),_=Math.pow(a.idealLength-m,2)/a.elasticity;if(m!==0)var b=_*h/m,w=_*v/m;else var b=0,w=0;o.isLocked||(o.offsetX+=b,o.offsetY+=w),u.isLocked||(u.offsetX-=b,u.offsetY-=w)}}},OD=function(e,t){if(t.gravity!==0)for(var n=1,a=0;a<e.graphSet.length;a++){var i=e.graphSet[a],o=i.length;if(a===0)var s=e.clientHeight/2,u=e.clientWidth/2;else var l=e.layoutNodes[e.idToIndex[i[0]]],c=e.layoutNodes[e.idToIndex[l.parentId]],s=c.positionX,u=c.positionY;for(var f=0;f<o;f++){var d=e.layoutNodes[e.idToIndex[i[f]]];if(!d.isLocked){var h=s-d.positionX,v=u-d.positionY,m=Math.sqrt(h*h+v*v);if(m>n){var _=t.gravity*h/m,b=t.gravity*v/m;d.offsetX+=_,d.offsetY+=b}}}}},DD=function(e,t){var n=[],a=0,i=-1;for(n.push.apply(n,e.graphSet[0]),i+=e.graphSet[0].length;a<=i;){var o=n[a++],s=e.idToIndex[o],u=e.layoutNodes[s],l=u.children;if(0<l.length&&!u.isLocked){for(var c=u.offsetX,f=u.offsetY,d=0;d<l.length;d++){var h=e.layoutNodes[e.idToIndex[l[d]]];h.offsetX+=c,h.offsetY+=f,n[++i]=l[d]}u.offsetX=0,u.offsetY=0}}},RD=function(e,t){for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&(a.maxX=void 0,a.minX=void 0,a.maxY=void 0,a.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];if(!(0<a.children.length||a.isLocked)){var i=ID(a.offsetX,a.offsetY,e.temperature);a.positionX+=i.x,a.positionY+=i.y,a.offsetX=0,a.offsetY=0,a.minX=a.positionX-a.width,a.maxX=a.positionX+a.width,a.minY=a.positionY-a.height,a.maxY=a.positionY+a.height,LD(a,e)}}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&!a.isLocked&&(a.positionX=(a.maxX+a.minX)/2,a.positionY=(a.maxY+a.minY)/2,a.width=a.maxX-a.minX,a.height=a.maxY-a.minY)}},ID=function(e,t,n){var a=Math.sqrt(e*e+t*t);if(a>n)var i={x:n*e/a,y:n*t/a};else var i={x:e,y:t};return i},LD=function r(e,t){var n=e.parentId;if(n!=null){var a=t.layoutNodes[t.idToIndex[n]],i=!1;if((a.maxX==null||e.maxX+a.padRight>a.maxX)&&(a.maxX=e.maxX+a.padRight,i=!0),(a.minX==null||e.minX-a.padLeft<a.minX)&&(a.minX=e.minX-a.padLeft,i=!0),(a.maxY==null||e.maxY+a.padBottom>a.maxY)&&(a.maxY=e.maxY+a.padBottom,i=!0),(a.minY==null||e.minY-a.padTop<a.minY)&&(a.minY=e.minY-a.padTop,i=!0),i)return r(a,t)}},km=function(e,t){for(var n=e.layoutNodes,a=[],i=0;i<n.length;i++){var o=n[i],s=o.cmptId,u=a[s]=a[s]||[];u.push(o)}for(var l=0,i=0;i<a.length;i++){var c=a[i];if(c){c.x1=1/0,c.x2=-1/0,c.y1=1/0,c.y2=-1/0;for(var f=0;f<c.length;f++){var d=c[f];c.x1=Math.min(c.x1,d.positionX-d.width/2),c.x2=Math.max(c.x2,d.positionX+d.width/2),c.y1=Math.min(c.y1,d.positionY-d.height/2),c.y2=Math.max(c.y2,d.positionY+d.height/2)}c.w=c.x2-c.x1,c.h=c.y2-c.y1,l+=c.w*c.h}}a.sort(function(w,y){return y.w*y.h-w.w*w.h});for(var h=0,v=0,m=0,_=0,b=Math.sqrt(l)*e.clientWidth/e.clientHeight,i=0;i<a.length;i++){var c=a[i];if(c){for(var f=0;f<c.length;f++){var d=c[f];d.isLocked||(d.positionX+=h-c.x1,d.positionY+=v-c.y1)}h+=c.w+t.componentSpacing,m+=c.w+t.componentSpacing,_=Math.max(_,c.h),m>b&&(v+=_+t.componentSpacing,h=0,m=0,_=0)}}},ND={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function rC(r){this.options=rt({},ND,r)}rC.prototype.run=function(){var r=this.options,e=r,t=r.cy,n=e.eles,a=n.nodes().not(":parent");e.sort&&(a=a.sort(e.sort));var i=Yr(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()});if(i.h===0||i.w===0)n.nodes().layoutPositions(this,e,function(F){return{x:i.x1,y:i.y1}});else{var o=a.size(),s=Math.sqrt(o*i.h/i.w),u=Math.round(s),l=Math.round(i.w/i.h*s),c=function(L){if(L==null)return Math.min(u,l);var H=Math.min(u,l);H==u?u=L:l=L},f=function(L){if(L==null)return Math.max(u,l);var H=Math.max(u,l);H==u?u=L:l=L},d=e.rows,h=e.cols!=null?e.cols:e.columns;if(d!=null&&h!=null)u=d,l=h;else if(d!=null&&h==null)u=d,l=Math.ceil(o/u);else if(d==null&&h!=null)l=h,u=Math.ceil(o/l);else if(l*u>o){var v=c(),m=f();(v-1)*m>=o?c(v-1):(m-1)*v>=o&&f(m-1)}else for(;l*u<o;){var _=c(),b=f();(b+1)*_>=o?f(b+1):c(_+1)}var w=i.w/l,y=i.h/u;if(e.condense&&(w=0,y=0),e.avoidOverlap)for(var x=0;x<a.length;x++){var C=a[x],E=C._private.position;(E.x==null||E.y==null)&&(E.x=0,E.y=0);var p=C.layoutDimensions(e),P=e.avoidOverlapPadding,T=p.w+P,R=p.h+P;w=Math.max(w,T),y=Math.max(y,R)}for(var M={},N=function(L,H){return!!M["c-"+L+"-"+H]},B=function(L,H){M["c-"+L+"-"+H]=!0},q=0,Z=0,Q=function(){Z++,Z>=l&&(Z=0,q++)},Y={},J=0;J<a.length;J++){var X=a[J],k=e.position(X);if(k&&(k.row!==void 0||k.col!==void 0)){var D={row:k.row,col:k.col};if(D.col===void 0)for(D.col=0;N(D.row,D.col);)D.col++;else if(D.row===void 0)for(D.row=0;N(D.row,D.col);)D.row++;Y[X.id()]=D,B(D.row,D.col)}}var I=function(L,H){var j,W;if(L.locked()||L.isParent())return!1;var re=Y[L.id()];if(re)j=re.col*w+w/2+i.x1,W=re.row*y+y/2+i.y1;else{for(;N(q,Z);)Q();j=Z*w+w/2+i.x1,W=q*y+y/2+i.y1,B(q,Z),Q()}return{x:j,y:W}};a.layoutPositions(this,e,I)}return this};var FD={ready:function(){},stop:function(){}};function Ng(r){this.options=rt({},FD,r)}Ng.prototype.run=function(){var r=this.options,e=r.eles,t=this;return r.cy,t.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),t.one("layoutready",r.ready),t.emit("layoutready"),t.one("layoutstop",r.stop),t.emit("layoutstop"),this};Ng.prototype.stop=function(){return this};var BD={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function nC(r){this.options=rt({},BD,r)}nC.prototype.run=function(){var r=this.options,e=r.eles,t=e.nodes(),n=rr(r.positions);function a(i){if(r.positions==null)return $P(i.position());if(n)return r.positions(i);var o=r.positions[i._private.data.id];return o??null}return t.layoutPositions(this,r,function(i,o){var s=a(i);return i.locked()||s==null?!1:s}),this};var qD={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function aC(r){this.options=rt({},qD,r)}aC.prototype.run=function(){var r=this.options,e=r.cy,t=r.eles,n=Yr(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),a=function(o,s){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}};return t.nodes().layoutPositions(this,r,a),this};var zD=[{name:"breadthfirst",impl:QS},{name:"circle",impl:JS},{name:"concentric",impl:eC},{name:"cose",impl:Cu},{name:"grid",impl:rC},{name:"null",impl:Ng},{name:"preset",impl:nC},{name:"random",impl:aC}];function iC(r){this.options=r,this.notifications=0}var Mm=function(){},Om=function(){throw new Error("A headless instance can not render images")};iC.prototype={recalculateRenderedStyle:Mm,notify:function(){this.notifications++},init:Mm,isHeadless:function(){return!0},png:Om,jpg:Om};var Fg={};Fg.arrowShapeWidth=.3;Fg.registerArrowShapes=function(){var r=this.arrowShapes={},e=this,t=function(l,c,f,d,h,v,m){var _=h.x-f/2-m,b=h.x+f/2+m,w=h.y-f/2-m,y=h.y+f/2+m,x=_<=l&&l<=b&&w<=c&&c<=y;return x},n=function(l,c,f,d,h){var v=l*Math.cos(d)-c*Math.sin(d),m=l*Math.sin(d)+c*Math.cos(d),_=v*f,b=m*f,w=_+h.x,y=b+h.y;return{x:w,y}},a=function(l,c,f,d){for(var h=[],v=0;v<l.length;v+=2){var m=l[v],_=l[v+1];h.push(n(m,_,c,f,d))}return h},i=function(l){for(var c=[],f=0;f<l.length;f++){var d=l[f];c.push(d.x,d.y)}return c},o=function(l){return l.pstyle("width").pfValue*l.pstyle("arrow-scale").pfValue*2},s=function(l,c){Qe(c)&&(c=r[c]),r[l]=rt({name:l,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(d,h,v,m,_,b){var w=i(a(this.points,v+2*b,m,_)),y=Wr(d,h,w);return y},roughCollide:t,draw:function(d,h,v,m){var _=a(this.points,h,v,m);e.arrowShapeImpl("polygon")(d,_)},spacing:function(d){return 0},gap:o},c)};s("none",{collide:Ks,roughCollide:Ks,draw:xg,spacing:Gy,gap:Gy}),s("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),s("arrow","triangle"),s("triangle-backcurve",{points:r.triangle.points,controlPoint:[0,-.15],roughCollide:t,draw:function(l,c,f,d,h){var v=a(this.points,c,f,d),m=this.controlPoint,_=n(m[0],m[1],c,f,d);e.arrowShapeImpl(this.name)(l,v,_)},gap:function(l){return o(l)*.8}}),s("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(l,c,f,d,h,v,m){var _=i(a(this.points,f+2*m,d,h)),b=i(a(this.pointsTee,f+2*m,d,h)),w=Wr(l,c,_)||Wr(l,c,b);return w},draw:function(l,c,f,d,h){var v=a(this.points,c,f,d),m=a(this.pointsTee,c,f,d);e.arrowShapeImpl(this.name)(l,v,m)}}),s("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(l,c,f,d,h,v,m){var _=h,b=Math.pow(_.x-l,2)+Math.pow(_.y-c,2)<=Math.pow((f+2*m)*this.radius,2),w=i(a(this.points,f+2*m,d,h));return Wr(l,c,w)||b},draw:function(l,c,f,d,h){var v=a(this.pointsTr,c,f,d);e.arrowShapeImpl(this.name)(l,v,d.x,d.y,this.radius*c)},spacing:function(l){return e.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.radius}}),s("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(l,c){var f=this.baseCrossLinePts.slice(),d=c/l,h=3,v=5;return f[h]=f[h]-d,f[v]=f[v]-d,f},collide:function(l,c,f,d,h,v,m){var _=i(a(this.points,f+2*m,d,h)),b=i(a(this.crossLinePts(f,v),f+2*m,d,h)),w=Wr(l,c,_)||Wr(l,c,b);return w},draw:function(l,c,f,d,h){var v=a(this.points,c,f,d),m=a(this.crossLinePts(c,h),c,f,d);e.arrowShapeImpl(this.name)(l,v,m)}}),s("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(l){return o(l)*.525}}),s("circle",{radius:.15,collide:function(l,c,f,d,h,v,m){var _=h,b=Math.pow(_.x-l,2)+Math.pow(_.y-c,2)<=Math.pow((f+2*m)*this.radius,2);return b},draw:function(l,c,f,d,h){e.arrowShapeImpl(this.name)(l,d.x,d.y,this.radius*c)},spacing:function(l){return e.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.radius}}),s("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(l){return 1},gap:function(l){return 1}}),s("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),s("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(l){return l.pstyle("width").pfValue*l.pstyle("arrow-scale").value}}),s("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(l){return .95*l.pstyle("width").pfValue*l.pstyle("arrow-scale").value}})};var ri={};ri.projectIntoViewport=function(r,e){var t=this.cy,n=this.findContainerClientCoords(),a=n[0],i=n[1],o=n[4],s=t.pan(),u=t.zoom(),l=((r-a)/o-s.x)/u,c=((e-i)/o-s.y)/u;return[l,c]};ri.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var r=this.container,e=r.getBoundingClientRect(),t=this.cy.window().getComputedStyle(r),n=function(b){return parseFloat(t.getPropertyValue(b))},a={left:n("padding-left"),right:n("padding-right"),top:n("padding-top"),bottom:n("padding-bottom")},i={left:n("border-left-width"),right:n("border-right-width"),top:n("border-top-width"),bottom:n("border-bottom-width")},o=r.clientWidth,s=r.clientHeight,u=a.left+a.right,l=a.top+a.bottom,c=i.left+i.right,f=e.width/(o+c),d=o-u,h=s-l,v=e.left+a.left+i.left,m=e.top+a.top+i.top;return this.containerBB=[v,m,d,h,f]};ri.invalidateContainerClientCoordsCache=function(){this.containerBB=null};ri.findNearestElement=function(r,e,t,n){return this.findNearestElements(r,e,t,n)[0]};ri.findNearestElements=function(r,e,t,n){var a=this,i=this,o=i.getCachedZSortedEles(),s=[],u=i.cy.zoom(),l=i.cy.hasCompoundNodes(),c=(n?24:8)/u,f=(n?8:2)/u,d=(n?8:2)/u,h=1/0,v,m;t&&(o=o.interactive);function _(p,P){if(p.isNode()){if(m)return;m=p,s.push(p)}if(p.isEdge()&&(P==null||P<h))if(v){if(v.pstyle("z-compound-depth").value===p.pstyle("z-compound-depth").value&&v.pstyle("z-compound-depth").value===p.pstyle("z-compound-depth").value){for(var T=0;T<s.length;T++)if(s[T].isEdge()){s[T]=p,v=p,h=P??h;break}}}else s.push(p),v=p,h=P??h}function b(p){var P=p.outerWidth()+2*f,T=p.outerHeight()+2*f,R=P/2,M=T/2,N=p.position(),B=p.pstyle("corner-radius").value==="auto"?"auto":p.pstyle("corner-radius").pfValue,q=p._private.rscratch;if(N.x-R<=r&&r<=N.x+R&&N.y-M<=e&&e<=N.y+M){var Z=i.nodeShapes[a.getNodeShape(p)];if(Z.checkPoint(r,e,0,P,T,N.x,N.y,B,q))return _(p,0),!0}}function w(p){var P=p._private,T=P.rscratch,R=p.pstyle("width").pfValue,M=p.pstyle("arrow-scale").value,N=R/2+c,B=N*N,q=N*2,J=P.source,X=P.target,Z;if(T.edgeType==="segments"||T.edgeType==="straight"||T.edgeType==="haystack"){for(var Q=T.allpts,Y=0;Y+3<Q.length;Y+=2)if(tA(r,e,Q[Y],Q[Y+1],Q[Y+2],Q[Y+3],q)&&B>(Z=oA(r,e,Q[Y],Q[Y+1],Q[Y+2],Q[Y+3])))return _(p,Z),!0}else if(T.edgeType==="bezier"||T.edgeType==="multibezier"||T.edgeType==="self"||T.edgeType==="compound"){for(var Q=T.allpts,Y=0;Y+5<T.allpts.length;Y+=4)if(rA(r,e,Q[Y],Q[Y+1],Q[Y+2],Q[Y+3],Q[Y+4],Q[Y+5],q)&&B>(Z=iA(r,e,Q[Y],Q[Y+1],Q[Y+2],Q[Y+3],Q[Y+4],Q[Y+5])))return _(p,Z),!0}for(var J=J||P.source,X=X||P.target,k=a.getArrowWidth(R,M),D=[{name:"source",x:T.arrowStartX,y:T.arrowStartY,angle:T.srcArrowAngle},{name:"target",x:T.arrowEndX,y:T.arrowEndY,angle:T.tgtArrowAngle},{name:"mid-source",x:T.midX,y:T.midY,angle:T.midsrcArrowAngle},{name:"mid-target",x:T.midX,y:T.midY,angle:T.midtgtArrowAngle}],Y=0;Y<D.length;Y++){var I=D[Y],F=i.arrowShapes[p.pstyle(I.name+"-arrow-shape").value],L=p.pstyle("width").pfValue;if(F.roughCollide(r,e,k,I.angle,{x:I.x,y:I.y},L,c)&&F.collide(r,e,k,I.angle,{x:I.x,y:I.y},L,c))return _(p),!0}l&&s.length>0&&(b(J),b(X))}function y(p,P,T){return pn(p,P,T)}function x(p,P){var T=p._private,R=d,M;P?M=P+"-":M="",p.boundingBox();var N=T.labelBounds[P||"main"],B=p.pstyle(M+"label").value,q=p.pstyle("text-events").strValue==="yes";if(!(!q||!B)){var Z=y(T.rscratch,"labelX",P),Q=y(T.rscratch,"labelY",P),Y=y(T.rscratch,"labelAngle",P),J=p.pstyle(M+"text-margin-x").pfValue,X=p.pstyle(M+"text-margin-y").pfValue,k=N.x1-R-J,D=N.x2+R-J,I=N.y1-R-X,F=N.y2+R-X;if(Y){var L=Math.cos(Y),H=Math.sin(Y),j=function(Oe,Se){return Oe=Oe-Z,Se=Se-Q,{x:Oe*L-Se*H+Z,y:Oe*H+Se*L+Q}},W=j(k,I),re=j(k,F),se=j(D,I),ce=j(D,F),ge=[W.x+J,W.y+X,se.x+J,se.y+X,ce.x+J,ce.y+X,re.x+J,re.y+X];if(Wr(r,e,ge))return _(p),!0}else if(Li(N,r,e))return _(p),!0}}for(var C=o.length-1;C>=0;C--){var E=o[C];E.isNode()?b(E)||x(E):w(E)||x(E)||x(E,"source")||x(E,"target")}return s};ri.getAllInBox=function(r,e,t,n){var a=this.getCachedZSortedEles().interactive,i=[],o=Math.min(r,t),s=Math.max(r,t),u=Math.min(e,n),l=Math.max(e,n);r=o,t=s,e=u,n=l;for(var c=Yr({x1:r,y1:e,x2:t,y2:n}),f=0;f<a.length;f++){var d=a[f];if(d.isNode()){var h=d,v=h.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});Eg(c,v)&&!vS(v,c)&&i.push(h)}else{var m=d,_=m._private,b=_.rscratch;if(b.startX!=null&&b.startY!=null&&!Li(c,b.startX,b.startY)||b.endX!=null&&b.endY!=null&&!Li(c,b.endX,b.endY))continue;if(b.edgeType==="bezier"||b.edgeType==="multibezier"||b.edgeType==="self"||b.edgeType==="compound"||b.edgeType==="segments"||b.edgeType==="haystack"){for(var w=_.rstyle.bezierPts||_.rstyle.linePts||_.rstyle.haystackPts,y=!0,x=0;x<w.length;x++)if(!eA(c,w[x])){y=!1;break}y&&i.push(m)}else(b.edgeType==="haystack"||b.edgeType==="straight")&&i.push(m)}}return i};var tu={};tu.calculateArrowAngles=function(r){var e=r._private.rscratch,t=e.edgeType==="haystack",n=e.edgeType==="bezier",a=e.edgeType==="multibezier",i=e.edgeType==="segments",o=e.edgeType==="compound",s=e.edgeType==="self",u,l,c,f,d,h,b,w;if(t?(c=e.haystackPts[0],f=e.haystackPts[1],d=e.haystackPts[2],h=e.haystackPts[3]):(c=e.arrowStartX,f=e.arrowStartY,d=e.arrowEndX,h=e.arrowEndY),b=e.midX,w=e.midY,i)u=c-e.segpts[0],l=f-e.segpts[1];else if(a||o||s||n){var v=e.allpts,m=_r(v[0],v[2],v[4],.1),_=_r(v[1],v[3],v[5],.1);u=c-m,l=f-_}else u=c-b,l=f-w;e.srcArrowAngle=ms(u,l);var b=e.midX,w=e.midY;if(t&&(b=(c+d)/2,w=(f+h)/2),u=d-c,l=h-f,i){var v=e.allpts;if(v.length/2%2===0){var y=v.length/2,x=y-2;u=v[y]-v[x],l=v[y+1]-v[x+1]}else if(e.isRound)u=e.midVector[1],l=-e.midVector[0];else{var y=v.length/2-1,x=y-2;u=v[y]-v[x],l=v[y+1]-v[x+1]}}else if(a||o||s){var v=e.allpts,C=e.ctrlpts,E,p,P,T;if(C.length/2%2===0){var R=v.length/2-1,M=R+2,N=M+2;E=_r(v[R],v[M],v[N],0),p=_r(v[R+1],v[M+1],v[N+1],0),P=_r(v[R],v[M],v[N],1e-4),T=_r(v[R+1],v[M+1],v[N+1],1e-4)}else{var M=v.length/2-1,R=M-2,N=M+2;E=_r(v[R],v[M],v[N],.4999),p=_r(v[R+1],v[M+1],v[N+1],.4999),P=_r(v[R],v[M],v[N],.5),T=_r(v[R+1],v[M+1],v[N+1],.5)}u=P-E,l=T-p}if(e.midtgtArrowAngle=ms(u,l),e.midDispX=u,e.midDispY=l,u*=-1,l*=-1,i){var v=e.allpts;if(v.length/2%2!==0){if(!e.isRound){var y=v.length/2-1,B=y+2;u=-(v[B]-v[y]),l=-(v[B+1]-v[y+1])}}}if(e.midsrcArrowAngle=ms(u,l),i)u=d-e.segpts[e.segpts.length-2],l=h-e.segpts[e.segpts.length-1];else if(a||o||s||n){var v=e.allpts,q=v.length,m=_r(v[q-6],v[q-4],v[q-2],.9),_=_r(v[q-5],v[q-3],v[q-1],.9);u=d-m,l=h-_}else u=d-b,l=h-w;e.tgtArrowAngle=ms(u,l)};tu.getArrowWidth=tu.getArrowHeight=function(r,e){var t=this.arrowWidthCache=this.arrowWidthCache||{},n=t[r+", "+e];return n||(n=Math.max(Math.pow(r*13.37,.9),29)*e,t[r+", "+e]=n,n)};var eg,tg,On={},nn={},Dm,Rm,ja,Vs,Un,za,Ua,kn,_i,Ps,oC,sC,rg,ng,Im,Lm=function(e,t,n){n.x=t.x-e.x,n.y=t.y-e.y,n.len=Math.sqrt(n.x*n.x+n.y*n.y),n.nx=n.x/n.len,n.ny=n.y/n.len,n.ang=Math.atan2(n.ny,n.nx)},GD=function(e,t){t.x=e.x*-1,t.y=e.y*-1,t.nx=e.nx*-1,t.ny=e.ny*-1,t.ang=e.ang>0?-(Math.PI-e.ang):Math.PI+e.ang},$D=function(e,t,n,a,i){if(e!==Im?Lm(t,e,On):GD(nn,On),Lm(t,n,nn),Dm=On.nx*nn.ny-On.ny*nn.nx,Rm=On.nx*nn.nx-On.ny*-nn.ny,Un=Math.asin(Math.max(-1,Math.min(1,Dm))),Math.abs(Un)<1e-6){eg=t.x,tg=t.y,Ua=_i=0;return}ja=1,Vs=!1,Rm<0?Un<0?Un=Math.PI+Un:(Un=Math.PI-Un,ja=-1,Vs=!0):Un>0&&(ja=-1,Vs=!0),t.radius!==void 0?_i=t.radius:_i=a,za=Un/2,Ps=Math.min(On.len/2,nn.len/2),i?(kn=Math.abs(Math.cos(za)*_i/Math.sin(za)),kn>Ps?(kn=Ps,Ua=Math.abs(kn*Math.sin(za)/Math.cos(za))):Ua=_i):(kn=Math.min(Ps,_i),Ua=Math.abs(kn*Math.sin(za)/Math.cos(za))),rg=t.x+nn.nx*kn,ng=t.y+nn.ny*kn,eg=rg-nn.ny*Ua*ja,tg=ng+nn.nx*Ua*ja,oC=t.x+On.nx*kn,sC=t.y+On.ny*kn,Im=t};function uC(r,e){e.radius===0?r.lineTo(e.cx,e.cy):r.arc(e.cx,e.cy,e.radius,e.startAngle,e.endAngle,e.counterClockwise)}function Bg(r,e,t,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return n===0||e.radius===0?{cx:e.x,cy:e.y,radius:0,startX:e.x,startY:e.y,stopX:e.x,stopY:e.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:($D(r,e,t,n,a),{cx:eg,cy:tg,radius:Ua,startX:oC,startY:sC,stopX:rg,stopY:ng,startAngle:On.ang+Math.PI/2*ja,endAngle:nn.ang-Math.PI/2*ja,counterClockwise:Vs})}var Fr={};Fr.findMidptPtsEtc=function(r,e){var t=e.posPts,n=e.intersectionPts,a=e.vectorNormInverse,i,o=r.pstyle("source-endpoint"),s=r.pstyle("target-endpoint"),u=o.units!=null&&s.units!=null,l=function(C,E,p,P){var T=P-E,R=p-C,M=Math.sqrt(R*R+T*T);return{x:-T/M,y:R/M}},c=r.pstyle("edge-distances").value;switch(c){case"node-position":i=t;break;case"intersection":i=n;break;case"endpoints":{if(u){var f=this.manualEndptToPx(r.source()[0],o),d=hn(f,2),h=d[0],v=d[1],m=this.manualEndptToPx(r.target()[0],s),_=hn(m,2),b=_[0],w=_[1],y={x1:h,y1:v,x2:b,y2:w};a=l(h,v,b,w),i=y}else Mt("Edge ".concat(r.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),i=n;break}}return{midptPts:i,vectorNormInverse:a}};Fr.findHaystackPoints=function(r){for(var e=0;e<r.length;e++){var t=r[e],n=t._private,a=n.rscratch;if(!a.haystack){var i=Math.random()*2*Math.PI;a.source={x:Math.cos(i),y:Math.sin(i)},i=Math.random()*2*Math.PI,a.target={x:Math.cos(i),y:Math.sin(i)}}var o=n.source,s=n.target,u=o.position(),l=s.position(),c=o.width(),f=s.width(),d=o.height(),h=s.height(),v=t.pstyle("haystack-radius").value,m=v/2;a.haystackPts=a.allpts=[a.source.x*c*m+u.x,a.source.y*d*m+u.y,a.target.x*f*m+l.x,a.target.y*h*m+l.y],a.midX=(a.allpts[0]+a.allpts[2])/2,a.midY=(a.allpts[1]+a.allpts[3])/2,a.edgeType="haystack",a.haystack=!0,this.storeEdgeProjections(t),this.calculateArrowAngles(t),this.recalculateEdgeLabelProjections(t),this.calculateLabelAngles(t)}};Fr.findSegmentsPoints=function(r,e){var t=r._private.rscratch,n=r.pstyle("segment-weights"),a=r.pstyle("segment-distances"),i=r.pstyle("segment-radii"),o=r.pstyle("radius-type"),s=Math.min(n.pfValue.length,a.pfValue.length),u=i.pfValue[i.pfValue.length-1],l=o.pfValue[o.pfValue.length-1];t.edgeType="segments",t.segpts=[],t.radii=[],t.isArcRadius=[];for(var c=0;c<s;c++){var f=n.pfValue[c],d=a.pfValue[c],h=1-f,v=f,m=this.findMidptPtsEtc(r,e),_=m.midptPts,b=m.vectorNormInverse,w={x:_.x1*h+_.x2*v,y:_.y1*h+_.y2*v};t.segpts.push(w.x+b.x*d,w.y+b.y*d),t.radii.push(i.pfValue[c]!==void 0?i.pfValue[c]:u),t.isArcRadius.push((o.pfValue[c]!==void 0?o.pfValue[c]:l)==="arc-radius")}};Fr.findLoopPoints=function(r,e,t,n){var a=r._private.rscratch,i=e.dirCounts,o=e.srcPos,s=r.pstyle("control-point-distances"),u=s?s.pfValue[0]:void 0,l=r.pstyle("loop-direction").pfValue,c=r.pstyle("loop-sweep").pfValue,f=r.pstyle("control-point-step-size").pfValue;a.edgeType="self";var d=t,h=f;n&&(d=0,h=u);var v=l-Math.PI/2,m=v-c/2,_=v+c/2,b=l+"_"+c;d=i[b]===void 0?i[b]=0:++i[b],a.ctrlpts=[o.x+Math.cos(m)*1.4*h*(d/3+1),o.y+Math.sin(m)*1.4*h*(d/3+1),o.x+Math.cos(_)*1.4*h*(d/3+1),o.y+Math.sin(_)*1.4*h*(d/3+1)]};Fr.findCompoundLoopPoints=function(r,e,t,n){var a=r._private.rscratch;a.edgeType="compound";var i=e.srcPos,o=e.tgtPos,s=e.srcW,u=e.srcH,l=e.tgtW,c=e.tgtH,f=r.pstyle("control-point-step-size").pfValue,d=r.pstyle("control-point-distances"),h=d?d.pfValue[0]:void 0,v=t,m=f;n&&(v=0,m=h);var _=50,b={x:i.x-s/2,y:i.y-u/2},w={x:o.x-l/2,y:o.y-c/2},y={x:Math.min(b.x,w.x),y:Math.min(b.y,w.y)},x=.5,C=Math.max(x,Math.log(s*.01)),E=Math.max(x,Math.log(l*.01));a.ctrlpts=[y.x,y.y-(1+Math.pow(_,1.12)/100)*m*(v/3+1)*C,y.x-(1+Math.pow(_,1.12)/100)*m*(v/3+1)*E,y.y]};Fr.findStraightEdgePoints=function(r){r._private.rscratch.edgeType="straight"};Fr.findBezierPoints=function(r,e,t,n,a){var i=r._private.rscratch,o=r.pstyle("control-point-step-size").pfValue,s=r.pstyle("control-point-distances"),u=r.pstyle("control-point-weights"),l=s&&u?Math.min(s.value.length,u.value.length):1,c=s?s.pfValue[0]:void 0,f=u.value[0],d=n;i.edgeType=d?"multibezier":"bezier",i.ctrlpts=[];for(var h=0;h<l;h++){var v=(.5-e.eles.length/2+t)*o*(a?-1:1),m=void 0,_=dS(v);d&&(c=s?s.pfValue[h]:o,f=u.value[h]),n?m=c:m=c!==void 0?_*c:void 0;var b=m!==void 0?m:v,w=1-f,y=f,x=this.findMidptPtsEtc(r,e),C=x.midptPts,E=x.vectorNormInverse,p={x:C.x1*w+C.x2*y,y:C.y1*w+C.y2*y};i.ctrlpts.push(p.x+E.x*b,p.y+E.y*b)}};Fr.findTaxiPoints=function(r,e){var t=r._private.rscratch;t.edgeType="segments";var n="vertical",a="horizontal",i="leftward",o="rightward",s="downward",u="upward",l="auto",c=e.posPts,f=e.srcW,d=e.srcH,h=e.tgtW,v=e.tgtH,m=r.pstyle("edge-distances").value,_=m!=="node-position",b=r.pstyle("taxi-direction").value,w=b,y=r.pstyle("taxi-turn"),x=y.units==="%",C=y.pfValue,E=C<0,p=r.pstyle("taxi-turn-min-distance").pfValue,P=_?(f+h)/2:0,T=_?(d+v)/2:0,R=c.x2-c.x1,M=c.y2-c.y1,N=function(Fe,qe){return Fe>0?Math.max(Fe-qe,0):Math.min(Fe+qe,0)},B=N(R,P),q=N(M,T),Z=!1;w===l?b=Math.abs(B)>Math.abs(q)?a:n:w===u||w===s?(b=n,Z=!0):(w===i||w===o)&&(b=a,Z=!0);var Q=b===n,Y=Q?q:B,J=Q?M:R,X=dS(J),k=!1;!(Z&&(x||E))&&(w===s&&J<0||w===u&&J>0||w===i&&J>0||w===o&&J<0)&&(X*=-1,Y=X*Math.abs(Y),k=!0);var D;if(x){var I=C<0?1+C:C;D=I*Y}else{var F=C<0?Y:0;D=F+C*X}var L=function(Fe){return Math.abs(Fe)<p||Math.abs(Fe)>=Math.abs(Y)},H=L(D),j=L(Math.abs(Y)-Math.abs(D)),W=H||j;if(W&&!k)if(Q){var re=Math.abs(J)<=d/2,se=Math.abs(R)<=h/2;if(re){var ce=(c.x1+c.x2)/2,ge=c.y1,Pe=c.y2;t.segpts=[ce,ge,ce,Pe]}else if(se){var Oe=(c.y1+c.y2)/2,Se=c.x1,le=c.x2;t.segpts=[Se,Oe,le,Oe]}else t.segpts=[c.x1,c.y2]}else{var te=Math.abs(J)<=f/2,ne=Math.abs(M)<=v/2;if(te){var de=(c.y1+c.y2)/2,Ce=c.x1,Le=c.x2;t.segpts=[Ce,de,Le,de]}else if(ne){var $e=(c.x1+c.x2)/2,Ne=c.y1,De=c.y2;t.segpts=[$e,Ne,$e,De]}else t.segpts=[c.x2,c.y1]}else if(Q){var me=c.y1+D+(_?d/2*X:0),G=c.x1,U=c.x2;t.segpts=[G,me,U,me]}else{var oe=c.x1+D+(_?f/2*X:0),ae=c.y1,fe=c.y2;t.segpts=[oe,ae,oe,fe]}if(t.isRound){var we=r.pstyle("taxi-radius").value,ve=r.pstyle("radius-type").value[0]==="arc-radius";t.radii=new Array(t.segpts.length/2).fill(we),t.isArcRadius=new Array(t.segpts.length/2).fill(ve)}};Fr.tryToCorrectInvalidPoints=function(r,e){var t=r._private.rscratch;if(t.edgeType==="bezier"){var n=e.srcPos,a=e.tgtPos,i=e.srcW,o=e.srcH,s=e.tgtW,u=e.tgtH,l=e.srcShape,c=e.tgtShape,f=e.srcCornerRadius,d=e.tgtCornerRadius,h=e.srcRs,v=e.tgtRs,m=!Ge(t.startX)||!Ge(t.startY),_=!Ge(t.arrowStartX)||!Ge(t.arrowStartY),b=!Ge(t.endX)||!Ge(t.endY),w=!Ge(t.arrowEndX)||!Ge(t.arrowEndY),y=3,x=this.getArrowWidth(r.pstyle("width").pfValue,r.pstyle("arrow-scale").value)*this.arrowShapeWidth,C=y*x,E=Xa({x:t.ctrlpts[0],y:t.ctrlpts[1]},{x:t.startX,y:t.startY}),p=E<C,P=Xa({x:t.ctrlpts[0],y:t.ctrlpts[1]},{x:t.endX,y:t.endY}),T=P<C,R=!1;if(m||_||p){R=!0;var M={x:t.ctrlpts[0]-n.x,y:t.ctrlpts[1]-n.y},N=Math.sqrt(M.x*M.x+M.y*M.y),B={x:M.x/N,y:M.y/N},q=Math.max(i,o),Z={x:t.ctrlpts[0]+B.x*2*q,y:t.ctrlpts[1]+B.y*2*q},Q=l.intersectLine(n.x,n.y,i,o,Z.x,Z.y,0,f,h);p?(t.ctrlpts[0]=t.ctrlpts[0]+B.x*(C-E),t.ctrlpts[1]=t.ctrlpts[1]+B.y*(C-E)):(t.ctrlpts[0]=Q[0]+B.x*C,t.ctrlpts[1]=Q[1]+B.y*C)}if(b||w||T){R=!0;var Y={x:t.ctrlpts[0]-a.x,y:t.ctrlpts[1]-a.y},J=Math.sqrt(Y.x*Y.x+Y.y*Y.y),X={x:Y.x/J,y:Y.y/J},k=Math.max(i,o),D={x:t.ctrlpts[0]+X.x*2*k,y:t.ctrlpts[1]+X.y*2*k},I=c.intersectLine(a.x,a.y,s,u,D.x,D.y,0,d,v);T?(t.ctrlpts[0]=t.ctrlpts[0]+X.x*(C-P),t.ctrlpts[1]=t.ctrlpts[1]+X.y*(C-P)):(t.ctrlpts[0]=I[0]+X.x*C,t.ctrlpts[1]=I[1]+X.y*C)}R&&this.findEndpoints(r)}};Fr.storeAllpts=function(r){var e=r._private.rscratch;if(e.edgeType==="multibezier"||e.edgeType==="bezier"||e.edgeType==="self"||e.edgeType==="compound"){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var t=0;t+1<e.ctrlpts.length;t+=2)e.allpts.push(e.ctrlpts[t],e.ctrlpts[t+1]),t+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[t]+e.ctrlpts[t+2])/2,(e.ctrlpts[t+1]+e.ctrlpts[t+3])/2);e.allpts.push(e.endX,e.endY);var n,a;e.ctrlpts.length/2%2===0?(n=e.allpts.length/2-1,e.midX=e.allpts[n],e.midY=e.allpts[n+1]):(n=e.allpts.length/2-3,a=.5,e.midX=_r(e.allpts[n],e.allpts[n+2],e.allpts[n+4],a),e.midY=_r(e.allpts[n+1],e.allpts[n+3],e.allpts[n+5],a))}else if(e.edgeType==="straight")e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if(e.edgeType==="segments"){if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.isRound){e.roundCorners=[];for(var i=2;i+3<e.allpts.length;i+=2){var o=e.radii[i/2-1],s=e.isArcRadius[i/2-1];e.roundCorners.push(Bg({x:e.allpts[i-2],y:e.allpts[i-1]},{x:e.allpts[i],y:e.allpts[i+1],radius:o},{x:e.allpts[i+2],y:e.allpts[i+3]},o,s))}}if(e.segpts.length%4===0){var u=e.segpts.length/2,l=u-2;e.midX=(e.segpts[l]+e.segpts[u])/2,e.midY=(e.segpts[l+1]+e.segpts[u+1])/2}else{var c=e.segpts.length/2-1;if(!e.isRound)e.midX=e.segpts[c],e.midY=e.segpts[c+1];else{var f={x:e.segpts[c],y:e.segpts[c+1]},d=e.roundCorners[c/2],h=[f.x-d.cx,f.y-d.cy],v=d.radius/Math.sqrt(Math.pow(h[0],2)+Math.pow(h[1],2));h=h.map(function(m){return m*v}),e.midX=d.cx+h[0],e.midY=d.cy+h[1],e.midVector=h}}}};Fr.checkForInvalidEdgeWarning=function(r){var e=r[0]._private.rscratch;e.nodesOverlap||Ge(e.startX)&&Ge(e.startY)&&Ge(e.endX)&&Ge(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,Mt("Edge `"+r.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};Fr.findEdgeControlPoints=function(r){var e=this;if(!(!r||r.length===0)){for(var t=this,n=t.cy,a=n.hasCompoundNodes(),i={map:new Rn,get:function(p){var P=this.map.get(p[0]);return P!=null?P.get(p[1]):null},set:function(p,P){var T=this.map.get(p[0]);T==null&&(T=new Rn,this.map.set(p[0],T)),T.set(p[1],P)}},o=[],s=[],u=0;u<r.length;u++){var l=r[u],c=l._private,f=l.pstyle("curve-style").value;if(!(l.removed()||!l.takesUpSpace())){if(f==="haystack"){s.push(l);continue}var d=f==="unbundled-bezier"||f.endsWith("segments")||f==="straight"||f==="straight-triangle"||f.endsWith("taxi"),h=f==="unbundled-bezier"||f==="bezier",v=c.source,m=c.target,_=v.poolIndex(),b=m.poolIndex(),w=[_,b].sort(),y=i.get(w);y==null&&(y={eles:[]},i.set(w,y),o.push(w)),y.eles.push(l),d&&(y.hasUnbundled=!0),h&&(y.hasBezier=!0)}}for(var x=function(p){var P=o[p],T=i.get(P),R=void 0;if(!T.hasUnbundled){var M=T.eles[0].parallelEdges().filter(function(oe){return oe.isBundledBezier()});Sg(T.eles),M.forEach(function(oe){return T.eles.push(oe)}),T.eles.sort(function(oe,ae){return oe.poolIndex()-ae.poolIndex()})}var N=T.eles[0],B=N.source(),q=N.target();if(B.poolIndex()>q.poolIndex()){var Z=B;B=q,q=Z}var Q=T.srcPos=B.position(),Y=T.tgtPos=q.position(),J=T.srcW=B.outerWidth(),X=T.srcH=B.outerHeight(),k=T.tgtW=q.outerWidth(),D=T.tgtH=q.outerHeight(),I=T.srcShape=t.nodeShapes[e.getNodeShape(B)],F=T.tgtShape=t.nodeShapes[e.getNodeShape(q)],L=T.srcCornerRadius=B.pstyle("corner-radius").value==="auto"?"auto":B.pstyle("corner-radius").pfValue,H=T.tgtCornerRadius=q.pstyle("corner-radius").value==="auto"?"auto":q.pstyle("corner-radius").pfValue,j=T.tgtRs=q._private.rscratch,W=T.srcRs=B._private.rscratch;T.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var re=0;re<T.eles.length;re++){var se=T.eles[re],ce=se[0]._private.rscratch,ge=se.pstyle("curve-style").value,Pe=ge==="unbundled-bezier"||ge.endsWith("segments")||ge.endsWith("taxi"),Oe=!B.same(se.source());if(!T.calculatedIntersection&&B!==q&&(T.hasBezier||T.hasUnbundled)){T.calculatedIntersection=!0;var Se=I.intersectLine(Q.x,Q.y,J,X,Y.x,Y.y,0,L,W),le=T.srcIntn=Se,te=F.intersectLine(Y.x,Y.y,k,D,Q.x,Q.y,0,H,j),ne=T.tgtIntn=te,de=T.intersectionPts={x1:Se[0],x2:te[0],y1:Se[1],y2:te[1]},Ce=T.posPts={x1:Q.x,x2:Y.x,y1:Q.y,y2:Y.y},Le=te[1]-Se[1],$e=te[0]-Se[0],Ne=Math.sqrt($e*$e+Le*Le),De=T.vector={x:$e,y:Le},me=T.vectorNorm={x:De.x/Ne,y:De.y/Ne},G={x:-me.y,y:me.x};T.nodesOverlap=!Ge(Ne)||F.checkPoint(Se[0],Se[1],0,k,D,Y.x,Y.y,H,j)||I.checkPoint(te[0],te[1],0,J,X,Q.x,Q.y,L,W),T.vectorNormInverse=G,R={nodesOverlap:T.nodesOverlap,dirCounts:T.dirCounts,calculatedIntersection:!0,hasBezier:T.hasBezier,hasUnbundled:T.hasUnbundled,eles:T.eles,srcPos:Y,tgtPos:Q,srcW:k,srcH:D,tgtW:J,tgtH:X,srcIntn:ne,tgtIntn:le,srcShape:F,tgtShape:I,posPts:{x1:Ce.x2,y1:Ce.y2,x2:Ce.x1,y2:Ce.y1},intersectionPts:{x1:de.x2,y1:de.y2,x2:de.x1,y2:de.y1},vector:{x:-De.x,y:-De.y},vectorNorm:{x:-me.x,y:-me.y},vectorNormInverse:{x:-G.x,y:-G.y}}}var U=Oe?R:T;ce.nodesOverlap=U.nodesOverlap,ce.srcIntn=U.srcIntn,ce.tgtIntn=U.tgtIntn,ce.isRound=ge.startsWith("round"),a&&(B.isParent()||B.isChild()||q.isParent()||q.isChild())&&(B.parents().anySame(q)||q.parents().anySame(B)||B.same(q)&&B.isParent())?e.findCompoundLoopPoints(se,U,re,Pe):B===q?e.findLoopPoints(se,U,re,Pe):ge.endsWith("segments")?e.findSegmentsPoints(se,U):ge.endsWith("taxi")?e.findTaxiPoints(se,U):ge==="straight"||!Pe&&T.eles.length%2===1&&re===Math.floor(T.eles.length/2)?e.findStraightEdgePoints(se):e.findBezierPoints(se,U,re,Pe,Oe),e.findEndpoints(se),e.tryToCorrectInvalidPoints(se,U),e.checkForInvalidEdgeWarning(se),e.storeAllpts(se),e.storeEdgeProjections(se),e.calculateArrowAngles(se),e.recalculateEdgeLabelProjections(se),e.calculateLabelAngles(se)}},C=0;C<o.length;C++)x(C);this.findHaystackPoints(s)}};function lC(r){var e=[];if(r!=null){for(var t=0;t<r.length;t+=2){var n=r[t],a=r[t+1];e.push({x:n,y:a})}return e}}Fr.getSegmentPoints=function(r){var e=r[0]._private.rscratch,t=e.edgeType;if(t==="segments")return this.recalculateRenderedStyle(r),lC(e.segpts)};Fr.getControlPoints=function(r){var e=r[0]._private.rscratch,t=e.edgeType;if(t==="bezier"||t==="multibezier"||t==="self"||t==="compound")return this.recalculateRenderedStyle(r),lC(e.ctrlpts)};Fr.getEdgeMidpoint=function(r){var e=r[0]._private.rscratch;return this.recalculateRenderedStyle(r),{x:e.midX,y:e.midY}};var Qo={};Qo.manualEndptToPx=function(r,e){var t=this,n=r.position(),a=r.outerWidth(),i=r.outerHeight(),o=r._private.rscratch;if(e.value.length===2){var s=[e.pfValue[0],e.pfValue[1]];return e.units[0]==="%"&&(s[0]=s[0]*a),e.units[1]==="%"&&(s[1]=s[1]*i),s[0]+=n.x,s[1]+=n.y,s}else{var u=e.pfValue[0];u=-Math.PI/2+u;var l=2*Math.max(a,i),c=[n.x+Math.cos(u)*l,n.y+Math.sin(u)*l];return t.nodeShapes[this.getNodeShape(r)].intersectLine(n.x,n.y,a,i,c[0],c[1],0,r.pstyle("corner-radius").value==="auto"?"auto":r.pstyle("corner-radius").pfValue,o)}};Qo.findEndpoints=function(r){var e=this,t,n=r.source()[0],a=r.target()[0],i=n.position(),o=a.position(),s=r.pstyle("target-arrow-shape").value,u=r.pstyle("source-arrow-shape").value,l=r.pstyle("target-distance-from-node").pfValue,c=r.pstyle("source-distance-from-node").pfValue,f=n._private.rscratch,d=a._private.rscratch,h=r.pstyle("curve-style").value,v=r._private.rscratch,m=v.edgeType,_=h==="taxi",b=m==="self"||m==="compound",w=m==="bezier"||m==="multibezier"||b,y=m!=="bezier",x=m==="straight"||m==="segments",C=m==="segments",E=w||y||x,p=b||_,P=r.pstyle("source-endpoint"),T=p?"outside-to-node":P.value,R=n.pstyle("corner-radius").value==="auto"?"auto":n.pstyle("corner-radius").pfValue,M=r.pstyle("target-endpoint"),N=p?"outside-to-node":M.value,B=a.pstyle("corner-radius").value==="auto"?"auto":a.pstyle("corner-radius").pfValue;v.srcManEndpt=P,v.tgtManEndpt=M;var q,Z,Q,Y;if(w){var J=[v.ctrlpts[0],v.ctrlpts[1]],X=y?[v.ctrlpts[v.ctrlpts.length-2],v.ctrlpts[v.ctrlpts.length-1]]:J;q=X,Z=J}else if(x){var k=C?v.segpts.slice(0,2):[o.x,o.y],D=C?v.segpts.slice(v.segpts.length-2):[i.x,i.y];q=D,Z=k}if(N==="inside-to-node")t=[o.x,o.y];else if(M.units)t=this.manualEndptToPx(a,M);else if(N==="outside-to-line")t=v.tgtIntn;else if(N==="outside-to-node"||N==="outside-to-node-or-label"?Q=q:(N==="outside-to-line"||N==="outside-to-line-or-label")&&(Q=[i.x,i.y]),t=e.nodeShapes[this.getNodeShape(a)].intersectLine(o.x,o.y,a.outerWidth(),a.outerHeight(),Q[0],Q[1],0,B,d),N==="outside-to-node-or-label"||N==="outside-to-line-or-label"){var I=a._private.rscratch,F=I.labelWidth,L=I.labelHeight,H=I.labelX,j=I.labelY,W=F/2,re=L/2,se=a.pstyle("text-valign").value;se==="top"?j-=re:se==="bottom"&&(j+=re);var ce=a.pstyle("text-halign").value;ce==="left"?H-=W:ce==="right"&&(H+=W);var ge=Bo(Q[0],Q[1],[H-W,j-re,H+W,j-re,H+W,j+re,H-W,j+re],o.x,o.y);if(ge.length>0){var Pe=i,Oe=$a(Pe,Pi(t)),Se=$a(Pe,Pi(ge)),le=Oe;if(Se<Oe&&(t=ge,le=Se),ge.length>2){var te=$a(Pe,{x:ge[2],y:ge[3]});te<le&&(t=[ge[2],ge[3]])}}}var ne=bs(t,q,e.arrowShapes[s].spacing(r)+l),de=bs(t,q,e.arrowShapes[s].gap(r)+l);if(v.endX=de[0],v.endY=de[1],v.arrowEndX=ne[0],v.arrowEndY=ne[1],T==="inside-to-node")t=[i.x,i.y];else if(P.units)t=this.manualEndptToPx(n,P);else if(T==="outside-to-line")t=v.srcIntn;else if(T==="outside-to-node"||T==="outside-to-node-or-label"?Y=Z:(T==="outside-to-line"||T==="outside-to-line-or-label")&&(Y=[o.x,o.y]),t=e.nodeShapes[this.getNodeShape(n)].intersectLine(i.x,i.y,n.outerWidth(),n.outerHeight(),Y[0],Y[1],0,R,f),T==="outside-to-node-or-label"||T==="outside-to-line-or-label"){var Ce=n._private.rscratch,Le=Ce.labelWidth,$e=Ce.labelHeight,Ne=Ce.labelX,De=Ce.labelY,me=Le/2,G=$e/2,U=n.pstyle("text-valign").value;U==="top"?De-=G:U==="bottom"&&(De+=G);var oe=n.pstyle("text-halign").value;oe==="left"?Ne-=me:oe==="right"&&(Ne+=me);var ae=Bo(Y[0],Y[1],[Ne-me,De-G,Ne+me,De-G,Ne+me,De+G,Ne-me,De+G],i.x,i.y);if(ae.length>0){var fe=o,we=$a(fe,Pi(t)),ve=$a(fe,Pi(ae)),Te=we;if(ve<we&&(t=[ae[0],ae[1]],Te=ve),ae.length>2){var Fe=$a(fe,{x:ae[2],y:ae[3]});Fe<Te&&(t=[ae[2],ae[3]])}}}var qe=bs(t,Z,e.arrowShapes[u].spacing(r)+c),Be=bs(t,Z,e.arrowShapes[u].gap(r)+c);v.startX=Be[0],v.startY=Be[1],v.arrowStartX=qe[0],v.arrowStartY=qe[1],E&&(!Ge(v.startX)||!Ge(v.startY)||!Ge(v.endX)||!Ge(v.endY)?v.badLine=!0:v.badLine=!1)};Qo.getSourceEndpoint=function(r){var e=r[0]._private.rscratch;switch(this.recalculateRenderedStyle(r),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}};Qo.getTargetEndpoint=function(r){var e=r[0]._private.rscratch;switch(this.recalculateRenderedStyle(r),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}};var qg={};function VD(r,e,t){for(var n=function(l,c,f,d){return _r(l,c,f,d)},a=e._private,i=a.rstyle.bezierPts,o=0;o<r.bezierProjPcts.length;o++){var s=r.bezierProjPcts[o];i.push({x:n(t[0],t[2],t[4],s),y:n(t[1],t[3],t[5],s)})}}qg.storeEdgeProjections=function(r){var e=r._private,t=e.rscratch,n=t.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,n==="multibezier"||n==="bezier"||n==="self"||n==="compound"){e.rstyle.bezierPts=[];for(var a=0;a+5<t.allpts.length;a+=4)VD(this,r,t.allpts.slice(a,a+6))}else if(n==="segments")for(var i=e.rstyle.linePts=[],a=0;a+1<t.allpts.length;a+=2)i.push({x:t.allpts[a],y:t.allpts[a+1]});else if(n==="haystack"){var o=t.haystackPts;e.rstyle.haystackPts=[{x:o[0],y:o[1]},{x:o[2],y:o[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(r.pstyle("width").pfValue,r.pstyle("arrow-scale").value)*this.arrowShapeWidth};qg.recalculateEdgeProjections=function(r){this.findEdgeControlPoints(r)};var Ln={};Ln.recalculateNodeLabelProjection=function(r){var e=r.pstyle("label").strValue;if(!wa(e)){var t,n,a=r._private,i=r.width(),o=r.height(),s=r.padding(),u=r.position(),l=r.pstyle("text-halign").strValue,c=r.pstyle("text-valign").strValue,f=a.rscratch,d=a.rstyle;switch(l){case"left":t=u.x-i/2-s;break;case"right":t=u.x+i/2+s;break;default:t=u.x}switch(c){case"top":n=u.y-o/2-s;break;case"bottom":n=u.y+o/2+s;break;default:n=u.y}f.labelX=t,f.labelY=n,d.labelX=t,d.labelY=n,this.calculateLabelAngles(r),this.applyLabelDimensions(r)}};var cC=function(e,t){var n=Math.atan(t/e);return e===0&&n<0&&(n=n*-1),n},fC=function(e,t){var n=t.x-e.x,a=t.y-e.y;return cC(n,a)},UD=function(e,t,n,a){var i=Fo(0,a-.001,1),o=Fo(0,a+.001,1),s=ki(e,t,n,i),u=ki(e,t,n,o);return fC(s,u)};Ln.recalculateEdgeLabelProjections=function(r){var e,t=r._private,n=t.rscratch,a=this,i={mid:r.pstyle("label").strValue,source:r.pstyle("source-label").strValue,target:r.pstyle("target-label").strValue};if(i.mid||i.source||i.target){e={x:n.midX,y:n.midY};var o=function(f,d,h){ga(t.rscratch,f,d,h),ga(t.rstyle,f,d,h)};o("labelX",null,e.x),o("labelY",null,e.y);var s=cC(n.midDispX,n.midDispY);o("labelAutoAngle",null,s);var u=function c(){if(c.cache)return c.cache;for(var f=[],d=0;d+5<n.allpts.length;d+=4){var h={x:n.allpts[d],y:n.allpts[d+1]},v={x:n.allpts[d+2],y:n.allpts[d+3]},m={x:n.allpts[d+4],y:n.allpts[d+5]};f.push({p0:h,p1:v,p2:m,startDist:0,length:0,segments:[]})}var _=t.rstyle.bezierPts,b=a.bezierProjPcts.length;function w(p,P,T,R,M){var N=Xa(P,T),B=p.segments[p.segments.length-1],q={p0:P,p1:T,t0:R,t1:M,startDist:B?B.startDist+B.length:0,length:N};p.segments.push(q),p.length+=N}for(var y=0;y<f.length;y++){var x=f[y],C=f[y-1];C&&(x.startDist=C.startDist+C.length),w(x,x.p0,_[y*b],0,a.bezierProjPcts[0]);for(var E=0;E<b-1;E++)w(x,_[y*b+E],_[y*b+E+1],a.bezierProjPcts[E],a.bezierProjPcts[E+1]);w(x,_[y*b+b-1],x.p2,a.bezierProjPcts[b-1],1)}return c.cache=f},l=function(f){var d,h=f==="source";if(i[f]){var v=r.pstyle(f+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var m=u(),_,b=0,w=0,y=0;y<m.length;y++){for(var x=m[h?y:m.length-1-y],C=0;C<x.segments.length;C++){var E=x.segments[h?C:x.segments.length-1-C],p=y===m.length-1&&C===x.segments.length-1;if(b=w,w+=E.length,w>=v||p){_={cp:x,segment:E};break}}if(_)break}var P=_.cp,T=_.segment,R=(v-b)/T.length,M=T.t1-T.t0,N=h?T.t0+M*R:T.t1-M*R;N=Fo(0,N,1),e=ki(P.p0,P.p1,P.p2,N),d=UD(P.p0,P.p1,P.p2,N);break}case"straight":case"segments":case"haystack":{for(var B=0,q,Z,Q,Y,J=n.allpts.length,X=0;X+3<J&&(h?(Q={x:n.allpts[X],y:n.allpts[X+1]},Y={x:n.allpts[X+2],y:n.allpts[X+3]}):(Q={x:n.allpts[J-2-X],y:n.allpts[J-1-X]},Y={x:n.allpts[J-4-X],y:n.allpts[J-3-X]}),q=Xa(Q,Y),Z=B,B+=q,!(B>=v));X+=2);var k=v-Z,D=k/q;D=Fo(0,D,1),e=YP(Q,Y,D),d=fC(Q,Y);break}}o("labelX",f,e.x),o("labelY",f,e.y),o("labelAutoAngle",f,d)}};l("source"),l("target"),this.applyLabelDimensions(r)}};Ln.applyLabelDimensions=function(r){this.applyPrefixedLabelDimensions(r),r.isEdge()&&(this.applyPrefixedLabelDimensions(r,"source"),this.applyPrefixedLabelDimensions(r,"target"))};Ln.applyPrefixedLabelDimensions=function(r,e){var t=r._private,n=this.getLabelText(r,e),a=this.calculateLabelDimensions(r,n),i=r.pstyle("line-height").pfValue,o=r.pstyle("text-wrap").strValue,s=pn(t.rscratch,"labelWrapCachedLines",e)||[],u=o!=="wrap"?1:Math.max(s.length,1),l=a.height/u,c=l*i,f=a.width,d=a.height+(u-1)*(i-1)*l;ga(t.rstyle,"labelWidth",e,f),ga(t.rscratch,"labelWidth",e,f),ga(t.rstyle,"labelHeight",e,d),ga(t.rscratch,"labelHeight",e,d),ga(t.rscratch,"labelLineHeight",e,c)};Ln.getLabelText=function(r,e){var t=r._private,n=e?e+"-":"",a=r.pstyle(n+"label").strValue,i=r.pstyle("text-transform").value,o=function(k,D){return D?(ga(t.rscratch,k,e,D),D):pn(t.rscratch,k,e)};if(!a)return"";i=="none"||(i=="uppercase"?a=a.toUpperCase():i=="lowercase"&&(a=a.toLowerCase()));var s=r.pstyle("text-wrap").value;if(s==="wrap"){var u=o("labelKey");if(u!=null&&o("labelWrapKey")===u)return o("labelWrapCachedText");for(var l="​",c=a.split(`
`),f=r.pstyle("text-max-width").pfValue,d=r.pstyle("text-overflow-wrap").value,h=d==="anywhere",v=[],m=/[\s\u200b]+/,_=h?"":" ",b=0;b<c.length;b++){var w=c[b],y=this.calculateLabelDimensions(r,w),x=y.width;if(h){var C=w.split("").join(l);w=C}if(x>f){for(var E=w.split(m),p="",P=0;P<E.length;P++){var T=E[P],R=p.length===0?T:p+_+T,M=this.calculateLabelDimensions(r,R),N=M.width;N<=f?p+=T+_:(p&&v.push(p),p=T+_)}p.match(/^[\s\u200b]+$/)||v.push(p)}else v.push(w)}o("labelWrapCachedLines",v),a=o("labelWrapCachedText",v.join(`
`)),o("labelWrapKey",u)}else if(s==="ellipsis"){var B=r.pstyle("text-max-width").pfValue,q="",Z="…",Q=!1;if(this.calculateLabelDimensions(r,a).width<B)return a;for(var Y=0;Y<a.length;Y++){var J=this.calculateLabelDimensions(r,q+a[Y]+Z).width;if(J>B)break;q+=a[Y],Y===a.length-1&&(Q=!0)}return Q||(q+=Z),q}return a};Ln.getLabelJustification=function(r){var e=r.pstyle("text-justification").strValue,t=r.pstyle("text-halign").strValue;if(e==="auto")if(r.isNode())switch(t){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return e};Ln.calculateLabelDimensions=function(r,e){var t=this,n=Ya(e,r._private.labelDimsKey),a=t.labelDimCache||(t.labelDimCache=[]),i=a[n];if(i!=null)return i;var o=0,s=r.pstyle("font-style").strValue,u=r.pstyle("font-size").pfValue,l=r.pstyle("font-family").strValue,c=r.pstyle("font-weight").strValue,f=this.labelCalcCanvas,d=this.labelCalcCanvasContext;if(!f){f=this.labelCalcCanvas=document.createElement("canvas"),d=this.labelCalcCanvasContext=f.getContext("2d");var h=f.style;h.position="absolute",h.left="-9999px",h.top="-9999px",h.zIndex="-1",h.visibility="hidden",h.pointerEvents="none"}d.font="".concat(s," ").concat(c," ").concat(u,"px ").concat(l);for(var v=0,m=0,_=e.split(`
`),b=0;b<_.length;b++){var w=_[b],y=d.measureText(w),x=Math.ceil(y.width),C=u;v=Math.max(x,v),m+=C}return v+=o,m+=o,a[n]={width:v,height:m}};Ln.calculateLabelAngle=function(r,e){var t=r._private,n=t.rscratch,a=r.isEdge(),i=e?e+"-":"",o=r.pstyle(i+"text-rotation"),s=o.strValue;return s==="none"?0:a&&s==="autorotate"?n.labelAutoAngle:s==="autorotate"?0:o.pfValue};Ln.calculateLabelAngles=function(r){var e=this,t=r.isEdge(),n=r._private,a=n.rscratch;a.labelAngle=e.calculateLabelAngle(r),t&&(a.sourceLabelAngle=e.calculateLabelAngle(r,"source"),a.targetLabelAngle=e.calculateLabelAngle(r,"target"))};var dC={},Nm=28,Fm=!1;dC.getNodeShape=function(r){var e=this,t=r.pstyle("shape").value;if(t==="cutrectangle"&&(r.width()<Nm||r.height()<Nm))return Fm||(Mt("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),Fm=!0),"rectangle";if(r.isParent())return t==="rectangle"||t==="roundrectangle"||t==="round-rectangle"||t==="cutrectangle"||t==="cut-rectangle"||t==="barrel"?t:"rectangle";if(t==="polygon"){var n=r.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(n).name}return t};var Eu={};Eu.registerCalculationListeners=function(){var r=this.cy,e=r.collection(),t=this,n=function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.merge(o),s)for(var u=0;u<o.length;u++){var l=o[u],c=l._private,f=c.rstyle;f.clean=!1,f.cleanConnected=!1}};t.binder(r).on("bounds.* dirty.*",function(o){var s=o.target;n(s)}).on("style.* background.*",function(o){var s=o.target;n(s,!1)});var a=function(o){if(o){var s=t.onUpdateEleCalcsFns;e.cleanStyle();for(var u=0;u<e.length;u++){var l=e[u],c=l._private.rstyle;l.isNode()&&!c.cleanConnected&&(n(l.connectedEdges()),c.cleanConnected=!0)}if(s)for(var f=0;f<s.length;f++){var d=s[f];d(o,e)}t.recalculateRenderedStyle(e),e=r.collection()}};t.flushRenderedStyleQueue=function(){a(!0)},t.beforeRender(a,t.beforeRenderPriorities.eleCalcs)};Eu.onUpdateEleCalcs=function(r){var e=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];e.push(r)};Eu.recalculateRenderedStyle=function(r,e){var t=function(x){return x._private.rstyle.cleanConnected},n=[],a=[];if(!this.destroyed){e===void 0&&(e=!0);for(var i=0;i<r.length;i++){var o=r[i],s=o._private,u=s.rstyle;o.isEdge()&&(!t(o.source())||!t(o.target()))&&(u.clean=!1),!(e&&u.clean||o.removed())&&o.pstyle("display").value!=="none"&&(s.group==="nodes"?a.push(o):n.push(o),u.clean=!0)}for(var l=0;l<a.length;l++){var c=a[l],f=c._private,d=f.rstyle,h=c.position();this.recalculateNodeLabelProjection(c),d.nodeX=h.x,d.nodeY=h.y,d.nodeW=c.pstyle("width").pfValue,d.nodeH=c.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var v=0;v<n.length;v++){var m=n[v],_=m._private,b=_.rstyle,w=_.rscratch;b.srcX=w.arrowStartX,b.srcY=w.arrowStartY,b.tgtX=w.arrowEndX,b.tgtY=w.arrowEndY,b.midX=w.midX,b.midY=w.midY,b.labelAngle=w.labelAngle,b.sourceLabelAngle=w.sourceLabelAngle,b.targetLabelAngle=w.targetLabelAngle}}};var Tu={};Tu.updateCachedGrabbedEles=function(){var r=this.cachedZSortedEles;if(r){r.drag=[],r.nondrag=[];for(var e=[],t=0;t<r.length;t++){var n=r[t],a=n._private.rscratch;n.grabbed()&&!n.isParent()?e.push(n):a.inDragLayer?r.drag.push(n):r.nondrag.push(n)}for(var t=0;t<e.length;t++){var n=e[t];r.drag.push(n)}}};Tu.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};Tu.getCachedZSortedEles=function(r){if(r||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(YS),e.interactive=e.filter(function(t){return t.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e};var hC={};[ri,tu,Fr,Qo,qg,Ln,dC,Eu,Tu].forEach(function(r){rt(hC,r)});var vC={};vC.getCachedImage=function(r,e,t){var n=this,a=n.imageCache=n.imageCache||{},i=a[r];if(i)return i.image.complete||i.image.addEventListener("load",t),i.image;i=a[r]=a[r]||{};var o=i.image=new Image;o.addEventListener("load",t),o.addEventListener("error",function(){o.error=!0});var s="data:",u=r.substring(0,s.length).toLowerCase()===s;return u||(e=e==="null"?null:e,o.crossOrigin=e),o.src=r,o};var Ki={};Ki.registerBinding=function(r,e,t,n){var a=Array.prototype.slice.apply(arguments,[1]),i=this.binder(r);return i.on.apply(i,a)};Ki.binder=function(r){var e=this,t=e.cy.window(),n=r===t||r===t.document||r===t.document.body||pT(r);if(e.supportsPassiveEvents==null){var a=!1;try{var i=Object.defineProperty({},"passive",{get:function(){return a=!0,!0}});t.addEventListener("test",null,i)}catch{}e.supportsPassiveEvents=a}var o=function(u,l,c){var f=Array.prototype.slice.call(arguments);return n&&e.supportsPassiveEvents&&(f[2]={capture:c??!1,passive:!1,once:!1}),e.bindings.push({target:r,args:f}),(r.addEventListener||r.on).apply(r,f),this};return{on:o,addEventListener:o,addListener:o,bind:o}};Ki.nodeIsDraggable=function(r){return r&&r.isNode()&&!r.locked()&&r.grabbable()};Ki.nodeIsGrabbable=function(r){return this.nodeIsDraggable(r)&&r.interactive()};Ki.load=function(){var r=this,e=r.cy.window(),t=function(G){return G.selected()},n=function(G,U,oe,ae){G==null&&(G=r.cy);for(var fe=0;fe<U.length;fe++){var we=U[fe];G.emit({originalEvent:oe,type:we,position:ae})}},a=function(G){return G.shiftKey||G.metaKey||G.ctrlKey},i=function(G,U){var oe=!0;if(r.cy.hasCompoundNodes()&&G&&G.pannable())for(var ae=0;U&&ae<U.length;ae++){var G=U[ae];if(G.isNode()&&G.isParent()&&!G.pannable()){oe=!1;break}}else oe=!0;return oe},o=function(G){G[0]._private.grabbed=!0},s=function(G){G[0]._private.grabbed=!1},u=function(G){G[0]._private.rscratch.inDragLayer=!0},l=function(G){G[0]._private.rscratch.inDragLayer=!1},c=function(G){G[0]._private.rscratch.isGrabTarget=!0},f=function(G){G[0]._private.rscratch.isGrabTarget=!1},d=function(G,U){var oe=U.addToList,ae=oe.has(G);!ae&&G.grabbable()&&!G.locked()&&(oe.merge(G),o(G))},h=function(G,U){if(G.cy().hasCompoundNodes()&&!(U.inDragLayer==null&&U.addToList==null)){var oe=G.descendants();U.inDragLayer&&(oe.forEach(u),oe.connectedEdges().forEach(u)),U.addToList&&d(oe,U)}},v=function(G,U){U=U||{};var oe=G.cy().hasCompoundNodes();U.inDragLayer&&(G.forEach(u),G.neighborhood().stdFilter(function(ae){return!oe||ae.isEdge()}).forEach(u)),U.addToList&&G.forEach(function(ae){d(ae,U)}),h(G,U),b(G,{inDragLayer:U.inDragLayer}),r.updateCachedGrabbedEles()},m=v,_=function(G){G&&(r.getCachedZSortedEles().forEach(function(U){s(U),l(U),f(U)}),r.updateCachedGrabbedEles())},b=function(G,U){if(!(U.inDragLayer==null&&U.addToList==null)&&G.cy().hasCompoundNodes()){var oe=G.ancestors().orphans();if(!oe.same(G)){var ae=oe.descendants().spawnSelf().merge(oe).unmerge(G).unmerge(G.descendants()),fe=ae.connectedEdges();U.inDragLayer&&(fe.forEach(u),ae.forEach(u)),U.addToList&&ae.forEach(function(we){d(we,U)})}}},w=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},y=typeof MutationObserver<"u",x=typeof ResizeObserver<"u";y?(r.removeObserver=new MutationObserver(function(me){for(var G=0;G<me.length;G++){var U=me[G],oe=U.removedNodes;if(oe)for(var ae=0;ae<oe.length;ae++){var fe=oe[ae];if(fe===r.container){r.destroy();break}}}}),r.container.parentNode&&r.removeObserver.observe(r.container.parentNode,{childList:!0})):r.registerBinding(r.container,"DOMNodeRemoved",function(me){r.destroy()});var C=fu(function(){r.cy.resize()},100);y&&(r.styleObserver=new MutationObserver(C),r.styleObserver.observe(r.container,{attributes:!0})),r.registerBinding(e,"resize",C),x&&(r.resizeObserver=new ResizeObserver(C),r.resizeObserver.observe(r.container));var E=function(G,U){for(;G!=null;)U(G),G=G.parentNode},p=function(){r.invalidateContainerClientCoordsCache()};E(r.container,function(me){r.registerBinding(me,"transitionend",p),r.registerBinding(me,"animationend",p),r.registerBinding(me,"scroll",p)}),r.registerBinding(r.container,"contextmenu",function(me){me.preventDefault()});var P=function(){return r.selection[4]!==0},T=function(G){for(var U=r.findContainerClientCoords(),oe=U[0],ae=U[1],fe=U[2],we=U[3],ve=G.touches?G.touches:[G],Te=!1,Fe=0;Fe<ve.length;Fe++){var qe=ve[Fe];if(oe<=qe.clientX&&qe.clientX<=oe+fe&&ae<=qe.clientY&&qe.clientY<=ae+we){Te=!0;break}}if(!Te)return!1;for(var Be=r.container,et=G.target,Ue=et.parentNode,We=!1;Ue;){if(Ue===Be){We=!0;break}Ue=Ue.parentNode}return!!We};r.registerBinding(r.container,"mousedown",function(G){if(T(G)){G.preventDefault(),w(),r.hoverData.capture=!0,r.hoverData.which=G.which;var U=r.cy,oe=[G.clientX,G.clientY],ae=r.projectIntoViewport(oe[0],oe[1]),fe=r.selection,we=r.findNearestElements(ae[0],ae[1],!0,!1),ve=we[0],Te=r.dragData.possibleDragElements;r.hoverData.mdownPos=ae,r.hoverData.mdownGPos=oe;var Fe=function(){r.hoverData.tapholdCancelled=!1,clearTimeout(r.hoverData.tapholdTimeout),r.hoverData.tapholdTimeout=setTimeout(function(){if(!r.hoverData.tapholdCancelled){var lt=r.hoverData.down;lt?lt.emit({originalEvent:G,type:"taphold",position:{x:ae[0],y:ae[1]}}):U.emit({originalEvent:G,type:"taphold",position:{x:ae[0],y:ae[1]}})}},r.tapholdDuration)};if(G.which==3){r.hoverData.cxtStarted=!0;var qe={originalEvent:G,type:"cxttapstart",position:{x:ae[0],y:ae[1]}};ve?(ve.activate(),ve.emit(qe),r.hoverData.down=ve):U.emit(qe),r.hoverData.downTime=new Date().getTime(),r.hoverData.cxtDragged=!1}else if(G.which==1){ve&&ve.activate();{if(ve!=null&&r.nodeIsGrabbable(ve)){var Be=function(lt){return{originalEvent:G,type:lt,position:{x:ae[0],y:ae[1]}}},et=function(lt){lt.emit(Be("grab"))};if(c(ve),!ve.selected())Te=r.dragData.possibleDragElements=U.collection(),m(ve,{addToList:Te}),ve.emit(Be("grabon")).emit(Be("grab"));else{Te=r.dragData.possibleDragElements=U.collection();var Ue=U.$(function(We){return We.isNode()&&We.selected()&&r.nodeIsGrabbable(We)});v(Ue,{addToList:Te}),ve.emit(Be("grabon")),Ue.forEach(et)}r.redrawHint("eles",!0),r.redrawHint("drag",!0)}r.hoverData.down=ve,r.hoverData.downs=we,r.hoverData.downTime=new Date().getTime()}n(ve,["mousedown","tapstart","vmousedown"],G,{x:ae[0],y:ae[1]}),ve==null?(fe[4]=1,r.data.bgActivePosistion={x:ae[0],y:ae[1]},r.redrawHint("select",!0),r.redraw()):ve.pannable()&&(fe[4]=1),Fe()}fe[0]=fe[2]=ae[0],fe[1]=fe[3]=ae[1]}},!1),r.registerBinding(e,"mousemove",function(G){var U=r.hoverData.capture;if(!(!U&&!T(G))){var oe=!1,ae=r.cy,fe=ae.zoom(),we=[G.clientX,G.clientY],ve=r.projectIntoViewport(we[0],we[1]),Te=r.hoverData.mdownPos,Fe=r.hoverData.mdownGPos,qe=r.selection,Be=null;!r.hoverData.draggingEles&&!r.hoverData.dragging&&!r.hoverData.selecting&&(Be=r.findNearestElement(ve[0],ve[1],!0,!1));var et=r.hoverData.last,Ue=r.hoverData.down,We=[ve[0]-qe[2],ve[1]-qe[3]],lt=r.dragData.possibleDragElements,ht;if(Fe){var Rt=we[0]-Fe[0],vt=Rt*Rt,Ot=we[1]-Fe[1],Bt=Ot*Ot,pt=vt+Bt;r.hoverData.isOverThresholdDrag=ht=pt>=r.desktopTapThreshold2}var st=a(G);ht&&(r.hoverData.tapholdCancelled=!0);var Qt=function(){var Re=r.hoverData.dragDelta=r.hoverData.dragDelta||[];Re.length===0?(Re.push(We[0]),Re.push(We[1])):(Re[0]+=We[0],Re[1]+=We[1])};oe=!0,n(Be,["mousemove","vmousemove","tapdrag"],G,{x:ve[0],y:ve[1]});var br=function(){r.data.bgActivePosistion=void 0,r.hoverData.selecting||ae.emit({originalEvent:G,type:"boxstart",position:{x:ve[0],y:ve[1]}}),qe[4]=1,r.hoverData.selecting=!0,r.redrawHint("select",!0),r.redraw()};if(r.hoverData.which===3){if(ht){var lr={originalEvent:G,type:"cxtdrag",position:{x:ve[0],y:ve[1]}};Ue?Ue.emit(lr):ae.emit(lr),r.hoverData.cxtDragged=!0,(!r.hoverData.cxtOver||Be!==r.hoverData.cxtOver)&&(r.hoverData.cxtOver&&r.hoverData.cxtOver.emit({originalEvent:G,type:"cxtdragout",position:{x:ve[0],y:ve[1]}}),r.hoverData.cxtOver=Be,Be&&Be.emit({originalEvent:G,type:"cxtdragover",position:{x:ve[0],y:ve[1]}}))}}else if(r.hoverData.dragging){if(oe=!0,ae.panningEnabled()&&ae.userPanningEnabled()){var Sr;if(r.hoverData.justStartedPan){var Wt=r.hoverData.mdownPos;Sr={x:(ve[0]-Wt[0])*fe,y:(ve[1]-Wt[1])*fe},r.hoverData.justStartedPan=!1}else Sr={x:We[0]*fe,y:We[1]*fe};ae.panBy(Sr),ae.emit("dragpan"),r.hoverData.dragged=!0}ve=r.projectIntoViewport(G.clientX,G.clientY)}else if(qe[4]==1&&(Ue==null||Ue.pannable())){if(ht){if(!r.hoverData.dragging&&ae.boxSelectionEnabled()&&(st||!ae.panningEnabled()||!ae.userPanningEnabled()))br();else if(!r.hoverData.selecting&&ae.panningEnabled()&&ae.userPanningEnabled()){var Jt=i(Ue,r.hoverData.downs);Jt&&(r.hoverData.dragging=!0,r.hoverData.justStartedPan=!0,qe[4]=0,r.data.bgActivePosistion=Pi(Te),r.redrawHint("select",!0),r.redraw())}Ue&&Ue.pannable()&&Ue.active()&&Ue.unactivate()}}else{if(Ue&&Ue.pannable()&&Ue.active()&&Ue.unactivate(),(!Ue||!Ue.grabbed())&&Be!=et&&(et&&n(et,["mouseout","tapdragout"],G,{x:ve[0],y:ve[1]}),Be&&n(Be,["mouseover","tapdragover"],G,{x:ve[0],y:ve[1]}),r.hoverData.last=Be),Ue)if(ht){if(ae.boxSelectionEnabled()&&st)Ue&&Ue.grabbed()&&(_(lt),Ue.emit("freeon"),lt.emit("free"),r.dragData.didDrag&&(Ue.emit("dragfreeon"),lt.emit("dragfree"))),br();else if(Ue&&Ue.grabbed()&&r.nodeIsDraggable(Ue)){var qt=!r.dragData.didDrag;qt&&r.redrawHint("eles",!0),r.dragData.didDrag=!0,r.hoverData.draggingEles||v(lt,{inDragLayer:!0});var At={x:0,y:0};if(Ge(We[0])&&Ge(We[1])&&(At.x+=We[0],At.y+=We[1],qt)){var Me=r.hoverData.dragDelta;Me&&Ge(Me[0])&&Ge(Me[1])&&(At.x+=Me[0],At.y+=Me[1])}r.hoverData.draggingEles=!0,lt.silentShift(At).emit("position drag"),r.redrawHint("drag",!0),r.redraw()}}else Qt();oe=!0}if(qe[2]=ve[0],qe[3]=ve[1],oe)return G.stopPropagation&&G.stopPropagation(),G.preventDefault&&G.preventDefault(),!1}},!1);var R,M,N;r.registerBinding(e,"mouseup",function(G){var U=r.hoverData.capture;if(U){r.hoverData.capture=!1;var oe=r.cy,ae=r.projectIntoViewport(G.clientX,G.clientY),fe=r.selection,we=r.findNearestElement(ae[0],ae[1],!0,!1),ve=r.dragData.possibleDragElements,Te=r.hoverData.down,Fe=a(G);if(r.data.bgActivePosistion&&(r.redrawHint("select",!0),r.redraw()),r.hoverData.tapholdCancelled=!0,r.data.bgActivePosistion=void 0,Te&&Te.unactivate(),r.hoverData.which===3){var qe={originalEvent:G,type:"cxttapend",position:{x:ae[0],y:ae[1]}};if(Te?Te.emit(qe):oe.emit(qe),!r.hoverData.cxtDragged){var Be={originalEvent:G,type:"cxttap",position:{x:ae[0],y:ae[1]}};Te?Te.emit(Be):oe.emit(Be)}r.hoverData.cxtDragged=!1,r.hoverData.which=null}else if(r.hoverData.which===1){if(n(we,["mouseup","tapend","vmouseup"],G,{x:ae[0],y:ae[1]}),!r.dragData.didDrag&&!r.hoverData.dragged&&!r.hoverData.selecting&&!r.hoverData.isOverThresholdDrag&&(n(Te,["click","tap","vclick"],G,{x:ae[0],y:ae[1]}),M=!1,G.timeStamp-N<=oe.multiClickDebounceTime()?(R&&clearTimeout(R),M=!0,N=null,n(Te,["dblclick","dbltap","vdblclick"],G,{x:ae[0],y:ae[1]})):(R=setTimeout(function(){M||n(Te,["oneclick","onetap","voneclick"],G,{x:ae[0],y:ae[1]})},oe.multiClickDebounceTime()),N=G.timeStamp)),Te==null&&!r.dragData.didDrag&&!r.hoverData.selecting&&!r.hoverData.dragged&&!a(G)&&(oe.$(t).unselect(["tapunselect"]),ve.length>0&&r.redrawHint("eles",!0),r.dragData.possibleDragElements=ve=oe.collection()),we==Te&&!r.dragData.didDrag&&!r.hoverData.selecting&&we!=null&&we._private.selectable&&(r.hoverData.dragging||(oe.selectionType()==="additive"||Fe?we.selected()?we.unselect(["tapunselect"]):we.select(["tapselect"]):Fe||(oe.$(t).unmerge(we).unselect(["tapunselect"]),we.select(["tapselect"]))),r.redrawHint("eles",!0)),r.hoverData.selecting){var et=oe.collection(r.getAllInBox(fe[0],fe[1],fe[2],fe[3]));r.redrawHint("select",!0),et.length>0&&r.redrawHint("eles",!0),oe.emit({type:"boxend",originalEvent:G,position:{x:ae[0],y:ae[1]}});var Ue=function(ht){return ht.selectable()&&!ht.selected()};oe.selectionType()==="additive"||Fe||oe.$(t).unmerge(et).unselect(),et.emit("box").stdFilter(Ue).select().emit("boxselect"),r.redraw()}if(r.hoverData.dragging&&(r.hoverData.dragging=!1,r.redrawHint("select",!0),r.redrawHint("eles",!0),r.redraw()),!fe[4]){r.redrawHint("drag",!0),r.redrawHint("eles",!0);var We=Te&&Te.grabbed();_(ve),We&&(Te.emit("freeon"),ve.emit("free"),r.dragData.didDrag&&(Te.emit("dragfreeon"),ve.emit("dragfree")))}}fe[4]=0,r.hoverData.down=null,r.hoverData.cxtStarted=!1,r.hoverData.draggingEles=!1,r.hoverData.selecting=!1,r.hoverData.isOverThresholdDrag=!1,r.dragData.didDrag=!1,r.hoverData.dragged=!1,r.hoverData.dragDelta=[],r.hoverData.mdownPos=null,r.hoverData.mdownGPos=null}},!1);var B=function(G){if(!r.scrollingPage){var U=r.cy,oe=U.zoom(),ae=U.pan(),fe=r.projectIntoViewport(G.clientX,G.clientY),we=[fe[0]*oe+ae.x,fe[1]*oe+ae.y];if(r.hoverData.draggingEles||r.hoverData.dragging||r.hoverData.cxtStarted||P()){G.preventDefault();return}if(U.panningEnabled()&&U.userPanningEnabled()&&U.zoomingEnabled()&&U.userZoomingEnabled()){G.preventDefault(),r.data.wheelZooming=!0,clearTimeout(r.data.wheelTimeout),r.data.wheelTimeout=setTimeout(function(){r.data.wheelZooming=!1,r.redrawHint("eles",!0),r.redraw()},150);var ve;G.deltaY!=null?ve=G.deltaY/-250:G.wheelDeltaY!=null?ve=G.wheelDeltaY/1e3:ve=G.wheelDelta/1e3,ve=ve*r.wheelSensitivity;var Te=G.deltaMode===1;Te&&(ve*=33);var Fe=U.zoom()*Math.pow(10,ve);G.type==="gesturechange"&&(Fe=r.gestureStartZoom*G.scale),U.zoom({level:Fe,renderedPosition:{x:we[0],y:we[1]}}),U.emit(G.type==="gesturechange"?"pinchzoom":"scrollzoom")}}};r.registerBinding(r.container,"wheel",B,!0),r.registerBinding(e,"scroll",function(G){r.scrollingPage=!0,clearTimeout(r.scrollingPageTimeout),r.scrollingPageTimeout=setTimeout(function(){r.scrollingPage=!1},250)},!0),r.registerBinding(r.container,"gesturestart",function(G){r.gestureStartZoom=r.cy.zoom(),r.hasTouchStarted||G.preventDefault()},!0),r.registerBinding(r.container,"gesturechange",function(me){r.hasTouchStarted||B(me)},!0),r.registerBinding(r.container,"mouseout",function(G){var U=r.projectIntoViewport(G.clientX,G.clientY);r.cy.emit({originalEvent:G,type:"mouseout",position:{x:U[0],y:U[1]}})},!1),r.registerBinding(r.container,"mouseover",function(G){var U=r.projectIntoViewport(G.clientX,G.clientY);r.cy.emit({originalEvent:G,type:"mouseover",position:{x:U[0],y:U[1]}})},!1);var q,Z,Q,Y,J,X,k,D,I,F,L,H,j,W=function(G,U,oe,ae){return Math.sqrt((oe-G)*(oe-G)+(ae-U)*(ae-U))},re=function(G,U,oe,ae){return(oe-G)*(oe-G)+(ae-U)*(ae-U)},se;r.registerBinding(r.container,"touchstart",se=function(G){if(r.hasTouchStarted=!0,!!T(G)){w(),r.touchData.capture=!0,r.data.bgActivePosistion=void 0;var U=r.cy,oe=r.touchData.now,ae=r.touchData.earlier;if(G.touches[0]){var fe=r.projectIntoViewport(G.touches[0].clientX,G.touches[0].clientY);oe[0]=fe[0],oe[1]=fe[1]}if(G.touches[1]){var fe=r.projectIntoViewport(G.touches[1].clientX,G.touches[1].clientY);oe[2]=fe[0],oe[3]=fe[1]}if(G.touches[2]){var fe=r.projectIntoViewport(G.touches[2].clientX,G.touches[2].clientY);oe[4]=fe[0],oe[5]=fe[1]}if(G.touches[1]){r.touchData.singleTouchMoved=!0,_(r.dragData.touchDragEles);var we=r.findContainerClientCoords();I=we[0],F=we[1],L=we[2],H=we[3],q=G.touches[0].clientX-I,Z=G.touches[0].clientY-F,Q=G.touches[1].clientX-I,Y=G.touches[1].clientY-F,j=0<=q&&q<=L&&0<=Q&&Q<=L&&0<=Z&&Z<=H&&0<=Y&&Y<=H;var ve=U.pan(),Te=U.zoom();J=W(q,Z,Q,Y),X=re(q,Z,Q,Y),k=[(q+Q)/2,(Z+Y)/2],D=[(k[0]-ve.x)/Te,(k[1]-ve.y)/Te];var Fe=200,qe=Fe*Fe;if(X<qe&&!G.touches[2]){var Be=r.findNearestElement(oe[0],oe[1],!0,!0),et=r.findNearestElement(oe[2],oe[3],!0,!0);Be&&Be.isNode()?(Be.activate().emit({originalEvent:G,type:"cxttapstart",position:{x:oe[0],y:oe[1]}}),r.touchData.start=Be):et&&et.isNode()?(et.activate().emit({originalEvent:G,type:"cxttapstart",position:{x:oe[0],y:oe[1]}}),r.touchData.start=et):U.emit({originalEvent:G,type:"cxttapstart",position:{x:oe[0],y:oe[1]}}),r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxt=!0,r.touchData.cxtDragged=!1,r.data.bgActivePosistion=void 0,r.redraw();return}}if(G.touches[2])U.boxSelectionEnabled()&&G.preventDefault();else if(!G.touches[1]){if(G.touches[0]){var Ue=r.findNearestElements(oe[0],oe[1],!0,!0),We=Ue[0];if(We!=null&&(We.activate(),r.touchData.start=We,r.touchData.starts=Ue,r.nodeIsGrabbable(We))){var lt=r.dragData.touchDragEles=U.collection(),ht=null;r.redrawHint("eles",!0),r.redrawHint("drag",!0),We.selected()?(ht=U.$(function(pt){return pt.selected()&&r.nodeIsGrabbable(pt)}),v(ht,{addToList:lt})):m(We,{addToList:lt}),c(We);var Rt=function(st){return{originalEvent:G,type:st,position:{x:oe[0],y:oe[1]}}};We.emit(Rt("grabon")),ht?ht.forEach(function(pt){pt.emit(Rt("grab"))}):We.emit(Rt("grab"))}n(We,["touchstart","tapstart","vmousedown"],G,{x:oe[0],y:oe[1]}),We==null&&(r.data.bgActivePosistion={x:fe[0],y:fe[1]},r.redrawHint("select",!0),r.redraw()),r.touchData.singleTouchMoved=!1,r.touchData.singleTouchStartTime=+new Date,clearTimeout(r.touchData.tapholdTimeout),r.touchData.tapholdTimeout=setTimeout(function(){r.touchData.singleTouchMoved===!1&&!r.pinching&&!r.touchData.selecting&&n(r.touchData.start,["taphold"],G,{x:oe[0],y:oe[1]})},r.tapholdDuration)}}if(G.touches.length>=1){for(var vt=r.touchData.startPosition=[null,null,null,null,null,null],Ot=0;Ot<oe.length;Ot++)vt[Ot]=ae[Ot]=oe[Ot];var Bt=G.touches[0];r.touchData.startGPosition=[Bt.clientX,Bt.clientY]}}},!1);var ce;r.registerBinding(window,"touchmove",ce=function(G){var U=r.touchData.capture;if(!(!U&&!T(G))){var oe=r.selection,ae=r.cy,fe=r.touchData.now,we=r.touchData.earlier,ve=ae.zoom();if(G.touches[0]){var Te=r.projectIntoViewport(G.touches[0].clientX,G.touches[0].clientY);fe[0]=Te[0],fe[1]=Te[1]}if(G.touches[1]){var Te=r.projectIntoViewport(G.touches[1].clientX,G.touches[1].clientY);fe[2]=Te[0],fe[3]=Te[1]}if(G.touches[2]){var Te=r.projectIntoViewport(G.touches[2].clientX,G.touches[2].clientY);fe[4]=Te[0],fe[5]=Te[1]}var Fe=r.touchData.startGPosition,qe;if(U&&G.touches[0]&&Fe){for(var Be=[],et=0;et<fe.length;et++)Be[et]=fe[et]-we[et];var Ue=G.touches[0].clientX-Fe[0],We=Ue*Ue,lt=G.touches[0].clientY-Fe[1],ht=lt*lt,Rt=We+ht;qe=Rt>=r.touchTapThreshold2}if(U&&r.touchData.cxt){G.preventDefault();var vt=G.touches[0].clientX-I,Ot=G.touches[0].clientY-F,Bt=G.touches[1].clientX-I,pt=G.touches[1].clientY-F,st=re(vt,Ot,Bt,pt),Qt=st/X,br=150,lr=br*br,Sr=1.5,Wt=Sr*Sr;if(Qt>=Wt||st>=lr){r.touchData.cxt=!1,r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var Jt={originalEvent:G,type:"cxttapend",position:{x:fe[0],y:fe[1]}};r.touchData.start?(r.touchData.start.unactivate().emit(Jt),r.touchData.start=null):ae.emit(Jt)}}if(U&&r.touchData.cxt){var Jt={originalEvent:G,type:"cxtdrag",position:{x:fe[0],y:fe[1]}};r.data.bgActivePosistion=void 0,r.redrawHint("select",!0),r.touchData.start?r.touchData.start.emit(Jt):ae.emit(Jt),r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxtDragged=!0;var qt=r.findNearestElement(fe[0],fe[1],!0,!0);(!r.touchData.cxtOver||qt!==r.touchData.cxtOver)&&(r.touchData.cxtOver&&r.touchData.cxtOver.emit({originalEvent:G,type:"cxtdragout",position:{x:fe[0],y:fe[1]}}),r.touchData.cxtOver=qt,qt&&qt.emit({originalEvent:G,type:"cxtdragover",position:{x:fe[0],y:fe[1]}}))}else if(U&&G.touches[2]&&ae.boxSelectionEnabled())G.preventDefault(),r.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,r.touchData.selecting||ae.emit({originalEvent:G,type:"boxstart",position:{x:fe[0],y:fe[1]}}),r.touchData.selecting=!0,r.touchData.didSelect=!0,oe[4]=1,!oe||oe.length===0||oe[0]===void 0?(oe[0]=(fe[0]+fe[2]+fe[4])/3,oe[1]=(fe[1]+fe[3]+fe[5])/3,oe[2]=(fe[0]+fe[2]+fe[4])/3+1,oe[3]=(fe[1]+fe[3]+fe[5])/3+1):(oe[2]=(fe[0]+fe[2]+fe[4])/3,oe[3]=(fe[1]+fe[3]+fe[5])/3),r.redrawHint("select",!0),r.redraw();else if(U&&G.touches[1]&&!r.touchData.didSelect&&ae.zoomingEnabled()&&ae.panningEnabled()&&ae.userZoomingEnabled()&&ae.userPanningEnabled()){G.preventDefault(),r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var At=r.dragData.touchDragEles;if(At){r.redrawHint("drag",!0);for(var Me=0;Me<At.length;Me++){var _e=At[Me]._private;_e.grabbed=!1,_e.rscratch.inDragLayer=!1}}var Re=r.touchData.start,vt=G.touches[0].clientX-I,Ot=G.touches[0].clientY-F,Bt=G.touches[1].clientX-I,pt=G.touches[1].clientY-F,Ye=W(vt,Ot,Bt,pt),nt=Ye/J;if(j){var Je=vt-q,xt=Ot-Z,er=Bt-Q,Kt=pt-Y,Ut=(Je+er)/2,gt=(xt+Kt)/2,tr=ae.zoom(),$r=tr*nt,Cr=ae.pan(),Vr=D[0]*tr+Cr.x,Ur=D[1]*tr+Cr.y,ln={x:-$r/tr*(Vr-Cr.x-Ut)+Vr,y:-$r/tr*(Ur-Cr.y-gt)+Ur};if(Re&&Re.active()){var At=r.dragData.touchDragEles;_(At),r.redrawHint("drag",!0),r.redrawHint("eles",!0),Re.unactivate().emit("freeon"),At.emit("free"),r.dragData.didDrag&&(Re.emit("dragfreeon"),At.emit("dragfree"))}ae.viewport({zoom:$r,pan:ln,cancelOnFailedZoom:!0}),ae.emit("pinchzoom"),J=Ye,q=vt,Z=Ot,Q=Bt,Y=pt,r.pinching=!0}if(G.touches[0]){var Te=r.projectIntoViewport(G.touches[0].clientX,G.touches[0].clientY);fe[0]=Te[0],fe[1]=Te[1]}if(G.touches[1]){var Te=r.projectIntoViewport(G.touches[1].clientX,G.touches[1].clientY);fe[2]=Te[0],fe[3]=Te[1]}if(G.touches[2]){var Te=r.projectIntoViewport(G.touches[2].clientX,G.touches[2].clientY);fe[4]=Te[0],fe[5]=Te[1]}}else if(G.touches[0]&&!r.touchData.didSelect){var dr=r.touchData.start,xn=r.touchData.last,qt;if(!r.hoverData.draggingEles&&!r.swipePanning&&(qt=r.findNearestElement(fe[0],fe[1],!0,!0)),U&&dr!=null&&G.preventDefault(),U&&dr!=null&&r.nodeIsDraggable(dr))if(qe){var At=r.dragData.touchDragEles,Br=!r.dragData.didDrag;Br&&v(At,{inDragLayer:!0}),r.dragData.didDrag=!0;var Or={x:0,y:0};if(Ge(Be[0])&&Ge(Be[1])&&(Or.x+=Be[0],Or.y+=Be[1],Br)){r.redrawHint("eles",!0);var It=r.touchData.dragDelta;It&&Ge(It[0])&&Ge(It[1])&&(Or.x+=It[0],Or.y+=It[1])}r.hoverData.draggingEles=!0,At.silentShift(Or).emit("position drag"),r.redrawHint("drag",!0),r.touchData.startPosition[0]==we[0]&&r.touchData.startPosition[1]==we[1]&&r.redrawHint("eles",!0),r.redraw()}else{var It=r.touchData.dragDelta=r.touchData.dragDelta||[];It.length===0?(It.push(Be[0]),It.push(Be[1])):(It[0]+=Be[0],It[1]+=Be[1])}if(n(dr||qt,["touchmove","tapdrag","vmousemove"],G,{x:fe[0],y:fe[1]}),(!dr||!dr.grabbed())&&qt!=xn&&(xn&&xn.emit({originalEvent:G,type:"tapdragout",position:{x:fe[0],y:fe[1]}}),qt&&qt.emit({originalEvent:G,type:"tapdragover",position:{x:fe[0],y:fe[1]}})),r.touchData.last=qt,U)for(var Me=0;Me<fe.length;Me++)fe[Me]&&r.touchData.startPosition[Me]&&qe&&(r.touchData.singleTouchMoved=!0);if(U&&(dr==null||dr.pannable())&&ae.panningEnabled()&&ae.userPanningEnabled()){var en=i(dr,r.touchData.starts);en&&(G.preventDefault(),r.data.bgActivePosistion||(r.data.bgActivePosistion=Pi(r.touchData.startPosition)),r.swipePanning?(ae.panBy({x:Be[0]*ve,y:Be[1]*ve}),ae.emit("dragpan")):qe&&(r.swipePanning=!0,ae.panBy({x:Ue*ve,y:lt*ve}),ae.emit("dragpan"),dr&&(dr.unactivate(),r.redrawHint("select",!0),r.touchData.start=null)));var Te=r.projectIntoViewport(G.touches[0].clientX,G.touches[0].clientY);fe[0]=Te[0],fe[1]=Te[1]}}for(var et=0;et<fe.length;et++)we[et]=fe[et];U&&G.touches.length>0&&!r.hoverData.draggingEles&&!r.swipePanning&&r.data.bgActivePosistion!=null&&(r.data.bgActivePosistion=void 0,r.redrawHint("select",!0),r.redraw())}},!1);var ge;r.registerBinding(e,"touchcancel",ge=function(G){var U=r.touchData.start;r.touchData.capture=!1,U&&U.unactivate()});var Pe,Oe,Se,le;if(r.registerBinding(e,"touchend",Pe=function(G){var U=r.touchData.start,oe=r.touchData.capture;if(oe)G.touches.length===0&&(r.touchData.capture=!1),G.preventDefault();else return;var ae=r.selection;r.swipePanning=!1,r.hoverData.draggingEles=!1;var fe=r.cy,we=fe.zoom(),ve=r.touchData.now,Te=r.touchData.earlier;if(G.touches[0]){var Fe=r.projectIntoViewport(G.touches[0].clientX,G.touches[0].clientY);ve[0]=Fe[0],ve[1]=Fe[1]}if(G.touches[1]){var Fe=r.projectIntoViewport(G.touches[1].clientX,G.touches[1].clientY);ve[2]=Fe[0],ve[3]=Fe[1]}if(G.touches[2]){var Fe=r.projectIntoViewport(G.touches[2].clientX,G.touches[2].clientY);ve[4]=Fe[0],ve[5]=Fe[1]}U&&U.unactivate();var qe;if(r.touchData.cxt){if(qe={originalEvent:G,type:"cxttapend",position:{x:ve[0],y:ve[1]}},U?U.emit(qe):fe.emit(qe),!r.touchData.cxtDragged){var Be={originalEvent:G,type:"cxttap",position:{x:ve[0],y:ve[1]}};U?U.emit(Be):fe.emit(Be)}r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxt=!1,r.touchData.start=null,r.redraw();return}if(!G.touches[2]&&fe.boxSelectionEnabled()&&r.touchData.selecting){r.touchData.selecting=!1;var et=fe.collection(r.getAllInBox(ae[0],ae[1],ae[2],ae[3]));ae[0]=void 0,ae[1]=void 0,ae[2]=void 0,ae[3]=void 0,ae[4]=0,r.redrawHint("select",!0),fe.emit({type:"boxend",originalEvent:G,position:{x:ve[0],y:ve[1]}});var Ue=function(lr){return lr.selectable()&&!lr.selected()};et.emit("box").stdFilter(Ue).select().emit("boxselect"),et.nonempty()&&r.redrawHint("eles",!0),r.redraw()}if(U!=null&&U.unactivate(),G.touches[2])r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);else if(!G.touches[1]){if(!G.touches[0]){if(!G.touches[0]){r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var We=r.dragData.touchDragEles;if(U!=null){var lt=U._private.grabbed;_(We),r.redrawHint("drag",!0),r.redrawHint("eles",!0),lt&&(U.emit("freeon"),We.emit("free"),r.dragData.didDrag&&(U.emit("dragfreeon"),We.emit("dragfree"))),n(U,["touchend","tapend","vmouseup","tapdragout"],G,{x:ve[0],y:ve[1]}),U.unactivate(),r.touchData.start=null}else{var ht=r.findNearestElement(ve[0],ve[1],!0,!0);n(ht,["touchend","tapend","vmouseup","tapdragout"],G,{x:ve[0],y:ve[1]})}var Rt=r.touchData.startPosition[0]-ve[0],vt=Rt*Rt,Ot=r.touchData.startPosition[1]-ve[1],Bt=Ot*Ot,pt=vt+Bt,st=pt*we*we;r.touchData.singleTouchMoved||(U||fe.$(":selected").unselect(["tapunselect"]),n(U,["tap","vclick"],G,{x:ve[0],y:ve[1]}),Oe=!1,G.timeStamp-le<=fe.multiClickDebounceTime()?(Se&&clearTimeout(Se),Oe=!0,le=null,n(U,["dbltap","vdblclick"],G,{x:ve[0],y:ve[1]})):(Se=setTimeout(function(){Oe||n(U,["onetap","voneclick"],G,{x:ve[0],y:ve[1]})},fe.multiClickDebounceTime()),le=G.timeStamp)),U!=null&&!r.dragData.didDrag&&U._private.selectable&&st<r.touchTapThreshold2&&!r.pinching&&(fe.selectionType()==="single"?(fe.$(t).unmerge(U).unselect(["tapunselect"]),U.select(["tapselect"])):U.selected()?U.unselect(["tapunselect"]):U.select(["tapselect"]),r.redrawHint("eles",!0)),r.touchData.singleTouchMoved=!0}}}for(var Qt=0;Qt<ve.length;Qt++)Te[Qt]=ve[Qt];r.dragData.didDrag=!1,G.touches.length===0&&(r.touchData.dragDelta=[],r.touchData.startPosition=[null,null,null,null,null,null],r.touchData.startGPosition=null,r.touchData.didSelect=!1),G.touches.length<2&&(G.touches.length===1&&(r.touchData.startGPosition=[G.touches[0].clientX,G.touches[0].clientY]),r.pinching=!1,r.redrawHint("eles",!0),r.redraw())},!1),typeof TouchEvent>"u"){var te=[],ne=function(G){return{clientX:G.clientX,clientY:G.clientY,force:1,identifier:G.pointerId,pageX:G.pageX,pageY:G.pageY,radiusX:G.width/2,radiusY:G.height/2,screenX:G.screenX,screenY:G.screenY,target:G.target}},de=function(G){return{event:G,touch:ne(G)}},Ce=function(G){te.push(de(G))},Le=function(G){for(var U=0;U<te.length;U++){var oe=te[U];if(oe.event.pointerId===G.pointerId){te.splice(U,1);return}}},$e=function(G){var U=te.filter(function(oe){return oe.event.pointerId===G.pointerId})[0];U.event=G,U.touch=ne(G)},Ne=function(G){G.touches=te.map(function(U){return U.touch})},De=function(G){return G.pointerType==="mouse"||G.pointerType===4};r.registerBinding(r.container,"pointerdown",function(me){De(me)||(me.preventDefault(),Ce(me),Ne(me),se(me))}),r.registerBinding(r.container,"pointerup",function(me){De(me)||(Le(me),Ne(me),Pe(me))}),r.registerBinding(r.container,"pointercancel",function(me){De(me)||(Le(me),Ne(me),ge(me))}),r.registerBinding(r.container,"pointermove",function(me){De(me)||(me.preventDefault(),$e(me),Ne(me),ce(me))})}};var Zn={};Zn.generatePolygon=function(r,e){return this.nodeShapes[r]={renderer:this,name:r,points:e,draw:function(n,a,i,o,s,u){this.renderer.nodeShapeImpl("polygon",n,a,i,o,s,this.points)},intersectLine:function(n,a,i,o,s,u,l,c){return Bo(s,u,this.points,n,a,i/2,o/2,l)},checkPoint:function(n,a,i,o,s,u,l,c){return Yn(n,a,this.points,u,l,o,s,[0,-1],i)}}};Zn.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,t,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,t,n,a,i)},intersectLine:function(e,t,n,a,i,o,s,u){return uA(i,o,e,t,n/2+s,a/2+s)},checkPoint:function(e,t,n,a,i,o,s,u){return Wa(e,t,a,i,o,s,n)}}};Zn.generateRoundPolygon=function(r,e){return this.nodeShapes[r]={renderer:this,name:r,points:e,getOrCreateCorners:function(n,a,i,o,s,u,l){if(u[l]!==void 0&&u[l+"-cx"]===n&&u[l+"-cy"]===a)return u[l];u[l]=new Array(e.length/2),u[l+"-cx"]=n,u[l+"-cy"]=a;var c=i/2,f=o/2;s=s==="auto"?yS(i,o):s;for(var d=new Array(e.length/2),h=0;h<e.length/2;h++)d[h]={x:n+c*e[h*2],y:a+f*e[h*2+1]};var v,m,_,b,w=d.length;for(m=d[w-1],v=0;v<w;v++)_=d[v%w],b=d[(v+1)%w],u[l][v]=Bg(m,_,b,s),m=_,_=b;return u[l]},draw:function(n,a,i,o,s,u,l){this.renderer.nodeShapeImpl("round-polygon",n,a,i,o,s,this.points,this.getOrCreateCorners(a,i,o,s,u,l,"drawCorners"))},intersectLine:function(n,a,i,o,s,u,l,c,f){return lA(s,u,this.points,n,a,i,o,l,this.getOrCreateCorners(n,a,i,o,c,f,"corners"))},checkPoint:function(n,a,i,o,s,u,l,c,f){return sA(n,a,this.points,u,l,o,s,this.getOrCreateCorners(u,l,o,s,c,f,"corners"))}}};Zn.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:zr(4,0),draw:function(e,t,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,t,n,a,i,this.points,o)},intersectLine:function(e,t,n,a,i,o,s,u){return pS(i,o,e,t,n,a,s,u)},checkPoint:function(e,t,n,a,i,o,s,u){var l=a/2,c=i/2;u=u==="auto"?Za(a,i):u,u=Math.min(l,c,u);var f=u*2;return!!(Yn(e,t,this.points,o,s,a,i-f,[0,-1],n)||Yn(e,t,this.points,o,s,a-f,i,[0,-1],n)||Wa(e,t,f,f,o-l+u,s-c+u,n)||Wa(e,t,f,f,o+l-u,s-c+u,n)||Wa(e,t,f,f,o+l-u,s+c-u,n)||Wa(e,t,f,f,o-l+u,s+c-u,n))}}};Zn.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:Tg(),points:zr(4,0),draw:function(e,t,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,t,n,a,i,null,o)},generateCutTrianglePts:function(e,t,n,a,i){var o=i==="auto"?this.cornerLength:i,s=t/2,u=e/2,l=n-u,c=n+u,f=a-s,d=a+s;return{topLeft:[l,f+o,l+o,f,l+o,f+o],topRight:[c-o,f,c,f+o,c-o,f+o],bottomRight:[c,d-o,c-o,d,c-o,d-o],bottomLeft:[l+o,d,l,d-o,l+o,d-o]}},intersectLine:function(e,t,n,a,i,o,s,u){var l=this.generateCutTrianglePts(n+2*s,a+2*s,e,t,u),c=[].concat.apply([],[l.topLeft.splice(0,4),l.topRight.splice(0,4),l.bottomRight.splice(0,4),l.bottomLeft.splice(0,4)]);return Bo(i,o,c,e,t)},checkPoint:function(e,t,n,a,i,o,s,u){var l=u==="auto"?this.cornerLength:u;if(Yn(e,t,this.points,o,s,a,i-2*l,[0,-1],n)||Yn(e,t,this.points,o,s,a-2*l,i,[0,-1],n))return!0;var c=this.generateCutTrianglePts(a,i,o,s);return Wr(e,t,c.topLeft)||Wr(e,t,c.topRight)||Wr(e,t,c.bottomRight)||Wr(e,t,c.bottomLeft)}}};Zn.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:zr(4,0),draw:function(e,t,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,t,n,a,i)},intersectLine:function(e,t,n,a,i,o,s,u){var l=.15,c=.5,f=.85,d=this.generateBarrelBezierPts(n+2*s,a+2*s,e,t),h=function(_){var b=ki({x:_[0],y:_[1]},{x:_[2],y:_[3]},{x:_[4],y:_[5]},l),w=ki({x:_[0],y:_[1]},{x:_[2],y:_[3]},{x:_[4],y:_[5]},c),y=ki({x:_[0],y:_[1]},{x:_[2],y:_[3]},{x:_[4],y:_[5]},f);return[_[0],_[1],b.x,b.y,w.x,w.y,y.x,y.y,_[4],_[5]]},v=[].concat(h(d.topLeft),h(d.topRight),h(d.bottomRight),h(d.bottomLeft));return Bo(i,o,v,e,t)},generateBarrelBezierPts:function(e,t,n,a){var i=t/2,o=e/2,s=n-o,u=n+o,l=a-i,c=a+i,f=Wp(e,t),d=f.heightOffset,h=f.widthOffset,v=f.ctrlPtOffsetPct*e,m={topLeft:[s,l+d,s+v,l,s+h,l],topRight:[u-h,l,u-v,l,u,l+d],bottomRight:[u,c-d,u-v,c,u-h,c],bottomLeft:[s+h,c,s+v,c,s,c-d]};return m.topLeft.isTop=!0,m.topRight.isTop=!0,m.bottomLeft.isBottom=!0,m.bottomRight.isBottom=!0,m},checkPoint:function(e,t,n,a,i,o,s,u){var l=Wp(a,i),c=l.heightOffset,f=l.widthOffset;if(Yn(e,t,this.points,o,s,a,i-2*c,[0,-1],n)||Yn(e,t,this.points,o,s,a-2*f,i,[0,-1],n))return!0;for(var d=this.generateBarrelBezierPts(a,i,o,s),h=function(P,T,R){var M=R[4],N=R[2],B=R[0],q=R[5],Z=R[1],Q=Math.min(M,B),Y=Math.max(M,B),J=Math.min(q,Z),X=Math.max(q,Z);if(Q<=P&&P<=Y&&J<=T&&T<=X){var k=cA(M,N,B),D=nA(k[0],k[1],k[2],P),I=D.filter(function(F){return 0<=F&&F<=1});if(I.length>0)return I[0]}return null},v=Object.keys(d),m=0;m<v.length;m++){var _=v[m],b=d[_],w=h(e,t,b);if(w!=null){var y=b[5],x=b[3],C=b[1],E=_r(y,x,C,w);if(b.isTop&&E<=t||b.isBottom&&t<=E)return!0}}return!1}}};Zn.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:zr(4,0),draw:function(e,t,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,t,n,a,i,this.points,o)},intersectLine:function(e,t,n,a,i,o,s,u){var l=e-(n/2+s),c=t-(a/2+s),f=c,d=e+(n/2+s),h=ya(i,o,e,t,l,c,d,f,!1);return h.length>0?h:pS(i,o,e,t,n,a,s,u)},checkPoint:function(e,t,n,a,i,o,s,u){u=u==="auto"?Za(a,i):u;var l=2*u;if(Yn(e,t,this.points,o,s,a,i-l,[0,-1],n)||Yn(e,t,this.points,o,s,a-l,i,[0,-1],n))return!0;var c=a/2+2*n,f=i/2+2*n,d=[o-c,s-f,o-c,s,o+c,s,o+c,s-f];return!!(Wr(e,t,d)||Wa(e,t,l,l,o+a/2-u,s+i/2-u,n)||Wa(e,t,l,l,o-a/2+u,s+i/2-u,n))}}};Zn.registerNodeShapes=function(){var r=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",zr(3,0)),this.generateRoundPolygon("round-triangle",zr(3,0)),this.generatePolygon("rectangle",zr(4,0)),r.square=r.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var t=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",t),this.generateRoundPolygon("round-diamond",t)}this.generatePolygon("pentagon",zr(5,0)),this.generateRoundPolygon("round-pentagon",zr(5,0)),this.generatePolygon("hexagon",zr(6,0)),this.generateRoundPolygon("round-hexagon",zr(6,0)),this.generatePolygon("heptagon",zr(7,0)),this.generateRoundPolygon("round-heptagon",zr(7,0)),this.generatePolygon("octagon",zr(8,0)),this.generateRoundPolygon("round-octagon",zr(8,0));var n=new Array(20);{var a=jp(5,0),i=jp(5,Math.PI/5),o=.5*(3-Math.sqrt(5));o*=1.57;for(var s=0;s<i.length/2;s++)i[s*2]*=o,i[s*2+1]*=o;for(var s=0;s<20/4;s++)n[s*4]=a[s*2],n[s*4+1]=a[s*2+1],n[s*4+2]=i[s*2],n[s*4+3]=i[s*2+1]}n=gS(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var u=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",u),this.generateRoundPolygon("round-tag",u)}r.makePolygon=function(l){var c=l.join("$"),f="polygon-"+c,d;return(d=this[f])?d:e.generatePolygon(f,l)}};var Jo={};Jo.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};Jo.redraw=function(r){r=r||cS();var e=this;e.averageRedrawTime===void 0&&(e.averageRedrawTime=0),e.lastRedrawTime===void 0&&(e.lastRedrawTime=0),e.lastDrawTime===void 0&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=r};Jo.beforeRender=function(r,e){if(!this.destroyed){e==null&&ar("Priority is not optional for beforeRender");var t=this.beforeRenderCallbacks;t.push({fn:r,priority:e}),t.sort(function(n,a){return a.priority-n.priority})}};var Bm=function(e,t,n){for(var a=e.beforeRenderCallbacks,i=0;i<a.length;i++)a[i].fn(t,n)};Jo.startRenderLoop=function(){var r=this,e=r.cy;if(!r.renderLoopStarted){r.renderLoopStarted=!0;var t=function n(a){if(!r.destroyed){if(!e.batching())if(r.requestedFrame&&!r.skipFrame){Bm(r,!0,a);var i=Kn();r.render(r.renderOptions);var o=r.lastDrawTime=Kn();r.averageRedrawTime===void 0&&(r.averageRedrawTime=o-i),r.redrawCount===void 0&&(r.redrawCount=0),r.redrawCount++,r.redrawTotalTime===void 0&&(r.redrawTotalTime=0);var s=o-i;r.redrawTotalTime+=s,r.lastRedrawTime=s,r.averageRedrawTime=r.averageRedrawTime/2+s/2,r.requestedFrame=!1}else Bm(r,!1,a);r.skipFrame=!1,Ws(n)}};Ws(t)}};var HD=function(e){this.init(e)},pC=HD,Yi=pC.prototype;Yi.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];Yi.init=function(r){var e=this;e.options=r,e.cy=r.cy;var t=e.container=r.cy.container(),n=e.cy.window();if(n){var a=n.document,i=a.head,o="__________cytoscape_stylesheet",s="__________cytoscape_container",u=a.getElementById(o)!=null;if(t.className.indexOf(s)<0&&(t.className=(t.className||"")+" "+s),!u){var l=a.createElement("style");l.id=o,l.textContent="."+s+" { position: relative; }",i.insertBefore(l,i.children[0])}var c=n.getComputedStyle(t),f=c.getPropertyValue("position");f==="static"&&Mt("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=r.showFps,e.debug=r.debug,e.hideEdgesOnViewport=r.hideEdgesOnViewport,e.textureOnViewport=r.textureOnViewport,e.wheelSensitivity=r.wheelSensitivity,e.motionBlurEnabled=r.motionBlur,e.forcedPixelRatio=Ge(r.pixelRatio)?r.pixelRatio:null,e.motionBlur=r.motionBlur,e.motionBlurOpacity=r.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=r.desktopTapThreshold,e.desktopTapThreshold2=r.desktopTapThreshold*r.desktopTapThreshold,e.touchTapThreshold=r.touchTapThreshold,e.touchTapThreshold2=r.touchTapThreshold*r.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()};Yi.notify=function(r,e){var t=this,n=t.cy;if(!this.destroyed){if(r==="init"){t.load();return}if(r==="destroy"){t.destroy();return}(r==="add"||r==="remove"||r==="move"&&n.hasCompoundNodes()||r==="load"||r==="zorder"||r==="mount")&&t.invalidateCachedZSortedEles(),r==="viewport"&&t.redrawHint("select",!0),(r==="load"||r==="resize"||r==="mount")&&(t.invalidateContainerClientCoordsCache(),t.matchCanvasSize(t.container)),t.redrawHint("eles",!0),t.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};Yi.destroy=function(){var r=this;r.destroyed=!0,r.cy.stopAnimationLoop();for(var e=0;e<r.bindings.length;e++){var t=r.bindings[e],n=t,a=n.target;(a.off||a.removeEventListener).apply(a,n.args)}if(r.bindings=[],r.beforeRenderCallbacks=[],r.onUpdateEleCalcsFns=[],r.removeObserver&&r.removeObserver.disconnect(),r.styleObserver&&r.styleObserver.disconnect(),r.resizeObserver&&r.resizeObserver.disconnect(),r.labelCalcDiv)try{document.body.removeChild(r.labelCalcDiv)}catch{}};Yi.isHeadless=function(){return!1};[Fg,hC,vC,Ki,Zn,Jo].forEach(function(r){rt(Yi,r)});var cc=1e3/60,gC={setupDequeueing:function(e){return function(){var n=this,a=this.renderer;if(!n.dequeueingSetup){n.dequeueingSetup=!0;var i=fu(function(){a.redrawHint("eles",!0),a.redrawHint("drag",!0),a.redraw()},e.deqRedrawThreshold),o=function(l,c){var f=Kn(),d=a.averageRedrawTime,h=a.lastRedrawTime,v=[],m=a.cy.extent(),_=a.getPixelRatio();for(l||a.flushRenderedStyleQueue();;){var b=Kn(),w=b-f,y=b-c;if(h<cc){var x=cc-(l?d:0);if(y>=e.deqFastCost*x)break}else if(l){if(w>=e.deqCost*h||w>=e.deqAvgCost*d)break}else if(y>=e.deqNoDrawCost*cc)break;var C=e.deq(n,_,m);if(C.length>0)for(var E=0;E<C.length;E++)v.push(C[E]);else break}v.length>0&&(e.onDeqd(n,v),!l&&e.shouldRedraw(n,v,_,m)&&i())},s=e.priority||xg;a.beforeRender(o,s(n))}}}},jD=function(){function r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ks;yg(this,r),this.idsByKey=new Rn,this.keyForId=new Rn,this.cachesByLvl=new Rn,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=t}return mg(r,[{key:"getIdsFor",value:function(t){t==null&&ar("Can not get id list for null key");var n=this.idsByKey,a=this.idsByKey.get(t);return a||(a=new Gi,n.set(t,a)),a}},{key:"addIdForKey",value:function(t,n){t!=null&&this.getIdsFor(t).add(n)}},{key:"deleteIdForKey",value:function(t,n){t!=null&&this.getIdsFor(t).delete(n)}},{key:"getNumberOfIdsForKey",value:function(t){return t==null?0:this.getIdsFor(t).size}},{key:"updateKeyMappingFor",value:function(t){var n=t.id(),a=this.keyForId.get(n),i=this.getKey(t);this.deleteIdForKey(a,n),this.addIdForKey(i,n),this.keyForId.set(n,i)}},{key:"deleteKeyMappingFor",value:function(t){var n=t.id(),a=this.keyForId.get(n);this.deleteIdForKey(a,n),this.keyForId.delete(n)}},{key:"keyHasChangedFor",value:function(t){var n=t.id(),a=this.keyForId.get(n),i=this.getKey(t);return a!==i}},{key:"isInvalid",value:function(t){return this.keyHasChangedFor(t)||this.doesEleInvalidateKey(t)}},{key:"getCachesAt",value:function(t){var n=this.cachesByLvl,a=this.lvls,i=n.get(t);return i||(i=new Rn,n.set(t,i),a.push(t)),i}},{key:"getCache",value:function(t,n){return this.getCachesAt(n).get(t)}},{key:"get",value:function(t,n){var a=this.getKey(t),i=this.getCache(a,n);return i!=null&&this.updateKeyMappingFor(t),i}},{key:"getForCachedKey",value:function(t,n){var a=this.keyForId.get(t.id()),i=this.getCache(a,n);return i}},{key:"hasCache",value:function(t,n){return this.getCachesAt(n).has(t)}},{key:"has",value:function(t,n){var a=this.getKey(t);return this.hasCache(a,n)}},{key:"setCache",value:function(t,n,a){a.key=t,this.getCachesAt(n).set(t,a)}},{key:"set",value:function(t,n,a){var i=this.getKey(t);this.setCache(i,n,a),this.updateKeyMappingFor(t)}},{key:"deleteCache",value:function(t,n){this.getCachesAt(n).delete(t)}},{key:"delete",value:function(t,n){var a=this.getKey(t);this.deleteCache(a,n)}},{key:"invalidateKey",value:function(t){var n=this;this.lvls.forEach(function(a){return n.deleteCache(t,a)})}},{key:"invalidate",value:function(t){var n=t.id(),a=this.keyForId.get(n);this.deleteKeyMappingFor(t);var i=this.doesEleInvalidateKey(t);return i&&this.invalidateKey(a),i||this.getNumberOfIdsForKey(a)===0}}]),r}(),qm=25,As=50,Us=-4,ag=3,WD=7.99,KD=8,YD=1024,XD=1024,ZD=1024,QD=.2,JD=.8,eR=10,tR=.15,rR=.1,nR=.9,aR=.9,iR=100,oR=1,Ai={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},sR=kr({getKey:null,doesEleInvalidateKey:Ks,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:sS,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),To=function(e,t){var n=this;n.renderer=e,n.onDequeues=[];var a=sR(t);rt(n,a),n.lookup=new jD(a.getKey,a.doesEleInvalidateKey),n.setupDequeueing()},yr=To.prototype;yr.reasons=Ai;yr.getTextureQueue=function(r){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[r]=e.eleImgCaches[r]||[]};yr.getRetiredTextureQueue=function(r){var e=this,t=e.eleImgCaches.retired=e.eleImgCaches.retired||{},n=t[r]=t[r]||[];return n};yr.getElementQueue=function(){var r=this,e=r.eleCacheQueue=r.eleCacheQueue||new Yo(function(t,n){return n.reqs-t.reqs});return e};yr.getElementKeyToQueue=function(){var r=this,e=r.eleKeyToCacheQueue=r.eleKeyToCacheQueue||{};return e};yr.getElement=function(r,e,t,n,a){var i=this,o=this.renderer,s=o.cy.zoom(),u=this.lookup;if(!e||e.w===0||e.h===0||isNaN(e.w)||isNaN(e.h)||!r.visible()||r.removed()||!i.allowEdgeTxrCaching&&r.isEdge()||!i.allowParentTxrCaching&&r.isParent())return null;if(n==null&&(n=Math.ceil(Cg(s*t))),n<Us)n=Us;else if(s>=WD||n>ag)return null;var l=Math.pow(2,n),c=e.h*l,f=e.w*l,d=o.eleTextBiggerThanMin(r,l);if(!this.isVisible(r,d))return null;var h=u.get(r,n);if(h&&h.invalidated&&(h.invalidated=!1,h.texture.invalidatedWidth-=h.width),h)return h;var v;if(c<=qm?v=qm:c<=As?v=As:v=Math.ceil(c/As)*As,c>ZD||f>XD)return null;var m=i.getTextureQueue(v),_=m[m.length-2],b=function(){return i.recycleTexture(v,f)||i.addTexture(v,f)};_||(_=m[m.length-1]),_||(_=b()),_.width-_.usedWidth<f&&(_=b());for(var w=function(Q){return Q&&Q.scaledLabelShown===d},y=a&&a===Ai.dequeue,x=a&&a===Ai.highQuality,C=a&&a===Ai.downscale,E,p=n+1;p<=ag;p++){var P=u.get(r,p);if(P){E=P;break}}var T=E&&E.level===n+1?E:null,R=function(){_.context.drawImage(T.texture.canvas,T.x,0,T.width,T.height,_.usedWidth,0,f,c)};if(_.context.setTransform(1,0,0,1,0,0),_.context.clearRect(_.usedWidth,0,f,v),w(T))R();else if(w(E))if(x){for(var M=E.level;M>n;M--)T=i.getElement(r,e,t,M,Ai.downscale);R()}else return i.queueElement(r,E.level-1),E;else{var N;if(!y&&!x&&!C)for(var B=n-1;B>=Us;B--){var q=u.get(r,B);if(q){N=q;break}}if(w(N))return i.queueElement(r,n),N;_.context.translate(_.usedWidth,0),_.context.scale(l,l),this.drawElement(_.context,r,e,d,!1),_.context.scale(1/l,1/l),_.context.translate(-_.usedWidth,0)}return h={x:_.usedWidth,texture:_,level:n,scale:l,width:f,height:c,scaledLabelShown:d},_.usedWidth+=Math.ceil(f+KD),_.eleCaches.push(h),u.set(r,n,h),i.checkTextureFullness(_),h};yr.invalidateElements=function(r){for(var e=0;e<r.length;e++)this.invalidateElement(r[e])};yr.invalidateElement=function(r){var e=this,t=e.lookup,n=[],a=t.isInvalid(r);if(a){for(var i=Us;i<=ag;i++){var o=t.getForCachedKey(r,i);o&&n.push(o)}var s=t.invalidate(r);if(s)for(var u=0;u<n.length;u++){var l=n[u],c=l.texture;c.invalidatedWidth+=l.width,l.invalidated=!0,e.checkTextureUtility(c)}e.removeFromQueue(r)}};yr.checkTextureUtility=function(r){r.invalidatedWidth>=QD*r.width&&this.retireTexture(r)};yr.checkTextureFullness=function(r){var e=this,t=e.getTextureQueue(r.height);r.usedWidth/r.width>JD&&r.fullnessChecks>=eR?_a(t,r):r.fullnessChecks++};yr.retireTexture=function(r){var e=this,t=r.height,n=e.getTextureQueue(t),a=this.lookup;_a(n,r),r.retired=!0;for(var i=r.eleCaches,o=0;o<i.length;o++){var s=i[o];a.deleteCache(s.key,s.level)}Sg(i);var u=e.getRetiredTextureQueue(t);u.push(r)};yr.addTexture=function(r,e){var t=this,n=t.getTextureQueue(r),a={};return n.push(a),a.eleCaches=[],a.height=r,a.width=Math.max(YD,e),a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,a.canvas=t.renderer.makeOffscreenCanvas(a.width,a.height),a.context=a.canvas.getContext("2d"),a};yr.recycleTexture=function(r,e){for(var t=this,n=t.getTextureQueue(r),a=t.getRetiredTextureQueue(r),i=0;i<a.length;i++){var o=a[i];if(o.width>=e)return o.retired=!1,o.usedWidth=0,o.invalidatedWidth=0,o.fullnessChecks=0,Sg(o.eleCaches),o.context.setTransform(1,0,0,1,0,0),o.context.clearRect(0,0,o.width,o.height),_a(a,o),n.push(o),o}};yr.queueElement=function(r,e){var t=this,n=t.getElementQueue(),a=t.getElementKeyToQueue(),i=this.getKey(r),o=a[i];if(o)o.level=Math.max(o.level,e),o.eles.merge(r),o.reqs++,n.updateItem(o);else{var s={eles:r.spawn().merge(r),level:e,reqs:1,key:i};n.push(s),a[i]=s}};yr.dequeue=function(r){for(var e=this,t=e.getElementQueue(),n=e.getElementKeyToQueue(),a=[],i=e.lookup,o=0;o<oR&&t.size()>0;o++){var s=t.pop(),u=s.key,l=s.eles[0],c=i.hasCache(l,s.level);if(n[u]=null,c)continue;a.push(s);var f=e.getBoundingBox(l);e.getElement(l,f,r,s.level,Ai.dequeue)}return a};yr.removeFromQueue=function(r){var e=this,t=e.getElementQueue(),n=e.getElementKeyToQueue(),a=this.getKey(r),i=n[a];i!=null&&(i.eles.length===1?(i.reqs=_g,t.updateItem(i),t.pop(),n[a]=null):i.eles.unmerge(r))};yr.onDequeue=function(r){this.onDequeues.push(r)};yr.offDequeue=function(r){_a(this.onDequeues,r)};yr.setupDequeueing=gC.setupDequeueing({deqRedrawThreshold:iR,deqCost:tR,deqAvgCost:rR,deqNoDrawCost:nR,deqFastCost:aR,deq:function(e,t,n){return e.dequeue(t,n)},onDeqd:function(e,t){for(var n=0;n<e.onDequeues.length;n++){var a=e.onDequeues[n];a(t)}},shouldRedraw:function(e,t,n,a){for(var i=0;i<t.length;i++)for(var o=t[i].eles,s=0;s<o.length;s++){var u=o[s].boundingBox();if(Eg(u,a))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var uR=1,Do=-4,ru=2,lR=3.99,cR=50,fR=50,dR=.15,hR=.1,vR=.9,pR=.9,gR=1,zm=250,yR=4e3*4e3,mR=!0,yC=function(e){var t=this,n=t.renderer=e,a=n.cy;t.layersByLevel={},t.firstGet=!0,t.lastInvalidationTime=Kn()-2*zm,t.skipping=!1,t.eleTxrDeqs=a.collection(),t.scheduleElementRefinement=fu(function(){t.refineElementTextures(t.eleTxrDeqs),t.eleTxrDeqs.unmerge(t.eleTxrDeqs)},fR),n.beforeRender(function(o,s){s-t.lastInvalidationTime<=zm?t.skipping=!0:t.skipping=!1},n.beforeRenderPriorities.lyrTxrSkip);var i=function(s,u){return u.reqs-s.reqs};t.layersQueue=new Yo(i),t.setupDequeueing()},Mr=yC.prototype,Gm=0,bR=Math.pow(2,53)-1;Mr.makeLayer=function(r,e){var t=Math.pow(2,e),n=Math.ceil(r.w*t),a=Math.ceil(r.h*t),i=this.renderer.makeOffscreenCanvas(n,a),o={id:Gm=++Gm%bR,bb:r,level:e,width:n,height:a,canvas:i,context:i.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=o.context,u=-o.bb.x1,l=-o.bb.y1;return s.scale(t,t),s.translate(u,l),o};Mr.getLayers=function(r,e,t){var n=this,a=n.renderer,i=a.cy,o=i.zoom(),s=n.firstGet;if(n.firstGet=!1,t==null){if(t=Math.ceil(Cg(o*e)),t<Do)t=Do;else if(o>=lR||t>ru)return null}n.validateLayersElesOrdering(t,r);var u=n.layersByLevel,l=Math.pow(2,t),c=u[t]=u[t]||[],f,d=n.levelIsComplete(t,r),h,v=function(){var R=function(Z){if(n.validateLayersElesOrdering(Z,r),n.levelIsComplete(Z,r))return h=u[Z],!0},M=function(Z){if(!h)for(var Q=t+Z;Do<=Q&&Q<=ru&&!R(Q);Q+=Z);};M(1),M(-1);for(var N=c.length-1;N>=0;N--){var B=c[N];B.invalid&&_a(c,B)}};if(!d)v();else return c;var m=function(){if(!f){f=Yr();for(var R=0;R<r.length;R++)hS(f,r[R].boundingBox())}return f},_=function(R){R=R||{};var M=R.after;m();var N=f.w*l*(f.h*l);if(N>yR)return null;var B=n.makeLayer(f,t);if(M!=null){var q=c.indexOf(M)+1;c.splice(q,0,B)}else(R.insert===void 0||R.insert)&&c.unshift(B);return B};if(n.skipping&&!s)return null;for(var b=null,w=r.length/uR,y=!s,x=0;x<r.length;x++){var C=r[x],E=C._private.rscratch,p=E.imgLayerCaches=E.imgLayerCaches||{},P=p[t];if(P){b=P;continue}if((!b||b.eles.length>=w||!vS(b.bb,C.boundingBox()))&&(b=_({insert:!0,after:b}),!b))return null;h||y?n.queueLayer(b,C):n.drawEleInLayer(b,C,t,e),b.eles.push(C),p[t]=b}return h||(y?null:c)};Mr.getEleLevelForLayerLevel=function(r,e){return r};Mr.drawEleInLayer=function(r,e,t,n){var a=this,i=this.renderer,o=r.context,s=e.boundingBox();s.w===0||s.h===0||!e.visible()||(t=a.getEleLevelForLayerLevel(t,n),i.setImgSmoothing(o,!1),i.drawCachedElement(o,e,null,null,t,mR),i.setImgSmoothing(o,!0))};Mr.levelIsComplete=function(r,e){var t=this,n=t.layersByLevel[r];if(!n||n.length===0)return!1;for(var a=0,i=0;i<n.length;i++){var o=n[i];if(o.reqs>0||o.invalid)return!1;a+=o.eles.length}return a===e.length};Mr.validateLayersElesOrdering=function(r,e){var t=this.layersByLevel[r];if(t)for(var n=0;n<t.length;n++){for(var a=t[n],i=-1,o=0;o<e.length;o++)if(a.eles[0]===e[o]){i=o;break}if(i<0){this.invalidateLayer(a);continue}for(var s=i,o=0;o<a.eles.length;o++)if(a.eles[o]!==e[s+o]){this.invalidateLayer(a);break}}};Mr.updateElementsInLayers=function(r,e){for(var t=this,n=Wo(r[0]),a=0;a<r.length;a++)for(var i=n?null:r[a],o=n?r[a]:r[a].ele,s=o._private.rscratch,u=s.imgLayerCaches=s.imgLayerCaches||{},l=Do;l<=ru;l++){var c=u[l];c&&(i&&t.getEleLevelForLayerLevel(c.level)!==i.level||e(c,o,i))}};Mr.haveLayers=function(){for(var r=this,e=!1,t=Do;t<=ru;t++){var n=r.layersByLevel[t];if(n&&n.length>0){e=!0;break}}return e};Mr.invalidateElements=function(r){var e=this;r.length!==0&&(e.lastInvalidationTime=Kn(),!(r.length===0||!e.haveLayers())&&e.updateElementsInLayers(r,function(n,a,i){e.invalidateLayer(n)}))};Mr.invalidateLayer=function(r){if(this.lastInvalidationTime=Kn(),!r.invalid){var e=r.level,t=r.eles,n=this.layersByLevel[e];_a(n,r),r.elesQueue=[],r.invalid=!0,r.replacement&&(r.replacement.invalid=!0);for(var a=0;a<t.length;a++){var i=t[a]._private.rscratch.imgLayerCaches;i&&(i[e]=null)}}};Mr.refineElementTextures=function(r){var e=this;e.updateElementsInLayers(r,function(n,a,i){var o=n.replacement;if(o||(o=n.replacement=e.makeLayer(n.bb,n.level),o.replaces=n,o.eles=n.eles),!o.reqs)for(var s=0;s<o.eles.length;s++)e.queueLayer(o,o.eles[s])})};Mr.enqueueElementRefinement=function(r){this.eleTxrDeqs.merge(r),this.scheduleElementRefinement()};Mr.queueLayer=function(r,e){var t=this,n=t.layersQueue,a=r.elesQueue,i=a.hasId=a.hasId||{};if(!r.replacement){if(e){if(i[e.id()])return;a.push(e),i[e.id()]=!0}r.reqs?(r.reqs++,n.updateItem(r)):(r.reqs=1,n.push(r))}};Mr.dequeue=function(r){for(var e=this,t=e.layersQueue,n=[],a=0;a<gR&&t.size()!==0;){var i=t.peek();if(i.replacement){t.pop();continue}if(i.replaces&&i!==i.replaces.replacement){t.pop();continue}if(i.invalid){t.pop();continue}var o=i.elesQueue.shift();o&&(e.drawEleInLayer(i,o,i.level,r),a++),n.length===0&&n.push(!0),i.elesQueue.length===0&&(t.pop(),i.reqs=0,i.replaces&&e.applyLayerReplacement(i),e.requestRedraw())}return n};Mr.applyLayerReplacement=function(r){var e=this,t=e.layersByLevel[r.level],n=r.replaces,a=t.indexOf(n);if(!(a<0||n.invalid)){t[a]=r;for(var i=0;i<r.eles.length;i++){var o=r.eles[i]._private,s=o.imgLayerCaches=o.imgLayerCaches||{};s&&(s[r.level]=r)}e.requestRedraw()}};Mr.requestRedraw=fu(function(){var r=this.renderer;r.redrawHint("eles",!0),r.redrawHint("drag",!0),r.redraw()},100);Mr.setupDequeueing=gC.setupDequeueing({deqRedrawThreshold:cR,deqCost:dR,deqAvgCost:hR,deqNoDrawCost:vR,deqFastCost:pR,deq:function(e,t){return e.dequeue(t)},onDeqd:xg,shouldRedraw:sS,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var mC={},$m;function wR(r,e){for(var t=0;t<e.length;t++){var n=e[t];r.lineTo(n.x,n.y)}}function _R(r,e,t){for(var n,a=0;a<e.length;a++){var i=e[a];a===0&&(n=i),r.lineTo(i.x,i.y)}r.quadraticCurveTo(t.x,t.y,n.x,n.y)}function Vm(r,e,t){r.beginPath&&r.beginPath();for(var n=e,a=0;a<n.length;a++){var i=n[a];r.lineTo(i.x,i.y)}var o=t,s=t[0];r.moveTo(s.x,s.y);for(var a=1;a<o.length;a++){var i=o[a];r.lineTo(i.x,i.y)}r.closePath&&r.closePath()}function xR(r,e,t,n,a){r.beginPath&&r.beginPath(),r.arc(t,n,a,0,Math.PI*2,!1);var i=e,o=i[0];r.moveTo(o.x,o.y);for(var s=0;s<i.length;s++){var u=i[s];r.lineTo(u.x,u.y)}r.closePath&&r.closePath()}function SR(r,e,t,n){r.arc(e,t,n,0,Math.PI*2,!1)}mC.arrowShapeImpl=function(r){return($m||($m={polygon:wR,"triangle-backcurve":_R,"triangle-tee":Vm,"circle-triangle":xR,"triangle-cross":Vm,circle:SR}))[r]};var Nn={};Nn.drawElement=function(r,e,t,n,a,i){var o=this;e.isNode()?o.drawNode(r,e,t,n,a,i):o.drawEdge(r,e,t,n,a,i)};Nn.drawElementOverlay=function(r,e){var t=this;e.isNode()?t.drawNodeOverlay(r,e):t.drawEdgeOverlay(r,e)};Nn.drawElementUnderlay=function(r,e){var t=this;e.isNode()?t.drawNodeUnderlay(r,e):t.drawEdgeUnderlay(r,e)};Nn.drawCachedElementPortion=function(r,e,t,n,a,i,o,s){var u=this,l=t.getBoundingBox(e);if(!(l.w===0||l.h===0)){var c=t.getElement(e,l,n,a,i);if(c!=null){var f=s(u,e);if(f===0)return;var d=o(u,e),h=l.x1,v=l.y1,m=l.w,_=l.h,b,w,y,x,C;if(d!==0){var E=t.getRotationPoint(e);y=E.x,x=E.y,r.translate(y,x),r.rotate(d),C=u.getImgSmoothing(r),C||u.setImgSmoothing(r,!0);var p=t.getRotationOffset(e);b=p.x,w=p.y}else b=h,w=v;var P;f!==1&&(P=r.globalAlpha,r.globalAlpha=P*f),r.drawImage(c.texture.canvas,c.x,0,c.width,c.height,b,w,m,_),f!==1&&(r.globalAlpha=P),d!==0&&(r.rotate(-d),r.translate(-y,-x),C||u.setImgSmoothing(r,!1))}else t.drawElement(r,e)}};var CR=function(){return 0},ER=function(e,t){return e.getTextAngle(t,null)},TR=function(e,t){return e.getTextAngle(t,"source")},PR=function(e,t){return e.getTextAngle(t,"target")},AR=function(e,t){return t.effectiveOpacity()},fc=function(e,t){return t.pstyle("text-opacity").pfValue*t.effectiveOpacity()};Nn.drawCachedElement=function(r,e,t,n,a,i){var o=this,s=o.data,u=s.eleTxrCache,l=s.lblTxrCache,c=s.slbTxrCache,f=s.tlbTxrCache,d=e.boundingBox(),h=i===!0?u.reasons.highQuality:null;if(!(d.w===0||d.h===0||!e.visible())&&(!n||Eg(d,n))){var v=e.isEdge(),m=e.element()._private.rscratch.badLine;o.drawElementUnderlay(r,e),o.drawCachedElementPortion(r,e,u,t,a,h,CR,AR),(!v||!m)&&o.drawCachedElementPortion(r,e,l,t,a,h,ER,fc),v&&!m&&(o.drawCachedElementPortion(r,e,c,t,a,h,TR,fc),o.drawCachedElementPortion(r,e,f,t,a,h,PR,fc)),o.drawElementOverlay(r,e)}};Nn.drawElements=function(r,e){for(var t=this,n=0;n<e.length;n++){var a=e[n];t.drawElement(r,a)}};Nn.drawCachedElements=function(r,e,t,n){for(var a=this,i=0;i<e.length;i++){var o=e[i];a.drawCachedElement(r,o,t,n)}};Nn.drawCachedNodes=function(r,e,t,n){for(var a=this,i=0;i<e.length;i++){var o=e[i];o.isNode()&&a.drawCachedElement(r,o,t,n)}};Nn.drawLayeredElements=function(r,e,t,n){var a=this,i=a.data.lyrTxrCache.getLayers(e,t);if(i)for(var o=0;o<i.length;o++){var s=i[o],u=s.bb;u.w===0||u.h===0||r.drawImage(s.canvas,u.x1,u.y1,u.w,u.h)}else a.drawCachedElements(r,e,t,n)};var Qn={};Qn.drawEdge=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,s=e._private.rscratch;if(!(i&&!e.visible())&&!(s.badLine||s.allpts==null||isNaN(s.allpts[0]))){var u;t&&(u=t,r.translate(-u.x1,-u.y1));var l=i?e.pstyle("opacity").value:1,c=i?e.pstyle("line-opacity").value:1,f=e.pstyle("curve-style").value,d=e.pstyle("line-style").value,h=e.pstyle("width").pfValue,v=e.pstyle("line-cap").value,m=l*c,_=l*c,b=function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m;f==="straight-triangle"?(o.eleStrokeStyle(r,e,N),o.drawEdgeTrianglePath(e,r,s.allpts)):(r.lineWidth=h,r.lineCap=v,o.eleStrokeStyle(r,e,N),o.drawEdgePath(e,r,s.allpts,d),r.lineCap="butt")},w=function(){a&&o.drawEdgeOverlay(r,e)},y=function(){a&&o.drawEdgeUnderlay(r,e)},x=function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_;o.drawArrowheads(r,e,N)},C=function(){o.drawElementText(r,e,null,n)};r.lineJoin="round";var E=e.pstyle("ghost").value==="yes";if(E){var p=e.pstyle("ghost-offset-x").pfValue,P=e.pstyle("ghost-offset-y").pfValue,T=e.pstyle("ghost-opacity").value,R=m*T;r.translate(p,P),b(R),x(R),r.translate(-p,-P)}y(),b(),x(),w(),C(),t&&r.translate(u.x1,u.y1)}};var bC=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n){if(n.visible()){var a=n.pstyle("".concat(e,"-opacity")).value;if(a!==0){var i=this,o=i.usePaths(),s=n._private.rscratch,u=n.pstyle("".concat(e,"-padding")).pfValue,l=2*u,c=n.pstyle("".concat(e,"-color")).value;t.lineWidth=l,s.edgeType==="self"&&!o?t.lineCap="butt":t.lineCap="round",i.colorStrokeStyle(t,c[0],c[1],c[2],a),i.drawEdgePath(n,t,s.allpts,"solid")}}}};Qn.drawEdgeOverlay=bC("overlay");Qn.drawEdgeUnderlay=bC("underlay");Qn.drawEdgePath=function(r,e,t,n){var a=r._private.rscratch,i=e,o,s=!1,u=this.usePaths(),l=r.pstyle("line-dash-pattern").pfValue,c=r.pstyle("line-dash-offset").pfValue;if(u){var f=t.join("$"),d=a.pathCacheKey&&a.pathCacheKey===f;d?(o=e=a.pathCache,s=!0):(o=e=new Path2D,a.pathCacheKey=f,a.pathCache=o)}if(i.setLineDash)switch(n){case"dotted":i.setLineDash([1,1]);break;case"dashed":i.setLineDash(l),i.lineDashOffset=c;break;case"solid":i.setLineDash([]);break}if(!s&&!a.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(t[0],t[1]),a.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var h=2;h+3<t.length;h+=4)e.quadraticCurveTo(t[h],t[h+1],t[h+2],t[h+3]);break;case"straight":case"haystack":for(var v=2;v+1<t.length;v+=2)e.lineTo(t[v],t[v+1]);break;case"segments":if(a.isRound){var m=uT(a.roundCorners),_;try{for(m.s();!(_=m.n()).done;){var b=_.value;uC(e,b)}}catch(y){m.e(y)}finally{m.f()}e.lineTo(t[t.length-2],t[t.length-1])}else for(var w=2;w+1<t.length;w+=2)e.lineTo(t[w],t[w+1]);break}e=i,u?e.stroke(o):e.stroke(),e.setLineDash&&e.setLineDash([])};Qn.drawEdgeTrianglePath=function(r,e,t){e.fillStyle=e.strokeStyle;for(var n=r.pstyle("width").pfValue,a=0;a+1<t.length;a+=2){var i=[t[a+2]-t[a],t[a+3]-t[a+1]],o=Math.sqrt(i[0]*i[0]+i[1]*i[1]),s=[i[1]/o,-i[0]/o],u=[s[0]*n/2,s[1]*n/2];e.beginPath(),e.moveTo(t[a]-u[0],t[a+1]-u[1]),e.lineTo(t[a]+u[0],t[a+1]+u[1]),e.lineTo(t[a+2],t[a+3]),e.closePath(),e.fill()}};Qn.drawArrowheads=function(r,e,t){var n=e._private.rscratch,a=n.edgeType==="haystack";a||this.drawArrowhead(r,e,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,t),this.drawArrowhead(r,e,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,t),this.drawArrowhead(r,e,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,t),a||this.drawArrowhead(r,e,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,t)};Qn.drawArrowhead=function(r,e,t,n,a,i,o){if(!(isNaN(n)||n==null||isNaN(a)||a==null||isNaN(i)||i==null)){var s=this,u=e.pstyle(t+"-arrow-shape").value;if(u!=="none"){var l=e.pstyle(t+"-arrow-fill").value==="hollow"?"both":"filled",c=e.pstyle(t+"-arrow-fill").value,f=e.pstyle("width").pfValue,d=e.pstyle(t+"-arrow-width"),h=d.value==="match-line"?f:d.pfValue;d.units==="%"&&(h*=f);var v=e.pstyle("opacity").value;o===void 0&&(o=v);var m=r.globalCompositeOperation;(o!==1||c==="hollow")&&(r.globalCompositeOperation="destination-out",s.colorFillStyle(r,255,255,255,1),s.colorStrokeStyle(r,255,255,255,1),s.drawArrowShape(e,r,l,f,u,h,n,a,i),r.globalCompositeOperation=m);var _=e.pstyle(t+"-arrow-color").value;s.colorFillStyle(r,_[0],_[1],_[2],o),s.colorStrokeStyle(r,_[0],_[1],_[2],o),s.drawArrowShape(e,r,c,f,u,h,n,a,i)}}};Qn.drawArrowShape=function(r,e,t,n,a,i,o,s,u){var l=this,c=this.usePaths()&&a!=="triangle-cross",f=!1,d,h=e,v={x:o,y:s},m=r.pstyle("arrow-scale").value,_=this.getArrowWidth(n,m),b=l.arrowShapes[a];if(c){var w=l.arrowPathCache=l.arrowPathCache||[],y=Ya(a),x=w[y];x!=null?(d=e=x,f=!0):(d=e=new Path2D,w[y]=d)}f||(e.beginPath&&e.beginPath(),c?b.draw(e,1,0,{x:0,y:0},1):b.draw(e,_,u,v,n),e.closePath&&e.closePath()),e=h,c&&(e.translate(o,s),e.rotate(u),e.scale(_,_)),(t==="filled"||t==="both")&&(c?e.fill(d):e.fill()),(t==="hollow"||t==="both")&&(e.lineWidth=i/(c?_:1),e.lineJoin="miter",c?e.stroke(d):e.stroke()),c&&(e.scale(1/_,1/_),e.rotate(-u),e.translate(-o,-s))};var zg={};zg.safeDrawImage=function(r,e,t,n,a,i,o,s,u,l){if(!(a<=0||i<=0||u<=0||l<=0))try{r.drawImage(e,t,n,a,i,o,s,u,l)}catch(c){Mt(c)}};zg.drawInscribedImage=function(r,e,t,n,a){var i=this,o=t.position(),s=o.x,u=o.y,l=t.cy().style(),c=l.getIndexedStyle.bind(l),f=c(t,"background-fit","value",n),d=c(t,"background-repeat","value",n),h=t.width(),v=t.height(),m=t.padding()*2,_=h+(c(t,"background-width-relative-to","value",n)==="inner"?0:m),b=v+(c(t,"background-height-relative-to","value",n)==="inner"?0:m),w=t._private.rscratch,y=c(t,"background-clip","value",n),x=y==="node",C=c(t,"background-image-opacity","value",n)*a,E=c(t,"background-image-smoothing","value",n),p=t.pstyle("corner-radius").value;p!=="auto"&&(p=t.pstyle("corner-radius").pfValue);var P=e.width||e.cachedW,T=e.height||e.cachedH;(P==null||T==null)&&(document.body.appendChild(e),P=e.cachedW=e.width||e.offsetWidth,T=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var R=P,M=T;if(c(t,"background-width","value",n)!=="auto"&&(c(t,"background-width","units",n)==="%"?R=c(t,"background-width","pfValue",n)*_:R=c(t,"background-width","pfValue",n)),c(t,"background-height","value",n)!=="auto"&&(c(t,"background-height","units",n)==="%"?M=c(t,"background-height","pfValue",n)*b:M=c(t,"background-height","pfValue",n)),!(R===0||M===0)){if(f==="contain"){var N=Math.min(_/R,b/M);R*=N,M*=N}else if(f==="cover"){var N=Math.max(_/R,b/M);R*=N,M*=N}var B=s-_/2,q=c(t,"background-position-x","units",n),Z=c(t,"background-position-x","pfValue",n);q==="%"?B+=(_-R)*Z:B+=Z;var Q=c(t,"background-offset-x","units",n),Y=c(t,"background-offset-x","pfValue",n);Q==="%"?B+=(_-R)*Y:B+=Y;var J=u-b/2,X=c(t,"background-position-y","units",n),k=c(t,"background-position-y","pfValue",n);X==="%"?J+=(b-M)*k:J+=k;var D=c(t,"background-offset-y","units",n),I=c(t,"background-offset-y","pfValue",n);D==="%"?J+=(b-M)*I:J+=I,w.pathCache&&(B-=s,J-=u,s=0,u=0);var F=r.globalAlpha;r.globalAlpha=C;var L=i.getImgSmoothing(r),H=!1;if(E==="no"&&L?(i.setImgSmoothing(r,!1),H=!0):E==="yes"&&!L&&(i.setImgSmoothing(r,!0),H=!0),d==="no-repeat")x&&(r.save(),w.pathCache?r.clip(w.pathCache):(i.nodeShapes[i.getNodeShape(t)].draw(r,s,u,_,b,p,w),r.clip())),i.safeDrawImage(r,e,0,0,P,T,B,J,R,M),x&&r.restore();else{var j=r.createPattern(e,d);r.fillStyle=j,i.nodeShapes[i.getNodeShape(t)].draw(r,s,u,_,b,p,w),r.translate(B,J),r.fill(),r.translate(-B,-J)}r.globalAlpha=F,H&&i.setImgSmoothing(r,L)}};var ni={};ni.eleTextBiggerThanMin=function(r,e){if(!e){var t=r.cy().zoom(),n=this.getPixelRatio(),a=Math.ceil(Cg(t*n));e=Math.pow(2,a)}var i=r.pstyle("font-size").pfValue*e,o=r.pstyle("min-zoomed-font-size").pfValue;return!(i<o)};ni.drawElementText=function(r,e,t,n,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this;if(n==null){if(i&&!o.eleTextBiggerThanMin(e))return}else if(n===!1)return;if(e.isNode()){var s=e.pstyle("label");if(!s||!s.value)return;var u=o.getLabelJustification(e);r.textAlign=u,r.textBaseline="bottom"}else{var l=e.element()._private.rscratch.badLine,c=e.pstyle("label"),f=e.pstyle("source-label"),d=e.pstyle("target-label");if(l||(!c||!c.value)&&(!f||!f.value)&&(!d||!d.value))return;r.textAlign="center",r.textBaseline="bottom"}var h=!t,v;t&&(v=t,r.translate(-v.x1,-v.y1)),a==null?(o.drawText(r,e,null,h,i),e.isEdge()&&(o.drawText(r,e,"source",h,i),o.drawText(r,e,"target",h,i))):o.drawText(r,e,a,h,i),t&&r.translate(v.x1,v.y1)};ni.getFontCache=function(r){var e;this.fontCaches=this.fontCaches||[];for(var t=0;t<this.fontCaches.length;t++)if(e=this.fontCaches[t],e.context===r)return e;return e={context:r},this.fontCaches.push(e),e};ni.setupTextStyle=function(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=e.pstyle("font-style").strValue,a=e.pstyle("font-size").pfValue+"px",i=e.pstyle("font-family").strValue,o=e.pstyle("font-weight").strValue,s=t?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,u=e.pstyle("text-outline-opacity").value*s,l=e.pstyle("color").value,c=e.pstyle("text-outline-color").value;r.font=n+" "+o+" "+a+" "+i,r.lineJoin="round",this.colorFillStyle(r,l[0],l[1],l[2],s),this.colorStrokeStyle(r,c[0],c[1],c[2],u)};function dc(r,e,t,n,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,o=arguments.length>6?arguments[6]:void 0;r.beginPath(),r.moveTo(e+i,t),r.lineTo(e+n-i,t),r.quadraticCurveTo(e+n,t,e+n,t+i),r.lineTo(e+n,t+a-i),r.quadraticCurveTo(e+n,t+a,e+n-i,t+a),r.lineTo(e+i,t+a),r.quadraticCurveTo(e,t+a,e,t+a-i),r.lineTo(e,t+i),r.quadraticCurveTo(e,t,e+i,t),r.closePath(),o?r.stroke():r.fill()}ni.getTextAngle=function(r,e){var t,n=r._private,a=n.rscratch,i=e?e+"-":"",o=r.pstyle(i+"text-rotation"),s=pn(a,"labelAngle",e);return o.strValue==="autorotate"?t=r.isEdge()?s:0:o.strValue==="none"?t=0:t=o.pfValue,t};ni.drawText=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=e._private,o=i.rscratch,s=a?e.effectiveOpacity():1;if(!(a&&(s===0||e.pstyle("text-opacity").value===0))){t==="main"&&(t=null);var u=pn(o,"labelX",t),l=pn(o,"labelY",t),c,f,d=this.getLabelText(e,t);if(d!=null&&d!==""&&!isNaN(u)&&!isNaN(l)){this.setupTextStyle(r,e,a);var h=t?t+"-":"",v=pn(o,"labelWidth",t),m=pn(o,"labelHeight",t),_=e.pstyle(h+"text-margin-x").pfValue,b=e.pstyle(h+"text-margin-y").pfValue,w=e.isEdge(),y=e.pstyle("text-halign").value,x=e.pstyle("text-valign").value;w&&(y="center",x="center"),u+=_,l+=b;var C;switch(n?C=this.getTextAngle(e,t):C=0,C!==0&&(c=u,f=l,r.translate(c,f),r.rotate(C),u=0,l=0),x){case"top":break;case"center":l+=m/2;break;case"bottom":l+=m;break}var E=e.pstyle("text-background-opacity").value,p=e.pstyle("text-border-opacity").value,P=e.pstyle("text-border-width").pfValue,T=e.pstyle("text-background-padding").pfValue,R=e.pstyle("text-background-shape").strValue,M=R.indexOf("round")===0,N=2;if(E>0||P>0&&p>0){var B=u-T;switch(y){case"left":B-=v;break;case"center":B-=v/2;break}var q=l-m-T,Z=v+2*T,Q=m+2*T;if(E>0){var Y=r.fillStyle,J=e.pstyle("text-background-color").value;r.fillStyle="rgba("+J[0]+","+J[1]+","+J[2]+","+E*s+")",M?dc(r,B,q,Z,Q,N):r.fillRect(B,q,Z,Q),r.fillStyle=Y}if(P>0&&p>0){var X=r.strokeStyle,k=r.lineWidth,D=e.pstyle("text-border-color").value,I=e.pstyle("text-border-style").value;if(r.strokeStyle="rgba("+D[0]+","+D[1]+","+D[2]+","+p*s+")",r.lineWidth=P,r.setLineDash)switch(I){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash([4,2]);break;case"double":r.lineWidth=P/4,r.setLineDash([]);break;case"solid":r.setLineDash([]);break}if(M?dc(r,B,q,Z,Q,N,"stroke"):r.strokeRect(B,q,Z,Q),I==="double"){var F=P/2;M?dc(r,B+F,q+F,Z-F*2,Q-F*2,N,"stroke"):r.strokeRect(B+F,q+F,Z-F*2,Q-F*2)}r.setLineDash&&r.setLineDash([]),r.lineWidth=k,r.strokeStyle=X}}var L=2*e.pstyle("text-outline-width").pfValue;if(L>0&&(r.lineWidth=L),e.pstyle("text-wrap").value==="wrap"){var H=pn(o,"labelWrapCachedLines",t),j=pn(o,"labelLineHeight",t),W=v/2,re=this.getLabelJustification(e);switch(re==="auto"||(y==="left"?re==="left"?u+=-v:re==="center"&&(u+=-W):y==="center"?re==="left"?u+=-W:re==="right"&&(u+=W):y==="right"&&(re==="center"?u+=W:re==="right"&&(u+=v))),x){case"top":l-=(H.length-1)*j;break;case"center":case"bottom":l-=(H.length-1)*j;break}for(var se=0;se<H.length;se++)L>0&&r.strokeText(H[se],u,l),r.fillText(H[se],u,l),l+=j}else L>0&&r.strokeText(d,u,l),r.fillText(d,u,l);C!==0&&(r.rotate(-C),r.translate(-c,-f))}}};var Xi={};Xi.drawNode=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,s,u,l=e._private,c=l.rscratch,f=e.position();if(!(!Ge(f.x)||!Ge(f.y))&&!(i&&!e.visible())){var d=i?e.effectiveOpacity():1,h=o.usePaths(),v,m=!1,_=e.padding();s=e.width()+2*_,u=e.height()+2*_;var b;t&&(b=t,r.translate(-b.x1,-b.y1));for(var w=e.pstyle("background-image"),y=w.value,x=new Array(y.length),C=new Array(y.length),E=0,p=0;p<y.length;p++){var P=y[p],T=x[p]=P!=null&&P!=="none";if(T){var R=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",p);E++,C[p]=o.getCachedImage(P,R,function(){l.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var M=e.pstyle("background-blacken").value,N=e.pstyle("border-width").pfValue,B=e.pstyle("background-opacity").value*d,q=e.pstyle("border-color").value,Z=e.pstyle("border-style").value,Q=e.pstyle("border-join").value,Y=e.pstyle("border-cap").value,J=e.pstyle("border-position").value,X=e.pstyle("border-dash-pattern").pfValue,k=e.pstyle("border-dash-offset").pfValue,D=e.pstyle("border-opacity").value*d,I=e.pstyle("outline-width").pfValue,F=e.pstyle("outline-color").value,L=e.pstyle("outline-style").value,H=e.pstyle("outline-opacity").value*d,j=e.pstyle("outline-offset").value,W=e.pstyle("corner-radius").value;W!=="auto"&&(W=e.pstyle("corner-radius").pfValue);var re=function(){var we=arguments.length>0&&arguments[0]!==void 0?arguments[0]:B;o.eleFillStyle(r,e,we)},se=function(){var we=arguments.length>0&&arguments[0]!==void 0?arguments[0]:D;o.colorStrokeStyle(r,q[0],q[1],q[2],we)},ce=function(){var we=arguments.length>0&&arguments[0]!==void 0?arguments[0]:H;o.colorStrokeStyle(r,F[0],F[1],F[2],we)},ge=function(we,ve,Te,Fe){var qe=o.nodePathCache=o.nodePathCache||[],Be=oS(Te==="polygon"?Te+","+Fe.join(","):Te,""+ve,""+we,""+W),et=qe[Be],Ue,We=!1;return et!=null?(Ue=et,We=!0,c.pathCache=Ue):(Ue=new Path2D,qe[Be]=c.pathCache=Ue),{path:Ue,cacheHit:We}},Pe=e.pstyle("shape").strValue,Oe=e.pstyle("shape-polygon-points").pfValue;if(h){r.translate(f.x,f.y);var Se=ge(s,u,Pe,Oe);v=Se.path,m=Se.cacheHit}var le=function(){if(!m){var we=f;h&&(we={x:0,y:0}),o.nodeShapes[o.getNodeShape(e)].draw(v||r,we.x,we.y,s,u,W,c)}h?r.fill(v):r.fill()},te=function(){for(var we=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d,ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Te=l.backgrounding,Fe=0,qe=0;qe<C.length;qe++){var Be=e.cy().style().getIndexedStyle(e,"background-image-containment","value",qe);if(ve&&Be==="over"||!ve&&Be==="inside"){Fe++;continue}x[qe]&&C[qe].complete&&!C[qe].error&&(Fe++,o.drawInscribedImage(r,C[qe],e,qe,we))}l.backgrounding=Fe!==E,Te!==l.backgrounding&&e.updateStyle(!1)},ne=function(){var we=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d;o.hasPie(e)&&(o.drawPie(r,e,ve),we&&(h||o.nodeShapes[o.getNodeShape(e)].draw(r,f.x,f.y,s,u,W,c)))},de=function(){var we=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d,ve=(M>0?M:-M)*we,Te=M>0?0:255;M!==0&&(o.colorFillStyle(r,Te,Te,Te,ve),h?r.fill(v):r.fill())},Ce=function(){if(N>0){if(r.lineWidth=N,r.lineCap=Y,r.lineJoin=Q,r.setLineDash)switch(Z){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash(X),r.lineDashOffset=k;break;case"solid":case"double":r.setLineDash([]);break}if(J!=="center"){if(r.save(),r.lineWidth*=2,J==="inside")h?r.clip(v):r.clip();else{var we=new Path2D;we.rect(-s/2-N,-u/2-N,s+2*N,u+2*N),we.addPath(v),r.clip(we,"evenodd")}h?r.stroke(v):r.stroke(),r.restore()}else h?r.stroke(v):r.stroke();if(Z==="double"){r.lineWidth=N/3;var ve=r.globalCompositeOperation;r.globalCompositeOperation="destination-out",h?r.stroke(v):r.stroke(),r.globalCompositeOperation=ve}r.setLineDash&&r.setLineDash([])}},Le=function(){if(I>0){if(r.lineWidth=I,r.lineCap="butt",r.setLineDash)switch(L){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash([4,2]);break;case"solid":case"double":r.setLineDash([]);break}var we=f;h&&(we={x:0,y:0});var ve=o.getNodeShape(e),Te=N;J==="inside"&&(Te=0),J==="outside"&&(Te*=2);var Fe=(s+Te+(I+j))/s,qe=(u+Te+(I+j))/u,Be=s*Fe,et=u*qe,Ue=o.nodeShapes[ve].points,We;if(h){var lt=ge(Be,et,ve,Ue);We=lt.path}if(ve==="ellipse")o.drawEllipsePath(We||r,we.x,we.y,Be,et);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(ve)){var ht=0,Rt=0,vt=0;ve==="round-diamond"?ht=(Te+j+I)*1.4:ve==="round-heptagon"?(ht=(Te+j+I)*1.075,vt=-(Te/2+j+I)/35):ve==="round-hexagon"?ht=(Te+j+I)*1.12:ve==="round-pentagon"?(ht=(Te+j+I)*1.13,vt=-(Te/2+j+I)/15):ve==="round-tag"?(ht=(Te+j+I)*1.12,Rt=(Te/2+I+j)*.07):ve==="round-triangle"&&(ht=(Te+j+I)*(Math.PI/2),vt=-(Te+j/2+I)/Math.PI),ht!==0&&(Fe=(s+ht)/s,Be=s*Fe,["round-hexagon","round-tag"].includes(ve)||(qe=(u+ht)/u,et=u*qe)),W=W==="auto"?yS(Be,et):W;for(var Ot=Be/2,Bt=et/2,pt=W+(Te+I+j)/2,st=new Array(Ue.length/2),Qt=new Array(Ue.length/2),br=0;br<Ue.length/2;br++)st[br]={x:we.x+Rt+Ot*Ue[br*2],y:we.y+vt+Bt*Ue[br*2+1]};var lr,Sr,Wt,Jt,qt=st.length;for(Sr=st[qt-1],lr=0;lr<qt;lr++)Wt=st[lr%qt],Jt=st[(lr+1)%qt],Qt[lr]=Bg(Sr,Wt,Jt,pt),Sr=Wt,Wt=Jt;o.drawRoundPolygonPath(We||r,we.x+Rt,we.y+vt,s*Fe,u*qe,Ue,Qt)}else if(["roundrectangle","round-rectangle"].includes(ve))W=W==="auto"?Za(Be,et):W,o.drawRoundRectanglePath(We||r,we.x,we.y,Be,et,W+(Te+I+j)/2);else if(["cutrectangle","cut-rectangle"].includes(ve))W=W==="auto"?Tg():W,o.drawCutRectanglePath(We||r,we.x,we.y,Be,et,null,W+(Te+I+j)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(ve))W=W==="auto"?Za(Be,et):W,o.drawBottomRoundRectanglePath(We||r,we.x,we.y,Be,et,W+(Te+I+j)/2);else if(ve==="barrel")o.drawBarrelPath(We||r,we.x,we.y,Be,et);else if(ve.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(ve)){var At=(Te+I+j)/s;Ue=Ys(Xs(Ue,At)),o.drawPolygonPath(We||r,we.x,we.y,s,u,Ue)}else{var Me=(Te+I+j)/s;Ue=Ys(Xs(Ue,-Me)),o.drawPolygonPath(We||r,we.x,we.y,s,u,Ue)}if(h?r.stroke(We):r.stroke(),L==="double"){r.lineWidth=Te/3;var _e=r.globalCompositeOperation;r.globalCompositeOperation="destination-out",h?r.stroke(We):r.stroke(),r.globalCompositeOperation=_e}r.setLineDash&&r.setLineDash([])}},$e=function(){a&&o.drawNodeOverlay(r,e,f,s,u)},Ne=function(){a&&o.drawNodeUnderlay(r,e,f,s,u)},De=function(){o.drawElementText(r,e,null,n)},me=e.pstyle("ghost").value==="yes";if(me){var G=e.pstyle("ghost-offset-x").pfValue,U=e.pstyle("ghost-offset-y").pfValue,oe=e.pstyle("ghost-opacity").value,ae=oe*d;r.translate(G,U),ce(),Le(),re(oe*B),le(),te(ae,!0),se(oe*D),Ce(),ne(M!==0||N!==0),te(ae,!1),de(ae),r.translate(-G,-U)}h&&r.translate(-f.x,-f.y),Ne(),h&&r.translate(f.x,f.y),ce(),Le(),re(),le(),te(d,!0),se(),Ce(),ne(M!==0||N!==0),te(d,!1),de(),h&&r.translate(-f.x,-f.y),De(),$e(),t&&r.translate(b.x1,b.y1)}};var wC=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n,a,i,o){var s=this;if(n.visible()){var u=n.pstyle("".concat(e,"-padding")).pfValue,l=n.pstyle("".concat(e,"-opacity")).value,c=n.pstyle("".concat(e,"-color")).value,f=n.pstyle("".concat(e,"-shape")).value,d=n.pstyle("".concat(e,"-corner-radius")).value;if(l>0){if(a=a||n.position(),i==null||o==null){var h=n.padding();i=n.width()+2*h,o=n.height()+2*h}s.colorFillStyle(t,c[0],c[1],c[2],l),s.nodeShapes[f].draw(t,a.x,a.y,i+u*2,o+u*2,d),t.fill()}}}};Xi.drawNodeOverlay=wC("overlay");Xi.drawNodeUnderlay=wC("underlay");Xi.hasPie=function(r){return r=r[0],r._private.hasPie};Xi.drawPie=function(r,e,t,n){e=e[0],n=n||e.position();var a=e.cy().style(),i=e.pstyle("pie-size"),o=n.x,s=n.y,u=e.width(),l=e.height(),c=Math.min(u,l)/2,f=0,d=this.usePaths();d&&(o=0,s=0),i.units==="%"?c=c*i.pfValue:i.pfValue!==void 0&&(c=i.pfValue/2);for(var h=1;h<=a.pieBackgroundN;h++){var v=e.pstyle("pie-"+h+"-background-size").value,m=e.pstyle("pie-"+h+"-background-color").value,_=e.pstyle("pie-"+h+"-background-opacity").value*t,b=v/100;b+f>1&&(b=1-f);var w=1.5*Math.PI+2*Math.PI*f,y=2*Math.PI*b,x=w+y;v===0||f>=1||f+b>1||(r.beginPath(),r.moveTo(o,s),r.arc(o,s,c,w,x),r.closePath(),this.colorFillStyle(r,m[0],m[1],m[2],_),r.fill(),f+=b)}};var Jr={},kR=100;Jr.getPixelRatio=function(){var r=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var e=r.backingStorePixelRatio||r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/e};Jr.paintCache=function(r){for(var e=this.paintCaches=this.paintCaches||[],t=!0,n,a=0;a<e.length;a++)if(n=e[a],n.context===r){t=!1;break}return t&&(n={context:r},e.push(n)),n};Jr.createGradientStyleFor=function(r,e,t,n,a){var i,o=this.usePaths(),s=t.pstyle(e+"-gradient-stop-colors").value,u=t.pstyle(e+"-gradient-stop-positions").pfValue;if(n==="radial-gradient")if(t.isEdge()){var l=t.sourceEndpoint(),c=t.targetEndpoint(),f=t.midpoint(),d=Xa(l,f),h=Xa(c,f);i=r.createRadialGradient(f.x,f.y,0,f.x,f.y,Math.max(d,h))}else{var v=o?{x:0,y:0}:t.position(),m=t.paddedWidth(),_=t.paddedHeight();i=r.createRadialGradient(v.x,v.y,0,v.x,v.y,Math.max(m,_))}else if(t.isEdge()){var b=t.sourceEndpoint(),w=t.targetEndpoint();i=r.createLinearGradient(b.x,b.y,w.x,w.y)}else{var y=o?{x:0,y:0}:t.position(),x=t.paddedWidth(),C=t.paddedHeight(),E=x/2,p=C/2,P=t.pstyle("background-gradient-direction").value;switch(P){case"to-bottom":i=r.createLinearGradient(y.x,y.y-p,y.x,y.y+p);break;case"to-top":i=r.createLinearGradient(y.x,y.y+p,y.x,y.y-p);break;case"to-left":i=r.createLinearGradient(y.x+E,y.y,y.x-E,y.y);break;case"to-right":i=r.createLinearGradient(y.x-E,y.y,y.x+E,y.y);break;case"to-bottom-right":case"to-right-bottom":i=r.createLinearGradient(y.x-E,y.y-p,y.x+E,y.y+p);break;case"to-top-right":case"to-right-top":i=r.createLinearGradient(y.x-E,y.y+p,y.x+E,y.y-p);break;case"to-bottom-left":case"to-left-bottom":i=r.createLinearGradient(y.x+E,y.y-p,y.x-E,y.y+p);break;case"to-top-left":case"to-left-top":i=r.createLinearGradient(y.x+E,y.y+p,y.x-E,y.y-p);break}}if(!i)return null;for(var T=u.length===s.length,R=s.length,M=0;M<R;M++)i.addColorStop(T?u[M]:M/(R-1),"rgba("+s[M][0]+","+s[M][1]+","+s[M][2]+","+a+")");return i};Jr.gradientFillStyle=function(r,e,t,n){var a=this.createGradientStyleFor(r,"background",e,t,n);if(!a)return null;r.fillStyle=a};Jr.colorFillStyle=function(r,e,t,n,a){r.fillStyle="rgba("+e+","+t+","+n+","+a+")"};Jr.eleFillStyle=function(r,e,t){var n=e.pstyle("background-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientFillStyle(r,e,n,t);else{var a=e.pstyle("background-color").value;this.colorFillStyle(r,a[0],a[1],a[2],t)}};Jr.gradientStrokeStyle=function(r,e,t,n){var a=this.createGradientStyleFor(r,"line",e,t,n);if(!a)return null;r.strokeStyle=a};Jr.colorStrokeStyle=function(r,e,t,n,a){r.strokeStyle="rgba("+e+","+t+","+n+","+a+")"};Jr.eleStrokeStyle=function(r,e,t){var n=e.pstyle("line-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientStrokeStyle(r,e,n,t);else{var a=e.pstyle("line-color").value;this.colorStrokeStyle(r,a[0],a[1],a[2],t)}};Jr.matchCanvasSize=function(r){var e=this,t=e.data,n=e.findContainerClientCoords(),a=n[2],i=n[3],o=e.getPixelRatio(),s=e.motionBlurPxRatio;(r===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||r===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(o=s);var u=a*o,l=i*o,c;if(!(u===e.canvasWidth&&l===e.canvasHeight)){e.fontCaches=null;var f=t.canvasContainer;f.style.width=a+"px",f.style.height=i+"px";for(var d=0;d<e.CANVAS_LAYERS;d++)c=t.canvases[d],c.width=u,c.height=l,c.style.width=a+"px",c.style.height=i+"px";for(var d=0;d<e.BUFFER_COUNT;d++)c=t.bufferCanvases[d],c.width=u,c.height=l,c.style.width=a+"px",c.style.height=i+"px";e.textureMult=1,o<=1&&(c=t.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,c.width=u*e.textureMult,c.height=l*e.textureMult),e.canvasWidth=u,e.canvasHeight=l}};Jr.renderTo=function(r,e,t,n){this.render({forcedContext:r,forcedZoom:e,forcedPan:t,drawAllLayers:!0,forcedPxRatio:n})};Jr.render=function(r){r=r||cS();var e=r.forcedContext,t=r.drawAllLayers,n=r.drawOnlyNodeLayer,a=r.forcedZoom,i=r.forcedPan,o=this,s=r.forcedPxRatio===void 0?this.getPixelRatio():r.forcedPxRatio,u=o.cy,l=o.data,c=l.canvasNeedsRedraw,f=o.textureOnViewport&&!e&&(o.pinching||o.hoverData.dragging||o.swipePanning||o.data.wheelZooming),d=r.motionBlur!==void 0?r.motionBlur:o.motionBlur,h=o.motionBlurPxRatio,v=u.hasCompoundNodes(),m=o.hoverData.draggingEles,_=!!(o.hoverData.selecting||o.touchData.selecting);d=d&&!e&&o.motionBlurEnabled&&!_;var b=d;e||(o.prevPxRatio!==s&&(o.invalidateContainerClientCoordsCache(),o.matchCanvasSize(o.container),o.redrawHint("eles",!0),o.redrawHint("drag",!0)),o.prevPxRatio=s),!e&&o.motionBlurTimeout&&clearTimeout(o.motionBlurTimeout),d&&(o.mbFrames==null&&(o.mbFrames=0),o.mbFrames++,o.mbFrames<3&&(b=!1),o.mbFrames>o.minMbLowQualFrames&&(o.motionBlurPxRatio=o.mbPxRBlurry)),o.clearingMotionBlur&&(o.motionBlurPxRatio=1),o.textureDrawLastFrame&&!f&&(c[o.NODE]=!0,c[o.SELECT_BOX]=!0);var w=u.style(),y=u.zoom(),x=a!==void 0?a:y,C=u.pan(),E={x:C.x,y:C.y},p={zoom:y,pan:{x:C.x,y:C.y}},P=o.prevViewport,T=P===void 0||p.zoom!==P.zoom||p.pan.x!==P.pan.x||p.pan.y!==P.pan.y;!T&&!(m&&!v)&&(o.motionBlurPxRatio=1),i&&(E=i),x*=s,E.x*=s,E.y*=s;var R=o.getCachedZSortedEles();function M(Se,le,te,ne,de){var Ce=Se.globalCompositeOperation;Se.globalCompositeOperation="destination-out",o.colorFillStyle(Se,255,255,255,o.motionBlurTransparency),Se.fillRect(le,te,ne,de),Se.globalCompositeOperation=Ce}function N(Se,le){var te,ne,de,Ce;!o.clearingMotionBlur&&(Se===l.bufferContexts[o.MOTIONBLUR_BUFFER_NODE]||Se===l.bufferContexts[o.MOTIONBLUR_BUFFER_DRAG])?(te={x:C.x*h,y:C.y*h},ne=y*h,de=o.canvasWidth*h,Ce=o.canvasHeight*h):(te=E,ne=x,de=o.canvasWidth,Ce=o.canvasHeight),Se.setTransform(1,0,0,1,0,0),le==="motionBlur"?M(Se,0,0,de,Ce):!e&&(le===void 0||le)&&Se.clearRect(0,0,de,Ce),t||(Se.translate(te.x,te.y),Se.scale(ne,ne)),i&&Se.translate(i.x,i.y),a&&Se.scale(a,a)}if(f||(o.textureDrawLastFrame=!1),f){if(o.textureDrawLastFrame=!0,!o.textureCache){o.textureCache={},o.textureCache.bb=u.mutableElements().boundingBox(),o.textureCache.texture=o.data.bufferCanvases[o.TEXTURE_BUFFER];var B=o.data.bufferContexts[o.TEXTURE_BUFFER];B.setTransform(1,0,0,1,0,0),B.clearRect(0,0,o.canvasWidth*o.textureMult,o.canvasHeight*o.textureMult),o.render({forcedContext:B,drawOnlyNodeLayer:!0,forcedPxRatio:s*o.textureMult});var p=o.textureCache.viewport={zoom:u.zoom(),pan:u.pan(),width:o.canvasWidth,height:o.canvasHeight};p.mpan={x:(0-p.pan.x)/p.zoom,y:(0-p.pan.y)/p.zoom}}c[o.DRAG]=!1,c[o.NODE]=!1;var q=l.contexts[o.NODE],Z=o.textureCache.texture,p=o.textureCache.viewport;q.setTransform(1,0,0,1,0,0),d?M(q,0,0,p.width,p.height):q.clearRect(0,0,p.width,p.height);var Q=w.core("outside-texture-bg-color").value,Y=w.core("outside-texture-bg-opacity").value;o.colorFillStyle(q,Q[0],Q[1],Q[2],Y),q.fillRect(0,0,p.width,p.height);var y=u.zoom();N(q,!1),q.clearRect(p.mpan.x,p.mpan.y,p.width/p.zoom/s,p.height/p.zoom/s),q.drawImage(Z,p.mpan.x,p.mpan.y,p.width/p.zoom/s,p.height/p.zoom/s)}else o.textureOnViewport&&!e&&(o.textureCache=null);var J=u.extent(),X=o.pinching||o.hoverData.dragging||o.swipePanning||o.data.wheelZooming||o.hoverData.draggingEles||o.cy.animated(),k=o.hideEdgesOnViewport&&X,D=[];if(D[o.NODE]=!c[o.NODE]&&d&&!o.clearedForMotionBlur[o.NODE]||o.clearingMotionBlur,D[o.NODE]&&(o.clearedForMotionBlur[o.NODE]=!0),D[o.DRAG]=!c[o.DRAG]&&d&&!o.clearedForMotionBlur[o.DRAG]||o.clearingMotionBlur,D[o.DRAG]&&(o.clearedForMotionBlur[o.DRAG]=!0),c[o.NODE]||t||n||D[o.NODE]){var I=d&&!D[o.NODE]&&h!==1,q=e||(I?o.data.bufferContexts[o.MOTIONBLUR_BUFFER_NODE]:l.contexts[o.NODE]),F=d&&!I?"motionBlur":void 0;N(q,F),k?o.drawCachedNodes(q,R.nondrag,s,J):o.drawLayeredElements(q,R.nondrag,s,J),o.debug&&o.drawDebugPoints(q,R.nondrag),!t&&!d&&(c[o.NODE]=!1)}if(!n&&(c[o.DRAG]||t||D[o.DRAG])){var I=d&&!D[o.DRAG]&&h!==1,q=e||(I?o.data.bufferContexts[o.MOTIONBLUR_BUFFER_DRAG]:l.contexts[o.DRAG]);N(q,d&&!I?"motionBlur":void 0),k?o.drawCachedNodes(q,R.drag,s,J):o.drawCachedElements(q,R.drag,s,J),o.debug&&o.drawDebugPoints(q,R.drag),!t&&!d&&(c[o.DRAG]=!1)}if(o.showFps||!n&&c[o.SELECT_BOX]&&!t){var q=e||l.contexts[o.SELECT_BOX];if(N(q),o.selection[4]==1&&(o.hoverData.selecting||o.touchData.selecting)){var y=o.cy.zoom(),L=w.core("selection-box-border-width").value/y;q.lineWidth=L,q.fillStyle="rgba("+w.core("selection-box-color").value[0]+","+w.core("selection-box-color").value[1]+","+w.core("selection-box-color").value[2]+","+w.core("selection-box-opacity").value+")",q.fillRect(o.selection[0],o.selection[1],o.selection[2]-o.selection[0],o.selection[3]-o.selection[1]),L>0&&(q.strokeStyle="rgba("+w.core("selection-box-border-color").value[0]+","+w.core("selection-box-border-color").value[1]+","+w.core("selection-box-border-color").value[2]+","+w.core("selection-box-opacity").value+")",q.strokeRect(o.selection[0],o.selection[1],o.selection[2]-o.selection[0],o.selection[3]-o.selection[1]))}if(l.bgActivePosistion&&!o.hoverData.selecting){var y=o.cy.zoom(),H=l.bgActivePosistion;q.fillStyle="rgba("+w.core("active-bg-color").value[0]+","+w.core("active-bg-color").value[1]+","+w.core("active-bg-color").value[2]+","+w.core("active-bg-opacity").value+")",q.beginPath(),q.arc(H.x,H.y,w.core("active-bg-size").pfValue/y,0,2*Math.PI),q.fill()}var j=o.lastRedrawTime;if(o.showFps&&j){j=Math.round(j);var W=Math.round(1e3/j);q.setTransform(1,0,0,1,0,0),q.fillStyle="rgba(255, 0, 0, 0.75)",q.strokeStyle="rgba(255, 0, 0, 0.75)",q.lineWidth=1,q.fillText("1 frame = "+j+" ms = "+W+" fps",0,20);var re=60;q.strokeRect(0,30,250,20),q.fillRect(0,30,250*Math.min(W/re,1),20)}t||(c[o.SELECT_BOX]=!1)}if(d&&h!==1){var se=l.contexts[o.NODE],ce=o.data.bufferCanvases[o.MOTIONBLUR_BUFFER_NODE],ge=l.contexts[o.DRAG],Pe=o.data.bufferCanvases[o.MOTIONBLUR_BUFFER_DRAG],Oe=function(le,te,ne){le.setTransform(1,0,0,1,0,0),ne||!b?le.clearRect(0,0,o.canvasWidth,o.canvasHeight):M(le,0,0,o.canvasWidth,o.canvasHeight);var de=h;le.drawImage(te,0,0,o.canvasWidth*de,o.canvasHeight*de,0,0,o.canvasWidth,o.canvasHeight)};(c[o.NODE]||D[o.NODE])&&(Oe(se,ce,D[o.NODE]),c[o.NODE]=!1),(c[o.DRAG]||D[o.DRAG])&&(Oe(ge,Pe,D[o.DRAG]),c[o.DRAG]=!1)}o.prevViewport=p,o.clearingMotionBlur&&(o.clearingMotionBlur=!1,o.motionBlurCleared=!0,o.motionBlur=!0),d&&(o.motionBlurTimeout=setTimeout(function(){o.motionBlurTimeout=null,o.clearedForMotionBlur[o.NODE]=!1,o.clearedForMotionBlur[o.DRAG]=!1,o.motionBlur=!1,o.clearingMotionBlur=!f,o.mbFrames=0,c[o.NODE]=!0,c[o.DRAG]=!0,o.redraw()},kR)),e||u.emit("render")};var Pa={};Pa.drawPolygonPath=function(r,e,t,n,a,i){var o=n/2,s=a/2;r.beginPath&&r.beginPath(),r.moveTo(e+o*i[0],t+s*i[1]);for(var u=1;u<i.length/2;u++)r.lineTo(e+o*i[u*2],t+s*i[u*2+1]);r.closePath()};Pa.drawRoundPolygonPath=function(r,e,t,n,a,i,o){o.forEach(function(s){return uC(r,s)}),r.closePath()};Pa.drawRoundRectanglePath=function(r,e,t,n,a,i){var o=n/2,s=a/2,u=i==="auto"?Za(n,a):Math.min(i,s,o);r.beginPath&&r.beginPath(),r.moveTo(e,t-s),r.arcTo(e+o,t-s,e+o,t,u),r.arcTo(e+o,t+s,e,t+s,u),r.arcTo(e-o,t+s,e-o,t,u),r.arcTo(e-o,t-s,e,t-s,u),r.lineTo(e,t-s),r.closePath()};Pa.drawBottomRoundRectanglePath=function(r,e,t,n,a,i){var o=n/2,s=a/2,u=i==="auto"?Za(n,a):i;r.beginPath&&r.beginPath(),r.moveTo(e,t-s),r.lineTo(e+o,t-s),r.lineTo(e+o,t),r.arcTo(e+o,t+s,e,t+s,u),r.arcTo(e-o,t+s,e-o,t,u),r.lineTo(e-o,t-s),r.lineTo(e,t-s),r.closePath()};Pa.drawCutRectanglePath=function(r,e,t,n,a,i,o){var s=n/2,u=a/2,l=o==="auto"?Tg():o;r.beginPath&&r.beginPath(),r.moveTo(e-s+l,t-u),r.lineTo(e+s-l,t-u),r.lineTo(e+s,t-u+l),r.lineTo(e+s,t+u-l),r.lineTo(e+s-l,t+u),r.lineTo(e-s+l,t+u),r.lineTo(e-s,t+u-l),r.lineTo(e-s,t-u+l),r.closePath()};Pa.drawBarrelPath=function(r,e,t,n,a){var i=n/2,o=a/2,s=e-i,u=e+i,l=t-o,c=t+o,f=Wp(n,a),d=f.widthOffset,h=f.heightOffset,v=f.ctrlPtOffsetPct*d;r.beginPath&&r.beginPath(),r.moveTo(s,l+h),r.lineTo(s,c-h),r.quadraticCurveTo(s+v,c,s+d,c),r.lineTo(u-d,c),r.quadraticCurveTo(u-v,c,u,c-h),r.lineTo(u,l+h),r.quadraticCurveTo(u-v,l,u-d,l),r.lineTo(s+d,l),r.quadraticCurveTo(s+v,l,s,l+h),r.closePath()};var Um=Math.sin(0),Hm=Math.cos(0),ig={},og={},_C=Math.PI/40;for(var xi=0*Math.PI;xi<2*Math.PI;xi+=_C)ig[xi]=Math.sin(xi),og[xi]=Math.cos(xi);Pa.drawEllipsePath=function(r,e,t,n,a){if(r.beginPath&&r.beginPath(),r.ellipse)r.ellipse(e,t,n/2,a/2,0,0,2*Math.PI);else for(var i,o,s=n/2,u=a/2,l=0*Math.PI;l<2*Math.PI;l+=_C)i=e-s*ig[l]*Um+s*og[l]*Hm,o=t+u*og[l]*Um+u*ig[l]*Hm,l===0?r.moveTo(i,o):r.lineTo(i,o);r.closePath()};var es={};es.createBuffer=function(r,e){var t=document.createElement("canvas");return t.width=r,t.height=e,[t,t.getContext("2d")]};es.bufferCanvasImage=function(r){var e=this.cy,t=e.mutableElements(),n=t.boundingBox(),a=this.findContainerClientCoords(),i=r.full?Math.ceil(n.w):a[2],o=r.full?Math.ceil(n.h):a[3],s=Ge(r.maxWidth)||Ge(r.maxHeight),u=this.getPixelRatio(),l=1;if(r.scale!==void 0)i*=r.scale,o*=r.scale,l=r.scale;else if(s){var c=1/0,f=1/0;Ge(r.maxWidth)&&(c=l*r.maxWidth/i),Ge(r.maxHeight)&&(f=l*r.maxHeight/o),l=Math.min(c,f),i*=l,o*=l}s||(i*=u,o*=u,l*=u);var d=document.createElement("canvas");d.width=i,d.height=o,d.style.width=i+"px",d.style.height=o+"px";var h=d.getContext("2d");if(i>0&&o>0){h.clearRect(0,0,i,o),h.globalCompositeOperation="source-over";var v=this.getCachedZSortedEles();if(r.full)h.translate(-n.x1*l,-n.y1*l),h.scale(l,l),this.drawElements(h,v),h.scale(1/l,1/l),h.translate(n.x1*l,n.y1*l);else{var m=e.pan(),_={x:m.x*l,y:m.y*l};l*=e.zoom(),h.translate(_.x,_.y),h.scale(l,l),this.drawElements(h,v),h.scale(1/l,1/l),h.translate(-_.x,-_.y)}r.bg&&(h.globalCompositeOperation="destination-over",h.fillStyle=r.bg,h.rect(0,0,i,o),h.fill())}return d};function MR(r,e){for(var t=atob(r),n=new ArrayBuffer(t.length),a=new Uint8Array(n),i=0;i<t.length;i++)a[i]=t.charCodeAt(i);return new Blob([n],{type:e})}function jm(r){var e=r.indexOf(",");return r.substr(e+1)}function xC(r,e,t){var n=function(){return e.toDataURL(t,r.quality)};switch(r.output){case"blob-promise":return new $i(function(a,i){try{e.toBlob(function(o){o!=null?a(o):i(new Error("`canvas.toBlob()` sent a null value in its callback"))},t,r.quality)}catch(o){i(o)}});case"blob":return MR(jm(n()),t);case"base64":return jm(n());case"base64uri":default:return n()}}es.png=function(r){return xC(r,this.bufferCanvasImage(r),"image/png")};es.jpg=function(r){return xC(r,this.bufferCanvasImage(r),"image/jpeg")};var SC={};SC.nodeShapeImpl=function(r,e,t,n,a,i,o,s){switch(r){case"ellipse":return this.drawEllipsePath(e,t,n,a,i);case"polygon":return this.drawPolygonPath(e,t,n,a,i,o);case"round-polygon":return this.drawRoundPolygonPath(e,t,n,a,i,o,s);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,t,n,a,i,s);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,t,n,a,i,o,s);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,t,n,a,i,s);case"barrel":return this.drawBarrelPath(e,t,n,a,i)}};var OR=CC,Tt=CC.prototype;Tt.CANVAS_LAYERS=3;Tt.SELECT_BOX=0;Tt.DRAG=1;Tt.NODE=2;Tt.BUFFER_COUNT=3;Tt.TEXTURE_BUFFER=0;Tt.MOTIONBLUR_BUFFER_NODE=1;Tt.MOTIONBLUR_BUFFER_DRAG=2;function CC(r){var e=this;e.data={canvases:new Array(Tt.CANVAS_LAYERS),contexts:new Array(Tt.CANVAS_LAYERS),canvasNeedsRedraw:new Array(Tt.CANVAS_LAYERS),bufferCanvases:new Array(Tt.BUFFER_COUNT),bufferContexts:new Array(Tt.CANVAS_LAYERS)};var t="-webkit-tap-highlight-color",n="rgba(0,0,0,0)";e.data.canvasContainer=document.createElement("div");var a=e.data.canvasContainer.style;e.data.canvasContainer.style[t]=n,a.position="relative",a.zIndex="0",a.overflow="hidden";var i=r.cy.container();i.appendChild(e.data.canvasContainer),i.style[t]=n;var o={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};mT()&&(o["-ms-touch-action"]="none",o["touch-action"]="none");for(var s=0;s<Tt.CANVAS_LAYERS;s++){var u=e.data.canvases[s]=document.createElement("canvas");e.data.contexts[s]=u.getContext("2d"),Object.keys(o).forEach(function(j){u.style[j]=o[j]}),u.style.position="absolute",u.setAttribute("data-id","layer"+s),u.style.zIndex=String(Tt.CANVAS_LAYERS-s),e.data.canvasContainer.appendChild(u),e.data.canvasNeedsRedraw[s]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[Tt.NODE].setAttribute("data-id","layer"+Tt.NODE+"-node"),e.data.canvases[Tt.SELECT_BOX].setAttribute("data-id","layer"+Tt.SELECT_BOX+"-selectbox"),e.data.canvases[Tt.DRAG].setAttribute("data-id","layer"+Tt.DRAG+"-drag");for(var s=0;s<Tt.BUFFER_COUNT;s++)e.data.bufferCanvases[s]=document.createElement("canvas"),e.data.bufferContexts[s]=e.data.bufferCanvases[s].getContext("2d"),e.data.bufferCanvases[s].style.position="absolute",e.data.bufferCanvases[s].setAttribute("data-id","buffer"+s),e.data.bufferCanvases[s].style.zIndex=String(-s-1),e.data.bufferCanvases[s].style.visibility="hidden";e.pathsEnabled=!0;var l=Yr(),c=function(W){return{x:(W.x1+W.x2)/2,y:(W.y1+W.y2)/2}},f=function(W){return{x:-W.w/2,y:-W.h/2}},d=function(W){var re=W[0]._private,se=re.oldBackgroundTimestamp===re.backgroundTimestamp;return!se},h=function(W){return W[0]._private.nodeKey},v=function(W){return W[0]._private.labelStyleKey},m=function(W){return W[0]._private.sourceLabelStyleKey},_=function(W){return W[0]._private.targetLabelStyleKey},b=function(W,re,se,ce,ge){return e.drawElement(W,re,se,!1,!1,ge)},w=function(W,re,se,ce,ge){return e.drawElementText(W,re,se,ce,"main",ge)},y=function(W,re,se,ce,ge){return e.drawElementText(W,re,se,ce,"source",ge)},x=function(W,re,se,ce,ge){return e.drawElementText(W,re,se,ce,"target",ge)},C=function(W){return W.boundingBox(),W[0]._private.bodyBounds},E=function(W){return W.boundingBox(),W[0]._private.labelBounds.main||l},p=function(W){return W.boundingBox(),W[0]._private.labelBounds.source||l},P=function(W){return W.boundingBox(),W[0]._private.labelBounds.target||l},T=function(W,re){return re},R=function(W){return c(C(W))},M=function(W,re,se){var ce=W?W+"-":"";return{x:re.x+se.pstyle(ce+"text-margin-x").pfValue,y:re.y+se.pstyle(ce+"text-margin-y").pfValue}},N=function(W,re,se){var ce=W[0]._private.rscratch;return{x:ce[re],y:ce[se]}},B=function(W){return M("",N(W,"labelX","labelY"),W)},q=function(W){return M("source",N(W,"sourceLabelX","sourceLabelY"),W)},Z=function(W){return M("target",N(W,"targetLabelX","targetLabelY"),W)},Q=function(W){return f(C(W))},Y=function(W){return f(p(W))},J=function(W){return f(P(W))},X=function(W){var re=E(W),se=f(E(W));if(W.isNode()){switch(W.pstyle("text-halign").value){case"left":se.x=-re.w;break;case"right":se.x=0;break}switch(W.pstyle("text-valign").value){case"top":se.y=-re.h;break;case"bottom":se.y=0;break}}return se},k=e.data.eleTxrCache=new To(e,{getKey:h,doesEleInvalidateKey:d,drawElement:b,getBoundingBox:C,getRotationPoint:R,getRotationOffset:Q,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),D=e.data.lblTxrCache=new To(e,{getKey:v,drawElement:w,getBoundingBox:E,getRotationPoint:B,getRotationOffset:X,isVisible:T}),I=e.data.slbTxrCache=new To(e,{getKey:m,drawElement:y,getBoundingBox:p,getRotationPoint:q,getRotationOffset:Y,isVisible:T}),F=e.data.tlbTxrCache=new To(e,{getKey:_,drawElement:x,getBoundingBox:P,getRotationPoint:Z,getRotationOffset:J,isVisible:T}),L=e.data.lyrTxrCache=new yC(e);e.onUpdateEleCalcs(function(W,re){k.invalidateElements(re),D.invalidateElements(re),I.invalidateElements(re),F.invalidateElements(re),L.invalidateElements(re);for(var se=0;se<re.length;se++){var ce=re[se]._private;ce.oldBackgroundTimestamp=ce.backgroundTimestamp}});var H=function(W){for(var re=0;re<W.length;re++)L.enqueueElementRefinement(W[re].ele)};k.onDequeue(H),D.onDequeue(H),I.onDequeue(H),F.onDequeue(H)}Tt.redrawHint=function(r,e){var t=this;switch(r){case"eles":t.data.canvasNeedsRedraw[Tt.NODE]=e;break;case"drag":t.data.canvasNeedsRedraw[Tt.DRAG]=e;break;case"select":t.data.canvasNeedsRedraw[Tt.SELECT_BOX]=e;break}};var DR=typeof Path2D<"u";Tt.path2dEnabled=function(r){if(r===void 0)return this.pathsEnabled;this.pathsEnabled=!!r};Tt.usePaths=function(){return DR&&this.pathsEnabled};Tt.setImgSmoothing=function(r,e){r.imageSmoothingEnabled!=null?r.imageSmoothingEnabled=e:(r.webkitImageSmoothingEnabled=e,r.mozImageSmoothingEnabled=e,r.msImageSmoothingEnabled=e)};Tt.getImgSmoothing=function(r){return r.imageSmoothingEnabled!=null?r.imageSmoothingEnabled:r.webkitImageSmoothingEnabled||r.mozImageSmoothingEnabled||r.msImageSmoothingEnabled};Tt.makeOffscreenCanvas=function(r,e){var t;return(typeof OffscreenCanvas>"u"?"undefined":gr(OffscreenCanvas))!=="undefined"?t=new OffscreenCanvas(r,e):(t=document.createElement("canvas"),t.width=r,t.height=e),t};[mC,Nn,Qn,zg,ni,Xi,Jr,Pa,es,SC].forEach(function(r){rt(Tt,r)});var RR=[{name:"null",impl:iC},{name:"base",impl:pC},{name:"canvas",impl:OR}],IR=[{type:"layout",extensions:zD},{type:"renderer",extensions:RR}],EC={},TC={};function PC(r,e,t){var n=t,a=function(P){Mt("Can not register `"+e+"` for `"+r+"` since `"+P+"` already exists in the prototype and can not be overridden")};if(r==="core"){if(Vo.prototype[e])return a(e);Vo.prototype[e]=t}else if(r==="collection"){if(Ar.prototype[e])return a(e);Ar.prototype[e]=t}else if(r==="layout"){for(var i=function(P){this.options=P,t.call(this,P),Et(this._private)||(this._private={}),this._private.cy=P.cy,this._private.listeners=[],this.createEmitter()},o=i.prototype=Object.create(t.prototype),s=[],u=0;u<s.length;u++){var l=s[u];o[l]=o[l]||function(){return this}}o.start&&!o.run?o.run=function(){return this.start(),this}:!o.start&&o.run&&(o.start=function(){return this.run(),this});var c=t.prototype.stop;o.stop=function(){var p=this.options;if(p&&p.animate){var P=this.animations;if(P)for(var T=0;T<P.length;T++)P[T].stop()}return c?c.call(this):this.emit("layoutstop"),this},o.destroy||(o.destroy=function(){return this}),o.cy=function(){return this._private.cy};var f=function(P){return P._private.cy},d={addEventFields:function(P,T){T.layout=P,T.cy=f(P),T.target=P},bubble:function(){return!0},parent:function(P){return f(P)}};rt(o,{createEmitter:function(){return this._private.emitter=new bu(d,this),this},emitter:function(){return this._private.emitter},on:function(P,T){return this.emitter().on(P,T),this},one:function(P,T){return this.emitter().one(P,T),this},once:function(P,T){return this.emitter().one(P,T),this},removeListener:function(P,T){return this.emitter().removeListener(P,T),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(P,T){return this.emitter().emit(P,T),this}}),kt.eventAliasesOn(o),n=i}else if(r==="renderer"&&e!=="null"&&e!=="base"){var h=AC("renderer","base"),v=h.prototype,m=t,_=t.prototype,b=function(){h.apply(this,arguments),m.apply(this,arguments)},w=b.prototype;for(var y in v){var x=v[y],C=_[y]!=null;if(C)return a(y);w[y]=x}for(var E in _)w[E]=_[E];v.clientFunctions.forEach(function(p){w[p]=w[p]||function(){ar("Renderer does not implement `renderer."+p+"()` on its prototype")}}),n=b}else if(r==="__proto__"||r==="constructor"||r==="prototype")return ar(r+" is an illegal type to be registered, possibly lead to prototype pollutions");return Jx({map:EC,keys:[r,e],value:n})}function AC(r,e){return eS({map:EC,keys:[r,e]})}function LR(r,e,t,n,a){return Jx({map:TC,keys:[r,e,t,n],value:a})}function NR(r,e,t,n){return eS({map:TC,keys:[r,e,t,n]})}var sg=function(){if(arguments.length===2)return AC.apply(null,arguments);if(arguments.length===3)return PC.apply(null,arguments);if(arguments.length===4)return NR.apply(null,arguments);if(arguments.length===5)return LR.apply(null,arguments);ar("Invalid extension access syntax")};Vo.prototype.extension=sg;IR.forEach(function(r){r.extensions.forEach(function(e){PC(r.type,e.name,e.impl)})});var kC=function r(){if(!(this instanceof r))return new r;this.length=0},ei=kC.prototype;ei.instanceString=function(){return"stylesheet"};ei.selector=function(r){var e=this.length++;return this[e]={selector:r,properties:[]},this};ei.css=function(r,e){var t=this.length-1;if(Qe(r))this[t].properties.push({name:r,value:e});else if(Et(r))for(var n=r,a=Object.keys(n),i=0;i<a.length;i++){var o=a[i],s=n[o];if(s!=null){var u=Rr.properties[o]||Rr.properties[lu(o)];if(u!=null){var l=u.name,c=s;this[t].properties.push({name:l,value:c})}}}return this};ei.style=ei.css;ei.generateStyle=function(r){var e=new Rr(r);return this.appendToStyle(e)};ei.appendToStyle=function(r){for(var e=0;e<this.length;e++){var t=this[e],n=t.selector,a=t.properties;r.selector(n);for(var i=0;i<a.length;i++){var o=a[i];r.css(o.name,o.value)}}return r};var FR="3.29.2",Qr=function(e){if(e===void 0&&(e={}),Et(e))return new Vo(e);if(Qe(e))return sg.apply(sg,arguments)};Qr.use=function(r){var e=Array.prototype.slice.call(arguments,1);return e.unshift(Qr),r.apply(null,e),this};Qr.warnings=function(r){return uS(r)};Qr.version=FR;Qr.stylesheet=Qr.Stylesheet=kC;var Ve=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Aa(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var MC={exports:{}};function Gg(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var hc,Wm;function BR(){if(Wm)return hc;Wm=1;function r(){this.__data__=[],this.size=0}return hc=r,hc}var vc,Km;function Zi(){if(Km)return vc;Km=1;function r(e,t){return e===t||e!==e&&t!==t}return vc=r,vc}var pc,Ym;function Pu(){if(Ym)return pc;Ym=1;var r=Zi();function e(t,n){for(var a=t.length;a--;)if(r(t[a][0],n))return a;return-1}return pc=e,pc}var gc,Xm;function qR(){if(Xm)return gc;Xm=1;var r=Pu(),e=Array.prototype,t=e.splice;function n(a){var i=this.__data__,o=r(i,a);if(o<0)return!1;var s=i.length-1;return o==s?i.pop():t.call(i,o,1),--this.size,!0}return gc=n,gc}var yc,Zm;function zR(){if(Zm)return yc;Zm=1;var r=Pu();function e(t){var n=this.__data__,a=r(n,t);return a<0?void 0:n[a][1]}return yc=e,yc}var mc,Qm;function GR(){if(Qm)return mc;Qm=1;var r=Pu();function e(t){return r(this.__data__,t)>-1}return mc=e,mc}var bc,Jm;function $R(){if(Jm)return bc;Jm=1;var r=Pu();function e(t,n){var a=this.__data__,i=r(a,t);return i<0?(++this.size,a.push([t,n])):a[i][1]=n,this}return bc=e,bc}var wc,e0;function Au(){if(e0)return wc;e0=1;var r=BR(),e=qR(),t=zR(),n=GR(),a=$R();function i(o){var s=-1,u=o==null?0:o.length;for(this.clear();++s<u;){var l=o[s];this.set(l[0],l[1])}}return i.prototype.clear=r,i.prototype.delete=e,i.prototype.get=t,i.prototype.has=n,i.prototype.set=a,wc=i,wc}var _c,t0;function VR(){if(t0)return _c;t0=1;var r=Au();function e(){this.__data__=new r,this.size=0}return _c=e,_c}var xc,r0;function UR(){if(r0)return xc;r0=1;function r(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}return xc=r,xc}var Sc,n0;function HR(){if(n0)return Sc;n0=1;function r(e){return this.__data__.get(e)}return Sc=r,Sc}var Cc,a0;function jR(){if(a0)return Cc;a0=1;function r(e){return this.__data__.has(e)}return Cc=r,Cc}var Ec,i0;function OC(){if(i0)return Ec;i0=1;var r=typeof Ve=="object"&&Ve&&Ve.Object===Object&&Ve;return Ec=r,Ec}var Tc,o0;function bn(){if(o0)return Tc;o0=1;var r=OC(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=r||e||Function("return this")();return Tc=t,Tc}var Pc,s0;function Qi(){if(s0)return Pc;s0=1;var r=bn(),e=r.Symbol;return Pc=e,Pc}var Ac,u0;function WR(){if(u0)return Ac;u0=1;var r=Qi(),e=Object.prototype,t=e.hasOwnProperty,n=e.toString,a=r?r.toStringTag:void 0;function i(o){var s=t.call(o,a),u=o[a];try{o[a]=void 0;var l=!0}catch{}var c=n.call(o);return l&&(s?o[a]=u:delete o[a]),c}return Ac=i,Ac}var kc,l0;function KR(){if(l0)return kc;l0=1;var r=Object.prototype,e=r.toString;function t(n){return e.call(n)}return kc=t,kc}var Mc,c0;function ai(){if(c0)return Mc;c0=1;var r=Qi(),e=WR(),t=KR(),n="[object Null]",a="[object Undefined]",i=r?r.toStringTag:void 0;function o(s){return s==null?s===void 0?a:n:i&&i in Object(s)?e(s):t(s)}return Mc=o,Mc}var Oc,f0;function sn(){if(f0)return Oc;f0=1;function r(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return Oc=r,Oc}var Dc,d0;function ts(){if(d0)return Dc;d0=1;var r=ai(),e=sn(),t="[object AsyncFunction]",n="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function o(s){if(!e(s))return!1;var u=r(s);return u==n||u==a||u==t||u==i}return Dc=o,Dc}var Rc,h0;function YR(){if(h0)return Rc;h0=1;var r=bn(),e=r["__core-js_shared__"];return Rc=e,Rc}var Ic,v0;function XR(){if(v0)return Ic;v0=1;var r=YR(),e=function(){var n=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function t(n){return!!e&&e in n}return Ic=t,Ic}var Lc,p0;function DC(){if(p0)return Lc;p0=1;var r=Function.prototype,e=r.toString;function t(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return Lc=t,Lc}var Nc,g0;function ZR(){if(g0)return Nc;g0=1;var r=ts(),e=XR(),t=sn(),n=DC(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,s=Object.prototype,u=o.toString,l=s.hasOwnProperty,c=RegExp("^"+u.call(l).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(d){if(!t(d)||e(d))return!1;var h=r(d)?c:i;return h.test(n(d))}return Nc=f,Nc}var Fc,y0;function QR(){if(y0)return Fc;y0=1;function r(e,t){return e==null?void 0:e[t]}return Fc=r,Fc}var Bc,m0;function ii(){if(m0)return Bc;m0=1;var r=ZR(),e=QR();function t(n,a){var i=e(n,a);return r(i)?i:void 0}return Bc=t,Bc}var qc,b0;function $g(){if(b0)return qc;b0=1;var r=ii(),e=bn(),t=r(e,"Map");return qc=t,qc}var zc,w0;function ku(){if(w0)return zc;w0=1;var r=ii(),e=r(Object,"create");return zc=e,zc}var Gc,_0;function JR(){if(_0)return Gc;_0=1;var r=ku();function e(){this.__data__=r?r(null):{},this.size=0}return Gc=e,Gc}var $c,x0;function eI(){if(x0)return $c;x0=1;function r(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return $c=r,$c}var Vc,S0;function tI(){if(S0)return Vc;S0=1;var r=ku(),e="__lodash_hash_undefined__",t=Object.prototype,n=t.hasOwnProperty;function a(i){var o=this.__data__;if(r){var s=o[i];return s===e?void 0:s}return n.call(o,i)?o[i]:void 0}return Vc=a,Vc}var Uc,C0;function rI(){if(C0)return Uc;C0=1;var r=ku(),e=Object.prototype,t=e.hasOwnProperty;function n(a){var i=this.__data__;return r?i[a]!==void 0:t.call(i,a)}return Uc=n,Uc}var Hc,E0;function nI(){if(E0)return Hc;E0=1;var r=ku(),e="__lodash_hash_undefined__";function t(n,a){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=r&&a===void 0?e:a,this}return Hc=t,Hc}var jc,T0;function aI(){if(T0)return jc;T0=1;var r=JR(),e=eI(),t=tI(),n=rI(),a=nI();function i(o){var s=-1,u=o==null?0:o.length;for(this.clear();++s<u;){var l=o[s];this.set(l[0],l[1])}}return i.prototype.clear=r,i.prototype.delete=e,i.prototype.get=t,i.prototype.has=n,i.prototype.set=a,jc=i,jc}var Wc,P0;function iI(){if(P0)return Wc;P0=1;var r=aI(),e=Au(),t=$g();function n(){this.size=0,this.__data__={hash:new r,map:new(t||e),string:new r}}return Wc=n,Wc}var Kc,A0;function oI(){if(A0)return Kc;A0=1;function r(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return Kc=r,Kc}var Yc,k0;function Mu(){if(k0)return Yc;k0=1;var r=oI();function e(t,n){var a=t.__data__;return r(n)?a[typeof n=="string"?"string":"hash"]:a.map}return Yc=e,Yc}var Xc,M0;function sI(){if(M0)return Xc;M0=1;var r=Mu();function e(t){var n=r(this,t).delete(t);return this.size-=n?1:0,n}return Xc=e,Xc}var Zc,O0;function uI(){if(O0)return Zc;O0=1;var r=Mu();function e(t){return r(this,t).get(t)}return Zc=e,Zc}var Qc,D0;function lI(){if(D0)return Qc;D0=1;var r=Mu();function e(t){return r(this,t).has(t)}return Qc=e,Qc}var Jc,R0;function cI(){if(R0)return Jc;R0=1;var r=Mu();function e(t,n){var a=r(this,t),i=a.size;return a.set(t,n),this.size+=a.size==i?0:1,this}return Jc=e,Jc}var ef,I0;function Vg(){if(I0)return ef;I0=1;var r=iI(),e=sI(),t=uI(),n=lI(),a=cI();function i(o){var s=-1,u=o==null?0:o.length;for(this.clear();++s<u;){var l=o[s];this.set(l[0],l[1])}}return i.prototype.clear=r,i.prototype.delete=e,i.prototype.get=t,i.prototype.has=n,i.prototype.set=a,ef=i,ef}var tf,L0;function fI(){if(L0)return tf;L0=1;var r=Au(),e=$g(),t=Vg(),n=200;function a(i,o){var s=this.__data__;if(s instanceof r){var u=s.__data__;if(!e||u.length<n-1)return u.push([i,o]),this.size=++s.size,this;s=this.__data__=new t(u)}return s.set(i,o),this.size=s.size,this}return tf=a,tf}var rf,N0;function Ou(){if(N0)return rf;N0=1;var r=Au(),e=VR(),t=UR(),n=HR(),a=jR(),i=fI();function o(s){var u=this.__data__=new r(s);this.size=u.size}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=n,o.prototype.has=a,o.prototype.set=i,rf=o,rf}var nf,F0;function Ug(){if(F0)return nf;F0=1;function r(e,t){for(var n=-1,a=e==null?0:e.length;++n<a&&t(e[n],n,e)!==!1;);return e}return nf=r,nf}var af,B0;function RC(){if(B0)return af;B0=1;var r=ii(),e=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch{}}();return af=e,af}var of,q0;function Du(){if(q0)return of;q0=1;var r=RC();function e(t,n,a){n=="__proto__"&&r?r(t,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):t[n]=a}return of=e,of}var sf,z0;function Ru(){if(z0)return sf;z0=1;var r=Du(),e=Zi(),t=Object.prototype,n=t.hasOwnProperty;function a(i,o,s){var u=i[o];(!(n.call(i,o)&&e(u,s))||s===void 0&&!(o in i))&&r(i,o,s)}return sf=a,sf}var uf,G0;function rs(){if(G0)return uf;G0=1;var r=Ru(),e=Du();function t(n,a,i,o){var s=!i;i||(i={});for(var u=-1,l=a.length;++u<l;){var c=a[u],f=o?o(i[c],n[c],c,i,n):void 0;f===void 0&&(f=n[c]),s?e(i,c,f):r(i,c,f)}return i}return uf=t,uf}var lf,$0;function dI(){if($0)return lf;$0=1;function r(e,t){for(var n=-1,a=Array(e);++n<e;)a[n]=t(n);return a}return lf=r,lf}var cf,V0;function Fn(){if(V0)return cf;V0=1;function r(e){return e!=null&&typeof e=="object"}return cf=r,cf}var ff,U0;function hI(){if(U0)return ff;U0=1;var r=ai(),e=Fn(),t="[object Arguments]";function n(a){return e(a)&&r(a)==t}return ff=n,ff}var df,H0;function ns(){if(H0)return df;H0=1;var r=hI(),e=Fn(),t=Object.prototype,n=t.hasOwnProperty,a=t.propertyIsEnumerable,i=r(function(){return arguments}())?r:function(o){return e(o)&&n.call(o,"callee")&&!a.call(o,"callee")};return df=i,df}var hf,j0;function cr(){if(j0)return hf;j0=1;var r=Array.isArray;return hf=r,hf}var Po={exports:{}},vf,W0;function vI(){if(W0)return vf;W0=1;function r(){return!1}return vf=r,vf}Po.exports;var K0;function Ji(){return K0||(K0=1,function(r,e){var t=bn(),n=vI(),a=e&&!e.nodeType&&e,i=a&&!0&&r&&!r.nodeType&&r,o=i&&i.exports===a,s=o?t.Buffer:void 0,u=s?s.isBuffer:void 0,l=u||n;r.exports=l}(Po,Po.exports)),Po.exports}var pf,Y0;function Iu(){if(Y0)return pf;Y0=1;var r=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(n,a){var i=typeof n;return a=a??r,!!a&&(i=="number"||i!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<a}return pf=t,pf}var gf,X0;function Hg(){if(X0)return gf;X0=1;var r=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=r}return gf=e,gf}var yf,Z0;function pI(){if(Z0)return yf;Z0=1;var r=ai(),e=Hg(),t=Fn(),n="[object Arguments]",a="[object Array]",i="[object Boolean]",o="[object Date]",s="[object Error]",u="[object Function]",l="[object Map]",c="[object Number]",f="[object Object]",d="[object RegExp]",h="[object Set]",v="[object String]",m="[object WeakMap]",_="[object ArrayBuffer]",b="[object DataView]",w="[object Float32Array]",y="[object Float64Array]",x="[object Int8Array]",C="[object Int16Array]",E="[object Int32Array]",p="[object Uint8Array]",P="[object Uint8ClampedArray]",T="[object Uint16Array]",R="[object Uint32Array]",M={};M[w]=M[y]=M[x]=M[C]=M[E]=M[p]=M[P]=M[T]=M[R]=!0,M[n]=M[a]=M[_]=M[i]=M[b]=M[o]=M[s]=M[u]=M[l]=M[c]=M[f]=M[d]=M[h]=M[v]=M[m]=!1;function N(B){return t(B)&&e(B.length)&&!!M[r(B)]}return yf=N,yf}var mf,Q0;function Lu(){if(Q0)return mf;Q0=1;function r(e){return function(t){return e(t)}}return mf=r,mf}var Ao={exports:{}};Ao.exports;var J0;function jg(){return J0||(J0=1,function(r,e){var t=OC(),n=e&&!e.nodeType&&e,a=n&&!0&&r&&!r.nodeType&&r,i=a&&a.exports===n,o=i&&t.process,s=function(){try{var u=a&&a.require&&a.require("util").types;return u||o&&o.binding&&o.binding("util")}catch{}}();r.exports=s}(Ao,Ao.exports)),Ao.exports}var bf,eb;function as(){if(eb)return bf;eb=1;var r=pI(),e=Lu(),t=jg(),n=t&&t.isTypedArray,a=n?e(n):r;return bf=a,bf}var wf,tb;function IC(){if(tb)return wf;tb=1;var r=dI(),e=ns(),t=cr(),n=Ji(),a=Iu(),i=as(),o=Object.prototype,s=o.hasOwnProperty;function u(l,c){var f=t(l),d=!f&&e(l),h=!f&&!d&&n(l),v=!f&&!d&&!h&&i(l),m=f||d||h||v,_=m?r(l.length,String):[],b=_.length;for(var w in l)(c||s.call(l,w))&&!(m&&(w=="length"||h&&(w=="offset"||w=="parent")||v&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||a(w,b)))&&_.push(w);return _}return wf=u,wf}var _f,rb;function Nu(){if(rb)return _f;rb=1;var r=Object.prototype;function e(t){var n=t&&t.constructor,a=typeof n=="function"&&n.prototype||r;return t===a}return _f=e,_f}var xf,nb;function LC(){if(nb)return xf;nb=1;function r(e,t){return function(n){return e(t(n))}}return xf=r,xf}var Sf,ab;function gI(){if(ab)return Sf;ab=1;var r=LC(),e=r(Object.keys,Object);return Sf=e,Sf}var Cf,ib;function Wg(){if(ib)return Cf;ib=1;var r=Nu(),e=gI(),t=Object.prototype,n=t.hasOwnProperty;function a(i){if(!r(i))return e(i);var o=[];for(var s in Object(i))n.call(i,s)&&s!="constructor"&&o.push(s);return o}return Cf=a,Cf}var Ef,ob;function Jn(){if(ob)return Ef;ob=1;var r=ts(),e=Hg();function t(n){return n!=null&&e(n.length)&&!r(n)}return Ef=t,Ef}var Tf,sb;function ka(){if(sb)return Tf;sb=1;var r=IC(),e=Wg(),t=Jn();function n(a){return t(a)?r(a):e(a)}return Tf=n,Tf}var Pf,ub;function yI(){if(ub)return Pf;ub=1;var r=rs(),e=ka();function t(n,a){return n&&r(a,e(a),n)}return Pf=t,Pf}var Af,lb;function mI(){if(lb)return Af;lb=1;function r(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}return Af=r,Af}var kf,cb;function bI(){if(cb)return kf;cb=1;var r=sn(),e=Nu(),t=mI(),n=Object.prototype,a=n.hasOwnProperty;function i(o){if(!r(o))return t(o);var s=e(o),u=[];for(var l in o)l=="constructor"&&(s||!a.call(o,l))||u.push(l);return u}return kf=i,kf}var Mf,fb;function oi(){if(fb)return Mf;fb=1;var r=IC(),e=bI(),t=Jn();function n(a){return t(a)?r(a,!0):e(a)}return Mf=n,Mf}var Of,db;function wI(){if(db)return Of;db=1;var r=rs(),e=oi();function t(n,a){return n&&r(a,e(a),n)}return Of=t,Of}var ko={exports:{}};ko.exports;var hb;function NC(){return hb||(hb=1,function(r,e){var t=bn(),n=e&&!e.nodeType&&e,a=n&&!0&&r&&!r.nodeType&&r,i=a&&a.exports===n,o=i?t.Buffer:void 0,s=o?o.allocUnsafe:void 0;function u(l,c){if(c)return l.slice();var f=l.length,d=s?s(f):new l.constructor(f);return l.copy(d),d}r.exports=u}(ko,ko.exports)),ko.exports}var Df,vb;function FC(){if(vb)return Df;vb=1;function r(e,t){var n=-1,a=e.length;for(t||(t=Array(a));++n<a;)t[n]=e[n];return t}return Df=r,Df}var Rf,pb;function BC(){if(pb)return Rf;pb=1;function r(e,t){for(var n=-1,a=e==null?0:e.length,i=0,o=[];++n<a;){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o}return Rf=r,Rf}var If,gb;function qC(){if(gb)return If;gb=1;function r(){return[]}return If=r,If}var Lf,yb;function Kg(){if(yb)return Lf;yb=1;var r=BC(),e=qC(),t=Object.prototype,n=t.propertyIsEnumerable,a=Object.getOwnPropertySymbols,i=a?function(o){return o==null?[]:(o=Object(o),r(a(o),function(s){return n.call(o,s)}))}:e;return Lf=i,Lf}var Nf,mb;function _I(){if(mb)return Nf;mb=1;var r=rs(),e=Kg();function t(n,a){return r(n,e(n),a)}return Nf=t,Nf}var Ff,bb;function Yg(){if(bb)return Ff;bb=1;function r(e,t){for(var n=-1,a=t.length,i=e.length;++n<a;)e[i+n]=t[n];return e}return Ff=r,Ff}var Bf,wb;function Fu(){if(wb)return Bf;wb=1;var r=LC(),e=r(Object.getPrototypeOf,Object);return Bf=e,Bf}var qf,_b;function zC(){if(_b)return qf;_b=1;var r=Yg(),e=Fu(),t=Kg(),n=qC(),a=Object.getOwnPropertySymbols,i=a?function(o){for(var s=[];o;)r(s,t(o)),o=e(o);return s}:n;return qf=i,qf}var zf,xb;function xI(){if(xb)return zf;xb=1;var r=rs(),e=zC();function t(n,a){return r(n,e(n),a)}return zf=t,zf}var Gf,Sb;function GC(){if(Sb)return Gf;Sb=1;var r=Yg(),e=cr();function t(n,a,i){var o=a(n);return e(n)?o:r(o,i(n))}return Gf=t,Gf}var $f,Cb;function $C(){if(Cb)return $f;Cb=1;var r=GC(),e=Kg(),t=ka();function n(a){return r(a,t,e)}return $f=n,$f}var Vf,Eb;function SI(){if(Eb)return Vf;Eb=1;var r=GC(),e=zC(),t=oi();function n(a){return r(a,t,e)}return Vf=n,Vf}var Uf,Tb;function CI(){if(Tb)return Uf;Tb=1;var r=ii(),e=bn(),t=r(e,"DataView");return Uf=t,Uf}var Hf,Pb;function EI(){if(Pb)return Hf;Pb=1;var r=ii(),e=bn(),t=r(e,"Promise");return Hf=t,Hf}var jf,Ab;function VC(){if(Ab)return jf;Ab=1;var r=ii(),e=bn(),t=r(e,"Set");return jf=t,jf}var Wf,kb;function TI(){if(kb)return Wf;kb=1;var r=ii(),e=bn(),t=r(e,"WeakMap");return Wf=t,Wf}var Kf,Mb;function eo(){if(Mb)return Kf;Mb=1;var r=CI(),e=$g(),t=EI(),n=VC(),a=TI(),i=ai(),o=DC(),s="[object Map]",u="[object Object]",l="[object Promise]",c="[object Set]",f="[object WeakMap]",d="[object DataView]",h=o(r),v=o(e),m=o(t),_=o(n),b=o(a),w=i;return(r&&w(new r(new ArrayBuffer(1)))!=d||e&&w(new e)!=s||t&&w(t.resolve())!=l||n&&w(new n)!=c||a&&w(new a)!=f)&&(w=function(y){var x=i(y),C=x==u?y.constructor:void 0,E=C?o(C):"";if(E)switch(E){case h:return d;case v:return s;case m:return l;case _:return c;case b:return f}return x}),Kf=w,Kf}var Yf,Ob;function PI(){if(Ob)return Yf;Ob=1;var r=Object.prototype,e=r.hasOwnProperty;function t(n){var a=n.length,i=new n.constructor(a);return a&&typeof n[0]=="string"&&e.call(n,"index")&&(i.index=n.index,i.input=n.input),i}return Yf=t,Yf}var Xf,Db;function UC(){if(Db)return Xf;Db=1;var r=bn(),e=r.Uint8Array;return Xf=e,Xf}var Zf,Rb;function Xg(){if(Rb)return Zf;Rb=1;var r=UC();function e(t){var n=new t.constructor(t.byteLength);return new r(n).set(new r(t)),n}return Zf=e,Zf}var Qf,Ib;function AI(){if(Ib)return Qf;Ib=1;var r=Xg();function e(t,n){var a=n?r(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.byteLength)}return Qf=e,Qf}var Jf,Lb;function kI(){if(Lb)return Jf;Lb=1;var r=/\w*$/;function e(t){var n=new t.constructor(t.source,r.exec(t));return n.lastIndex=t.lastIndex,n}return Jf=e,Jf}var ed,Nb;function MI(){if(Nb)return ed;Nb=1;var r=Qi(),e=r?r.prototype:void 0,t=e?e.valueOf:void 0;function n(a){return t?Object(t.call(a)):{}}return ed=n,ed}var td,Fb;function HC(){if(Fb)return td;Fb=1;var r=Xg();function e(t,n){var a=n?r(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.length)}return td=e,td}var rd,Bb;function OI(){if(Bb)return rd;Bb=1;var r=Xg(),e=AI(),t=kI(),n=MI(),a=HC(),i="[object Boolean]",o="[object Date]",s="[object Map]",u="[object Number]",l="[object RegExp]",c="[object Set]",f="[object String]",d="[object Symbol]",h="[object ArrayBuffer]",v="[object DataView]",m="[object Float32Array]",_="[object Float64Array]",b="[object Int8Array]",w="[object Int16Array]",y="[object Int32Array]",x="[object Uint8Array]",C="[object Uint8ClampedArray]",E="[object Uint16Array]",p="[object Uint32Array]";function P(T,R,M){var N=T.constructor;switch(R){case h:return r(T);case i:case o:return new N(+T);case v:return e(T,M);case m:case _:case b:case w:case y:case x:case C:case E:case p:return a(T,M);case s:return new N;case u:case f:return new N(T);case l:return t(T);case c:return new N;case d:return n(T)}}return rd=P,rd}var nd,qb;function jC(){if(qb)return nd;qb=1;var r=sn(),e=Object.create,t=function(){function n(){}return function(a){if(!r(a))return{};if(e)return e(a);n.prototype=a;var i=new n;return n.prototype=void 0,i}}();return nd=t,nd}var ad,zb;function WC(){if(zb)return ad;zb=1;var r=jC(),e=Fu(),t=Nu();function n(a){return typeof a.constructor=="function"&&!t(a)?r(e(a)):{}}return ad=n,ad}var id,Gb;function DI(){if(Gb)return id;Gb=1;var r=eo(),e=Fn(),t="[object Map]";function n(a){return e(a)&&r(a)==t}return id=n,id}var od,$b;function RI(){if($b)return od;$b=1;var r=DI(),e=Lu(),t=jg(),n=t&&t.isMap,a=n?e(n):r;return od=a,od}var sd,Vb;function II(){if(Vb)return sd;Vb=1;var r=eo(),e=Fn(),t="[object Set]";function n(a){return e(a)&&r(a)==t}return sd=n,sd}var ud,Ub;function LI(){if(Ub)return ud;Ub=1;var r=II(),e=Lu(),t=jg(),n=t&&t.isSet,a=n?e(n):r;return ud=a,ud}var ld,Hb;function KC(){if(Hb)return ld;Hb=1;var r=Ou(),e=Ug(),t=Ru(),n=yI(),a=wI(),i=NC(),o=FC(),s=_I(),u=xI(),l=$C(),c=SI(),f=eo(),d=PI(),h=OI(),v=WC(),m=cr(),_=Ji(),b=RI(),w=sn(),y=LI(),x=ka(),C=oi(),E=1,p=2,P=4,T="[object Arguments]",R="[object Array]",M="[object Boolean]",N="[object Date]",B="[object Error]",q="[object Function]",Z="[object GeneratorFunction]",Q="[object Map]",Y="[object Number]",J="[object Object]",X="[object RegExp]",k="[object Set]",D="[object String]",I="[object Symbol]",F="[object WeakMap]",L="[object ArrayBuffer]",H="[object DataView]",j="[object Float32Array]",W="[object Float64Array]",re="[object Int8Array]",se="[object Int16Array]",ce="[object Int32Array]",ge="[object Uint8Array]",Pe="[object Uint8ClampedArray]",Oe="[object Uint16Array]",Se="[object Uint32Array]",le={};le[T]=le[R]=le[L]=le[H]=le[M]=le[N]=le[j]=le[W]=le[re]=le[se]=le[ce]=le[Q]=le[Y]=le[J]=le[X]=le[k]=le[D]=le[I]=le[ge]=le[Pe]=le[Oe]=le[Se]=!0,le[B]=le[q]=le[F]=!1;function te(ne,de,Ce,Le,$e,Ne){var De,me=de&E,G=de&p,U=de&P;if(Ce&&(De=$e?Ce(ne,Le,$e,Ne):Ce(ne)),De!==void 0)return De;if(!w(ne))return ne;var oe=m(ne);if(oe){if(De=d(ne),!me)return o(ne,De)}else{var ae=f(ne),fe=ae==q||ae==Z;if(_(ne))return i(ne,me);if(ae==J||ae==T||fe&&!$e){if(De=G||fe?{}:v(ne),!me)return G?u(ne,a(De,ne)):s(ne,n(De,ne))}else{if(!le[ae])return $e?ne:{};De=h(ne,ae,me)}}Ne||(Ne=new r);var we=Ne.get(ne);if(we)return we;Ne.set(ne,De),y(ne)?ne.forEach(function(Fe){De.add(te(Fe,de,Ce,Fe,ne,Ne))}):b(ne)&&ne.forEach(function(Fe,qe){De.set(qe,te(Fe,de,Ce,qe,ne,Ne))});var ve=U?G?c:l:G?C:x,Te=oe?void 0:ve(ne);return e(Te||ne,function(Fe,qe){Te&&(qe=Fe,Fe=ne[qe]),t(De,qe,te(Fe,de,Ce,qe,ne,Ne))}),De}return ld=te,ld}var cd,jb;function NI(){if(jb)return cd;jb=1;var r=KC(),e=4;function t(n){return r(n,e)}return cd=t,cd}var fd,Wb;function Zg(){if(Wb)return fd;Wb=1;function r(e){return function(){return e}}return fd=r,fd}var dd,Kb;function FI(){if(Kb)return dd;Kb=1;function r(e){return function(t,n,a){for(var i=-1,o=Object(t),s=a(t),u=s.length;u--;){var l=s[e?u:++i];if(n(o[l],l,o)===!1)break}return t}}return dd=r,dd}var hd,Yb;function Qg(){if(Yb)return hd;Yb=1;var r=FI(),e=r();return hd=e,hd}var vd,Xb;function Jg(){if(Xb)return vd;Xb=1;var r=Qg(),e=ka();function t(n,a){return n&&r(n,a,e)}return vd=t,vd}var pd,Zb;function BI(){if(Zb)return pd;Zb=1;var r=Jn();function e(t,n){return function(a,i){if(a==null)return a;if(!r(a))return t(a,i);for(var o=a.length,s=n?o:-1,u=Object(a);(n?s--:++s<o)&&i(u[s],s,u)!==!1;);return a}}return pd=e,pd}var gd,Qb;function Bu(){if(Qb)return gd;Qb=1;var r=Jg(),e=BI(),t=e(r);return gd=t,gd}var yd,Jb;function si(){if(Jb)return yd;Jb=1;function r(e){return e}return yd=r,yd}var md,e1;function YC(){if(e1)return md;e1=1;var r=si();function e(t){return typeof t=="function"?t:r}return md=e,md}var bd,t1;function XC(){if(t1)return bd;t1=1;var r=Ug(),e=Bu(),t=YC(),n=cr();function a(i,o){var s=n(i)?r:e;return s(i,t(o))}return bd=a,bd}var wd,r1;function ZC(){return r1||(r1=1,wd=XC()),wd}var _d,n1;function qI(){if(n1)return _d;n1=1;var r=Bu();function e(t,n){var a=[];return r(t,function(i,o,s){n(i,o,s)&&a.push(i)}),a}return _d=e,_d}var xd,a1;function zI(){if(a1)return xd;a1=1;var r="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,r),this}return xd=e,xd}var Sd,i1;function GI(){if(i1)return Sd;i1=1;function r(e){return this.__data__.has(e)}return Sd=r,Sd}var Cd,o1;function QC(){if(o1)return Cd;o1=1;var r=Vg(),e=zI(),t=GI();function n(a){var i=-1,o=a==null?0:a.length;for(this.__data__=new r;++i<o;)this.add(a[i])}return n.prototype.add=n.prototype.push=e,n.prototype.has=t,Cd=n,Cd}var Ed,s1;function $I(){if(s1)return Ed;s1=1;function r(e,t){for(var n=-1,a=e==null?0:e.length;++n<a;)if(t(e[n],n,e))return!0;return!1}return Ed=r,Ed}var Td,u1;function JC(){if(u1)return Td;u1=1;function r(e,t){return e.has(t)}return Td=r,Td}var Pd,l1;function eE(){if(l1)return Pd;l1=1;var r=QC(),e=$I(),t=JC(),n=1,a=2;function i(o,s,u,l,c,f){var d=u&n,h=o.length,v=s.length;if(h!=v&&!(d&&v>h))return!1;var m=f.get(o),_=f.get(s);if(m&&_)return m==s&&_==o;var b=-1,w=!0,y=u&a?new r:void 0;for(f.set(o,s),f.set(s,o);++b<h;){var x=o[b],C=s[b];if(l)var E=d?l(C,x,b,s,o,f):l(x,C,b,o,s,f);if(E!==void 0){if(E)continue;w=!1;break}if(y){if(!e(s,function(p,P){if(!t(y,P)&&(x===p||c(x,p,u,l,f)))return y.push(P)})){w=!1;break}}else if(!(x===C||c(x,C,u,l,f))){w=!1;break}}return f.delete(o),f.delete(s),w}return Pd=i,Pd}var Ad,c1;function VI(){if(c1)return Ad;c1=1;function r(e){var t=-1,n=Array(e.size);return e.forEach(function(a,i){n[++t]=[i,a]}),n}return Ad=r,Ad}var kd,f1;function ey(){if(f1)return kd;f1=1;function r(e){var t=-1,n=Array(e.size);return e.forEach(function(a){n[++t]=a}),n}return kd=r,kd}var Md,d1;function UI(){if(d1)return Md;d1=1;var r=Qi(),e=UC(),t=Zi(),n=eE(),a=VI(),i=ey(),o=1,s=2,u="[object Boolean]",l="[object Date]",c="[object Error]",f="[object Map]",d="[object Number]",h="[object RegExp]",v="[object Set]",m="[object String]",_="[object Symbol]",b="[object ArrayBuffer]",w="[object DataView]",y=r?r.prototype:void 0,x=y?y.valueOf:void 0;function C(E,p,P,T,R,M,N){switch(P){case w:if(E.byteLength!=p.byteLength||E.byteOffset!=p.byteOffset)return!1;E=E.buffer,p=p.buffer;case b:return!(E.byteLength!=p.byteLength||!M(new e(E),new e(p)));case u:case l:case d:return t(+E,+p);case c:return E.name==p.name&&E.message==p.message;case h:case m:return E==p+"";case f:var B=a;case v:var q=T&o;if(B||(B=i),E.size!=p.size&&!q)return!1;var Z=N.get(E);if(Z)return Z==p;T|=s,N.set(E,p);var Q=n(B(E),B(p),T,R,M,N);return N.delete(E),Q;case _:if(x)return x.call(E)==x.call(p)}return!1}return Md=C,Md}var Od,h1;function HI(){if(h1)return Od;h1=1;var r=$C(),e=1,t=Object.prototype,n=t.hasOwnProperty;function a(i,o,s,u,l,c){var f=s&e,d=r(i),h=d.length,v=r(o),m=v.length;if(h!=m&&!f)return!1;for(var _=h;_--;){var b=d[_];if(!(f?b in o:n.call(o,b)))return!1}var w=c.get(i),y=c.get(o);if(w&&y)return w==o&&y==i;var x=!0;c.set(i,o),c.set(o,i);for(var C=f;++_<h;){b=d[_];var E=i[b],p=o[b];if(u)var P=f?u(p,E,b,o,i,c):u(E,p,b,i,o,c);if(!(P===void 0?E===p||l(E,p,s,u,c):P)){x=!1;break}C||(C=b=="constructor")}if(x&&!C){var T=i.constructor,R=o.constructor;T!=R&&"constructor"in i&&"constructor"in o&&!(typeof T=="function"&&T instanceof T&&typeof R=="function"&&R instanceof R)&&(x=!1)}return c.delete(i),c.delete(o),x}return Od=a,Od}var Dd,v1;function jI(){if(v1)return Dd;v1=1;var r=Ou(),e=eE(),t=UI(),n=HI(),a=eo(),i=cr(),o=Ji(),s=as(),u=1,l="[object Arguments]",c="[object Array]",f="[object Object]",d=Object.prototype,h=d.hasOwnProperty;function v(m,_,b,w,y,x){var C=i(m),E=i(_),p=C?c:a(m),P=E?c:a(_);p=p==l?f:p,P=P==l?f:P;var T=p==f,R=P==f,M=p==P;if(M&&o(m)){if(!o(_))return!1;C=!0,T=!1}if(M&&!T)return x||(x=new r),C||s(m)?e(m,_,b,w,y,x):t(m,_,p,b,w,y,x);if(!(b&u)){var N=T&&h.call(m,"__wrapped__"),B=R&&h.call(_,"__wrapped__");if(N||B){var q=N?m.value():m,Z=B?_.value():_;return x||(x=new r),y(q,Z,b,w,x)}}return M?(x||(x=new r),n(m,_,b,w,y,x)):!1}return Dd=v,Dd}var Rd,p1;function tE(){if(p1)return Rd;p1=1;var r=jI(),e=Fn();function t(n,a,i,o,s){return n===a?!0:n==null||a==null||!e(n)&&!e(a)?n!==n&&a!==a:r(n,a,i,o,t,s)}return Rd=t,Rd}var Id,g1;function WI(){if(g1)return Id;g1=1;var r=Ou(),e=tE(),t=1,n=2;function a(i,o,s,u){var l=s.length,c=l,f=!u;if(i==null)return!c;for(i=Object(i);l--;){var d=s[l];if(f&&d[2]?d[1]!==i[d[0]]:!(d[0]in i))return!1}for(;++l<c;){d=s[l];var h=d[0],v=i[h],m=d[1];if(f&&d[2]){if(v===void 0&&!(h in i))return!1}else{var _=new r;if(u)var b=u(v,m,h,i,o,_);if(!(b===void 0?e(m,v,t|n,u,_):b))return!1}}return!0}return Id=a,Id}var Ld,y1;function rE(){if(y1)return Ld;y1=1;var r=sn();function e(t){return t===t&&!r(t)}return Ld=e,Ld}var Nd,m1;function KI(){if(m1)return Nd;m1=1;var r=rE(),e=ka();function t(n){for(var a=e(n),i=a.length;i--;){var o=a[i],s=n[o];a[i]=[o,s,r(s)]}return a}return Nd=t,Nd}var Fd,b1;function nE(){if(b1)return Fd;b1=1;function r(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}return Fd=r,Fd}var Bd,w1;function YI(){if(w1)return Bd;w1=1;var r=WI(),e=KI(),t=nE();function n(a){var i=e(a);return i.length==1&&i[0][2]?t(i[0][0],i[0][1]):function(o){return o===a||r(o,a,i)}}return Bd=n,Bd}var qd,_1;function to(){if(_1)return qd;_1=1;var r=ai(),e=Fn(),t="[object Symbol]";function n(a){return typeof a=="symbol"||e(a)&&r(a)==t}return qd=n,qd}var zd,x1;function ty(){if(x1)return zd;x1=1;var r=cr(),e=to(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,o){if(r(i))return!1;var s=typeof i;return s=="number"||s=="symbol"||s=="boolean"||i==null||e(i)?!0:n.test(i)||!t.test(i)||o!=null&&i in Object(o)}return zd=a,zd}var Gd,S1;function XI(){if(S1)return Gd;S1=1;var r=Vg(),e="Expected a function";function t(n,a){if(typeof n!="function"||a!=null&&typeof a!="function")throw new TypeError(e);var i=function(){var o=arguments,s=a?a.apply(this,o):o[0],u=i.cache;if(u.has(s))return u.get(s);var l=n.apply(this,o);return i.cache=u.set(s,l)||u,l};return i.cache=new(t.Cache||r),i}return t.Cache=r,Gd=t,Gd}var $d,C1;function ZI(){if(C1)return $d;C1=1;var r=XI(),e=500;function t(n){var a=r(n,function(o){return i.size===e&&i.clear(),o}),i=a.cache;return a}return $d=t,$d}var Vd,E1;function QI(){if(E1)return Vd;E1=1;var r=ZI(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,n=r(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(e,function(o,s,u,l){i.push(u?l.replace(t,"$1"):s||o)}),i});return Vd=n,Vd}var Ud,T1;function qu(){if(T1)return Ud;T1=1;function r(e,t){for(var n=-1,a=e==null?0:e.length,i=Array(a);++n<a;)i[n]=t(e[n],n,e);return i}return Ud=r,Ud}var Hd,P1;function JI(){if(P1)return Hd;P1=1;var r=Qi(),e=qu(),t=cr(),n=to(),a=1/0,i=r?r.prototype:void 0,o=i?i.toString:void 0;function s(u){if(typeof u=="string")return u;if(t(u))return e(u,s)+"";if(n(u))return o?o.call(u):"";var l=u+"";return l=="0"&&1/u==-a?"-0":l}return Hd=s,Hd}var jd,A1;function aE(){if(A1)return jd;A1=1;var r=JI();function e(t){return t==null?"":r(t)}return jd=e,jd}var Wd,k1;function zu(){if(k1)return Wd;k1=1;var r=cr(),e=ty(),t=QI(),n=aE();function a(i,o){return r(i)?i:e(i,o)?[i]:t(n(i))}return Wd=a,Wd}var Kd,M1;function is(){if(M1)return Kd;M1=1;var r=to(),e=1/0;function t(n){if(typeof n=="string"||r(n))return n;var a=n+"";return a=="0"&&1/n==-e?"-0":a}return Kd=t,Kd}var Yd,O1;function Gu(){if(O1)return Yd;O1=1;var r=zu(),e=is();function t(n,a){a=r(a,n);for(var i=0,o=a.length;n!=null&&i<o;)n=n[e(a[i++])];return i&&i==o?n:void 0}return Yd=t,Yd}var Xd,D1;function eL(){if(D1)return Xd;D1=1;var r=Gu();function e(t,n,a){var i=t==null?void 0:r(t,n);return i===void 0?a:i}return Xd=e,Xd}var Zd,R1;function tL(){if(R1)return Zd;R1=1;function r(e,t){return e!=null&&t in Object(e)}return Zd=r,Zd}var Qd,I1;function iE(){if(I1)return Qd;I1=1;var r=zu(),e=ns(),t=cr(),n=Iu(),a=Hg(),i=is();function o(s,u,l){u=r(u,s);for(var c=-1,f=u.length,d=!1;++c<f;){var h=i(u[c]);if(!(d=s!=null&&l(s,h)))break;s=s[h]}return d||++c!=f?d:(f=s==null?0:s.length,!!f&&a(f)&&n(h,f)&&(t(s)||e(s)))}return Qd=o,Qd}var Jd,L1;function oE(){if(L1)return Jd;L1=1;var r=tL(),e=iE();function t(n,a){return n!=null&&e(n,a,r)}return Jd=t,Jd}var eh,N1;function rL(){if(N1)return eh;N1=1;var r=tE(),e=eL(),t=oE(),n=ty(),a=rE(),i=nE(),o=is(),s=1,u=2;function l(c,f){return n(c)&&a(f)?i(o(c),f):function(d){var h=e(d,c);return h===void 0&&h===f?t(d,c):r(f,h,s|u)}}return eh=l,eh}var th,F1;function sE(){if(F1)return th;F1=1;function r(e){return function(t){return t==null?void 0:t[e]}}return th=r,th}var rh,B1;function nL(){if(B1)return rh;B1=1;var r=Gu();function e(t){return function(n){return r(n,t)}}return rh=e,rh}var nh,q1;function aL(){if(q1)return nh;q1=1;var r=sE(),e=nL(),t=ty(),n=is();function a(i){return t(i)?r(n(i)):e(i)}return nh=a,nh}var ah,z1;function ea(){if(z1)return ah;z1=1;var r=YI(),e=rL(),t=si(),n=cr(),a=aL();function i(o){return typeof o=="function"?o:o==null?t:typeof o=="object"?n(o)?e(o[0],o[1]):r(o):a(o)}return ah=i,ah}var ih,G1;function uE(){if(G1)return ih;G1=1;var r=BC(),e=qI(),t=ea(),n=cr();function a(i,o){var s=n(i)?r:e;return s(i,t(o,3))}return ih=a,ih}var oh,$1;function iL(){if($1)return oh;$1=1;var r=Object.prototype,e=r.hasOwnProperty;function t(n,a){return n!=null&&e.call(n,a)}return oh=t,oh}var sh,V1;function lE(){if(V1)return sh;V1=1;var r=iL(),e=iE();function t(n,a){return n!=null&&e(n,a,r)}return sh=t,sh}var uh,U1;function oL(){if(U1)return uh;U1=1;var r=Wg(),e=eo(),t=ns(),n=cr(),a=Jn(),i=Ji(),o=Nu(),s=as(),u="[object Map]",l="[object Set]",c=Object.prototype,f=c.hasOwnProperty;function d(h){if(h==null)return!0;if(a(h)&&(n(h)||typeof h=="string"||typeof h.splice=="function"||i(h)||s(h)||t(h)))return!h.length;var v=e(h);if(v==u||v==l)return!h.size;if(o(h))return!r(h).length;for(var m in h)if(f.call(h,m))return!1;return!0}return uh=d,uh}var lh,H1;function cE(){if(H1)return lh;H1=1;function r(e){return e===void 0}return lh=r,lh}var ch,j1;function fE(){if(j1)return ch;j1=1;var r=Bu(),e=Jn();function t(n,a){var i=-1,o=e(n)?Array(n.length):[];return r(n,function(s,u,l){o[++i]=a(s,u,l)}),o}return ch=t,ch}var fh,W1;function dE(){if(W1)return fh;W1=1;var r=qu(),e=ea(),t=fE(),n=cr();function a(i,o){var s=n(i)?r:t;return s(i,e(o,3))}return fh=a,fh}var dh,K1;function sL(){if(K1)return dh;K1=1;function r(e,t,n,a){var i=-1,o=e==null?0:e.length;for(a&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}return dh=r,dh}var hh,Y1;function uL(){if(Y1)return hh;Y1=1;function r(e,t,n,a,i){return i(e,function(o,s,u){n=a?(a=!1,o):t(n,o,s,u)}),n}return hh=r,hh}var vh,X1;function hE(){if(X1)return vh;X1=1;var r=sL(),e=Bu(),t=ea(),n=uL(),a=cr();function i(o,s,u){var l=a(o)?r:n,c=arguments.length<3;return l(o,t(s,4),u,c,e)}return vh=i,vh}var ph,Z1;function lL(){if(Z1)return ph;Z1=1;var r=ai(),e=cr(),t=Fn(),n="[object String]";function a(i){return typeof i=="string"||!e(i)&&t(i)&&r(i)==n}return ph=a,ph}var gh,Q1;function cL(){if(Q1)return gh;Q1=1;var r=sE(),e=r("length");return gh=e,gh}var yh,J1;function fL(){if(J1)return yh;J1=1;var r="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",a=e+t+n,i="\\ufe0e\\ufe0f",o="\\u200d",s=RegExp("["+o+r+a+i+"]");function u(l){return s.test(l)}return yh=u,yh}var mh,ew;function dL(){if(ew)return mh;ew=1;var r="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",a=e+t+n,i="\\ufe0e\\ufe0f",o="["+r+"]",s="["+a+"]",u="\\ud83c[\\udffb-\\udfff]",l="(?:"+s+"|"+u+")",c="[^"+r+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",d="[\\ud800-\\udbff][\\udc00-\\udfff]",h="\\u200d",v=l+"?",m="["+i+"]?",_="(?:"+h+"(?:"+[c,f,d].join("|")+")"+m+v+")*",b=m+v+_,w="(?:"+[c+s+"?",s,f,d,o].join("|")+")",y=RegExp(u+"(?="+u+")|"+w+b,"g");function x(C){for(var E=y.lastIndex=0;y.test(C);)++E;return E}return mh=x,mh}var bh,tw;function hL(){if(tw)return bh;tw=1;var r=cL(),e=fL(),t=dL();function n(a){return e(a)?t(a):r(a)}return bh=n,bh}var wh,rw;function vL(){if(rw)return wh;rw=1;var r=Wg(),e=eo(),t=Jn(),n=lL(),a=hL(),i="[object Map]",o="[object Set]";function s(u){if(u==null)return 0;if(t(u))return n(u)?a(u):u.length;var l=e(u);return l==i||l==o?u.size:r(u).length}return wh=s,wh}var _h,nw;function pL(){if(nw)return _h;nw=1;var r=Ug(),e=jC(),t=Jg(),n=ea(),a=Fu(),i=cr(),o=Ji(),s=ts(),u=sn(),l=as();function c(f,d,h){var v=i(f),m=v||o(f)||l(f);if(d=n(d,4),h==null){var _=f&&f.constructor;m?h=v?new _:[]:u(f)?h=s(_)?e(a(f)):{}:h={}}return(m?r:t)(f,function(b,w,y){return d(h,b,w,y)}),h}return _h=c,_h}var xh,aw;function gL(){if(aw)return xh;aw=1;var r=Qi(),e=ns(),t=cr(),n=r?r.isConcatSpreadable:void 0;function a(i){return t(i)||e(i)||!!(n&&i&&i[n])}return xh=a,xh}var Sh,iw;function ry(){if(iw)return Sh;iw=1;var r=Yg(),e=gL();function t(n,a,i,o,s){var u=-1,l=n.length;for(i||(i=e),s||(s=[]);++u<l;){var c=n[u];a>0&&i(c)?a>1?t(c,a-1,i,o,s):r(s,c):o||(s[s.length]=c)}return s}return Sh=t,Sh}var Ch,ow;function yL(){if(ow)return Ch;ow=1;function r(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}return Ch=r,Ch}var Eh,sw;function vE(){if(sw)return Eh;sw=1;var r=yL(),e=Math.max;function t(n,a,i){return a=e(a===void 0?n.length-1:a,0),function(){for(var o=arguments,s=-1,u=e(o.length-a,0),l=Array(u);++s<u;)l[s]=o[a+s];s=-1;for(var c=Array(a+1);++s<a;)c[s]=o[s];return c[a]=i(l),r(n,this,c)}}return Eh=t,Eh}var Th,uw;function mL(){if(uw)return Th;uw=1;var r=Zg(),e=RC(),t=si(),n=e?function(a,i){return e(a,"toString",{configurable:!0,enumerable:!1,value:r(i),writable:!0})}:t;return Th=n,Th}var Ph,lw;function bL(){if(lw)return Ph;lw=1;var r=800,e=16,t=Date.now;function n(a){var i=0,o=0;return function(){var s=t(),u=e-(s-o);if(o=s,u>0){if(++i>=r)return arguments[0]}else i=0;return a.apply(void 0,arguments)}}return Ph=n,Ph}var Ah,cw;function pE(){if(cw)return Ah;cw=1;var r=mL(),e=bL(),t=e(r);return Ah=t,Ah}var kh,fw;function $u(){if(fw)return kh;fw=1;var r=si(),e=vE(),t=pE();function n(a,i){return t(e(a,i,r),a+"")}return kh=n,kh}var Mh,dw;function gE(){if(dw)return Mh;dw=1;function r(e,t,n,a){for(var i=e.length,o=n+(a?1:-1);a?o--:++o<i;)if(t(e[o],o,e))return o;return-1}return Mh=r,Mh}var Oh,hw;function wL(){if(hw)return Oh;hw=1;function r(e){return e!==e}return Oh=r,Oh}var Dh,vw;function _L(){if(vw)return Dh;vw=1;function r(e,t,n){for(var a=n-1,i=e.length;++a<i;)if(e[a]===t)return a;return-1}return Dh=r,Dh}var Rh,pw;function xL(){if(pw)return Rh;pw=1;var r=gE(),e=wL(),t=_L();function n(a,i,o){return i===i?t(a,i,o):r(a,e,o)}return Rh=n,Rh}var Ih,gw;function SL(){if(gw)return Ih;gw=1;var r=xL();function e(t,n){var a=t==null?0:t.length;return!!a&&r(t,n,0)>-1}return Ih=e,Ih}var Lh,yw;function CL(){if(yw)return Lh;yw=1;function r(e,t,n){for(var a=-1,i=e==null?0:e.length;++a<i;)if(n(t,e[a]))return!0;return!1}return Lh=r,Lh}var Nh,mw;function EL(){if(mw)return Nh;mw=1;function r(){}return Nh=r,Nh}var Fh,bw;function TL(){if(bw)return Fh;bw=1;var r=VC(),e=EL(),t=ey(),n=1/0,a=r&&1/t(new r([,-0]))[1]==n?function(i){return new r(i)}:e;return Fh=a,Fh}var Bh,ww;function PL(){if(ww)return Bh;ww=1;var r=QC(),e=SL(),t=CL(),n=JC(),a=TL(),i=ey(),o=200;function s(u,l,c){var f=-1,d=e,h=u.length,v=!0,m=[],_=m;if(c)v=!1,d=t;else if(h>=o){var b=l?null:a(u);if(b)return i(b);v=!1,d=n,_=new r}else _=l?[]:m;e:for(;++f<h;){var w=u[f],y=l?l(w):w;if(w=c||w!==0?w:0,v&&y===y){for(var x=_.length;x--;)if(_[x]===y)continue e;l&&_.push(y),m.push(w)}else d(_,y,c)||(_!==m&&_.push(y),m.push(w))}return m}return Bh=s,Bh}var qh,_w;function yE(){if(_w)return qh;_w=1;var r=Jn(),e=Fn();function t(n){return e(n)&&r(n)}return qh=t,qh}var zh,xw;function AL(){if(xw)return zh;xw=1;var r=ry(),e=$u(),t=PL(),n=yE(),a=e(function(i){return t(r(i,1,n,!0))});return zh=a,zh}var Gh,Sw;function kL(){if(Sw)return Gh;Sw=1;var r=qu();function e(t,n){return r(n,function(a){return t[a]})}return Gh=e,Gh}var $h,Cw;function mE(){if(Cw)return $h;Cw=1;var r=kL(),e=ka();function t(n){return n==null?[]:r(n,e(n))}return $h=t,$h}var Vh,Ew;function un(){if(Ew)return Vh;Ew=1;var r;if(typeof Gg=="function")try{r={clone:NI(),constant:Zg(),each:ZC(),filter:uE(),has:lE(),isArray:cr(),isEmpty:oL(),isFunction:ts(),isUndefined:cE(),keys:ka(),map:dE(),reduce:hE(),size:vL(),transform:pL(),union:AL(),values:mE()}}catch{}return r||(r=window._),Vh=r,Vh}var Uh,Tw;function ny(){if(Tw)return Uh;Tw=1;var r=un();Uh=a;var e="\0",t="\0",n="";function a(c){this._isDirected=r.has(c,"directed")?c.directed:!0,this._isMultigraph=r.has(c,"multigraph")?c.multigraph:!1,this._isCompound=r.has(c,"compound")?c.compound:!1,this._label=void 0,this._defaultNodeLabelFn=r.constant(void 0),this._defaultEdgeLabelFn=r.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[t]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}a.prototype._nodeCount=0,a.prototype._edgeCount=0,a.prototype.isDirected=function(){return this._isDirected},a.prototype.isMultigraph=function(){return this._isMultigraph},a.prototype.isCompound=function(){return this._isCompound},a.prototype.setGraph=function(c){return this._label=c,this},a.prototype.graph=function(){return this._label},a.prototype.setDefaultNodeLabel=function(c){return r.isFunction(c)||(c=r.constant(c)),this._defaultNodeLabelFn=c,this},a.prototype.nodeCount=function(){return this._nodeCount},a.prototype.nodes=function(){return r.keys(this._nodes)},a.prototype.sources=function(){var c=this;return r.filter(this.nodes(),function(f){return r.isEmpty(c._in[f])})},a.prototype.sinks=function(){var c=this;return r.filter(this.nodes(),function(f){return r.isEmpty(c._out[f])})},a.prototype.setNodes=function(c,f){var d=arguments,h=this;return r.each(c,function(v){d.length>1?h.setNode(v,f):h.setNode(v)}),this},a.prototype.setNode=function(c,f){return r.has(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=f),this):(this._nodes[c]=arguments.length>1?f:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=t,this._children[c]={},this._children[t][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)},a.prototype.node=function(c){return this._nodes[c]},a.prototype.hasNode=function(c){return r.has(this._nodes,c)},a.prototype.removeNode=function(c){var f=this;if(r.has(this._nodes,c)){var d=function(h){f.removeEdge(f._edgeObjs[h])};delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],r.each(this.children(c),function(h){f.setParent(h)}),delete this._children[c]),r.each(r.keys(this._in[c]),d),delete this._in[c],delete this._preds[c],r.each(r.keys(this._out[c]),d),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this},a.prototype.setParent=function(c,f){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(r.isUndefined(f))f=t;else{f+="";for(var d=f;!r.isUndefined(d);d=this.parent(d))if(d===c)throw new Error("Setting "+f+" as parent of "+c+" would create a cycle");this.setNode(f)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=f,this._children[f][c]=!0,this},a.prototype._removeFromParentsChildList=function(c){delete this._children[this._parent[c]][c]},a.prototype.parent=function(c){if(this._isCompound){var f=this._parent[c];if(f!==t)return f}},a.prototype.children=function(c){if(r.isUndefined(c)&&(c=t),this._isCompound){var f=this._children[c];if(f)return r.keys(f)}else{if(c===t)return this.nodes();if(this.hasNode(c))return[]}},a.prototype.predecessors=function(c){var f=this._preds[c];if(f)return r.keys(f)},a.prototype.successors=function(c){var f=this._sucs[c];if(f)return r.keys(f)},a.prototype.neighbors=function(c){var f=this.predecessors(c);if(f)return r.union(f,this.successors(c))},a.prototype.isLeaf=function(c){var f;return this.isDirected()?f=this.successors(c):f=this.neighbors(c),f.length===0},a.prototype.filterNodes=function(c){var f=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});f.setGraph(this.graph());var d=this;r.each(this._nodes,function(m,_){c(_)&&f.setNode(_,m)}),r.each(this._edgeObjs,function(m){f.hasNode(m.v)&&f.hasNode(m.w)&&f.setEdge(m,d.edge(m))});var h={};function v(m){var _=d.parent(m);return _===void 0||f.hasNode(_)?(h[m]=_,_):_ in h?h[_]:v(_)}return this._isCompound&&r.each(f.nodes(),function(m){f.setParent(m,v(m))}),f},a.prototype.setDefaultEdgeLabel=function(c){return r.isFunction(c)||(c=r.constant(c)),this._defaultEdgeLabelFn=c,this},a.prototype.edgeCount=function(){return this._edgeCount},a.prototype.edges=function(){return r.values(this._edgeObjs)},a.prototype.setPath=function(c,f){var d=this,h=arguments;return r.reduce(c,function(v,m){return h.length>1?d.setEdge(v,m,f):d.setEdge(v,m),m}),this},a.prototype.setEdge=function(){var c,f,d,h,v=!1,m=arguments[0];typeof m=="object"&&m!==null&&"v"in m?(c=m.v,f=m.w,d=m.name,arguments.length===2&&(h=arguments[1],v=!0)):(c=m,f=arguments[1],d=arguments[3],arguments.length>2&&(h=arguments[2],v=!0)),c=""+c,f=""+f,r.isUndefined(d)||(d=""+d);var _=s(this._isDirected,c,f,d);if(r.has(this._edgeLabels,_))return v&&(this._edgeLabels[_]=h),this;if(!r.isUndefined(d)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(f),this._edgeLabels[_]=v?h:this._defaultEdgeLabelFn(c,f,d);var b=u(this._isDirected,c,f,d);return c=b.v,f=b.w,Object.freeze(b),this._edgeObjs[_]=b,i(this._preds[f],c),i(this._sucs[c],f),this._in[f][_]=b,this._out[c][_]=b,this._edgeCount++,this},a.prototype.edge=function(c,f,d){var h=arguments.length===1?l(this._isDirected,arguments[0]):s(this._isDirected,c,f,d);return this._edgeLabels[h]},a.prototype.hasEdge=function(c,f,d){var h=arguments.length===1?l(this._isDirected,arguments[0]):s(this._isDirected,c,f,d);return r.has(this._edgeLabels,h)},a.prototype.removeEdge=function(c,f,d){var h=arguments.length===1?l(this._isDirected,arguments[0]):s(this._isDirected,c,f,d),v=this._edgeObjs[h];return v&&(c=v.v,f=v.w,delete this._edgeLabels[h],delete this._edgeObjs[h],o(this._preds[f],c),o(this._sucs[c],f),delete this._in[f][h],delete this._out[c][h],this._edgeCount--),this},a.prototype.inEdges=function(c,f){var d=this._in[c];if(d){var h=r.values(d);return f?r.filter(h,function(v){return v.v===f}):h}},a.prototype.outEdges=function(c,f){var d=this._out[c];if(d){var h=r.values(d);return f?r.filter(h,function(v){return v.w===f}):h}},a.prototype.nodeEdges=function(c,f){var d=this.inEdges(c,f);if(d)return d.concat(this.outEdges(c,f))};function i(c,f){c[f]?c[f]++:c[f]=1}function o(c,f){--c[f]||delete c[f]}function s(c,f,d,h){var v=""+f,m=""+d;if(!c&&v>m){var _=v;v=m,m=_}return v+n+m+n+(r.isUndefined(h)?e:h)}function u(c,f,d,h){var v=""+f,m=""+d;if(!c&&v>m){var _=v;v=m,m=_}var b={v,w:m};return h&&(b.name=h),b}function l(c,f){return s(c,f.v,f.w,f.name)}return Uh}var Hh,Pw;function ML(){return Pw||(Pw=1,Hh="2.1.8"),Hh}var jh,Aw;function OL(){return Aw||(Aw=1,jh={Graph:ny(),version:ML()}),jh}var Wh,kw;function DL(){if(kw)return Wh;kw=1;var r=un(),e=ny();Wh={write:t,read:i};function t(o){var s={options:{directed:o.isDirected(),multigraph:o.isMultigraph(),compound:o.isCompound()},nodes:n(o),edges:a(o)};return r.isUndefined(o.graph())||(s.value=r.clone(o.graph())),s}function n(o){return r.map(o.nodes(),function(s){var u=o.node(s),l=o.parent(s),c={v:s};return r.isUndefined(u)||(c.value=u),r.isUndefined(l)||(c.parent=l),c})}function a(o){return r.map(o.edges(),function(s){var u=o.edge(s),l={v:s.v,w:s.w};return r.isUndefined(s.name)||(l.name=s.name),r.isUndefined(u)||(l.value=u),l})}function i(o){var s=new e(o.options).setGraph(o.value);return r.each(o.nodes,function(u){s.setNode(u.v,u.value),u.parent&&s.setParent(u.v,u.parent)}),r.each(o.edges,function(u){s.setEdge({v:u.v,w:u.w,name:u.name},u.value)}),s}return Wh}var Kh,Mw;function RL(){if(Mw)return Kh;Mw=1;var r=un();Kh=e;function e(t){var n={},a=[],i;function o(s){r.has(n,s)||(n[s]=!0,i.push(s),r.each(t.successors(s),o),r.each(t.predecessors(s),o))}return r.each(t.nodes(),function(s){i=[],o(s),i.length&&a.push(i)}),a}return Kh}var Yh,Ow;function bE(){if(Ow)return Yh;Ow=1;var r=un();Yh=e;function e(){this._arr=[],this._keyIndices={}}return e.prototype.size=function(){return this._arr.length},e.prototype.keys=function(){return this._arr.map(function(t){return t.key})},e.prototype.has=function(t){return r.has(this._keyIndices,t)},e.prototype.priority=function(t){var n=this._keyIndices[t];if(n!==void 0)return this._arr[n].priority},e.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},e.prototype.add=function(t,n){var a=this._keyIndices;if(t=String(t),!r.has(a,t)){var i=this._arr,o=i.length;return a[t]=o,i.push({key:t,priority:n}),this._decrease(o),!0}return!1},e.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},e.prototype.decrease=function(t,n){var a=this._keyIndices[t];if(n>this._arr[a].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[a].priority+" New: "+n);this._arr[a].priority=n,this._decrease(a)},e.prototype._heapify=function(t){var n=this._arr,a=2*t,i=a+1,o=t;a<n.length&&(o=n[a].priority<n[o].priority?a:o,i<n.length&&(o=n[i].priority<n[o].priority?i:o),o!==t&&(this._swap(t,o),this._heapify(o)))},e.prototype._decrease=function(t){for(var n=this._arr,a=n[t].priority,i;t!==0&&(i=t>>1,!(n[i].priority<a));)this._swap(t,i),t=i},e.prototype._swap=function(t,n){var a=this._arr,i=this._keyIndices,o=a[t],s=a[n];a[t]=s,a[n]=o,i[s.key]=t,i[o.key]=n},Yh}var Xh,Dw;function wE(){if(Dw)return Xh;Dw=1;var r=un(),e=bE();Xh=n;var t=r.constant(1);function n(i,o,s,u){return a(i,String(o),s||t,u||function(l){return i.outEdges(l)})}function a(i,o,s,u){var l={},c=new e,f,d,h=function(v){var m=v.v!==f?v.v:v.w,_=l[m],b=s(v),w=d.distance+b;if(b<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+v+" Weight: "+b);w<_.distance&&(_.distance=w,_.predecessor=f,c.decrease(m,w))};for(i.nodes().forEach(function(v){var m=v===o?0:Number.POSITIVE_INFINITY;l[v]={distance:m},c.add(v,m)});c.size()>0&&(f=c.removeMin(),d=l[f],d.distance!==Number.POSITIVE_INFINITY);)u(f).forEach(h);return l}return Xh}var Zh,Rw;function IL(){if(Rw)return Zh;Rw=1;var r=wE(),e=un();Zh=t;function t(n,a,i){return e.transform(n.nodes(),function(o,s){o[s]=r(n,s,a,i)},{})}return Zh}var Qh,Iw;function _E(){if(Iw)return Qh;Iw=1;var r=un();Qh=e;function e(t){var n=0,a=[],i={},o=[];function s(u){var l=i[u]={onStack:!0,lowlink:n,index:n++};if(a.push(u),t.successors(u).forEach(function(d){r.has(i,d)?i[d].onStack&&(l.lowlink=Math.min(l.lowlink,i[d].index)):(s(d),l.lowlink=Math.min(l.lowlink,i[d].lowlink))}),l.lowlink===l.index){var c=[],f;do f=a.pop(),i[f].onStack=!1,c.push(f);while(u!==f);o.push(c)}}return t.nodes().forEach(function(u){r.has(i,u)||s(u)}),o}return Qh}var Jh,Lw;function LL(){if(Lw)return Jh;Lw=1;var r=un(),e=_E();Jh=t;function t(n){return r.filter(e(n),function(a){return a.length>1||a.length===1&&n.hasEdge(a[0],a[0])})}return Jh}var ev,Nw;function NL(){if(Nw)return ev;Nw=1;var r=un();ev=t;var e=r.constant(1);function t(a,i,o){return n(a,i||e,o||function(s){return a.outEdges(s)})}function n(a,i,o){var s={},u=a.nodes();return u.forEach(function(l){s[l]={},s[l][l]={distance:0},u.forEach(function(c){l!==c&&(s[l][c]={distance:Number.POSITIVE_INFINITY})}),o(l).forEach(function(c){var f=c.v===l?c.w:c.v,d=i(c);s[l][f]={distance:d,predecessor:l}})}),u.forEach(function(l){var c=s[l];u.forEach(function(f){var d=s[f];u.forEach(function(h){var v=d[l],m=c[h],_=d[h],b=v.distance+m.distance;b<_.distance&&(_.distance=b,_.predecessor=m.predecessor)})})}),s}return ev}var tv,Fw;function xE(){if(Fw)return tv;Fw=1;var r=un();tv=e,e.CycleException=t;function e(n){var a={},i={},o=[];function s(u){if(r.has(i,u))throw new t;r.has(a,u)||(i[u]=!0,a[u]=!0,r.each(n.predecessors(u),s),delete i[u],o.push(u))}if(r.each(n.sinks(),s),r.size(a)!==n.nodeCount())throw new t;return o}function t(){}return t.prototype=new Error,tv}var rv,Bw;function FL(){if(Bw)return rv;Bw=1;var r=xE();rv=e;function e(t){try{r(t)}catch(n){if(n instanceof r.CycleException)return!1;throw n}return!0}return rv}var nv,qw;function SE(){if(qw)return nv;qw=1;var r=un();nv=e;function e(n,a,i){r.isArray(a)||(a=[a]);var o=(n.isDirected()?n.successors:n.neighbors).bind(n),s=[],u={};return r.each(a,function(l){if(!n.hasNode(l))throw new Error("Graph does not have node: "+l);t(n,l,i==="post",u,o,s)}),s}function t(n,a,i,o,s,u){r.has(o,a)||(o[a]=!0,i||u.push(a),r.each(s(a),function(l){t(n,l,i,o,s,u)}),i&&u.push(a))}return nv}var av,zw;function BL(){if(zw)return av;zw=1;var r=SE();av=e;function e(t,n){return r(t,n,"post")}return av}var iv,Gw;function qL(){if(Gw)return iv;Gw=1;var r=SE();iv=e;function e(t,n){return r(t,n,"pre")}return iv}var ov,$w;function zL(){if($w)return ov;$w=1;var r=un(),e=ny(),t=bE();ov=n;function n(a,i){var o=new e,s={},u=new t,l;function c(d){var h=d.v===l?d.w:d.v,v=u.priority(h);if(v!==void 0){var m=i(d);m<v&&(s[h]=l,u.decrease(h,m))}}if(a.nodeCount()===0)return o;r.each(a.nodes(),function(d){u.add(d,Number.POSITIVE_INFINITY),o.setNode(d)}),u.decrease(a.nodes()[0],0);for(var f=!1;u.size()>0;){if(l=u.removeMin(),r.has(s,l))o.setEdge(l,s[l]);else{if(f)throw new Error("Input graph is not connected: "+a);f=!0}a.nodeEdges(l).forEach(c)}return o}return ov}var sv,Vw;function GL(){return Vw||(Vw=1,sv={components:RL(),dijkstra:wE(),dijkstraAll:IL(),findCycles:LL(),floydWarshall:NL(),isAcyclic:FL(),postorder:BL(),preorder:qL(),prim:zL(),tarjan:_E(),topsort:xE()}),sv}var uv,Uw;function $L(){if(Uw)return uv;Uw=1;var r=OL();return uv={Graph:r.Graph,json:DL(),alg:GL(),version:r.version},uv}var lv,Hw;function mn(){if(Hw)return lv;Hw=1;var r;if(typeof Gg=="function")try{r=$L()}catch{}return r||(r=window.graphlib),lv=r,lv}var cv,jw;function VL(){if(jw)return cv;jw=1;var r=KC(),e=1,t=4;function n(a){return r(a,e|t)}return cv=n,cv}var fv,Ww;function Vu(){if(Ww)return fv;Ww=1;var r=Zi(),e=Jn(),t=Iu(),n=sn();function a(i,o,s){if(!n(s))return!1;var u=typeof o;return(u=="number"?e(s)&&t(o,s.length):u=="string"&&o in s)?r(s[o],i):!1}return fv=a,fv}var dv,Kw;function UL(){if(Kw)return dv;Kw=1;var r=$u(),e=Zi(),t=Vu(),n=oi(),a=Object.prototype,i=a.hasOwnProperty,o=r(function(s,u){s=Object(s);var l=-1,c=u.length,f=c>2?u[2]:void 0;for(f&&t(u[0],u[1],f)&&(c=1);++l<c;)for(var d=u[l],h=n(d),v=-1,m=h.length;++v<m;){var _=h[v],b=s[_];(b===void 0||e(b,a[_])&&!i.call(s,_))&&(s[_]=d[_])}return s});return dv=o,dv}var hv,Yw;function HL(){if(Yw)return hv;Yw=1;var r=ea(),e=Jn(),t=ka();function n(a){return function(i,o,s){var u=Object(i);if(!e(i)){var l=r(o,3);i=t(i),o=function(f){return l(u[f],f,u)}}var c=a(i,o,s);return c>-1?u[l?i[c]:c]:void 0}}return hv=n,hv}var vv,Xw;function jL(){if(Xw)return vv;Xw=1;var r=/\s/;function e(t){for(var n=t.length;n--&&r.test(t.charAt(n)););return n}return vv=e,vv}var pv,Zw;function WL(){if(Zw)return pv;Zw=1;var r=jL(),e=/^\s+/;function t(n){return n&&n.slice(0,r(n)+1).replace(e,"")}return pv=t,pv}var gv,Qw;function KL(){if(Qw)return gv;Qw=1;var r=WL(),e=sn(),t=to(),n=NaN,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt;function u(l){if(typeof l=="number")return l;if(t(l))return n;if(e(l)){var c=typeof l.valueOf=="function"?l.valueOf():l;l=e(c)?c+"":c}if(typeof l!="string")return l===0?l:+l;l=r(l);var f=i.test(l);return f||o.test(l)?s(l.slice(2),f?2:8):a.test(l)?n:+l}return gv=u,gv}var yv,Jw;function CE(){if(Jw)return yv;Jw=1;var r=KL(),e=1/0,t=17976931348623157e292;function n(a){if(!a)return a===0?a:0;if(a=r(a),a===e||a===-e){var i=a<0?-1:1;return i*t}return a===a?a:0}return yv=n,yv}var mv,e_;function YL(){if(e_)return mv;e_=1;var r=CE();function e(t){var n=r(t),a=n%1;return n===n?a?n-a:n:0}return mv=e,mv}var bv,t_;function XL(){if(t_)return bv;t_=1;var r=gE(),e=ea(),t=YL(),n=Math.max;function a(i,o,s){var u=i==null?0:i.length;if(!u)return-1;var l=s==null?0:t(s);return l<0&&(l=n(u+l,0)),r(i,e(o,3),l)}return bv=a,bv}var wv,r_;function ZL(){if(r_)return wv;r_=1;var r=HL(),e=XL(),t=r(e);return wv=t,wv}var _v,n_;function EE(){if(n_)return _v;n_=1;var r=ry();function e(t){var n=t==null?0:t.length;return n?r(t,1):[]}return _v=e,_v}var xv,a_;function QL(){if(a_)return xv;a_=1;var r=Qg(),e=YC(),t=oi();function n(a,i){return a==null?a:r(a,e(i),t)}return xv=n,xv}var Sv,i_;function JL(){if(i_)return Sv;i_=1;function r(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}return Sv=r,Sv}var Cv,o_;function eN(){if(o_)return Cv;o_=1;var r=Du(),e=Jg(),t=ea();function n(a,i){var o={};return i=t(i,3),e(a,function(s,u,l){r(o,u,i(s,u,l))}),o}return Cv=n,Cv}var Ev,s_;function ay(){if(s_)return Ev;s_=1;var r=to();function e(t,n,a){for(var i=-1,o=t.length;++i<o;){var s=t[i],u=n(s);if(u!=null&&(l===void 0?u===u&&!r(u):a(u,l)))var l=u,c=s}return c}return Ev=e,Ev}var Tv,u_;function tN(){if(u_)return Tv;u_=1;function r(e,t){return e>t}return Tv=r,Tv}var Pv,l_;function rN(){if(l_)return Pv;l_=1;var r=ay(),e=tN(),t=si();function n(a){return a&&a.length?r(a,t,e):void 0}return Pv=n,Pv}var Av,c_;function TE(){if(c_)return Av;c_=1;var r=Du(),e=Zi();function t(n,a,i){(i!==void 0&&!e(n[a],i)||i===void 0&&!(a in n))&&r(n,a,i)}return Av=t,Av}var kv,f_;function nN(){if(f_)return kv;f_=1;var r=ai(),e=Fu(),t=Fn(),n="[object Object]",a=Function.prototype,i=Object.prototype,o=a.toString,s=i.hasOwnProperty,u=o.call(Object);function l(c){if(!t(c)||r(c)!=n)return!1;var f=e(c);if(f===null)return!0;var d=s.call(f,"constructor")&&f.constructor;return typeof d=="function"&&d instanceof d&&o.call(d)==u}return kv=l,kv}var Mv,d_;function PE(){if(d_)return Mv;d_=1;function r(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}return Mv=r,Mv}var Ov,h_;function aN(){if(h_)return Ov;h_=1;var r=rs(),e=oi();function t(n){return r(n,e(n))}return Ov=t,Ov}var Dv,v_;function iN(){if(v_)return Dv;v_=1;var r=TE(),e=NC(),t=HC(),n=FC(),a=WC(),i=ns(),o=cr(),s=yE(),u=Ji(),l=ts(),c=sn(),f=nN(),d=as(),h=PE(),v=aN();function m(_,b,w,y,x,C,E){var p=h(_,w),P=h(b,w),T=E.get(P);if(T){r(_,w,T);return}var R=C?C(p,P,w+"",_,b,E):void 0,M=R===void 0;if(M){var N=o(P),B=!N&&u(P),q=!N&&!B&&d(P);R=P,N||B||q?o(p)?R=p:s(p)?R=n(p):B?(M=!1,R=e(P,!0)):q?(M=!1,R=t(P,!0)):R=[]:f(P)||i(P)?(R=p,i(p)?R=v(p):(!c(p)||l(p))&&(R=a(P))):M=!1}M&&(E.set(P,R),x(R,P,y,C,E),E.delete(P)),r(_,w,R)}return Dv=m,Dv}var Rv,p_;function oN(){if(p_)return Rv;p_=1;var r=Ou(),e=TE(),t=Qg(),n=iN(),a=sn(),i=oi(),o=PE();function s(u,l,c,f,d){u!==l&&t(l,function(h,v){if(d||(d=new r),a(h))n(u,l,v,c,s,f,d);else{var m=f?f(o(u,v),h,v+"",u,l,d):void 0;m===void 0&&(m=h),e(u,v,m)}},i)}return Rv=s,Rv}var Iv,g_;function sN(){if(g_)return Iv;g_=1;var r=$u(),e=Vu();function t(n){return r(function(a,i){var o=-1,s=i.length,u=s>1?i[s-1]:void 0,l=s>2?i[2]:void 0;for(u=n.length>3&&typeof u=="function"?(s--,u):void 0,l&&e(i[0],i[1],l)&&(u=s<3?void 0:u,s=1),a=Object(a);++o<s;){var c=i[o];c&&n(a,c,o,u)}return a})}return Iv=t,Iv}var Lv,y_;function uN(){if(y_)return Lv;y_=1;var r=oN(),e=sN(),t=e(function(n,a,i){r(n,a,i)});return Lv=t,Lv}var Nv,m_;function AE(){if(m_)return Nv;m_=1;function r(e,t){return e<t}return Nv=r,Nv}var Fv,b_;function lN(){if(b_)return Fv;b_=1;var r=ay(),e=AE(),t=si();function n(a){return a&&a.length?r(a,t,e):void 0}return Fv=n,Fv}var Bv,w_;function cN(){if(w_)return Bv;w_=1;var r=ay(),e=ea(),t=AE();function n(a,i){return a&&a.length?r(a,e(i,2),t):void 0}return Bv=n,Bv}var qv,__;function fN(){if(__)return qv;__=1;var r=bn(),e=function(){return r.Date.now()};return qv=e,qv}var zv,x_;function dN(){if(x_)return zv;x_=1;var r=Ru(),e=zu(),t=Iu(),n=sn(),a=is();function i(o,s,u,l){if(!n(o))return o;s=e(s,o);for(var c=-1,f=s.length,d=f-1,h=o;h!=null&&++c<f;){var v=a(s[c]),m=u;if(v==="__proto__"||v==="constructor"||v==="prototype")return o;if(c!=d){var _=h[v];m=l?l(_,v,h):void 0,m===void 0&&(m=n(_)?_:t(s[c+1])?[]:{})}r(h,v,m),h=h[v]}return o}return zv=i,zv}var Gv,S_;function hN(){if(S_)return Gv;S_=1;var r=Gu(),e=dN(),t=zu();function n(a,i,o){for(var s=-1,u=i.length,l={};++s<u;){var c=i[s],f=r(a,c);o(f,c)&&e(l,t(c,a),f)}return l}return Gv=n,Gv}var $v,C_;function vN(){if(C_)return $v;C_=1;var r=hN(),e=oE();function t(n,a){return r(n,a,function(i,o){return e(n,o)})}return $v=t,$v}var Vv,E_;function pN(){if(E_)return Vv;E_=1;var r=EE(),e=vE(),t=pE();function n(a){return t(e(a,void 0,r),a+"")}return Vv=n,Vv}var Uv,T_;function gN(){if(T_)return Uv;T_=1;var r=vN(),e=pN(),t=e(function(n,a){return n==null?{}:r(n,a)});return Uv=t,Uv}var Hv,P_;function yN(){if(P_)return Hv;P_=1;var r=Math.ceil,e=Math.max;function t(n,a,i,o){for(var s=-1,u=e(r((a-n)/(i||1)),0),l=Array(u);u--;)l[o?u:++s]=n,n+=i;return l}return Hv=t,Hv}var jv,A_;function mN(){if(A_)return jv;A_=1;var r=yN(),e=Vu(),t=CE();function n(a){return function(i,o,s){return s&&typeof s!="number"&&e(i,o,s)&&(o=s=void 0),i=t(i),o===void 0?(o=i,i=0):o=t(o),s=s===void 0?i<o?1:-1:t(s),r(i,o,s,a)}}return jv=n,jv}var Wv,k_;function bN(){if(k_)return Wv;k_=1;var r=mN(),e=r();return Wv=e,Wv}var Kv,M_;function wN(){if(M_)return Kv;M_=1;function r(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}return Kv=r,Kv}var Yv,O_;function _N(){if(O_)return Yv;O_=1;var r=to();function e(t,n){if(t!==n){var a=t!==void 0,i=t===null,o=t===t,s=r(t),u=n!==void 0,l=n===null,c=n===n,f=r(n);if(!l&&!f&&!s&&t>n||s&&u&&c&&!l&&!f||i&&u&&c||!a&&c||!o)return 1;if(!i&&!s&&!f&&t<n||f&&a&&o&&!i&&!s||l&&a&&o||!u&&o||!c)return-1}return 0}return Yv=e,Yv}var Xv,D_;function xN(){if(D_)return Xv;D_=1;var r=_N();function e(t,n,a){for(var i=-1,o=t.criteria,s=n.criteria,u=o.length,l=a.length;++i<u;){var c=r(o[i],s[i]);if(c){if(i>=l)return c;var f=a[i];return c*(f=="desc"?-1:1)}}return t.index-n.index}return Xv=e,Xv}var Zv,R_;function SN(){if(R_)return Zv;R_=1;var r=qu(),e=Gu(),t=ea(),n=fE(),a=wN(),i=Lu(),o=xN(),s=si(),u=cr();function l(c,f,d){f.length?f=r(f,function(m){return u(m)?function(_){return e(_,m.length===1?m[0]:m)}:m}):f=[s];var h=-1;f=r(f,i(t));var v=n(c,function(m,_,b){var w=r(f,function(y){return y(m)});return{criteria:w,index:++h,value:m}});return a(v,function(m,_){return o(m,_,d)})}return Zv=l,Zv}var Qv,I_;function CN(){if(I_)return Qv;I_=1;var r=ry(),e=SN(),t=$u(),n=Vu(),a=t(function(i,o){if(i==null)return[];var s=o.length;return s>1&&n(i,o[0],o[1])?o=[]:s>2&&n(o[0],o[1],o[2])&&(o=[o[0]]),e(i,r(o,1),[])});return Qv=a,Qv}var Jv,L_;function EN(){if(L_)return Jv;L_=1;var r=aE(),e=0;function t(n){var a=++e;return r(n)+a}return Jv=t,Jv}var ep,N_;function TN(){if(N_)return ep;N_=1;function r(e,t,n){for(var a=-1,i=e.length,o=t.length,s={};++a<i;){var u=a<o?t[a]:void 0;n(s,e[a],u)}return s}return ep=r,ep}var tp,F_;function PN(){if(F_)return tp;F_=1;var r=Ru(),e=TN();function t(n,a){return e(n||[],a||[],r)}return tp=t,tp}var rp,B_;function Xt(){if(B_)return rp;B_=1;var r;if(typeof Gg=="function")try{r={cloneDeep:VL(),constant:Zg(),defaults:UL(),each:ZC(),filter:uE(),find:ZL(),flatten:EE(),forEach:XC(),forIn:QL(),has:lE(),isUndefined:cE(),last:JL(),map:dE(),mapValues:eN(),max:rN(),merge:uN(),min:lN(),minBy:cN(),now:fN(),pick:gN(),range:bN(),reduce:hE(),sortBy:CN(),uniqueId:EN(),values:mE(),zipObject:PN()}}catch{}return r||(r=window._),rp=r,rp}var np,q_;function AN(){if(q_)return np;q_=1,np=r;function r(){var n={};n._next=n._prev=n,this._sentinel=n}r.prototype.dequeue=function(){var n=this._sentinel,a=n._prev;if(a!==n)return e(a),a},r.prototype.enqueue=function(n){var a=this._sentinel;n._prev&&n._next&&e(n),n._next=a._next,a._next._prev=n,a._next=n,n._prev=a},r.prototype.toString=function(){for(var n=[],a=this._sentinel,i=a._prev;i!==a;)n.push(JSON.stringify(i,t)),i=i._prev;return"["+n.join(", ")+"]"};function e(n){n._prev._next=n._next,n._next._prev=n._prev,delete n._next,delete n._prev}function t(n,a){if(n!=="_next"&&n!=="_prev")return a}return np}var ap,z_;function kN(){if(z_)return ap;z_=1;var r=Xt(),e=mn().Graph,t=AN();ap=a;var n=r.constant(1);function a(l,c){if(l.nodeCount()<=1)return[];var f=s(l,c||n),d=i(f.graph,f.buckets,f.zeroIdx);return r.flatten(r.map(d,function(h){return l.outEdges(h.v,h.w)}),!0)}function i(l,c,f){for(var d=[],h=c[c.length-1],v=c[0],m;l.nodeCount();){for(;m=v.dequeue();)o(l,c,f,m);for(;m=h.dequeue();)o(l,c,f,m);if(l.nodeCount()){for(var _=c.length-2;_>0;--_)if(m=c[_].dequeue(),m){d=d.concat(o(l,c,f,m,!0));break}}}return d}function o(l,c,f,d,h){var v=h?[]:void 0;return r.forEach(l.inEdges(d.v),function(m){var _=l.edge(m),b=l.node(m.v);h&&v.push({v:m.v,w:m.w}),b.out-=_,u(c,f,b)}),r.forEach(l.outEdges(d.v),function(m){var _=l.edge(m),b=m.w,w=l.node(b);w.in-=_,u(c,f,w)}),l.removeNode(d.v),v}function s(l,c){var f=new e,d=0,h=0;r.forEach(l.nodes(),function(_){f.setNode(_,{v:_,in:0,out:0})}),r.forEach(l.edges(),function(_){var b=f.edge(_.v,_.w)||0,w=c(_),y=b+w;f.setEdge(_.v,_.w,y),h=Math.max(h,f.node(_.v).out+=w),d=Math.max(d,f.node(_.w).in+=w)});var v=r.range(h+d+3).map(function(){return new t}),m=d+1;return r.forEach(f.nodes(),function(_){u(v,m,f.node(_))}),{graph:f,buckets:v,zeroIdx:m}}function u(l,c,f){f.out?f.in?l[f.out-f.in+c].enqueue(f):l[l.length-1].enqueue(f):l[0].enqueue(f)}return ap}var ip,G_;function MN(){if(G_)return ip;G_=1;var r=Xt(),e=kN();ip={run:t,undo:a};function t(i){var o=i.graph().acyclicer==="greedy"?e(i,s(i)):n(i);r.forEach(o,function(u){var l=i.edge(u);i.removeEdge(u),l.forwardName=u.name,l.reversed=!0,i.setEdge(u.w,u.v,l,r.uniqueId("rev"))});function s(u){return function(l){return u.edge(l).weight}}}function n(i){var o=[],s={},u={};function l(c){r.has(u,c)||(u[c]=!0,s[c]=!0,r.forEach(i.outEdges(c),function(f){r.has(s,f.w)?o.push(f):l(f.w)}),delete s[c])}return r.forEach(i.nodes(),l),o}function a(i){r.forEach(i.edges(),function(o){var s=i.edge(o);if(s.reversed){i.removeEdge(o);var u=s.forwardName;delete s.reversed,delete s.forwardName,i.setEdge(o.w,o.v,s,u)}})}return ip}var op,$_;function Kr(){if($_)return op;$_=1;var r=Xt(),e=mn().Graph;op={addDummyNode:t,simplify:n,asNonCompoundGraph:a,successorWeights:i,predecessorWeights:o,intersectRect:s,buildLayerMatrix:u,normalizeRanks:l,removeEmptyRanks:c,addBorderNode:f,maxRank:d,partition:h,time:v,notime:m};function t(_,b,w,y){var x;do x=r.uniqueId(y);while(_.hasNode(x));return w.dummy=b,_.setNode(x,w),x}function n(_){var b=new e().setGraph(_.graph());return r.forEach(_.nodes(),function(w){b.setNode(w,_.node(w))}),r.forEach(_.edges(),function(w){var y=b.edge(w.v,w.w)||{weight:0,minlen:1},x=_.edge(w);b.setEdge(w.v,w.w,{weight:y.weight+x.weight,minlen:Math.max(y.minlen,x.minlen)})}),b}function a(_){var b=new e({multigraph:_.isMultigraph()}).setGraph(_.graph());return r.forEach(_.nodes(),function(w){_.children(w).length||b.setNode(w,_.node(w))}),r.forEach(_.edges(),function(w){b.setEdge(w,_.edge(w))}),b}function i(_){var b=r.map(_.nodes(),function(w){var y={};return r.forEach(_.outEdges(w),function(x){y[x.w]=(y[x.w]||0)+_.edge(x).weight}),y});return r.zipObject(_.nodes(),b)}function o(_){var b=r.map(_.nodes(),function(w){var y={};return r.forEach(_.inEdges(w),function(x){y[x.v]=(y[x.v]||0)+_.edge(x).weight}),y});return r.zipObject(_.nodes(),b)}function s(_,b){var w=_.x,y=_.y,x=b.x-w,C=b.y-y,E=_.width/2,p=_.height/2;if(!x&&!C)throw new Error("Not possible to find intersection inside of the rectangle");var P,T;return Math.abs(C)*E>Math.abs(x)*p?(C<0&&(p=-p),P=p*x/C,T=p):(x<0&&(E=-E),P=E,T=E*C/x),{x:w+P,y:y+T}}function u(_){var b=r.map(r.range(d(_)+1),function(){return[]});return r.forEach(_.nodes(),function(w){var y=_.node(w),x=y.rank;r.isUndefined(x)||(b[x][y.order]=w)}),b}function l(_){var b=r.min(r.map(_.nodes(),function(w){return _.node(w).rank}));r.forEach(_.nodes(),function(w){var y=_.node(w);r.has(y,"rank")&&(y.rank-=b)})}function c(_){var b=r.min(r.map(_.nodes(),function(C){return _.node(C).rank})),w=[];r.forEach(_.nodes(),function(C){var E=_.node(C).rank-b;w[E]||(w[E]=[]),w[E].push(C)});var y=0,x=_.graph().nodeRankFactor;r.forEach(w,function(C,E){r.isUndefined(C)&&E%x!==0?--y:y&&r.forEach(C,function(p){_.node(p).rank+=y})})}function f(_,b,w,y){var x={width:0,height:0};return arguments.length>=4&&(x.rank=w,x.order=y),t(_,"border",x,b)}function d(_){return r.max(r.map(_.nodes(),function(b){var w=_.node(b).rank;if(!r.isUndefined(w))return w}))}function h(_,b){var w={lhs:[],rhs:[]};return r.forEach(_,function(y){b(y)?w.lhs.push(y):w.rhs.push(y)}),w}function v(_,b){var w=r.now();try{return b()}finally{console.log(_+" time: "+(r.now()-w)+"ms")}}function m(_,b){return b()}return op}var sp,V_;function ON(){if(V_)return sp;V_=1;var r=Xt(),e=Kr();sp={run:t,undo:a};function t(i){i.graph().dummyChains=[],r.forEach(i.edges(),function(o){n(i,o)})}function n(i,o){var s=o.v,u=i.node(s).rank,l=o.w,c=i.node(l).rank,f=o.name,d=i.edge(o),h=d.labelRank;if(c!==u+1){i.removeEdge(o);var v,m,_;for(_=0,++u;u<c;++_,++u)d.points=[],m={width:0,height:0,edgeLabel:d,edgeObj:o,rank:u},v=e.addDummyNode(i,"edge",m,"_d"),u===h&&(m.width=d.width,m.height=d.height,m.dummy="edge-label",m.labelpos=d.labelpos),i.setEdge(s,v,{weight:d.weight},f),_===0&&i.graph().dummyChains.push(v),s=v;i.setEdge(s,l,{weight:d.weight},f)}}function a(i){r.forEach(i.graph().dummyChains,function(o){var s=i.node(o),u=s.edgeLabel,l;for(i.setEdge(s.edgeObj,u);s.dummy;)l=i.successors(o)[0],i.removeNode(o),u.points.push({x:s.x,y:s.y}),s.dummy==="edge-label"&&(u.x=s.x,u.y=s.y,u.width=s.width,u.height=s.height),o=l,s=i.node(o)})}return sp}var up,U_;function nu(){if(U_)return up;U_=1;var r=Xt();up={longestPath:e,slack:t};function e(n){var a={};function i(o){var s=n.node(o);if(r.has(a,o))return s.rank;a[o]=!0;var u=r.min(r.map(n.outEdges(o),function(l){return i(l.w)-n.edge(l).minlen}));return(u===Number.POSITIVE_INFINITY||u===void 0||u===null)&&(u=0),s.rank=u}r.forEach(n.sources(),i)}function t(n,a){return n.node(a.w).rank-n.node(a.v).rank-n.edge(a).minlen}return up}var lp,H_;function kE(){if(H_)return lp;H_=1;var r=Xt(),e=mn().Graph,t=nu().slack;lp=n;function n(s){var u=new e({directed:!1}),l=s.nodes()[0],c=s.nodeCount();u.setNode(l,{});for(var f,d;a(u,s)<c;)f=i(u,s),d=u.hasNode(f.v)?t(s,f):-t(s,f),o(u,s,d);return u}function a(s,u){function l(c){r.forEach(u.nodeEdges(c),function(f){var d=f.v,h=c===d?f.w:d;!s.hasNode(h)&&!t(u,f)&&(s.setNode(h,{}),s.setEdge(c,h,{}),l(h))})}return r.forEach(s.nodes(),l),s.nodeCount()}function i(s,u){return r.minBy(u.edges(),function(l){if(s.hasNode(l.v)!==s.hasNode(l.w))return t(u,l)})}function o(s,u,l){r.forEach(s.nodes(),function(c){u.node(c).rank+=l})}return lp}var cp,j_;function DN(){if(j_)return cp;j_=1;var r=Xt(),e=kE(),t=nu().slack,n=nu().longestPath,a=mn().alg.preorder,i=mn().alg.postorder,o=Kr().simplify;cp=s,s.initLowLimValues=f,s.initCutValues=u,s.calcCutValue=c,s.leaveEdge=h,s.enterEdge=v,s.exchangeEdges=m;function s(y){y=o(y),n(y);var x=e(y);f(x),u(x,y);for(var C,E;C=h(x);)E=v(x,y,C),m(x,y,C,E)}function u(y,x){var C=i(y,y.nodes());C=C.slice(0,C.length-1),r.forEach(C,function(E){l(y,x,E)})}function l(y,x,C){var E=y.node(C),p=E.parent;y.edge(C,p).cutvalue=c(y,x,C)}function c(y,x,C){var E=y.node(C),p=E.parent,P=!0,T=x.edge(C,p),R=0;return T||(P=!1,T=x.edge(p,C)),R=T.weight,r.forEach(x.nodeEdges(C),function(M){var N=M.v===C,B=N?M.w:M.v;if(B!==p){var q=N===P,Z=x.edge(M).weight;if(R+=q?Z:-Z,b(y,C,B)){var Q=y.edge(C,B).cutvalue;R+=q?-Q:Q}}}),R}function f(y,x){arguments.length<2&&(x=y.nodes()[0]),d(y,{},1,x)}function d(y,x,C,E,p){var P=C,T=y.node(E);return x[E]=!0,r.forEach(y.neighbors(E),function(R){r.has(x,R)||(C=d(y,x,C,R,E))}),T.low=P,T.lim=C++,p?T.parent=p:delete T.parent,C}function h(y){return r.find(y.edges(),function(x){return y.edge(x).cutvalue<0})}function v(y,x,C){var E=C.v,p=C.w;x.hasEdge(E,p)||(E=C.w,p=C.v);var P=y.node(E),T=y.node(p),R=P,M=!1;P.lim>T.lim&&(R=T,M=!0);var N=r.filter(x.edges(),function(B){return M===w(y,y.node(B.v),R)&&M!==w(y,y.node(B.w),R)});return r.minBy(N,function(B){return t(x,B)})}function m(y,x,C,E){var p=C.v,P=C.w;y.removeEdge(p,P),y.setEdge(E.v,E.w,{}),f(y),u(y,x),_(y,x)}function _(y,x){var C=r.find(y.nodes(),function(p){return!x.node(p).parent}),E=a(y,C);E=E.slice(1),r.forEach(E,function(p){var P=y.node(p).parent,T=x.edge(p,P),R=!1;T||(T=x.edge(P,p),R=!0),x.node(p).rank=x.node(P).rank+(R?T.minlen:-T.minlen)})}function b(y,x,C){return y.hasEdge(x,C)}function w(y,x,C){return C.low<=x.lim&&x.lim<=C.lim}return cp}var fp,W_;function RN(){if(W_)return fp;W_=1;var r=nu(),e=r.longestPath,t=kE(),n=DN();fp=a;function a(u){switch(u.graph().ranker){case"network-simplex":s(u);break;case"tight-tree":o(u);break;case"longest-path":i(u);break;default:s(u)}}var i=e;function o(u){e(u),t(u)}function s(u){n(u)}return fp}var dp,K_;function IN(){if(K_)return dp;K_=1;var r=Xt();dp=e;function e(a){var i=n(a);r.forEach(a.graph().dummyChains,function(o){for(var s=a.node(o),u=s.edgeObj,l=t(a,i,u.v,u.w),c=l.path,f=l.lca,d=0,h=c[d],v=!0;o!==u.w;){if(s=a.node(o),v){for(;(h=c[d])!==f&&a.node(h).maxRank<s.rank;)d++;h===f&&(v=!1)}if(!v){for(;d<c.length-1&&a.node(h=c[d+1]).minRank<=s.rank;)d++;h=c[d]}a.setParent(o,h),o=a.successors(o)[0]}})}function t(a,i,o,s){var u=[],l=[],c=Math.min(i[o].low,i[s].low),f=Math.max(i[o].lim,i[s].lim),d,h;d=o;do d=a.parent(d),u.push(d);while(d&&(i[d].low>c||f>i[d].lim));for(h=d,d=s;(d=a.parent(d))!==h;)l.push(d);return{path:u.concat(l.reverse()),lca:h}}function n(a){var i={},o=0;function s(u){var l=o;r.forEach(a.children(u),s),i[u]={low:l,lim:o++}}return r.forEach(a.children(),s),i}return dp}var hp,Y_;function LN(){if(Y_)return hp;Y_=1;var r=Xt(),e=Kr();hp={run:t,cleanup:o};function t(s){var u=e.addDummyNode(s,"root",{},"_root"),l=a(s),c=r.max(r.values(l))-1,f=2*c+1;s.graph().nestingRoot=u,r.forEach(s.edges(),function(h){s.edge(h).minlen*=f});var d=i(s)+1;r.forEach(s.children(),function(h){n(s,u,f,d,c,l,h)}),s.graph().nodeRankFactor=f}function n(s,u,l,c,f,d,h){var v=s.children(h);if(!v.length){h!==u&&s.setEdge(u,h,{weight:0,minlen:l});return}var m=e.addBorderNode(s,"_bt"),_=e.addBorderNode(s,"_bb"),b=s.node(h);s.setParent(m,h),b.borderTop=m,s.setParent(_,h),b.borderBottom=_,r.forEach(v,function(w){n(s,u,l,c,f,d,w);var y=s.node(w),x=y.borderTop?y.borderTop:w,C=y.borderBottom?y.borderBottom:w,E=y.borderTop?c:2*c,p=x!==C?1:f-d[h]+1;s.setEdge(m,x,{weight:E,minlen:p,nestingEdge:!0}),s.setEdge(C,_,{weight:E,minlen:p,nestingEdge:!0})}),s.parent(h)||s.setEdge(u,m,{weight:0,minlen:f+d[h]})}function a(s){var u={};function l(c,f){var d=s.children(c);d&&d.length&&r.forEach(d,function(h){l(h,f+1)}),u[c]=f}return r.forEach(s.children(),function(c){l(c,1)}),u}function i(s){return r.reduce(s.edges(),function(u,l){return u+s.edge(l).weight},0)}function o(s){var u=s.graph();s.removeNode(u.nestingRoot),delete u.nestingRoot,r.forEach(s.edges(),function(l){var c=s.edge(l);c.nestingEdge&&s.removeEdge(l)})}return hp}var vp,X_;function NN(){if(X_)return vp;X_=1;var r=Xt(),e=Kr();vp=t;function t(a){function i(o){var s=a.children(o),u=a.node(o);if(s.length&&r.forEach(s,i),r.has(u,"minRank")){u.borderLeft=[],u.borderRight=[];for(var l=u.minRank,c=u.maxRank+1;l<c;++l)n(a,"borderLeft","_bl",o,u,l),n(a,"borderRight","_br",o,u,l)}}r.forEach(a.children(),i)}function n(a,i,o,s,u,l){var c={width:0,height:0,rank:l,borderType:i},f=u[i][l-1],d=e.addDummyNode(a,"border",c,o);u[i][l]=d,a.setParent(d,s),f&&a.setEdge(f,d,{weight:1})}return vp}var pp,Z_;function FN(){if(Z_)return pp;Z_=1;var r=Xt();pp={adjust:e,undo:t};function e(l){var c=l.graph().rankdir.toLowerCase();(c==="lr"||c==="rl")&&n(l)}function t(l){var c=l.graph().rankdir.toLowerCase();(c==="bt"||c==="rl")&&i(l),(c==="lr"||c==="rl")&&(s(l),n(l))}function n(l){r.forEach(l.nodes(),function(c){a(l.node(c))}),r.forEach(l.edges(),function(c){a(l.edge(c))})}function a(l){var c=l.width;l.width=l.height,l.height=c}function i(l){r.forEach(l.nodes(),function(c){o(l.node(c))}),r.forEach(l.edges(),function(c){var f=l.edge(c);r.forEach(f.points,o),r.has(f,"y")&&o(f)})}function o(l){l.y=-l.y}function s(l){r.forEach(l.nodes(),function(c){u(l.node(c))}),r.forEach(l.edges(),function(c){var f=l.edge(c);r.forEach(f.points,u),r.has(f,"x")&&u(f)})}function u(l){var c=l.x;l.x=l.y,l.y=c}return pp}var gp,Q_;function BN(){if(Q_)return gp;Q_=1;var r=Xt();gp=e;function e(t){var n={},a=r.filter(t.nodes(),function(l){return!t.children(l).length}),i=r.max(r.map(a,function(l){return t.node(l).rank})),o=r.map(r.range(i+1),function(){return[]});function s(l){if(!r.has(n,l)){n[l]=!0;var c=t.node(l);o[c.rank].push(l),r.forEach(t.successors(l),s)}}var u=r.sortBy(a,function(l){return t.node(l).rank});return r.forEach(u,s),o}return gp}var yp,J_;function qN(){if(J_)return yp;J_=1;var r=Xt();yp=e;function e(n,a){for(var i=0,o=1;o<a.length;++o)i+=t(n,a[o-1],a[o]);return i}function t(n,a,i){for(var o=r.zipObject(i,r.map(i,function(d,h){return h})),s=r.flatten(r.map(a,function(d){return r.sortBy(r.map(n.outEdges(d),function(h){return{pos:o[h.w],weight:n.edge(h).weight}}),"pos")}),!0),u=1;u<i.length;)u<<=1;var l=2*u-1;u-=1;var c=r.map(new Array(l),function(){return 0}),f=0;return r.forEach(s.forEach(function(d){var h=d.pos+u;c[h]+=d.weight;for(var v=0;h>0;)h%2&&(v+=c[h+1]),h=h-1>>1,c[h]+=d.weight;f+=d.weight*v})),f}return yp}var mp,ex;function zN(){if(ex)return mp;ex=1;var r=Xt();mp=e;function e(t,n){return r.map(n,function(a){var i=t.inEdges(a);if(i.length){var o=r.reduce(i,function(s,u){var l=t.edge(u),c=t.node(u.v);return{sum:s.sum+l.weight*c.order,weight:s.weight+l.weight}},{sum:0,weight:0});return{v:a,barycenter:o.sum/o.weight,weight:o.weight}}else return{v:a}})}return mp}var bp,tx;function GN(){if(tx)return bp;tx=1;var r=Xt();bp=e;function e(a,i){var o={};r.forEach(a,function(u,l){var c=o[u.v]={indegree:0,in:[],out:[],vs:[u.v],i:l};r.isUndefined(u.barycenter)||(c.barycenter=u.barycenter,c.weight=u.weight)}),r.forEach(i.edges(),function(u){var l=o[u.v],c=o[u.w];!r.isUndefined(l)&&!r.isUndefined(c)&&(c.indegree++,l.out.push(o[u.w]))});var s=r.filter(o,function(u){return!u.indegree});return t(s)}function t(a){var i=[];function o(l){return function(c){c.merged||(r.isUndefined(c.barycenter)||r.isUndefined(l.barycenter)||c.barycenter>=l.barycenter)&&n(l,c)}}function s(l){return function(c){c.in.push(l),--c.indegree===0&&a.push(c)}}for(;a.length;){var u=a.pop();i.push(u),r.forEach(u.in.reverse(),o(u)),r.forEach(u.out,s(u))}return r.map(r.filter(i,function(l){return!l.merged}),function(l){return r.pick(l,["vs","i","barycenter","weight"])})}function n(a,i){var o=0,s=0;a.weight&&(o+=a.barycenter*a.weight,s+=a.weight),i.weight&&(o+=i.barycenter*i.weight,s+=i.weight),a.vs=i.vs.concat(a.vs),a.barycenter=o/s,a.weight=s,a.i=Math.min(i.i,a.i),i.merged=!0}return bp}var wp,rx;function $N(){if(rx)return wp;rx=1;var r=Xt(),e=Kr();wp=t;function t(i,o){var s=e.partition(i,function(m){return r.has(m,"barycenter")}),u=s.lhs,l=r.sortBy(s.rhs,function(m){return-m.i}),c=[],f=0,d=0,h=0;u.sort(a(!!o)),h=n(c,l,h),r.forEach(u,function(m){h+=m.vs.length,c.push(m.vs),f+=m.barycenter*m.weight,d+=m.weight,h=n(c,l,h)});var v={vs:r.flatten(c,!0)};return d&&(v.barycenter=f/d,v.weight=d),v}function n(i,o,s){for(var u;o.length&&(u=r.last(o)).i<=s;)o.pop(),i.push(u.vs),s++;return s}function a(i){return function(o,s){return o.barycenter<s.barycenter?-1:o.barycenter>s.barycenter?1:i?s.i-o.i:o.i-s.i}}return wp}var _p,nx;function VN(){if(nx)return _p;nx=1;var r=Xt(),e=zN(),t=GN(),n=$N();_p=a;function a(s,u,l,c){var f=s.children(u),d=s.node(u),h=d?d.borderLeft:void 0,v=d?d.borderRight:void 0,m={};h&&(f=r.filter(f,function(C){return C!==h&&C!==v}));var _=e(s,f);r.forEach(_,function(C){if(s.children(C.v).length){var E=a(s,C.v,l,c);m[C.v]=E,r.has(E,"barycenter")&&o(C,E)}});var b=t(_,l);i(b,m);var w=n(b,c);if(h&&(w.vs=r.flatten([h,w.vs,v],!0),s.predecessors(h).length)){var y=s.node(s.predecessors(h)[0]),x=s.node(s.predecessors(v)[0]);r.has(w,"barycenter")||(w.barycenter=0,w.weight=0),w.barycenter=(w.barycenter*w.weight+y.order+x.order)/(w.weight+2),w.weight+=2}return w}function i(s,u){r.forEach(s,function(l){l.vs=r.flatten(l.vs.map(function(c){return u[c]?u[c].vs:c}),!0)})}function o(s,u){r.isUndefined(s.barycenter)?(s.barycenter=u.barycenter,s.weight=u.weight):(s.barycenter=(s.barycenter*s.weight+u.barycenter*u.weight)/(s.weight+u.weight),s.weight+=u.weight)}return _p}var xp,ax;function UN(){if(ax)return xp;ax=1;var r=Xt(),e=mn().Graph;xp=t;function t(a,i,o){var s=n(a),u=new e({compound:!0}).setGraph({root:s}).setDefaultNodeLabel(function(l){return a.node(l)});return r.forEach(a.nodes(),function(l){var c=a.node(l),f=a.parent(l);(c.rank===i||c.minRank<=i&&i<=c.maxRank)&&(u.setNode(l),u.setParent(l,f||s),r.forEach(a[o](l),function(d){var h=d.v===l?d.w:d.v,v=u.edge(h,l),m=r.isUndefined(v)?0:v.weight;u.setEdge(h,l,{weight:a.edge(d).weight+m})}),r.has(c,"minRank")&&u.setNode(l,{borderLeft:c.borderLeft[i],borderRight:c.borderRight[i]}))}),u}function n(a){for(var i;a.hasNode(i=r.uniqueId("_root")););return i}return xp}var Sp,ix;function HN(){if(ix)return Sp;ix=1;var r=Xt();Sp=e;function e(t,n,a){var i={},o;r.forEach(a,function(s){for(var u=t.parent(s),l,c;u;){if(l=t.parent(u),l?(c=i[l],i[l]=u):(c=o,o=u),c&&c!==u){n.setEdge(c,u);return}u=l}})}return Sp}var Cp,ox;function jN(){if(ox)return Cp;ox=1;var r=Xt(),e=BN(),t=qN(),n=VN(),a=UN(),i=HN(),o=mn().Graph,s=Kr();Cp=u;function u(d){var h=s.maxRank(d),v=l(d,r.range(1,h+1),"inEdges"),m=l(d,r.range(h-1,-1,-1),"outEdges"),_=e(d);f(d,_);for(var b=Number.POSITIVE_INFINITY,w,y=0,x=0;x<4;++y,++x){c(y%2?v:m,y%4>=2),_=s.buildLayerMatrix(d);var C=t(d,_);C<b&&(x=0,w=r.cloneDeep(_),b=C)}f(d,w)}function l(d,h,v){return r.map(h,function(m){return a(d,m,v)})}function c(d,h){var v=new o;r.forEach(d,function(m){var _=m.graph().root,b=n(m,_,v,h);r.forEach(b.vs,function(w,y){m.node(w).order=y}),i(m,v,b.vs)})}function f(d,h){r.forEach(h,function(v){r.forEach(v,function(m,_){d.node(m).order=_})})}return Cp}var Ep,sx;function WN(){if(sx)return Ep;sx=1;var r=Xt(),e=mn().Graph,t=Kr();Ep={positionX:v,findType1Conflicts:n,findType2Conflicts:a,addConflict:o,hasConflict:s,verticalAlignment:u,horizontalCompaction:l,alignCoordinates:d,findSmallestWidthAlignment:f,balance:h};function n(b,w){var y={};function x(C,E){var p=0,P=0,T=C.length,R=r.last(E);return r.forEach(E,function(M,N){var B=i(b,M),q=B?b.node(B).order:T;(B||M===R)&&(r.forEach(E.slice(P,N+1),function(Z){r.forEach(b.predecessors(Z),function(Q){var Y=b.node(Q),J=Y.order;(J<p||q<J)&&!(Y.dummy&&b.node(Z).dummy)&&o(y,Q,Z)})}),P=N+1,p=q)}),E}return r.reduce(w,x),y}function a(b,w){var y={};function x(E,p,P,T,R){var M;r.forEach(r.range(p,P),function(N){M=E[N],b.node(M).dummy&&r.forEach(b.predecessors(M),function(B){var q=b.node(B);q.dummy&&(q.order<T||q.order>R)&&o(y,B,M)})})}function C(E,p){var P=-1,T,R=0;return r.forEach(p,function(M,N){if(b.node(M).dummy==="border"){var B=b.predecessors(M);B.length&&(T=b.node(B[0]).order,x(p,R,N,P,T),R=N,P=T)}x(p,R,p.length,T,E.length)}),p}return r.reduce(w,C),y}function i(b,w){if(b.node(w).dummy)return r.find(b.predecessors(w),function(y){return b.node(y).dummy})}function o(b,w,y){if(w>y){var x=w;w=y,y=x}var C=b[w];C||(b[w]=C={}),C[y]=!0}function s(b,w,y){if(w>y){var x=w;w=y,y=x}return r.has(b[w],y)}function u(b,w,y,x){var C={},E={},p={};return r.forEach(w,function(P){r.forEach(P,function(T,R){C[T]=T,E[T]=T,p[T]=R})}),r.forEach(w,function(P){var T=-1;r.forEach(P,function(R){var M=x(R);if(M.length){M=r.sortBy(M,function(Q){return p[Q]});for(var N=(M.length-1)/2,B=Math.floor(N),q=Math.ceil(N);B<=q;++B){var Z=M[B];E[R]===R&&T<p[Z]&&!s(y,R,Z)&&(E[Z]=R,E[R]=C[R]=C[Z],T=p[Z])}}})}),{root:C,align:E}}function l(b,w,y,x,C){var E={},p=c(b,w,y,C),P=C?"borderLeft":"borderRight";function T(N,B){for(var q=p.nodes(),Z=q.pop(),Q={};Z;)Q[Z]?N(Z):(Q[Z]=!0,q.push(Z),q=q.concat(B(Z))),Z=q.pop()}function R(N){E[N]=p.inEdges(N).reduce(function(B,q){return Math.max(B,E[q.v]+p.edge(q))},0)}function M(N){var B=p.outEdges(N).reduce(function(Z,Q){return Math.min(Z,E[Q.w]-p.edge(Q))},Number.POSITIVE_INFINITY),q=b.node(N);B!==Number.POSITIVE_INFINITY&&q.borderType!==P&&(E[N]=Math.max(E[N],B))}return T(R,p.predecessors.bind(p)),T(M,p.successors.bind(p)),r.forEach(x,function(N){E[N]=E[y[N]]}),E}function c(b,w,y,x){var C=new e,E=b.graph(),p=m(E.nodesep,E.edgesep,x);return r.forEach(w,function(P){var T;r.forEach(P,function(R){var M=y[R];if(C.setNode(M),T){var N=y[T],B=C.edge(N,M);C.setEdge(N,M,Math.max(p(b,R,T),B||0))}T=R})}),C}function f(b,w){return r.minBy(r.values(w),function(y){var x=Number.NEGATIVE_INFINITY,C=Number.POSITIVE_INFINITY;return r.forIn(y,function(E,p){var P=_(b,p)/2;x=Math.max(E+P,x),C=Math.min(E-P,C)}),x-C})}function d(b,w){var y=r.values(w),x=r.min(y),C=r.max(y);r.forEach(["u","d"],function(E){r.forEach(["l","r"],function(p){var P=E+p,T=b[P],R;if(T!==w){var M=r.values(T);R=p==="l"?x-r.min(M):C-r.max(M),R&&(b[P]=r.mapValues(T,function(N){return N+R}))}})})}function h(b,w){return r.mapValues(b.ul,function(y,x){if(w)return b[w.toLowerCase()][x];var C=r.sortBy(r.map(b,x));return(C[1]+C[2])/2})}function v(b){var w=t.buildLayerMatrix(b),y=r.merge(n(b,w),a(b,w)),x={},C;r.forEach(["u","d"],function(p){C=p==="u"?w:r.values(w).reverse(),r.forEach(["l","r"],function(P){P==="r"&&(C=r.map(C,function(N){return r.values(N).reverse()}));var T=(p==="u"?b.predecessors:b.successors).bind(b),R=u(b,C,y,T),M=l(b,C,R.root,R.align,P==="r");P==="r"&&(M=r.mapValues(M,function(N){return-N})),x[p+P]=M})});var E=f(b,x);return d(x,E),h(x,b.graph().align)}function m(b,w,y){return function(x,C,E){var p=x.node(C),P=x.node(E),T=0,R;if(T+=p.width/2,r.has(p,"labelpos"))switch(p.labelpos.toLowerCase()){case"l":R=-p.width/2;break;case"r":R=p.width/2;break}if(R&&(T+=y?R:-R),R=0,T+=(p.dummy?w:b)/2,T+=(P.dummy?w:b)/2,T+=P.width/2,r.has(P,"labelpos"))switch(P.labelpos.toLowerCase()){case"l":R=P.width/2;break;case"r":R=-P.width/2;break}return R&&(T+=y?R:-R),R=0,T}}function _(b,w){return b.node(w).width}return Ep}var Tp,ux;function KN(){if(ux)return Tp;ux=1;var r=Xt(),e=Kr(),t=WN().positionX;Tp=n;function n(i){i=e.asNonCompoundGraph(i),a(i),r.forEach(t(i),function(o,s){i.node(s).x=o})}function a(i){var o=e.buildLayerMatrix(i),s=i.graph().ranksep,u=0;r.forEach(o,function(l){var c=r.max(r.map(l,function(f){return i.node(f).height}));r.forEach(l,function(f){i.node(f).y=u+c/2}),u+=c+s})}return Tp}var Pp,lx;function YN(){if(lx)return Pp;lx=1;var r=Xt(),e=MN(),t=ON(),n=RN(),a=Kr().normalizeRanks,i=IN(),o=Kr().removeEmptyRanks,s=LN(),u=NN(),l=FN(),c=jN(),f=KN(),d=Kr(),h=mn().Graph;Pp=v;function v(L,H){var j=H&&H.debugTiming?d.time:d.notime;j("layout",function(){var W=j("  buildLayoutGraph",function(){return T(L)});j("  runLayout",function(){m(W,j)}),j("  updateInputGraph",function(){_(L,W)})})}function m(L,H){H("    makeSpaceForEdgeLabels",function(){R(L)}),H("    removeSelfEdges",function(){X(L)}),H("    acyclic",function(){e.run(L)}),H("    nestingGraph.run",function(){s.run(L)}),H("    rank",function(){n(d.asNonCompoundGraph(L))}),H("    injectEdgeLabelProxies",function(){M(L)}),H("    removeEmptyRanks",function(){o(L)}),H("    nestingGraph.cleanup",function(){s.cleanup(L)}),H("    normalizeRanks",function(){a(L)}),H("    assignRankMinMax",function(){N(L)}),H("    removeEdgeLabelProxies",function(){B(L)}),H("    normalize.run",function(){t.run(L)}),H("    parentDummyChains",function(){i(L)}),H("    addBorderSegments",function(){u(L)}),H("    order",function(){c(L)}),H("    insertSelfEdges",function(){k(L)}),H("    adjustCoordinateSystem",function(){l.adjust(L)}),H("    position",function(){f(L)}),H("    positionSelfEdges",function(){D(L)}),H("    removeBorderNodes",function(){J(L)}),H("    normalize.undo",function(){t.undo(L)}),H("    fixupEdgeLabelCoords",function(){Q(L)}),H("    undoCoordinateSystem",function(){l.undo(L)}),H("    translateGraph",function(){q(L)}),H("    assignNodeIntersects",function(){Z(L)}),H("    reversePoints",function(){Y(L)}),H("    acyclic.undo",function(){e.undo(L)})}function _(L,H){r.forEach(L.nodes(),function(j){var W=L.node(j),re=H.node(j);W&&(W.x=re.x,W.y=re.y,H.children(j).length&&(W.width=re.width,W.height=re.height))}),r.forEach(L.edges(),function(j){var W=L.edge(j),re=H.edge(j);W.points=re.points,r.has(re,"x")&&(W.x=re.x,W.y=re.y)}),L.graph().width=H.graph().width,L.graph().height=H.graph().height}var b=["nodesep","edgesep","ranksep","marginx","marginy"],w={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},y=["acyclicer","ranker","rankdir","align"],x=["width","height"],C={width:0,height:0},E=["minlen","weight","width","height","labeloffset"],p={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},P=["labelpos"];function T(L){var H=new h({multigraph:!0,compound:!0}),j=F(L.graph());return H.setGraph(r.merge({},w,I(j,b),r.pick(j,y))),r.forEach(L.nodes(),function(W){var re=F(L.node(W));H.setNode(W,r.defaults(I(re,x),C)),H.setParent(W,L.parent(W))}),r.forEach(L.edges(),function(W){var re=F(L.edge(W));H.setEdge(W,r.merge({},p,I(re,E),r.pick(re,P)))}),H}function R(L){var H=L.graph();H.ranksep/=2,r.forEach(L.edges(),function(j){var W=L.edge(j);W.minlen*=2,W.labelpos.toLowerCase()!=="c"&&(H.rankdir==="TB"||H.rankdir==="BT"?W.width+=W.labeloffset:W.height+=W.labeloffset)})}function M(L){r.forEach(L.edges(),function(H){var j=L.edge(H);if(j.width&&j.height){var W=L.node(H.v),re=L.node(H.w),se={rank:(re.rank-W.rank)/2+W.rank,e:H};d.addDummyNode(L,"edge-proxy",se,"_ep")}})}function N(L){var H=0;r.forEach(L.nodes(),function(j){var W=L.node(j);W.borderTop&&(W.minRank=L.node(W.borderTop).rank,W.maxRank=L.node(W.borderBottom).rank,H=r.max(H,W.maxRank))}),L.graph().maxRank=H}function B(L){r.forEach(L.nodes(),function(H){var j=L.node(H);j.dummy==="edge-proxy"&&(L.edge(j.e).labelRank=j.rank,L.removeNode(H))})}function q(L){var H=Number.POSITIVE_INFINITY,j=0,W=Number.POSITIVE_INFINITY,re=0,se=L.graph(),ce=se.marginx||0,ge=se.marginy||0;function Pe(Oe){var Se=Oe.x,le=Oe.y,te=Oe.width,ne=Oe.height;H=Math.min(H,Se-te/2),j=Math.max(j,Se+te/2),W=Math.min(W,le-ne/2),re=Math.max(re,le+ne/2)}r.forEach(L.nodes(),function(Oe){Pe(L.node(Oe))}),r.forEach(L.edges(),function(Oe){var Se=L.edge(Oe);r.has(Se,"x")&&Pe(Se)}),H-=ce,W-=ge,r.forEach(L.nodes(),function(Oe){var Se=L.node(Oe);Se.x-=H,Se.y-=W}),r.forEach(L.edges(),function(Oe){var Se=L.edge(Oe);r.forEach(Se.points,function(le){le.x-=H,le.y-=W}),r.has(Se,"x")&&(Se.x-=H),r.has(Se,"y")&&(Se.y-=W)}),se.width=j-H+ce,se.height=re-W+ge}function Z(L){r.forEach(L.edges(),function(H){var j=L.edge(H),W=L.node(H.v),re=L.node(H.w),se,ce;j.points?(se=j.points[0],ce=j.points[j.points.length-1]):(j.points=[],se=re,ce=W),j.points.unshift(d.intersectRect(W,se)),j.points.push(d.intersectRect(re,ce))})}function Q(L){r.forEach(L.edges(),function(H){var j=L.edge(H);if(r.has(j,"x"))switch((j.labelpos==="l"||j.labelpos==="r")&&(j.width-=j.labeloffset),j.labelpos){case"l":j.x-=j.width/2+j.labeloffset;break;case"r":j.x+=j.width/2+j.labeloffset;break}})}function Y(L){r.forEach(L.edges(),function(H){var j=L.edge(H);j.reversed&&j.points.reverse()})}function J(L){r.forEach(L.nodes(),function(H){if(L.children(H).length){var j=L.node(H),W=L.node(j.borderTop),re=L.node(j.borderBottom),se=L.node(r.last(j.borderLeft)),ce=L.node(r.last(j.borderRight));j.width=Math.abs(ce.x-se.x),j.height=Math.abs(re.y-W.y),j.x=se.x+j.width/2,j.y=W.y+j.height/2}}),r.forEach(L.nodes(),function(H){L.node(H).dummy==="border"&&L.removeNode(H)})}function X(L){r.forEach(L.edges(),function(H){if(H.v===H.w){var j=L.node(H.v);j.selfEdges||(j.selfEdges=[]),j.selfEdges.push({e:H,label:L.edge(H)}),L.removeEdge(H)}})}function k(L){var H=d.buildLayerMatrix(L);r.forEach(H,function(j){var W=0;r.forEach(j,function(re,se){var ce=L.node(re);ce.order=se+W,r.forEach(ce.selfEdges,function(ge){d.addDummyNode(L,"selfedge",{width:ge.label.width,height:ge.label.height,rank:ce.rank,order:se+ ++W,e:ge.e,label:ge.label},"_se")}),delete ce.selfEdges})})}function D(L){r.forEach(L.nodes(),function(H){var j=L.node(H);if(j.dummy==="selfedge"){var W=L.node(j.e.v),re=W.x+W.width/2,se=W.y,ce=j.x-re,ge=W.height/2;L.setEdge(j.e,j.label),L.removeNode(H),j.label.points=[{x:re+2*ce/3,y:se-ge},{x:re+5*ce/6,y:se-ge},{x:re+ce,y:se},{x:re+5*ce/6,y:se+ge},{x:re+2*ce/3,y:se+ge}],j.label.x=j.x,j.label.y=j.y}})}function I(L,H){return r.mapValues(r.pick(L,H),Number)}function F(L){var H={};return r.forEach(L,function(j,W){H[W.toLowerCase()]=j}),H}return Pp}var Ap,cx;function XN(){if(cx)return Ap;cx=1;var r=Xt(),e=Kr(),t=mn().Graph;Ap={debugOrdering:n};function n(a){var i=e.buildLayerMatrix(a),o=new t({compound:!0,multigraph:!0}).setGraph({});return r.forEach(a.nodes(),function(s){o.setNode(s,{label:s}),o.setParent(s,"layer"+a.node(s).rank)}),r.forEach(a.edges(),function(s){o.setEdge(s.v,s.w,{},s.name)}),r.forEach(i,function(s,u){var l="layer"+u;o.setNode(l,{rank:"same"}),r.reduce(s,function(c,f){return o.setEdge(c,f,{style:"invis"}),f})}),o}return Ap}var kp,fx;function ZN(){return fx||(fx=1,kp="0.8.5"),kp}var Mp,dx;function QN(){return dx||(dx=1,Mp={graphlib:mn(),layout:YN(),debug:XN(),util:{time:Kr().time,notime:Kr().notime},version:ZN()}),Mp}(function(r,e){(function(n,a){r.exports=a(QN())})(Ve,function(t){return function(n){var a={};function i(o){if(a[o])return a[o].exports;var s=a[o]={i:o,l:!1,exports:{}};return n[o].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=n,i.c=a,i.d=function(o,s,u){i.o(o,s)||Object.defineProperty(o,s,{enumerable:!0,get:u})},i.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},i.t=function(o,s){if(s&1&&(o=i(o)),s&8||s&4&&typeof o=="object"&&o&&o.__esModule)return o;var u=Object.create(null);if(i.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:o}),s&2&&typeof o!="string")for(var l in o)i.d(u,l,(function(c){return o[c]}).bind(null,l));return u},i.n=function(o){var s=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(s,"a",s),s},i.o=function(o,s){return Object.prototype.hasOwnProperty.call(o,s)},i.p="",i(i.s=0)}([function(n,a,i){var o=i(1),s=function(l){l&&l("layout","dagre",o)};typeof cytoscape<"u"&&s(cytoscape),n.exports=s},function(n,a,i){function o(d){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?o=function(v){return typeof v}:o=function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},o(d)}var s=function(h){return typeof h=="function"},u=i(2),l=i(3),c=i(4);function f(d){this.options=l({},u,d)}f.prototype.run=function(){var d=this.options,h=this,v=d.cy,m=d.eles,_=function(D,I){return s(I)?I.apply(D,[D]):I},b=d.boundingBox||{x1:0,y1:0,w:v.width(),h:v.height()};b.x2===void 0&&(b.x2=b.x1+b.w),b.w===void 0&&(b.w=b.x2-b.x1),b.y2===void 0&&(b.y2=b.y1+b.h),b.h===void 0&&(b.h=b.y2-b.y1);var w=new c.graphlib.Graph({multigraph:!0,compound:!0}),y={},x=function(D,I){I!=null&&(y[D]=I)};x("nodesep",d.nodeSep),x("edgesep",d.edgeSep),x("ranksep",d.rankSep),x("rankdir",d.rankDir),x("align",d.align),x("ranker",d.ranker),x("acyclicer",d.acyclicer),w.setGraph(y),w.setDefaultEdgeLabel(function(){return{}}),w.setDefaultNodeLabel(function(){return{}});var C=m.nodes();s(d.sort)&&(C=C.sort(d.sort));for(var E=0;E<C.length;E++){var p=C[E],P=p.layoutDimensions(d);w.setNode(p.id(),{width:P.w,height:P.h,name:p.id()})}for(var T=0;T<C.length;T++){var R=C[T];R.isChild()&&w.setParent(R.id(),R.parent().id())}var M=m.edges().stdFilter(function(k){return!k.source().isParent()&&!k.target().isParent()});s(d.sort)&&(M=M.sort(d.sort));for(var N=0;N<M.length;N++){var B=M[N];w.setEdge(B.source().id(),B.target().id(),{minlen:_(B,d.minLen),weight:_(B,d.edgeWeight),name:B.id()},B.id())}c.layout(w);for(var q=w.nodes(),Z=0;Z<q.length;Z++){var Q=q[Z],Y=w.node(Q);v.getElementById(Q).scratch().dagre=Y}var J;d.boundingBox?(J={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0},C.forEach(function(k){var D=k.scratch().dagre;J.x1=Math.min(J.x1,D.x),J.x2=Math.max(J.x2,D.x),J.y1=Math.min(J.y1,D.y),J.y2=Math.max(J.y2,D.y)}),J.w=J.x2-J.x1,J.h=J.y2-J.y1):J=b;var X=function(D){if(d.boundingBox){var I=J.w===0?0:(D.x-J.x1)/J.w,F=J.h===0?0:(D.y-J.y1)/J.h;return{x:b.x1+I*b.w,y:b.y1+F*b.h}}else return D};return C.layoutPositions(h,d,function(k){k=o(k)==="object"?k:this;var D=k.scratch().dagre;return X({x:D.x,y:D.y})}),this},n.exports=f},function(n,a){var i={nodeSep:void 0,edgeSep:void 0,rankSep:void 0,rankDir:void 0,align:void 0,acyclicer:void 0,ranker:void 0,minLen:function(s){return 1},edgeWeight:function(s){return 1},fit:!0,padding:30,spacingFactor:void 0,nodeDimensionsIncludeLabels:!1,animate:!1,animateFilter:function(s,u){return!0},animationDuration:500,animationEasing:void 0,boundingBox:void 0,transform:function(s,u){return u},ready:function(){},sort:void 0,stop:function(){}};n.exports=i},function(n,a){n.exports=Object.assign!=null?Object.assign.bind(Object):function(i){for(var o=arguments.length,s=new Array(o>1?o-1:0),u=1;u<o;u++)s[u-1]=arguments[u];return s.forEach(function(l){Object.keys(l).forEach(function(c){return i[c]=l[c]})}),i}},function(n,a){n.exports=t}])})})(MC);var JN=MC.exports;const eF=Aa(JN);var ME={exports:{}};(function(r){(function(){var e=function(t){if(!t)return;function n(u,l){u.scratch("_undoRedo")===void 0&&u.scratch("_undoRedo",{});var c=u.scratch("_undoRedo");return l===void 0?c:c[l]}function a(u,l,c){var f=n(u);f[l]=c,u.scratch("_undoRedo",f)}function i(u){var l={};return l.options={isDebug:!1,actions:{},undoableDrag:!0,stackSizeLimit:void 0,beforeUndo:function(){},afterUndo:function(){},beforeRedo:function(){},afterRedo:function(){},ready:function(){}},l.actions={},l.undoStack=[],l.redoStack=[],l.reset=function(c,f){this.undoStack=c||[],this.redoStack=f||[]},l.undo=function(){if(this.isUndoStackEmpty())this.options.isDebug&&console.log("Undoing cannot be done because undo stack is empty!");else{var c=this.undoStack.pop();u.trigger("beforeUndo",[c.name,c.args]);var f=this.actions[c.name]._undo(c.args);return this.redoStack.push({name:c.name,args:f}),u.trigger("afterUndo",[c.name,c.args,f]),f}},l.redo=function(){if(this.isRedoStackEmpty())this.options.isDebug&&console.log("Redoing cannot be done because redo stack is empty!");else{var c=this.redoStack.pop();u.trigger(c.firstTime?"beforeDo":"beforeRedo",[c.name,c.args]),c.args||(c.args={}),c.args.firstTime=!!c.firstTime;var f=this.actions[c.name]._do(c.args);return this.undoStack.push({name:c.name,args:f}),this.options.stackSizeLimit!=null&&this.undoStack.length>this.options.stackSizeLimit&&this.undoStack.shift(),u.trigger(c.firstTime?"afterDo":"afterRedo",[c.name,c.args,f]),f}},l.do=function(c,f){return this.redoStack.length=0,this.redoStack.push({name:c,args:f,firstTime:!0}),this.redo()},l.undoAll=function(){for(;!this.isUndoStackEmpty();)this.undo()},l.redoAll=function(){for(;!this.isRedoStackEmpty();)this.redo()},l.action=function(c,f,d){return this.actions[c]={_do:f,_undo:d},this},l.removeAction=function(c){delete this.actions[c]},l.isUndoStackEmpty=function(){return this.undoStack.length===0},l.isRedoStackEmpty=function(){return this.redoStack.length===0},l.getUndoStack=function(){return this.undoStack},l.getRedoStack=function(){return this.redoStack},l}t("core","undoRedo",function(u,l){var c=this,f=n(c,"instance")||i(c);if(a(c,"instance",f),u){for(var d in u)f.options.hasOwnProperty(d)&&(f.options[d]=u[d]);if(u.actions)for(var d in u.actions)f.actions[d]=u.actions[d]}if(!n(c,"isInitialized")&&!l){var h=s(c);for(var d in h)f.actions[d]=h[d];o(c,f.options.undoableDrag),a(c,"isInitialized",!0)}return f.options.ready(),f});function o(u,l){var c=null;u.on("grab","node",function(){(typeof l=="function"?l.call(this):l)&&(c={},c.lastMouseDownPosition={x:this.position("x"),y:this.position("y")},c.node=this)}),u.on("free","node",function(){var f=n(u,"instance");if(typeof l=="function"?l.call(this):l){if(c==null)return;var d=c.node,h=c.lastMouseDownPosition,v={x:d.position("x"),y:d.position("y")};if(v.x!=h.x||v.y!=h.y){var m={x:v.x-h.x,y:v.y-h.y},_;d.selected()?_=u.nodes(":visible").filter(":selected"):_=u.collection([d]);var b={positionDiff:m,nodes:_,move:!1};f.do("drag",b),c=null}}})}function s(u){function l(w){for(var y={},x=0;x<w.length;x++)y[w[x].id()]=!0;var C=w.filter(function(E,p){typeof E=="number"&&(E=p);for(var P=E.parent()[0];P!=null;){if(y[P.id()])return!1;P=P.parent()[0]}return!0});return C}function c(w,y,x){for(var C=x?y:l(y),E=0;E<C.length;E++){var p=C[E],P=p.position("x"),T=p.position("y");p.isParent()||p.position({x:P+w.x,y:T+w.y});var R=p.children();c(w,R,!0)}}function f(w){return typeof w=="string"?u.$(w):w}function d(w){return f(w).restore()}function h(w){var y={};return u.nodes().not(":parent").positions(function(x,C){typeof x=="number"&&(x=C),y[x.id()]={x:x.position("x"),y:x.position("y")};var E=w[x.id()];return{x:E.x,y:E.y}}),y}function v(){for(var w={},y=u.nodes(),x=0;x<y.length;x++){var C=y[x];w[C.id()]={x:C.position("x"),y:C.position("y")}}return w}function m(w){var y={};if(w.firstTime){var x=w.parentData==null?null:w.parentData,C=w.nodes.union(w.nodes.descendants());y.elesToRestore=C.union(C.connectedEdges()),y.movedEles=w.nodes.move({parent:x});var E={x:w.posDiffX,y:w.posDiffY};c(E,y.movedEles)}else y.elesToRestore=w.movedEles.remove(),y.movedEles=w.elesToRestore.restore();return w.callback&&(y.callback=w.callback,w.callback(y.movedEles)),y}function _(w){var y={};if(w.firstTime){var x=w.parentData==null?null:w.parentData,C=w.nodes.union(w.nodes.descendants()),E={};C.forEach(function(T){T.parent().id()?E[T.id()]=T.parent():E[T.id()]=null});var p={};C.forEach(function(T){p[T.id()]={},p[T.id()].x=T.position("x"),p[T.id()].y=T.position("y")}),y.oldParent=E,y.oldPosition=p,y.newParent=x,y.movedEles=C,w.nodes.move({parent:x}).nodes();var P={x:w.posDiffX,y:w.posDiffY};c(P,y.movedEles)}else y.oldParent={},w.movedEles.forEach(function(T){T.parent().id()?y.oldParent[T.id()]=T.parent():y.oldParent[T.id()]=null}),y.oldPosition={},w.movedEles.forEach(function(T){y.oldPosition[T.id()]={},y.oldPosition[T.id()].x=T.position("x"),y.oldPosition[T.id()].y=T.position("y")}),y.newParent=w.oldParent,y.movedEles=w.movedEles,y.movedEles.forEach(function(T){typeof y.newParent!="object"?T.move({parent:y.newParent}):y.newParent[T.id()]==null?T.move({parent:null}):T.move({parent:y.newParent[T.id()].id()}),T.position(w.oldPosition[T.id()])});return w.callback&&(y.callback=w.callback,w.callback(y.movedEles)),y}function b(w,y){for(var x=[],C=n(u,"instance"),E=C.actions,p=0;p<w.length;p++){var P=w[p];if(!E.hasOwnProperty(P.name))throw"Action "+P.name+" does not exist as an undoable function"}for(var p=0;p<w.length;p++){var P=w[p];P.param.firstTime=w.firstTime;var T;y=="undo"?T=E[P.name]._undo(P.param):T=E[P.name]._do(P.param),x.unshift({name:P.name,param:T})}return x}return{add:{_do:function(w){return w.firstTime?u.add(w):d(w)},_undo:u.remove},remove:{_do:u.remove,_undo:d},restore:{_do:d,_undo:u.remove},select:{_do:function(w){return f(w).select()},_undo:function(w){return f(w).unselect()}},unselect:{_do:function(w){return f(w).unselect()},_undo:function(w){return f(w).select()}},move:{_do:function(w){var y=f(w.eles),x=y.nodes(),C=y.edges(),E=[],p=[],P=[];return x.forEach(function(T){E.push(T.parent().length>1?T.parent().id():null)}),C.forEach(function(T){p.push(T.source().id()),P.push(T.target().id())}),{oldNodesParents:E,newNodes:x.move(w.location),oldEdgesSources:p,oldEdgesTargets:P,newEdges:C.move(w.location)}},_undo:function(w){var y=u.collection(),x={};if(w.newNodes.length>0){x.parent=w.newNodes[0].parent().id();for(var C=0;C<w.newNodes.length;C++){var E=w.newNodes[C].move({parent:w.oldNodesParents[C]});y=y.union(E)}}else{x.source=w.newEdges[0].source().id(),x.target=w.newEdges[0].target().id();for(var C=0;C<w.newEdges.length;C++){var p=w.newEdges[C].move({source:w.oldEdgesSources[C],target:w.oldEdgesTargets[C]});y=y.union(p)}}return{eles:y,location:x}}},drag:{_do:function(w){return w.move&&(c(w.positionDiff,w.nodes),u.elements().unselect()),w},_undo:function(w){var y={x:-1*w.positionDiff.x,y:-1*w.positionDiff.y},x={positionDiff:w.positionDiff,nodes:w.nodes,move:!0};return c(y,w.nodes),u.elements().unselect(),x}},layout:{_do:function(w){if(w.firstTime){var y=v(),x;return w.eles?x=f(w.eles).layout(w.options):x=u.layout(w.options),x&&x.run&&x.run(),y}else return h(w)},_undo:function(w){return h(w)}},changeParent:{_do:function(w){return u.nodes()[0].component?_(w):m(w)},_undo:function(w){return u.nodes()[0].component?_(w):m(w)}},batch:{_do:function(w){return b(w,"do")},_undo:function(w){return b(w,"undo")}}}}};r.exports&&(r.exports=e),typeof cytoscape<"u"&&e(cytoscape)})()})(ME);var tF=ME.exports;const rF=Aa(tF);var OE={exports:{}},Op={exports:{}};/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */var hx;function DE(){return hx||(hx=1,function(r){(function(e,t){r.exports=e.document?t(e,!0):function(n){if(!n.document)throw new Error("jQuery requires a window with a document");return t(n)}})(typeof window<"u"?window:Ve,function(e,t){var n=[],a=Object.getPrototypeOf,i=n.slice,o=n.flat?function(g){return n.flat.call(g)}:function(g){return n.concat.apply([],g)},s=n.push,u=n.indexOf,l={},c=l.toString,f=l.hasOwnProperty,d=f.toString,h=d.call(Object),v={},m=function(S){return typeof S=="function"&&typeof S.nodeType!="number"&&typeof S.item!="function"},_=function(S){return S!=null&&S===S.window},b=e.document,w={type:!0,src:!0,nonce:!0,noModule:!0};function y(g,S,A){A=A||b;var O,z,V=A.createElement("script");if(V.text=g,S)for(O in w)z=S[O]||S.getAttribute&&S.getAttribute(O),z&&V.setAttribute(O,z);A.head.appendChild(V).parentNode.removeChild(V)}function x(g){return g==null?g+"":typeof g=="object"||typeof g=="function"?l[c.call(g)]||"object":typeof g}var C="3.7.1",E=/HTML$/i,p=function(g,S){return new p.fn.init(g,S)};p.fn=p.prototype={jquery:C,constructor:p,length:0,toArray:function(){return i.call(this)},get:function(g){return g==null?i.call(this):g<0?this[g+this.length]:this[g]},pushStack:function(g){var S=p.merge(this.constructor(),g);return S.prevObject=this,S},each:function(g){return p.each(this,g)},map:function(g){return this.pushStack(p.map(this,function(S,A){return g.call(S,A,S)}))},slice:function(){return this.pushStack(i.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(p.grep(this,function(g,S){return(S+1)%2}))},odd:function(){return this.pushStack(p.grep(this,function(g,S){return S%2}))},eq:function(g){var S=this.length,A=+g+(g<0?S:0);return this.pushStack(A>=0&&A<S?[this[A]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:n.sort,splice:n.splice},p.extend=p.fn.extend=function(){var g,S,A,O,z,V,K=arguments[0]||{},ue=1,ie=arguments.length,pe=!1;for(typeof K=="boolean"&&(pe=K,K=arguments[ue]||{},ue++),typeof K!="object"&&!m(K)&&(K={}),ue===ie&&(K=this,ue--);ue<ie;ue++)if((g=arguments[ue])!=null)for(S in g)O=g[S],!(S==="__proto__"||K===O)&&(pe&&O&&(p.isPlainObject(O)||(z=Array.isArray(O)))?(A=K[S],z&&!Array.isArray(A)?V=[]:!z&&!p.isPlainObject(A)?V={}:V=A,z=!1,K[S]=p.extend(pe,V,O)):O!==void 0&&(K[S]=O));return K},p.extend({expando:"jQuery"+(C+Math.random()).replace(/\D/g,""),isReady:!0,error:function(g){throw new Error(g)},noop:function(){},isPlainObject:function(g){var S,A;return!g||c.call(g)!=="[object Object]"?!1:(S=a(g),S?(A=f.call(S,"constructor")&&S.constructor,typeof A=="function"&&d.call(A)===h):!0)},isEmptyObject:function(g){var S;for(S in g)return!1;return!0},globalEval:function(g,S,A){y(g,{nonce:S&&S.nonce},A)},each:function(g,S){var A,O=0;if(P(g))for(A=g.length;O<A&&S.call(g[O],O,g[O])!==!1;O++);else for(O in g)if(S.call(g[O],O,g[O])===!1)break;return g},text:function(g){var S,A="",O=0,z=g.nodeType;if(!z)for(;S=g[O++];)A+=p.text(S);return z===1||z===11?g.textContent:z===9?g.documentElement.textContent:z===3||z===4?g.nodeValue:A},makeArray:function(g,S){var A=S||[];return g!=null&&(P(Object(g))?p.merge(A,typeof g=="string"?[g]:g):s.call(A,g)),A},inArray:function(g,S,A){return S==null?-1:u.call(S,g,A)},isXMLDoc:function(g){var S=g&&g.namespaceURI,A=g&&(g.ownerDocument||g).documentElement;return!E.test(S||A&&A.nodeName||"HTML")},merge:function(g,S){for(var A=+S.length,O=0,z=g.length;O<A;O++)g[z++]=S[O];return g.length=z,g},grep:function(g,S,A){for(var O,z=[],V=0,K=g.length,ue=!A;V<K;V++)O=!S(g[V],V),O!==ue&&z.push(g[V]);return z},map:function(g,S,A){var O,z,V=0,K=[];if(P(g))for(O=g.length;V<O;V++)z=S(g[V],V,A),z!=null&&K.push(z);else for(V in g)z=S(g[V],V,A),z!=null&&K.push(z);return o(K)},guid:1,support:v}),typeof Symbol=="function"&&(p.fn[Symbol.iterator]=n[Symbol.iterator]),p.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(g,S){l["[object "+S+"]"]=S.toLowerCase()});function P(g){var S=!!g&&"length"in g&&g.length,A=x(g);return m(g)||_(g)?!1:A==="array"||S===0||typeof S=="number"&&S>0&&S-1 in g}function T(g,S){return g.nodeName&&g.nodeName.toLowerCase()===S.toLowerCase()}var R=n.pop,M=n.sort,N=n.splice,B="[\\x20\\t\\r\\n\\f]",q=new RegExp("^"+B+"+|((?:^|[^\\\\])(?:\\\\.)*)"+B+"+$","g");p.contains=function(g,S){var A=S&&S.parentNode;return g===A||!!(A&&A.nodeType===1&&(g.contains?g.contains(A):g.compareDocumentPosition&&g.compareDocumentPosition(A)&16))};var Z=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function Q(g,S){return S?g==="\0"?"�":g.slice(0,-1)+"\\"+g.charCodeAt(g.length-1).toString(16)+" ":"\\"+g}p.escapeSelector=function(g){return(g+"").replace(Z,Q)};var Y=b,J=s;(function(){var g,S,A,O,z,V=J,K,ue,ie,pe,Ee,ke=p.expando,be=0,Ie=0,it=hs(),_t=hs(),ut=hs(),Er=hs(),hr=function(ee,he){return ee===he&&(z=!0),0},Cn="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",En="(?:\\\\[\\da-fA-F]{1,6}"+B+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",bt="\\["+B+"*("+En+")(?:"+B+"*([*^$|!~]?=)"+B+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+En+"))|)"+B+"*\\]",Ba=":("+En+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+bt+")*)|.*)\\)|)",St=new RegExp(B+"+","g"),nr=new RegExp("^"+B+"*,"+B+"*"),co=new RegExp("^"+B+"*([>+~]|"+B+")"+B+"*"),Wl=new RegExp(B+"|>"),Tn=new RegExp(Ba),fo=new RegExp("^"+En+"$"),Pn={ID:new RegExp("^#("+En+")"),CLASS:new RegExp("^\\.("+En+")"),TAG:new RegExp("^("+En+"|[*])"),ATTR:new RegExp("^"+bt),PSEUDO:new RegExp("^"+Ba),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+B+"*(even|odd|(([+-]|)(\\d*)n|)"+B+"*(?:([+-]|)"+B+"*(\\d+)|))"+B+"*\\)|)","i"),bool:new RegExp("^(?:"+Cn+")$","i"),needsContext:new RegExp("^"+B+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+B+"*((?:-\\d)?\\d*)"+B+"*\\)|)(?=[^-]|$)","i")},ua=/^(?:input|select|textarea|button)$/i,la=/^h\d$/i,tn=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Kl=/[+~]/,$n=new RegExp("\\\\[\\da-fA-F]{1,6}"+B+"?|\\\\([^\\r\\n\\f])","g"),Vn=function(ee,he){var ye="0x"+ee.slice(1)-65536;return he||(ye<0?String.fromCharCode(ye+65536):String.fromCharCode(ye>>10|55296,ye&1023|56320))},Z2=function(){ca()},Q2=ps(function(ee){return ee.disabled===!0&&T(ee,"fieldset")},{dir:"parentNode",next:"legend"});function J2(){try{return K.activeElement}catch{}}try{V.apply(n=i.call(Y.childNodes),Y.childNodes),n[Y.childNodes.length].nodeType}catch{V={apply:function(he,ye){J.apply(he,i.call(ye))},call:function(he){J.apply(he,i.call(arguments,1))}}}function Dt(ee,he,ye,xe){var Ae,ze,He,Xe,je,yt,at,ot=he&&he.ownerDocument,mt=he?he.nodeType:9;if(ye=ye||[],typeof ee!="string"||!ee||mt!==1&&mt!==9&&mt!==11)return ye;if(!xe&&(ca(he),he=he||K,ie)){if(mt!==11&&(je=tn.exec(ee)))if(Ae=je[1]){if(mt===9)if(He=he.getElementById(Ae)){if(He.id===Ae)return V.call(ye,He),ye}else return ye;else if(ot&&(He=ot.getElementById(Ae))&&Dt.contains(he,He)&&He.id===Ae)return V.call(ye,He),ye}else{if(je[2])return V.apply(ye,he.getElementsByTagName(ee)),ye;if((Ae=je[3])&&he.getElementsByClassName)return V.apply(ye,he.getElementsByClassName(Ae)),ye}if(!Er[ee+" "]&&(!pe||!pe.test(ee))){if(at=ee,ot=he,mt===1&&(Wl.test(ee)||co.test(ee))){for(ot=Kl.test(ee)&&Yl(he.parentNode)||he,(ot!=he||!v.scope)&&((Xe=he.getAttribute("id"))?Xe=p.escapeSelector(Xe):he.setAttribute("id",Xe=ke)),yt=ho(ee),ze=yt.length;ze--;)yt[ze]=(Xe?"#"+Xe:":scope")+" "+vs(yt[ze]);at=yt.join(",")}try{return V.apply(ye,ot.querySelectorAll(at)),ye}catch{Er(ee,!0)}finally{Xe===ke&&he.removeAttribute("id")}}}return Ry(ee.replace(q,"$1"),he,ye,xe)}function hs(){var ee=[];function he(ye,xe){return ee.push(ye+" ")>S.cacheLength&&delete he[ee.shift()],he[ye+" "]=xe}return he}function fn(ee){return ee[ke]=!0,ee}function pi(ee){var he=K.createElement("fieldset");try{return!!ee(he)}catch{return!1}finally{he.parentNode&&he.parentNode.removeChild(he),he=null}}function eT(ee){return function(he){return T(he,"input")&&he.type===ee}}function tT(ee){return function(he){return(T(he,"input")||T(he,"button"))&&he.type===ee}}function Oy(ee){return function(he){return"form"in he?he.parentNode&&he.disabled===!1?"label"in he?"label"in he.parentNode?he.parentNode.disabled===ee:he.disabled===ee:he.isDisabled===ee||he.isDisabled!==!ee&&Q2(he)===ee:he.disabled===ee:"label"in he?he.disabled===ee:!1}}function qa(ee){return fn(function(he){return he=+he,fn(function(ye,xe){for(var Ae,ze=ee([],ye.length,he),He=ze.length;He--;)ye[Ae=ze[He]]&&(ye[Ae]=!(xe[Ae]=ye[Ae]))})})}function Yl(ee){return ee&&typeof ee.getElementsByTagName<"u"&&ee}function ca(ee){var he,ye=ee?ee.ownerDocument||ee:Y;return ye==K||ye.nodeType!==9||!ye.documentElement||(K=ye,ue=K.documentElement,ie=!p.isXMLDoc(K),Ee=ue.matches||ue.webkitMatchesSelector||ue.msMatchesSelector,ue.msMatchesSelector&&Y!=K&&(he=K.defaultView)&&he.top!==he&&he.addEventListener("unload",Z2),v.getById=pi(function(xe){return ue.appendChild(xe).id=p.expando,!K.getElementsByName||!K.getElementsByName(p.expando).length}),v.disconnectedMatch=pi(function(xe){return Ee.call(xe,"*")}),v.scope=pi(function(){return K.querySelectorAll(":scope")}),v.cssHas=pi(function(){try{return K.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),v.getById?(S.filter.ID=function(xe){var Ae=xe.replace($n,Vn);return function(ze){return ze.getAttribute("id")===Ae}},S.find.ID=function(xe,Ae){if(typeof Ae.getElementById<"u"&&ie){var ze=Ae.getElementById(xe);return ze?[ze]:[]}}):(S.filter.ID=function(xe){var Ae=xe.replace($n,Vn);return function(ze){var He=typeof ze.getAttributeNode<"u"&&ze.getAttributeNode("id");return He&&He.value===Ae}},S.find.ID=function(xe,Ae){if(typeof Ae.getElementById<"u"&&ie){var ze,He,Xe,je=Ae.getElementById(xe);if(je){if(ze=je.getAttributeNode("id"),ze&&ze.value===xe)return[je];for(Xe=Ae.getElementsByName(xe),He=0;je=Xe[He++];)if(ze=je.getAttributeNode("id"),ze&&ze.value===xe)return[je]}return[]}}),S.find.TAG=function(xe,Ae){return typeof Ae.getElementsByTagName<"u"?Ae.getElementsByTagName(xe):Ae.querySelectorAll(xe)},S.find.CLASS=function(xe,Ae){if(typeof Ae.getElementsByClassName<"u"&&ie)return Ae.getElementsByClassName(xe)},pe=[],pi(function(xe){var Ae;ue.appendChild(xe).innerHTML="<a id='"+ke+"' href='' disabled='disabled'></a><select id='"+ke+"-\r\\' disabled='disabled'><option selected=''></option></select>",xe.querySelectorAll("[selected]").length||pe.push("\\["+B+"*(?:value|"+Cn+")"),xe.querySelectorAll("[id~="+ke+"-]").length||pe.push("~="),xe.querySelectorAll("a#"+ke+"+*").length||pe.push(".#.+[+~]"),xe.querySelectorAll(":checked").length||pe.push(":checked"),Ae=K.createElement("input"),Ae.setAttribute("type","hidden"),xe.appendChild(Ae).setAttribute("name","D"),ue.appendChild(xe).disabled=!0,xe.querySelectorAll(":disabled").length!==2&&pe.push(":enabled",":disabled"),Ae=K.createElement("input"),Ae.setAttribute("name",""),xe.appendChild(Ae),xe.querySelectorAll("[name='']").length||pe.push("\\["+B+"*name"+B+"*="+B+`*(?:''|"")`)}),v.cssHas||pe.push(":has"),pe=pe.length&&new RegExp(pe.join("|")),hr=function(xe,Ae){if(xe===Ae)return z=!0,0;var ze=!xe.compareDocumentPosition-!Ae.compareDocumentPosition;return ze||(ze=(xe.ownerDocument||xe)==(Ae.ownerDocument||Ae)?xe.compareDocumentPosition(Ae):1,ze&1||!v.sortDetached&&Ae.compareDocumentPosition(xe)===ze?xe===K||xe.ownerDocument==Y&&Dt.contains(Y,xe)?-1:Ae===K||Ae.ownerDocument==Y&&Dt.contains(Y,Ae)?1:O?u.call(O,xe)-u.call(O,Ae):0:ze&4?-1:1)}),K}Dt.matches=function(ee,he){return Dt(ee,null,null,he)},Dt.matchesSelector=function(ee,he){if(ca(ee),ie&&!Er[he+" "]&&(!pe||!pe.test(he)))try{var ye=Ee.call(ee,he);if(ye||v.disconnectedMatch||ee.document&&ee.document.nodeType!==11)return ye}catch{Er(he,!0)}return Dt(he,K,null,[ee]).length>0},Dt.contains=function(ee,he){return(ee.ownerDocument||ee)!=K&&ca(ee),p.contains(ee,he)},Dt.attr=function(ee,he){(ee.ownerDocument||ee)!=K&&ca(ee);var ye=S.attrHandle[he.toLowerCase()],xe=ye&&f.call(S.attrHandle,he.toLowerCase())?ye(ee,he,!ie):void 0;return xe!==void 0?xe:ee.getAttribute(he)},Dt.error=function(ee){throw new Error("Syntax error, unrecognized expression: "+ee)},p.uniqueSort=function(ee){var he,ye=[],xe=0,Ae=0;if(z=!v.sortStable,O=!v.sortStable&&i.call(ee,0),M.call(ee,hr),z){for(;he=ee[Ae++];)he===ee[Ae]&&(xe=ye.push(Ae));for(;xe--;)N.call(ee,ye[xe],1)}return O=null,ee},p.fn.uniqueSort=function(){return this.pushStack(p.uniqueSort(i.apply(this)))},S=p.expr={cacheLength:50,createPseudo:fn,match:Pn,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(ee){return ee[1]=ee[1].replace($n,Vn),ee[3]=(ee[3]||ee[4]||ee[5]||"").replace($n,Vn),ee[2]==="~="&&(ee[3]=" "+ee[3]+" "),ee.slice(0,4)},CHILD:function(ee){return ee[1]=ee[1].toLowerCase(),ee[1].slice(0,3)==="nth"?(ee[3]||Dt.error(ee[0]),ee[4]=+(ee[4]?ee[5]+(ee[6]||1):2*(ee[3]==="even"||ee[3]==="odd")),ee[5]=+(ee[7]+ee[8]||ee[3]==="odd")):ee[3]&&Dt.error(ee[0]),ee},PSEUDO:function(ee){var he,ye=!ee[6]&&ee[2];return Pn.CHILD.test(ee[0])?null:(ee[3]?ee[2]=ee[4]||ee[5]||"":ye&&Tn.test(ye)&&(he=ho(ye,!0))&&(he=ye.indexOf(")",ye.length-he)-ye.length)&&(ee[0]=ee[0].slice(0,he),ee[2]=ye.slice(0,he)),ee.slice(0,3))}},filter:{TAG:function(ee){var he=ee.replace($n,Vn).toLowerCase();return ee==="*"?function(){return!0}:function(ye){return T(ye,he)}},CLASS:function(ee){var he=it[ee+" "];return he||(he=new RegExp("(^|"+B+")"+ee+"("+B+"|$)"))&&it(ee,function(ye){return he.test(typeof ye.className=="string"&&ye.className||typeof ye.getAttribute<"u"&&ye.getAttribute("class")||"")})},ATTR:function(ee,he,ye){return function(xe){var Ae=Dt.attr(xe,ee);return Ae==null?he==="!=":he?(Ae+="",he==="="?Ae===ye:he==="!="?Ae!==ye:he==="^="?ye&&Ae.indexOf(ye)===0:he==="*="?ye&&Ae.indexOf(ye)>-1:he==="$="?ye&&Ae.slice(-ye.length)===ye:he==="~="?(" "+Ae.replace(St," ")+" ").indexOf(ye)>-1:he==="|="?Ae===ye||Ae.slice(0,ye.length+1)===ye+"-":!1):!0}},CHILD:function(ee,he,ye,xe,Ae){var ze=ee.slice(0,3)!=="nth",He=ee.slice(-4)!=="last",Xe=he==="of-type";return xe===1&&Ae===0?function(je){return!!je.parentNode}:function(je,yt,at){var ot,mt,tt,Gt,jr,Dr=ze!==He?"nextSibling":"previousSibling",rn=je.parentNode,An=Xe&&je.nodeName.toLowerCase(),gi=!at&&!Xe,qr=!1;if(rn){if(ze){for(;Dr;){for(tt=je;tt=tt[Dr];)if(Xe?T(tt,An):tt.nodeType===1)return!1;jr=Dr=ee==="only"&&!jr&&"nextSibling"}return!0}if(jr=[He?rn.firstChild:rn.lastChild],He&&gi){for(mt=rn[ke]||(rn[ke]={}),ot=mt[ee]||[],Gt=ot[0]===be&&ot[1],qr=Gt&&ot[2],tt=Gt&&rn.childNodes[Gt];tt=++Gt&&tt&&tt[Dr]||(qr=Gt=0)||jr.pop();)if(tt.nodeType===1&&++qr&&tt===je){mt[ee]=[be,Gt,qr];break}}else if(gi&&(mt=je[ke]||(je[ke]={}),ot=mt[ee]||[],Gt=ot[0]===be&&ot[1],qr=Gt),qr===!1)for(;(tt=++Gt&&tt&&tt[Dr]||(qr=Gt=0)||jr.pop())&&!((Xe?T(tt,An):tt.nodeType===1)&&++qr&&(gi&&(mt=tt[ke]||(tt[ke]={}),mt[ee]=[be,qr]),tt===je)););return qr-=Ae,qr===xe||qr%xe===0&&qr/xe>=0}}},PSEUDO:function(ee,he){var ye,xe=S.pseudos[ee]||S.setFilters[ee.toLowerCase()]||Dt.error("unsupported pseudo: "+ee);return xe[ke]?xe(he):xe.length>1?(ye=[ee,ee,"",he],S.setFilters.hasOwnProperty(ee.toLowerCase())?fn(function(Ae,ze){for(var He,Xe=xe(Ae,he),je=Xe.length;je--;)He=u.call(Ae,Xe[je]),Ae[He]=!(ze[He]=Xe[je])}):function(Ae){return xe(Ae,0,ye)}):xe}},pseudos:{not:fn(function(ee){var he=[],ye=[],xe=Jl(ee.replace(q,"$1"));return xe[ke]?fn(function(Ae,ze,He,Xe){for(var je,yt=xe(Ae,null,Xe,[]),at=Ae.length;at--;)(je=yt[at])&&(Ae[at]=!(ze[at]=je))}):function(Ae,ze,He){return he[0]=Ae,xe(he,null,He,ye),he[0]=null,!ye.pop()}}),has:fn(function(ee){return function(he){return Dt(ee,he).length>0}}),contains:fn(function(ee){return ee=ee.replace($n,Vn),function(he){return(he.textContent||p.text(he)).indexOf(ee)>-1}}),lang:fn(function(ee){return fo.test(ee||"")||Dt.error("unsupported lang: "+ee),ee=ee.replace($n,Vn).toLowerCase(),function(he){var ye;do if(ye=ie?he.lang:he.getAttribute("xml:lang")||he.getAttribute("lang"))return ye=ye.toLowerCase(),ye===ee||ye.indexOf(ee+"-")===0;while((he=he.parentNode)&&he.nodeType===1);return!1}}),target:function(ee){var he=e.location&&e.location.hash;return he&&he.slice(1)===ee.id},root:function(ee){return ee===ue},focus:function(ee){return ee===J2()&&K.hasFocus()&&!!(ee.type||ee.href||~ee.tabIndex)},enabled:Oy(!1),disabled:Oy(!0),checked:function(ee){return T(ee,"input")&&!!ee.checked||T(ee,"option")&&!!ee.selected},selected:function(ee){return ee.parentNode&&ee.parentNode.selectedIndex,ee.selected===!0},empty:function(ee){for(ee=ee.firstChild;ee;ee=ee.nextSibling)if(ee.nodeType<6)return!1;return!0},parent:function(ee){return!S.pseudos.empty(ee)},header:function(ee){return la.test(ee.nodeName)},input:function(ee){return ua.test(ee.nodeName)},button:function(ee){return T(ee,"input")&&ee.type==="button"||T(ee,"button")},text:function(ee){var he;return T(ee,"input")&&ee.type==="text"&&((he=ee.getAttribute("type"))==null||he.toLowerCase()==="text")},first:qa(function(){return[0]}),last:qa(function(ee,he){return[he-1]}),eq:qa(function(ee,he,ye){return[ye<0?ye+he:ye]}),even:qa(function(ee,he){for(var ye=0;ye<he;ye+=2)ee.push(ye);return ee}),odd:qa(function(ee,he){for(var ye=1;ye<he;ye+=2)ee.push(ye);return ee}),lt:qa(function(ee,he,ye){var xe;for(ye<0?xe=ye+he:ye>he?xe=he:xe=ye;--xe>=0;)ee.push(xe);return ee}),gt:qa(function(ee,he,ye){for(var xe=ye<0?ye+he:ye;++xe<he;)ee.push(xe);return ee})}},S.pseudos.nth=S.pseudos.eq;for(g in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})S.pseudos[g]=eT(g);for(g in{submit:!0,reset:!0})S.pseudos[g]=tT(g);function Dy(){}Dy.prototype=S.filters=S.pseudos,S.setFilters=new Dy;function ho(ee,he){var ye,xe,Ae,ze,He,Xe,je,yt=_t[ee+" "];if(yt)return he?0:yt.slice(0);for(He=ee,Xe=[],je=S.preFilter;He;){(!ye||(xe=nr.exec(He)))&&(xe&&(He=He.slice(xe[0].length)||He),Xe.push(Ae=[])),ye=!1,(xe=co.exec(He))&&(ye=xe.shift(),Ae.push({value:ye,type:xe[0].replace(q," ")}),He=He.slice(ye.length));for(ze in S.filter)(xe=Pn[ze].exec(He))&&(!je[ze]||(xe=je[ze](xe)))&&(ye=xe.shift(),Ae.push({value:ye,type:ze,matches:xe}),He=He.slice(ye.length));if(!ye)break}return he?He.length:He?Dt.error(ee):_t(ee,Xe).slice(0)}function vs(ee){for(var he=0,ye=ee.length,xe="";he<ye;he++)xe+=ee[he].value;return xe}function ps(ee,he,ye){var xe=he.dir,Ae=he.next,ze=Ae||xe,He=ye&&ze==="parentNode",Xe=Ie++;return he.first?function(je,yt,at){for(;je=je[xe];)if(je.nodeType===1||He)return ee(je,yt,at);return!1}:function(je,yt,at){var ot,mt,tt=[be,Xe];if(at){for(;je=je[xe];)if((je.nodeType===1||He)&&ee(je,yt,at))return!0}else for(;je=je[xe];)if(je.nodeType===1||He)if(mt=je[ke]||(je[ke]={}),Ae&&T(je,Ae))je=je[xe]||je;else{if((ot=mt[ze])&&ot[0]===be&&ot[1]===Xe)return tt[2]=ot[2];if(mt[ze]=tt,tt[2]=ee(je,yt,at))return!0}return!1}}function Xl(ee){return ee.length>1?function(he,ye,xe){for(var Ae=ee.length;Ae--;)if(!ee[Ae](he,ye,xe))return!1;return!0}:ee[0]}function rT(ee,he,ye){for(var xe=0,Ae=he.length;xe<Ae;xe++)Dt(ee,he[xe],ye);return ye}function gs(ee,he,ye,xe,Ae){for(var ze,He=[],Xe=0,je=ee.length,yt=he!=null;Xe<je;Xe++)(ze=ee[Xe])&&(!ye||ye(ze,xe,Ae))&&(He.push(ze),yt&&he.push(Xe));return He}function Zl(ee,he,ye,xe,Ae,ze){return xe&&!xe[ke]&&(xe=Zl(xe)),Ae&&!Ae[ke]&&(Ae=Zl(Ae,ze)),fn(function(He,Xe,je,yt){var at,ot,mt,tt,Gt=[],jr=[],Dr=Xe.length,rn=He||rT(he||"*",je.nodeType?[je]:je,[]),An=ee&&(He||!he)?gs(rn,Gt,ee,je,yt):rn;if(ye?(tt=Ae||(He?ee:Dr||xe)?[]:Xe,ye(An,tt,je,yt)):tt=An,xe)for(at=gs(tt,jr),xe(at,[],je,yt),ot=at.length;ot--;)(mt=at[ot])&&(tt[jr[ot]]=!(An[jr[ot]]=mt));if(He){if(Ae||ee){if(Ae){for(at=[],ot=tt.length;ot--;)(mt=tt[ot])&&at.push(An[ot]=mt);Ae(null,tt=[],at,yt)}for(ot=tt.length;ot--;)(mt=tt[ot])&&(at=Ae?u.call(He,mt):Gt[ot])>-1&&(He[at]=!(Xe[at]=mt))}}else tt=gs(tt===Xe?tt.splice(Dr,tt.length):tt),Ae?Ae(null,Xe,tt,yt):V.apply(Xe,tt)})}function Ql(ee){for(var he,ye,xe,Ae=ee.length,ze=S.relative[ee[0].type],He=ze||S.relative[" "],Xe=ze?1:0,je=ps(function(ot){return ot===he},He,!0),yt=ps(function(ot){return u.call(he,ot)>-1},He,!0),at=[function(ot,mt,tt){var Gt=!ze&&(tt||mt!=A)||((he=mt).nodeType?je(ot,mt,tt):yt(ot,mt,tt));return he=null,Gt}];Xe<Ae;Xe++)if(ye=S.relative[ee[Xe].type])at=[ps(Xl(at),ye)];else{if(ye=S.filter[ee[Xe].type].apply(null,ee[Xe].matches),ye[ke]){for(xe=++Xe;xe<Ae&&!S.relative[ee[xe].type];xe++);return Zl(Xe>1&&Xl(at),Xe>1&&vs(ee.slice(0,Xe-1).concat({value:ee[Xe-2].type===" "?"*":""})).replace(q,"$1"),ye,Xe<xe&&Ql(ee.slice(Xe,xe)),xe<Ae&&Ql(ee=ee.slice(xe)),xe<Ae&&vs(ee))}at.push(ye)}return Xl(at)}function nT(ee,he){var ye=he.length>0,xe=ee.length>0,Ae=function(ze,He,Xe,je,yt){var at,ot,mt,tt=0,Gt="0",jr=ze&&[],Dr=[],rn=A,An=ze||xe&&S.find.TAG("*",yt),gi=be+=rn==null?1:Math.random()||.1,qr=An.length;for(yt&&(A=He==K||He||yt);Gt!==qr&&(at=An[Gt])!=null;Gt++){if(xe&&at){for(ot=0,!He&&at.ownerDocument!=K&&(ca(at),Xe=!ie);mt=ee[ot++];)if(mt(at,He||K,Xe)){V.call(je,at);break}yt&&(be=gi)}ye&&((at=!mt&&at)&&tt--,ze&&jr.push(at))}if(tt+=Gt,ye&&Gt!==tt){for(ot=0;mt=he[ot++];)mt(jr,Dr,He,Xe);if(ze){if(tt>0)for(;Gt--;)jr[Gt]||Dr[Gt]||(Dr[Gt]=R.call(je));Dr=gs(Dr)}V.apply(je,Dr),yt&&!ze&&Dr.length>0&&tt+he.length>1&&p.uniqueSort(je)}return yt&&(be=gi,A=rn),jr};return ye?fn(Ae):Ae}function Jl(ee,he){var ye,xe=[],Ae=[],ze=ut[ee+" "];if(!ze){for(he||(he=ho(ee)),ye=he.length;ye--;)ze=Ql(he[ye]),ze[ke]?xe.push(ze):Ae.push(ze);ze=ut(ee,nT(Ae,xe)),ze.selector=ee}return ze}function Ry(ee,he,ye,xe){var Ae,ze,He,Xe,je,yt=typeof ee=="function"&&ee,at=!xe&&ho(ee=yt.selector||ee);if(ye=ye||[],at.length===1){if(ze=at[0]=at[0].slice(0),ze.length>2&&(He=ze[0]).type==="ID"&&he.nodeType===9&&ie&&S.relative[ze[1].type]){if(he=(S.find.ID(He.matches[0].replace($n,Vn),he)||[])[0],he)yt&&(he=he.parentNode);else return ye;ee=ee.slice(ze.shift().value.length)}for(Ae=Pn.needsContext.test(ee)?0:ze.length;Ae--&&(He=ze[Ae],!S.relative[Xe=He.type]);)if((je=S.find[Xe])&&(xe=je(He.matches[0].replace($n,Vn),Kl.test(ze[0].type)&&Yl(he.parentNode)||he))){if(ze.splice(Ae,1),ee=xe.length&&vs(ze),!ee)return V.apply(ye,xe),ye;break}}return(yt||Jl(ee,at))(xe,he,!ie,ye,!he||Kl.test(ee)&&Yl(he.parentNode)||he),ye}v.sortStable=ke.split("").sort(hr).join("")===ke,ca(),v.sortDetached=pi(function(ee){return ee.compareDocumentPosition(K.createElement("fieldset"))&1}),p.find=Dt,p.expr[":"]=p.expr.pseudos,p.unique=p.uniqueSort,Dt.compile=Jl,Dt.select=Ry,Dt.setDocument=ca,Dt.tokenize=ho,Dt.escape=p.escapeSelector,Dt.getText=p.text,Dt.isXML=p.isXMLDoc,Dt.selectors=p.expr,Dt.support=p.support,Dt.uniqueSort=p.uniqueSort})();var X=function(g,S,A){for(var O=[],z=A!==void 0;(g=g[S])&&g.nodeType!==9;)if(g.nodeType===1){if(z&&p(g).is(A))break;O.push(g)}return O},k=function(g,S){for(var A=[];g;g=g.nextSibling)g.nodeType===1&&g!==S&&A.push(g);return A},D=p.expr.match.needsContext,I=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function F(g,S,A){return m(S)?p.grep(g,function(O,z){return!!S.call(O,z,O)!==A}):S.nodeType?p.grep(g,function(O){return O===S!==A}):typeof S!="string"?p.grep(g,function(O){return u.call(S,O)>-1!==A}):p.filter(S,g,A)}p.filter=function(g,S,A){var O=S[0];return A&&(g=":not("+g+")"),S.length===1&&O.nodeType===1?p.find.matchesSelector(O,g)?[O]:[]:p.find.matches(g,p.grep(S,function(z){return z.nodeType===1}))},p.fn.extend({find:function(g){var S,A,O=this.length,z=this;if(typeof g!="string")return this.pushStack(p(g).filter(function(){for(S=0;S<O;S++)if(p.contains(z[S],this))return!0}));for(A=this.pushStack([]),S=0;S<O;S++)p.find(g,z[S],A);return O>1?p.uniqueSort(A):A},filter:function(g){return this.pushStack(F(this,g||[],!1))},not:function(g){return this.pushStack(F(this,g||[],!0))},is:function(g){return!!F(this,typeof g=="string"&&D.test(g)?p(g):g||[],!1).length}});var L,H=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,j=p.fn.init=function(g,S,A){var O,z;if(!g)return this;if(A=A||L,typeof g=="string")if(g[0]==="<"&&g[g.length-1]===">"&&g.length>=3?O=[null,g,null]:O=H.exec(g),O&&(O[1]||!S))if(O[1]){if(S=S instanceof p?S[0]:S,p.merge(this,p.parseHTML(O[1],S&&S.nodeType?S.ownerDocument||S:b,!0)),I.test(O[1])&&p.isPlainObject(S))for(O in S)m(this[O])?this[O](S[O]):this.attr(O,S[O]);return this}else return z=b.getElementById(O[2]),z&&(this[0]=z,this.length=1),this;else return!S||S.jquery?(S||A).find(g):this.constructor(S).find(g);else{if(g.nodeType)return this[0]=g,this.length=1,this;if(m(g))return A.ready!==void 0?A.ready(g):g(p)}return p.makeArray(g,this)};j.prototype=p.fn,L=p(b);var W=/^(?:parents|prev(?:Until|All))/,re={children:!0,contents:!0,next:!0,prev:!0};p.fn.extend({has:function(g){var S=p(g,this),A=S.length;return this.filter(function(){for(var O=0;O<A;O++)if(p.contains(this,S[O]))return!0})},closest:function(g,S){var A,O=0,z=this.length,V=[],K=typeof g!="string"&&p(g);if(!D.test(g)){for(;O<z;O++)for(A=this[O];A&&A!==S;A=A.parentNode)if(A.nodeType<11&&(K?K.index(A)>-1:A.nodeType===1&&p.find.matchesSelector(A,g))){V.push(A);break}}return this.pushStack(V.length>1?p.uniqueSort(V):V)},index:function(g){return g?typeof g=="string"?u.call(p(g),this[0]):u.call(this,g.jquery?g[0]:g):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(g,S){return this.pushStack(p.uniqueSort(p.merge(this.get(),p(g,S))))},addBack:function(g){return this.add(g==null?this.prevObject:this.prevObject.filter(g))}});function se(g,S){for(;(g=g[S])&&g.nodeType!==1;);return g}p.each({parent:function(g){var S=g.parentNode;return S&&S.nodeType!==11?S:null},parents:function(g){return X(g,"parentNode")},parentsUntil:function(g,S,A){return X(g,"parentNode",A)},next:function(g){return se(g,"nextSibling")},prev:function(g){return se(g,"previousSibling")},nextAll:function(g){return X(g,"nextSibling")},prevAll:function(g){return X(g,"previousSibling")},nextUntil:function(g,S,A){return X(g,"nextSibling",A)},prevUntil:function(g,S,A){return X(g,"previousSibling",A)},siblings:function(g){return k((g.parentNode||{}).firstChild,g)},children:function(g){return k(g.firstChild)},contents:function(g){return g.contentDocument!=null&&a(g.contentDocument)?g.contentDocument:(T(g,"template")&&(g=g.content||g),p.merge([],g.childNodes))}},function(g,S){p.fn[g]=function(A,O){var z=p.map(this,S,A);return g.slice(-5)!=="Until"&&(O=A),O&&typeof O=="string"&&(z=p.filter(O,z)),this.length>1&&(re[g]||p.uniqueSort(z),W.test(g)&&z.reverse()),this.pushStack(z)}});var ce=/[^\x20\t\r\n\f]+/g;function ge(g){var S={};return p.each(g.match(ce)||[],function(A,O){S[O]=!0}),S}p.Callbacks=function(g){g=typeof g=="string"?ge(g):p.extend({},g);var S,A,O,z,V=[],K=[],ue=-1,ie=function(){for(z=z||g.once,O=S=!0;K.length;ue=-1)for(A=K.shift();++ue<V.length;)V[ue].apply(A[0],A[1])===!1&&g.stopOnFalse&&(ue=V.length,A=!1);g.memory||(A=!1),S=!1,z&&(A?V=[]:V="")},pe={add:function(){return V&&(A&&!S&&(ue=V.length-1,K.push(A)),function Ee(ke){p.each(ke,function(be,Ie){m(Ie)?(!g.unique||!pe.has(Ie))&&V.push(Ie):Ie&&Ie.length&&x(Ie)!=="string"&&Ee(Ie)})}(arguments),A&&!S&&ie()),this},remove:function(){return p.each(arguments,function(Ee,ke){for(var be;(be=p.inArray(ke,V,be))>-1;)V.splice(be,1),be<=ue&&ue--}),this},has:function(Ee){return Ee?p.inArray(Ee,V)>-1:V.length>0},empty:function(){return V&&(V=[]),this},disable:function(){return z=K=[],V=A="",this},disabled:function(){return!V},lock:function(){return z=K=[],!A&&!S&&(V=A=""),this},locked:function(){return!!z},fireWith:function(Ee,ke){return z||(ke=ke||[],ke=[Ee,ke.slice?ke.slice():ke],K.push(ke),S||ie()),this},fire:function(){return pe.fireWith(this,arguments),this},fired:function(){return!!O}};return pe};function Pe(g){return g}function Oe(g){throw g}function Se(g,S,A,O){var z;try{g&&m(z=g.promise)?z.call(g).done(S).fail(A):g&&m(z=g.then)?z.call(g,S,A):S.apply(void 0,[g].slice(O))}catch(V){A.apply(void 0,[V])}}p.extend({Deferred:function(g){var S=[["notify","progress",p.Callbacks("memory"),p.Callbacks("memory"),2],["resolve","done",p.Callbacks("once memory"),p.Callbacks("once memory"),0,"resolved"],["reject","fail",p.Callbacks("once memory"),p.Callbacks("once memory"),1,"rejected"]],A="pending",O={state:function(){return A},always:function(){return z.done(arguments).fail(arguments),this},catch:function(V){return O.then(null,V)},pipe:function(){var V=arguments;return p.Deferred(function(K){p.each(S,function(ue,ie){var pe=m(V[ie[4]])&&V[ie[4]];z[ie[1]](function(){var Ee=pe&&pe.apply(this,arguments);Ee&&m(Ee.promise)?Ee.promise().progress(K.notify).done(K.resolve).fail(K.reject):K[ie[0]+"With"](this,pe?[Ee]:arguments)})}),V=null}).promise()},then:function(V,K,ue){var ie=0;function pe(Ee,ke,be,Ie){return function(){var it=this,_t=arguments,ut=function(){var hr,Cn;if(!(Ee<ie)){if(hr=be.apply(it,_t),hr===ke.promise())throw new TypeError("Thenable self-resolution");Cn=hr&&(typeof hr=="object"||typeof hr=="function")&&hr.then,m(Cn)?Ie?Cn.call(hr,pe(ie,ke,Pe,Ie),pe(ie,ke,Oe,Ie)):(ie++,Cn.call(hr,pe(ie,ke,Pe,Ie),pe(ie,ke,Oe,Ie),pe(ie,ke,Pe,ke.notifyWith))):(be!==Pe&&(it=void 0,_t=[hr]),(Ie||ke.resolveWith)(it,_t))}},Er=Ie?ut:function(){try{ut()}catch(hr){p.Deferred.exceptionHook&&p.Deferred.exceptionHook(hr,Er.error),Ee+1>=ie&&(be!==Oe&&(it=void 0,_t=[hr]),ke.rejectWith(it,_t))}};Ee?Er():(p.Deferred.getErrorHook?Er.error=p.Deferred.getErrorHook():p.Deferred.getStackHook&&(Er.error=p.Deferred.getStackHook()),e.setTimeout(Er))}}return p.Deferred(function(Ee){S[0][3].add(pe(0,Ee,m(ue)?ue:Pe,Ee.notifyWith)),S[1][3].add(pe(0,Ee,m(V)?V:Pe)),S[2][3].add(pe(0,Ee,m(K)?K:Oe))}).promise()},promise:function(V){return V!=null?p.extend(V,O):O}},z={};return p.each(S,function(V,K){var ue=K[2],ie=K[5];O[K[1]]=ue.add,ie&&ue.add(function(){A=ie},S[3-V][2].disable,S[3-V][3].disable,S[0][2].lock,S[0][3].lock),ue.add(K[3].fire),z[K[0]]=function(){return z[K[0]+"With"](this===z?void 0:this,arguments),this},z[K[0]+"With"]=ue.fireWith}),O.promise(z),g&&g.call(z,z),z},when:function(g){var S=arguments.length,A=S,O=Array(A),z=i.call(arguments),V=p.Deferred(),K=function(ue){return function(ie){O[ue]=this,z[ue]=arguments.length>1?i.call(arguments):ie,--S||V.resolveWith(O,z)}};if(S<=1&&(Se(g,V.done(K(A)).resolve,V.reject,!S),V.state()==="pending"||m(z[A]&&z[A].then)))return V.then();for(;A--;)Se(z[A],K(A),V.reject);return V.promise()}});var le=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;p.Deferred.exceptionHook=function(g,S){e.console&&e.console.warn&&g&&le.test(g.name)&&e.console.warn("jQuery.Deferred exception: "+g.message,g.stack,S)},p.readyException=function(g){e.setTimeout(function(){throw g})};var te=p.Deferred();p.fn.ready=function(g){return te.then(g).catch(function(S){p.readyException(S)}),this},p.extend({isReady:!1,readyWait:1,ready:function(g){(g===!0?--p.readyWait:p.isReady)||(p.isReady=!0,!(g!==!0&&--p.readyWait>0)&&te.resolveWith(b,[p]))}}),p.ready.then=te.then;function ne(){b.removeEventListener("DOMContentLoaded",ne),e.removeEventListener("load",ne),p.ready()}b.readyState==="complete"||b.readyState!=="loading"&&!b.documentElement.doScroll?e.setTimeout(p.ready):(b.addEventListener("DOMContentLoaded",ne),e.addEventListener("load",ne));var de=function(g,S,A,O,z,V,K){var ue=0,ie=g.length,pe=A==null;if(x(A)==="object"){z=!0;for(ue in A)de(g,S,ue,A[ue],!0,V,K)}else if(O!==void 0&&(z=!0,m(O)||(K=!0),pe&&(K?(S.call(g,O),S=null):(pe=S,S=function(Ee,ke,be){return pe.call(p(Ee),be)})),S))for(;ue<ie;ue++)S(g[ue],A,K?O:O.call(g[ue],ue,S(g[ue],A)));return z?g:pe?S.call(g):ie?S(g[0],A):V},Ce=/^-ms-/,Le=/-([a-z])/g;function $e(g,S){return S.toUpperCase()}function Ne(g){return g.replace(Ce,"ms-").replace(Le,$e)}var De=function(g){return g.nodeType===1||g.nodeType===9||!+g.nodeType};function me(){this.expando=p.expando+me.uid++}me.uid=1,me.prototype={cache:function(g){var S=g[this.expando];return S||(S={},De(g)&&(g.nodeType?g[this.expando]=S:Object.defineProperty(g,this.expando,{value:S,configurable:!0}))),S},set:function(g,S,A){var O,z=this.cache(g);if(typeof S=="string")z[Ne(S)]=A;else for(O in S)z[Ne(O)]=S[O];return z},get:function(g,S){return S===void 0?this.cache(g):g[this.expando]&&g[this.expando][Ne(S)]},access:function(g,S,A){return S===void 0||S&&typeof S=="string"&&A===void 0?this.get(g,S):(this.set(g,S,A),A!==void 0?A:S)},remove:function(g,S){var A,O=g[this.expando];if(O!==void 0){if(S!==void 0)for(Array.isArray(S)?S=S.map(Ne):(S=Ne(S),S=S in O?[S]:S.match(ce)||[]),A=S.length;A--;)delete O[S[A]];(S===void 0||p.isEmptyObject(O))&&(g.nodeType?g[this.expando]=void 0:delete g[this.expando])}},hasData:function(g){var S=g[this.expando];return S!==void 0&&!p.isEmptyObject(S)}};var G=new me,U=new me,oe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ae=/[A-Z]/g;function fe(g){return g==="true"?!0:g==="false"?!1:g==="null"?null:g===+g+""?+g:oe.test(g)?JSON.parse(g):g}function we(g,S,A){var O;if(A===void 0&&g.nodeType===1)if(O="data-"+S.replace(ae,"-$&").toLowerCase(),A=g.getAttribute(O),typeof A=="string"){try{A=fe(A)}catch{}U.set(g,S,A)}else A=void 0;return A}p.extend({hasData:function(g){return U.hasData(g)||G.hasData(g)},data:function(g,S,A){return U.access(g,S,A)},removeData:function(g,S){U.remove(g,S)},_data:function(g,S,A){return G.access(g,S,A)},_removeData:function(g,S){G.remove(g,S)}}),p.fn.extend({data:function(g,S){var A,O,z,V=this[0],K=V&&V.attributes;if(g===void 0){if(this.length&&(z=U.get(V),V.nodeType===1&&!G.get(V,"hasDataAttrs"))){for(A=K.length;A--;)K[A]&&(O=K[A].name,O.indexOf("data-")===0&&(O=Ne(O.slice(5)),we(V,O,z[O])));G.set(V,"hasDataAttrs",!0)}return z}return typeof g=="object"?this.each(function(){U.set(this,g)}):de(this,function(ue){var ie;if(V&&ue===void 0)return ie=U.get(V,g),ie!==void 0||(ie=we(V,g),ie!==void 0)?ie:void 0;this.each(function(){U.set(this,g,ue)})},null,S,arguments.length>1,null,!0)},removeData:function(g){return this.each(function(){U.remove(this,g)})}}),p.extend({queue:function(g,S,A){var O;if(g)return S=(S||"fx")+"queue",O=G.get(g,S),A&&(!O||Array.isArray(A)?O=G.access(g,S,p.makeArray(A)):O.push(A)),O||[]},dequeue:function(g,S){S=S||"fx";var A=p.queue(g,S),O=A.length,z=A.shift(),V=p._queueHooks(g,S),K=function(){p.dequeue(g,S)};z==="inprogress"&&(z=A.shift(),O--),z&&(S==="fx"&&A.unshift("inprogress"),delete V.stop,z.call(g,K,V)),!O&&V&&V.empty.fire()},_queueHooks:function(g,S){var A=S+"queueHooks";return G.get(g,A)||G.access(g,A,{empty:p.Callbacks("once memory").add(function(){G.remove(g,[S+"queue",A])})})}}),p.fn.extend({queue:function(g,S){var A=2;return typeof g!="string"&&(S=g,g="fx",A--),arguments.length<A?p.queue(this[0],g):S===void 0?this:this.each(function(){var O=p.queue(this,g,S);p._queueHooks(this,g),g==="fx"&&O[0]!=="inprogress"&&p.dequeue(this,g)})},dequeue:function(g){return this.each(function(){p.dequeue(this,g)})},clearQueue:function(g){return this.queue(g||"fx",[])},promise:function(g,S){var A,O=1,z=p.Deferred(),V=this,K=this.length,ue=function(){--O||z.resolveWith(V,[V])};for(typeof g!="string"&&(S=g,g=void 0),g=g||"fx";K--;)A=G.get(V[K],g+"queueHooks"),A&&A.empty&&(O++,A.empty.add(ue));return ue(),z.promise(S)}});var ve=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Te=new RegExp("^(?:([+-])=|)("+ve+")([a-z%]*)$","i"),Fe=["Top","Right","Bottom","Left"],qe=b.documentElement,Be=function(g){return p.contains(g.ownerDocument,g)},et={composed:!0};qe.getRootNode&&(Be=function(g){return p.contains(g.ownerDocument,g)||g.getRootNode(et)===g.ownerDocument});var Ue=function(g,S){return g=S||g,g.style.display==="none"||g.style.display===""&&Be(g)&&p.css(g,"display")==="none"};function We(g,S,A,O){var z,V,K=20,ue=O?function(){return O.cur()}:function(){return p.css(g,S,"")},ie=ue(),pe=A&&A[3]||(p.cssNumber[S]?"":"px"),Ee=g.nodeType&&(p.cssNumber[S]||pe!=="px"&&+ie)&&Te.exec(p.css(g,S));if(Ee&&Ee[3]!==pe){for(ie=ie/2,pe=pe||Ee[3],Ee=+ie||1;K--;)p.style(g,S,Ee+pe),(1-V)*(1-(V=ue()/ie||.5))<=0&&(K=0),Ee=Ee/V;Ee=Ee*2,p.style(g,S,Ee+pe),A=A||[]}return A&&(Ee=+Ee||+ie||0,z=A[1]?Ee+(A[1]+1)*A[2]:+A[2],O&&(O.unit=pe,O.start=Ee,O.end=z)),z}var lt={};function ht(g){var S,A=g.ownerDocument,O=g.nodeName,z=lt[O];return z||(S=A.body.appendChild(A.createElement(O)),z=p.css(S,"display"),S.parentNode.removeChild(S),z==="none"&&(z="block"),lt[O]=z,z)}function Rt(g,S){for(var A,O,z=[],V=0,K=g.length;V<K;V++)O=g[V],O.style&&(A=O.style.display,S?(A==="none"&&(z[V]=G.get(O,"display")||null,z[V]||(O.style.display="")),O.style.display===""&&Ue(O)&&(z[V]=ht(O))):A!=="none"&&(z[V]="none",G.set(O,"display",A)));for(V=0;V<K;V++)z[V]!=null&&(g[V].style.display=z[V]);return g}p.fn.extend({show:function(){return Rt(this,!0)},hide:function(){return Rt(this)},toggle:function(g){return typeof g=="boolean"?g?this.show():this.hide():this.each(function(){Ue(this)?p(this).show():p(this).hide()})}});var vt=/^(?:checkbox|radio)$/i,Ot=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Bt=/^$|^module$|\/(?:java|ecma)script/i;(function(){var g=b.createDocumentFragment(),S=g.appendChild(b.createElement("div")),A=b.createElement("input");A.setAttribute("type","radio"),A.setAttribute("checked","checked"),A.setAttribute("name","t"),S.appendChild(A),v.checkClone=S.cloneNode(!0).cloneNode(!0).lastChild.checked,S.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!S.cloneNode(!0).lastChild.defaultValue,S.innerHTML="<option></option>",v.option=!!S.lastChild})();var pt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};pt.tbody=pt.tfoot=pt.colgroup=pt.caption=pt.thead,pt.th=pt.td,v.option||(pt.optgroup=pt.option=[1,"<select multiple='multiple'>","</select>"]);function st(g,S){var A;return typeof g.getElementsByTagName<"u"?A=g.getElementsByTagName(S||"*"):typeof g.querySelectorAll<"u"?A=g.querySelectorAll(S||"*"):A=[],S===void 0||S&&T(g,S)?p.merge([g],A):A}function Qt(g,S){for(var A=0,O=g.length;A<O;A++)G.set(g[A],"globalEval",!S||G.get(S[A],"globalEval"))}var br=/<|&#?\w+;/;function lr(g,S,A,O,z){for(var V,K,ue,ie,pe,Ee,ke=S.createDocumentFragment(),be=[],Ie=0,it=g.length;Ie<it;Ie++)if(V=g[Ie],V||V===0)if(x(V)==="object")p.merge(be,V.nodeType?[V]:V);else if(!br.test(V))be.push(S.createTextNode(V));else{for(K=K||ke.appendChild(S.createElement("div")),ue=(Ot.exec(V)||["",""])[1].toLowerCase(),ie=pt[ue]||pt._default,K.innerHTML=ie[1]+p.htmlPrefilter(V)+ie[2],Ee=ie[0];Ee--;)K=K.lastChild;p.merge(be,K.childNodes),K=ke.firstChild,K.textContent=""}for(ke.textContent="",Ie=0;V=be[Ie++];){if(O&&p.inArray(V,O)>-1){z&&z.push(V);continue}if(pe=Be(V),K=st(ke.appendChild(V),"script"),pe&&Qt(K),A)for(Ee=0;V=K[Ee++];)Bt.test(V.type||"")&&A.push(V)}return ke}var Sr=/^([^.]*)(?:\.(.+)|)/;function Wt(){return!0}function Jt(){return!1}function qt(g,S,A,O,z,V){var K,ue;if(typeof S=="object"){typeof A!="string"&&(O=O||A,A=void 0);for(ue in S)qt(g,ue,A,O,S[ue],V);return g}if(O==null&&z==null?(z=A,O=A=void 0):z==null&&(typeof A=="string"?(z=O,O=void 0):(z=O,O=A,A=void 0)),z===!1)z=Jt;else if(!z)return g;return V===1&&(K=z,z=function(ie){return p().off(ie),K.apply(this,arguments)},z.guid=K.guid||(K.guid=p.guid++)),g.each(function(){p.event.add(this,S,z,O,A)})}p.event={global:{},add:function(g,S,A,O,z){var V,K,ue,ie,pe,Ee,ke,be,Ie,it,_t,ut=G.get(g);if(De(g))for(A.handler&&(V=A,A=V.handler,z=V.selector),z&&p.find.matchesSelector(qe,z),A.guid||(A.guid=p.guid++),(ie=ut.events)||(ie=ut.events=Object.create(null)),(K=ut.handle)||(K=ut.handle=function(Er){return typeof p<"u"&&p.event.triggered!==Er.type?p.event.dispatch.apply(g,arguments):void 0}),S=(S||"").match(ce)||[""],pe=S.length;pe--;)ue=Sr.exec(S[pe])||[],Ie=_t=ue[1],it=(ue[2]||"").split(".").sort(),Ie&&(ke=p.event.special[Ie]||{},Ie=(z?ke.delegateType:ke.bindType)||Ie,ke=p.event.special[Ie]||{},Ee=p.extend({type:Ie,origType:_t,data:O,handler:A,guid:A.guid,selector:z,needsContext:z&&p.expr.match.needsContext.test(z),namespace:it.join(".")},V),(be=ie[Ie])||(be=ie[Ie]=[],be.delegateCount=0,(!ke.setup||ke.setup.call(g,O,it,K)===!1)&&g.addEventListener&&g.addEventListener(Ie,K)),ke.add&&(ke.add.call(g,Ee),Ee.handler.guid||(Ee.handler.guid=A.guid)),z?be.splice(be.delegateCount++,0,Ee):be.push(Ee),p.event.global[Ie]=!0)},remove:function(g,S,A,O,z){var V,K,ue,ie,pe,Ee,ke,be,Ie,it,_t,ut=G.hasData(g)&&G.get(g);if(!(!ut||!(ie=ut.events))){for(S=(S||"").match(ce)||[""],pe=S.length;pe--;){if(ue=Sr.exec(S[pe])||[],Ie=_t=ue[1],it=(ue[2]||"").split(".").sort(),!Ie){for(Ie in ie)p.event.remove(g,Ie+S[pe],A,O,!0);continue}for(ke=p.event.special[Ie]||{},Ie=(O?ke.delegateType:ke.bindType)||Ie,be=ie[Ie]||[],ue=ue[2]&&new RegExp("(^|\\.)"+it.join("\\.(?:.*\\.|)")+"(\\.|$)"),K=V=be.length;V--;)Ee=be[V],(z||_t===Ee.origType)&&(!A||A.guid===Ee.guid)&&(!ue||ue.test(Ee.namespace))&&(!O||O===Ee.selector||O==="**"&&Ee.selector)&&(be.splice(V,1),Ee.selector&&be.delegateCount--,ke.remove&&ke.remove.call(g,Ee));K&&!be.length&&((!ke.teardown||ke.teardown.call(g,it,ut.handle)===!1)&&p.removeEvent(g,Ie,ut.handle),delete ie[Ie])}p.isEmptyObject(ie)&&G.remove(g,"handle events")}},dispatch:function(g){var S,A,O,z,V,K,ue=new Array(arguments.length),ie=p.event.fix(g),pe=(G.get(this,"events")||Object.create(null))[ie.type]||[],Ee=p.event.special[ie.type]||{};for(ue[0]=ie,S=1;S<arguments.length;S++)ue[S]=arguments[S];if(ie.delegateTarget=this,!(Ee.preDispatch&&Ee.preDispatch.call(this,ie)===!1)){for(K=p.event.handlers.call(this,ie,pe),S=0;(z=K[S++])&&!ie.isPropagationStopped();)for(ie.currentTarget=z.elem,A=0;(V=z.handlers[A++])&&!ie.isImmediatePropagationStopped();)(!ie.rnamespace||V.namespace===!1||ie.rnamespace.test(V.namespace))&&(ie.handleObj=V,ie.data=V.data,O=((p.event.special[V.origType]||{}).handle||V.handler).apply(z.elem,ue),O!==void 0&&(ie.result=O)===!1&&(ie.preventDefault(),ie.stopPropagation()));return Ee.postDispatch&&Ee.postDispatch.call(this,ie),ie.result}},handlers:function(g,S){var A,O,z,V,K,ue=[],ie=S.delegateCount,pe=g.target;if(ie&&pe.nodeType&&!(g.type==="click"&&g.button>=1)){for(;pe!==this;pe=pe.parentNode||this)if(pe.nodeType===1&&!(g.type==="click"&&pe.disabled===!0)){for(V=[],K={},A=0;A<ie;A++)O=S[A],z=O.selector+" ",K[z]===void 0&&(K[z]=O.needsContext?p(z,this).index(pe)>-1:p.find(z,this,null,[pe]).length),K[z]&&V.push(O);V.length&&ue.push({elem:pe,handlers:V})}}return pe=this,ie<S.length&&ue.push({elem:pe,handlers:S.slice(ie)}),ue},addProp:function(g,S){Object.defineProperty(p.Event.prototype,g,{enumerable:!0,configurable:!0,get:m(S)?function(){if(this.originalEvent)return S(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[g]},set:function(A){Object.defineProperty(this,g,{enumerable:!0,configurable:!0,writable:!0,value:A})}})},fix:function(g){return g[p.expando]?g:new p.Event(g)},special:{load:{noBubble:!0},click:{setup:function(g){var S=this||g;return vt.test(S.type)&&S.click&&T(S,"input")&&At(S,"click",!0),!1},trigger:function(g){var S=this||g;return vt.test(S.type)&&S.click&&T(S,"input")&&At(S,"click"),!0},_default:function(g){var S=g.target;return vt.test(S.type)&&S.click&&T(S,"input")&&G.get(S,"click")||T(S,"a")}},beforeunload:{postDispatch:function(g){g.result!==void 0&&g.originalEvent&&(g.originalEvent.returnValue=g.result)}}}};function At(g,S,A){if(!A){G.get(g,S)===void 0&&p.event.add(g,S,Wt);return}G.set(g,S,!1),p.event.add(g,S,{namespace:!1,handler:function(O){var z,V=G.get(this,S);if(O.isTrigger&1&&this[S]){if(V)(p.event.special[S]||{}).delegateType&&O.stopPropagation();else if(V=i.call(arguments),G.set(this,S,V),this[S](),z=G.get(this,S),G.set(this,S,!1),V!==z)return O.stopImmediatePropagation(),O.preventDefault(),z}else V&&(G.set(this,S,p.event.trigger(V[0],V.slice(1),this)),O.stopPropagation(),O.isImmediatePropagationStopped=Wt)}})}p.removeEvent=function(g,S,A){g.removeEventListener&&g.removeEventListener(S,A)},p.Event=function(g,S){if(!(this instanceof p.Event))return new p.Event(g,S);g&&g.type?(this.originalEvent=g,this.type=g.type,this.isDefaultPrevented=g.defaultPrevented||g.defaultPrevented===void 0&&g.returnValue===!1?Wt:Jt,this.target=g.target&&g.target.nodeType===3?g.target.parentNode:g.target,this.currentTarget=g.currentTarget,this.relatedTarget=g.relatedTarget):this.type=g,S&&p.extend(this,S),this.timeStamp=g&&g.timeStamp||Date.now(),this[p.expando]=!0},p.Event.prototype={constructor:p.Event,isDefaultPrevented:Jt,isPropagationStopped:Jt,isImmediatePropagationStopped:Jt,isSimulated:!1,preventDefault:function(){var g=this.originalEvent;this.isDefaultPrevented=Wt,g&&!this.isSimulated&&g.preventDefault()},stopPropagation:function(){var g=this.originalEvent;this.isPropagationStopped=Wt,g&&!this.isSimulated&&g.stopPropagation()},stopImmediatePropagation:function(){var g=this.originalEvent;this.isImmediatePropagationStopped=Wt,g&&!this.isSimulated&&g.stopImmediatePropagation(),this.stopPropagation()}},p.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},p.event.addProp),p.each({focus:"focusin",blur:"focusout"},function(g,S){function A(O){if(b.documentMode){var z=G.get(this,"handle"),V=p.event.fix(O);V.type=O.type==="focusin"?"focus":"blur",V.isSimulated=!0,z(O),V.target===V.currentTarget&&z(V)}else p.event.simulate(S,O.target,p.event.fix(O))}p.event.special[g]={setup:function(){var O;if(At(this,g,!0),b.documentMode)O=G.get(this,S),O||this.addEventListener(S,A),G.set(this,S,(O||0)+1);else return!1},trigger:function(){return At(this,g),!0},teardown:function(){var O;if(b.documentMode)O=G.get(this,S)-1,O?G.set(this,S,O):(this.removeEventListener(S,A),G.remove(this,S));else return!1},_default:function(O){return G.get(O.target,g)},delegateType:S},p.event.special[S]={setup:function(){var O=this.ownerDocument||this.document||this,z=b.documentMode?this:O,V=G.get(z,S);V||(b.documentMode?this.addEventListener(S,A):O.addEventListener(g,A,!0)),G.set(z,S,(V||0)+1)},teardown:function(){var O=this.ownerDocument||this.document||this,z=b.documentMode?this:O,V=G.get(z,S)-1;V?G.set(z,S,V):(b.documentMode?this.removeEventListener(S,A):O.removeEventListener(g,A,!0),G.remove(z,S))}}}),p.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(g,S){p.event.special[g]={delegateType:S,bindType:S,handle:function(A){var O,z=this,V=A.relatedTarget,K=A.handleObj;return(!V||V!==z&&!p.contains(z,V))&&(A.type=K.origType,O=K.handler.apply(this,arguments),A.type=S),O}}}),p.fn.extend({on:function(g,S,A,O){return qt(this,g,S,A,O)},one:function(g,S,A,O){return qt(this,g,S,A,O,1)},off:function(g,S,A){var O,z;if(g&&g.preventDefault&&g.handleObj)return O=g.handleObj,p(g.delegateTarget).off(O.namespace?O.origType+"."+O.namespace:O.origType,O.selector,O.handler),this;if(typeof g=="object"){for(z in g)this.off(z,S,g[z]);return this}return(S===!1||typeof S=="function")&&(A=S,S=void 0),A===!1&&(A=Jt),this.each(function(){p.event.remove(this,g,A,S)})}});var Me=/<script|<style|<link/i,_e=/checked\s*(?:[^=]|=\s*.checked.)/i,Re=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Ye(g,S){return T(g,"table")&&T(S.nodeType!==11?S:S.firstChild,"tr")&&p(g).children("tbody")[0]||g}function nt(g){return g.type=(g.getAttribute("type")!==null)+"/"+g.type,g}function Je(g){return(g.type||"").slice(0,5)==="true/"?g.type=g.type.slice(5):g.removeAttribute("type"),g}function xt(g,S){var A,O,z,V,K,ue,ie;if(S.nodeType===1){if(G.hasData(g)&&(V=G.get(g),ie=V.events,ie)){G.remove(S,"handle events");for(z in ie)for(A=0,O=ie[z].length;A<O;A++)p.event.add(S,z,ie[z][A])}U.hasData(g)&&(K=U.access(g),ue=p.extend({},K),U.set(S,ue))}}function er(g,S){var A=S.nodeName.toLowerCase();A==="input"&&vt.test(g.type)?S.checked=g.checked:(A==="input"||A==="textarea")&&(S.defaultValue=g.defaultValue)}function Kt(g,S,A,O){S=o(S);var z,V,K,ue,ie,pe,Ee=0,ke=g.length,be=ke-1,Ie=S[0],it=m(Ie);if(it||ke>1&&typeof Ie=="string"&&!v.checkClone&&_e.test(Ie))return g.each(function(_t){var ut=g.eq(_t);it&&(S[0]=Ie.call(this,_t,ut.html())),Kt(ut,S,A,O)});if(ke&&(z=lr(S,g[0].ownerDocument,!1,g,O),V=z.firstChild,z.childNodes.length===1&&(z=V),V||O)){for(K=p.map(st(z,"script"),nt),ue=K.length;Ee<ke;Ee++)ie=z,Ee!==be&&(ie=p.clone(ie,!0,!0),ue&&p.merge(K,st(ie,"script"))),A.call(g[Ee],ie,Ee);if(ue)for(pe=K[K.length-1].ownerDocument,p.map(K,Je),Ee=0;Ee<ue;Ee++)ie=K[Ee],Bt.test(ie.type||"")&&!G.access(ie,"globalEval")&&p.contains(pe,ie)&&(ie.src&&(ie.type||"").toLowerCase()!=="module"?p._evalUrl&&!ie.noModule&&p._evalUrl(ie.src,{nonce:ie.nonce||ie.getAttribute("nonce")},pe):y(ie.textContent.replace(Re,""),ie,pe))}return g}function Ut(g,S,A){for(var O,z=S?p.filter(S,g):g,V=0;(O=z[V])!=null;V++)!A&&O.nodeType===1&&p.cleanData(st(O)),O.parentNode&&(A&&Be(O)&&Qt(st(O,"script")),O.parentNode.removeChild(O));return g}p.extend({htmlPrefilter:function(g){return g},clone:function(g,S,A){var O,z,V,K,ue=g.cloneNode(!0),ie=Be(g);if(!v.noCloneChecked&&(g.nodeType===1||g.nodeType===11)&&!p.isXMLDoc(g))for(K=st(ue),V=st(g),O=0,z=V.length;O<z;O++)er(V[O],K[O]);if(S)if(A)for(V=V||st(g),K=K||st(ue),O=0,z=V.length;O<z;O++)xt(V[O],K[O]);else xt(g,ue);return K=st(ue,"script"),K.length>0&&Qt(K,!ie&&st(g,"script")),ue},cleanData:function(g){for(var S,A,O,z=p.event.special,V=0;(A=g[V])!==void 0;V++)if(De(A)){if(S=A[G.expando]){if(S.events)for(O in S.events)z[O]?p.event.remove(A,O):p.removeEvent(A,O,S.handle);A[G.expando]=void 0}A[U.expando]&&(A[U.expando]=void 0)}}}),p.fn.extend({detach:function(g){return Ut(this,g,!0)},remove:function(g){return Ut(this,g)},text:function(g){return de(this,function(S){return S===void 0?p.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=S)})},null,g,arguments.length)},append:function(){return Kt(this,arguments,function(g){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var S=Ye(this,g);S.appendChild(g)}})},prepend:function(){return Kt(this,arguments,function(g){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var S=Ye(this,g);S.insertBefore(g,S.firstChild)}})},before:function(){return Kt(this,arguments,function(g){this.parentNode&&this.parentNode.insertBefore(g,this)})},after:function(){return Kt(this,arguments,function(g){this.parentNode&&this.parentNode.insertBefore(g,this.nextSibling)})},empty:function(){for(var g,S=0;(g=this[S])!=null;S++)g.nodeType===1&&(p.cleanData(st(g,!1)),g.textContent="");return this},clone:function(g,S){return g=g??!1,S=S??g,this.map(function(){return p.clone(this,g,S)})},html:function(g){return de(this,function(S){var A=this[0]||{},O=0,z=this.length;if(S===void 0&&A.nodeType===1)return A.innerHTML;if(typeof S=="string"&&!Me.test(S)&&!pt[(Ot.exec(S)||["",""])[1].toLowerCase()]){S=p.htmlPrefilter(S);try{for(;O<z;O++)A=this[O]||{},A.nodeType===1&&(p.cleanData(st(A,!1)),A.innerHTML=S);A=0}catch{}}A&&this.empty().append(S)},null,g,arguments.length)},replaceWith:function(){var g=[];return Kt(this,arguments,function(S){var A=this.parentNode;p.inArray(this,g)<0&&(p.cleanData(st(this)),A&&A.replaceChild(S,this))},g)}}),p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(g,S){p.fn[g]=function(A){for(var O,z=[],V=p(A),K=V.length-1,ue=0;ue<=K;ue++)O=ue===K?this:this.clone(!0),p(V[ue])[S](O),s.apply(z,O.get());return this.pushStack(z)}});var gt=new RegExp("^("+ve+")(?!px)[a-z%]+$","i"),tr=/^--/,$r=function(g){var S=g.ownerDocument.defaultView;return(!S||!S.opener)&&(S=e),S.getComputedStyle(g)},Cr=function(g,S,A){var O,z,V={};for(z in S)V[z]=g.style[z],g.style[z]=S[z];O=A.call(g);for(z in S)g.style[z]=V[z];return O},Vr=new RegExp(Fe.join("|"),"i");(function(){function g(){if(pe){ie.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",pe.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",qe.appendChild(ie).appendChild(pe);var Ee=e.getComputedStyle(pe);A=Ee.top!=="1%",ue=S(Ee.marginLeft)===12,pe.style.right="60%",V=S(Ee.right)===36,O=S(Ee.width)===36,pe.style.position="absolute",z=S(pe.offsetWidth/3)===12,qe.removeChild(ie),pe=null}}function S(Ee){return Math.round(parseFloat(Ee))}var A,O,z,V,K,ue,ie=b.createElement("div"),pe=b.createElement("div");pe.style&&(pe.style.backgroundClip="content-box",pe.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle=pe.style.backgroundClip==="content-box",p.extend(v,{boxSizingReliable:function(){return g(),O},pixelBoxStyles:function(){return g(),V},pixelPosition:function(){return g(),A},reliableMarginLeft:function(){return g(),ue},scrollboxSize:function(){return g(),z},reliableTrDimensions:function(){var Ee,ke,be,Ie;return K==null&&(Ee=b.createElement("table"),ke=b.createElement("tr"),be=b.createElement("div"),Ee.style.cssText="position:absolute;left:-11111px;border-collapse:separate",ke.style.cssText="box-sizing:content-box;border:1px solid",ke.style.height="1px",be.style.height="9px",be.style.display="block",qe.appendChild(Ee).appendChild(ke).appendChild(be),Ie=e.getComputedStyle(ke),K=parseInt(Ie.height,10)+parseInt(Ie.borderTopWidth,10)+parseInt(Ie.borderBottomWidth,10)===ke.offsetHeight,qe.removeChild(Ee)),K}}))})();function Ur(g,S,A){var O,z,V,K,ue=tr.test(S),ie=g.style;return A=A||$r(g),A&&(K=A.getPropertyValue(S)||A[S],ue&&K&&(K=K.replace(q,"$1")||void 0),K===""&&!Be(g)&&(K=p.style(g,S)),!v.pixelBoxStyles()&&gt.test(K)&&Vr.test(S)&&(O=ie.width,z=ie.minWidth,V=ie.maxWidth,ie.minWidth=ie.maxWidth=ie.width=K,K=A.width,ie.width=O,ie.minWidth=z,ie.maxWidth=V)),K!==void 0?K+"":K}function ln(g,S){return{get:function(){if(g()){delete this.get;return}return(this.get=S).apply(this,arguments)}}}var dr=["Webkit","Moz","ms"],xn=b.createElement("div").style,Br={};function Or(g){for(var S=g[0].toUpperCase()+g.slice(1),A=dr.length;A--;)if(g=dr[A]+S,g in xn)return g}function It(g){var S=p.cssProps[g]||Br[g];return S||(g in xn?g:Br[g]=Or(g)||g)}var en=/^(none|table(?!-c[ea]).+)/,oa={position:"absolute",visibility:"hidden",display:"block"},Gn={letterSpacing:"0",fontWeight:"400"};function sa(g,S,A){var O=Te.exec(S);return O?Math.max(0,O[2]-(A||0))+(O[3]||"px"):S}function Hr(g,S,A,O,z,V){var K=S==="width"?1:0,ue=0,ie=0,pe=0;if(A===(O?"border":"content"))return 0;for(;K<4;K+=2)A==="margin"&&(pe+=p.css(g,A+Fe[K],!0,z)),O?(A==="content"&&(ie-=p.css(g,"padding"+Fe[K],!0,z)),A!=="margin"&&(ie-=p.css(g,"border"+Fe[K]+"Width",!0,z))):(ie+=p.css(g,"padding"+Fe[K],!0,z),A!=="padding"?ie+=p.css(g,"border"+Fe[K]+"Width",!0,z):ue+=p.css(g,"border"+Fe[K]+"Width",!0,z));return!O&&V>=0&&(ie+=Math.max(0,Math.ceil(g["offset"+S[0].toUpperCase()+S.slice(1)]-V-ie-ue-.5))||0),ie+pe}function La(g,S,A){var O=$r(g),z=!v.boxSizingReliable()||A,V=z&&p.css(g,"boxSizing",!1,O)==="border-box",K=V,ue=Ur(g,S,O),ie="offset"+S[0].toUpperCase()+S.slice(1);if(gt.test(ue)){if(!A)return ue;ue="auto"}return(!v.boxSizingReliable()&&V||!v.reliableTrDimensions()&&T(g,"tr")||ue==="auto"||!parseFloat(ue)&&p.css(g,"display",!1,O)==="inline")&&g.getClientRects().length&&(V=p.css(g,"boxSizing",!1,O)==="border-box",K=ie in g,K&&(ue=g[ie])),ue=parseFloat(ue)||0,ue+Hr(g,S,A||(V?"border":"content"),K,O,ue)+"px"}p.extend({cssHooks:{opacity:{get:function(g,S){if(S){var A=Ur(g,"opacity");return A===""?"1":A}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(g,S,A,O){if(!(!g||g.nodeType===3||g.nodeType===8||!g.style)){var z,V,K,ue=Ne(S),ie=tr.test(S),pe=g.style;if(ie||(S=It(ue)),K=p.cssHooks[S]||p.cssHooks[ue],A!==void 0){if(V=typeof A,V==="string"&&(z=Te.exec(A))&&z[1]&&(A=We(g,S,z),V="number"),A==null||A!==A)return;V==="number"&&!ie&&(A+=z&&z[3]||(p.cssNumber[ue]?"":"px")),!v.clearCloneStyle&&A===""&&S.indexOf("background")===0&&(pe[S]="inherit"),(!K||!("set"in K)||(A=K.set(g,A,O))!==void 0)&&(ie?pe.setProperty(S,A):pe[S]=A)}else return K&&"get"in K&&(z=K.get(g,!1,O))!==void 0?z:pe[S]}},css:function(g,S,A,O){var z,V,K,ue=Ne(S),ie=tr.test(S);return ie||(S=It(ue)),K=p.cssHooks[S]||p.cssHooks[ue],K&&"get"in K&&(z=K.get(g,!0,A)),z===void 0&&(z=Ur(g,S,O)),z==="normal"&&S in Gn&&(z=Gn[S]),A===""||A?(V=parseFloat(z),A===!0||isFinite(V)?V||0:z):z}}),p.each(["height","width"],function(g,S){p.cssHooks[S]={get:function(A,O,z){if(O)return en.test(p.css(A,"display"))&&(!A.getClientRects().length||!A.getBoundingClientRect().width)?Cr(A,oa,function(){return La(A,S,z)}):La(A,S,z)},set:function(A,O,z){var V,K=$r(A),ue=!v.scrollboxSize()&&K.position==="absolute",ie=ue||z,pe=ie&&p.css(A,"boxSizing",!1,K)==="border-box",Ee=z?Hr(A,S,z,pe,K):0;return pe&&ue&&(Ee-=Math.ceil(A["offset"+S[0].toUpperCase()+S.slice(1)]-parseFloat(K[S])-Hr(A,S,"border",!1,K)-.5)),Ee&&(V=Te.exec(O))&&(V[3]||"px")!=="px"&&(A.style[S]=O,O=p.css(A,S)),sa(A,O,Ee)}}}),p.cssHooks.marginLeft=ln(v.reliableMarginLeft,function(g,S){if(S)return(parseFloat(Ur(g,"marginLeft"))||g.getBoundingClientRect().left-Cr(g,{marginLeft:0},function(){return g.getBoundingClientRect().left}))+"px"}),p.each({margin:"",padding:"",border:"Width"},function(g,S){p.cssHooks[g+S]={expand:function(A){for(var O=0,z={},V=typeof A=="string"?A.split(" "):[A];O<4;O++)z[g+Fe[O]+S]=V[O]||V[O-2]||V[0];return z}},g!=="margin"&&(p.cssHooks[g+S].set=sa)}),p.fn.extend({css:function(g,S){return de(this,function(A,O,z){var V,K,ue={},ie=0;if(Array.isArray(O)){for(V=$r(A),K=O.length;ie<K;ie++)ue[O[ie]]=p.css(A,O[ie],!1,V);return ue}return z!==void 0?p.style(A,O,z):p.css(A,O)},g,S,arguments.length>1)}});function wr(g,S,A,O,z){return new wr.prototype.init(g,S,A,O,z)}p.Tween=wr,wr.prototype={constructor:wr,init:function(g,S,A,O,z,V){this.elem=g,this.prop=A,this.easing=z||p.easing._default,this.options=S,this.start=this.now=this.cur(),this.end=O,this.unit=V||(p.cssNumber[A]?"":"px")},cur:function(){var g=wr.propHooks[this.prop];return g&&g.get?g.get(this):wr.propHooks._default.get(this)},run:function(g){var S,A=wr.propHooks[this.prop];return this.options.duration?this.pos=S=p.easing[this.easing](g,this.options.duration*g,0,1,this.options.duration):this.pos=S=g,this.now=(this.end-this.start)*S+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),A&&A.set?A.set(this):wr.propHooks._default.set(this),this}},wr.prototype.init.prototype=wr.prototype,wr.propHooks={_default:{get:function(g){var S;return g.elem.nodeType!==1||g.elem[g.prop]!=null&&g.elem.style[g.prop]==null?g.elem[g.prop]:(S=p.css(g.elem,g.prop,""),!S||S==="auto"?0:S)},set:function(g){p.fx.step[g.prop]?p.fx.step[g.prop](g):g.elem.nodeType===1&&(p.cssHooks[g.prop]||g.elem.style[It(g.prop)]!=null)?p.style(g.elem,g.prop,g.now+g.unit):g.elem[g.prop]=g.now}}},wr.propHooks.scrollTop=wr.propHooks.scrollLeft={set:function(g){g.elem.nodeType&&g.elem.parentNode&&(g.elem[g.prop]=g.now)}},p.easing={linear:function(g){return g},swing:function(g){return .5-Math.cos(g*Math.PI)/2},_default:"swing"},p.fx=wr.prototype.init,p.fx.step={};var Sn,vi,fs=/^(?:toggle|show|hide)$/,k2=/queueHooks$/;function ql(){vi&&(b.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(ql):e.setTimeout(ql,p.fx.interval),p.fx.tick())}function by(){return e.setTimeout(function(){Sn=void 0}),Sn=Date.now()}function ds(g,S){var A,O=0,z={height:g};for(S=S?1:0;O<4;O+=2-S)A=Fe[O],z["margin"+A]=z["padding"+A]=g;return S&&(z.opacity=z.width=g),z}function wy(g,S,A){for(var O,z=(cn.tweeners[S]||[]).concat(cn.tweeners["*"]),V=0,K=z.length;V<K;V++)if(O=z[V].call(A,S,g))return O}function M2(g,S,A){var O,z,V,K,ue,ie,pe,Ee,ke="width"in S||"height"in S,be=this,Ie={},it=g.style,_t=g.nodeType&&Ue(g),ut=G.get(g,"fxshow");A.queue||(K=p._queueHooks(g,"fx"),K.unqueued==null&&(K.unqueued=0,ue=K.empty.fire,K.empty.fire=function(){K.unqueued||ue()}),K.unqueued++,be.always(function(){be.always(function(){K.unqueued--,p.queue(g,"fx").length||K.empty.fire()})}));for(O in S)if(z=S[O],fs.test(z)){if(delete S[O],V=V||z==="toggle",z===(_t?"hide":"show"))if(z==="show"&&ut&&ut[O]!==void 0)_t=!0;else continue;Ie[O]=ut&&ut[O]||p.style(g,O)}if(ie=!p.isEmptyObject(S),!(!ie&&p.isEmptyObject(Ie))){ke&&g.nodeType===1&&(A.overflow=[it.overflow,it.overflowX,it.overflowY],pe=ut&&ut.display,pe==null&&(pe=G.get(g,"display")),Ee=p.css(g,"display"),Ee==="none"&&(pe?Ee=pe:(Rt([g],!0),pe=g.style.display||pe,Ee=p.css(g,"display"),Rt([g]))),(Ee==="inline"||Ee==="inline-block"&&pe!=null)&&p.css(g,"float")==="none"&&(ie||(be.done(function(){it.display=pe}),pe==null&&(Ee=it.display,pe=Ee==="none"?"":Ee)),it.display="inline-block")),A.overflow&&(it.overflow="hidden",be.always(function(){it.overflow=A.overflow[0],it.overflowX=A.overflow[1],it.overflowY=A.overflow[2]})),ie=!1;for(O in Ie)ie||(ut?"hidden"in ut&&(_t=ut.hidden):ut=G.access(g,"fxshow",{display:pe}),V&&(ut.hidden=!_t),_t&&Rt([g],!0),be.done(function(){_t||Rt([g]),G.remove(g,"fxshow");for(O in Ie)p.style(g,O,Ie[O])})),ie=wy(_t?ut[O]:0,O,be),O in ut||(ut[O]=ie.start,_t&&(ie.end=ie.start,ie.start=0))}}function O2(g,S){var A,O,z,V,K;for(A in g)if(O=Ne(A),z=S[O],V=g[A],Array.isArray(V)&&(z=V[1],V=g[A]=V[0]),A!==O&&(g[O]=V,delete g[A]),K=p.cssHooks[O],K&&"expand"in K){V=K.expand(V),delete g[O];for(A in V)A in g||(g[A]=V[A],S[A]=z)}else S[O]=z}function cn(g,S,A){var O,z,V=0,K=cn.prefilters.length,ue=p.Deferred().always(function(){delete ie.elem}),ie=function(){if(z)return!1;for(var ke=Sn||by(),be=Math.max(0,pe.startTime+pe.duration-ke),Ie=be/pe.duration||0,it=1-Ie,_t=0,ut=pe.tweens.length;_t<ut;_t++)pe.tweens[_t].run(it);return ue.notifyWith(g,[pe,it,be]),it<1&&ut?be:(ut||ue.notifyWith(g,[pe,1,0]),ue.resolveWith(g,[pe]),!1)},pe=ue.promise({elem:g,props:p.extend({},S),opts:p.extend(!0,{specialEasing:{},easing:p.easing._default},A),originalProperties:S,originalOptions:A,startTime:Sn||by(),duration:A.duration,tweens:[],createTween:function(ke,be){var Ie=p.Tween(g,pe.opts,ke,be,pe.opts.specialEasing[ke]||pe.opts.easing);return pe.tweens.push(Ie),Ie},stop:function(ke){var be=0,Ie=ke?pe.tweens.length:0;if(z)return this;for(z=!0;be<Ie;be++)pe.tweens[be].run(1);return ke?(ue.notifyWith(g,[pe,1,0]),ue.resolveWith(g,[pe,ke])):ue.rejectWith(g,[pe,ke]),this}}),Ee=pe.props;for(O2(Ee,pe.opts.specialEasing);V<K;V++)if(O=cn.prefilters[V].call(pe,g,Ee,pe.opts),O)return m(O.stop)&&(p._queueHooks(pe.elem,pe.opts.queue).stop=O.stop.bind(O)),O;return p.map(Ee,wy,pe),m(pe.opts.start)&&pe.opts.start.call(g,pe),pe.progress(pe.opts.progress).done(pe.opts.done,pe.opts.complete).fail(pe.opts.fail).always(pe.opts.always),p.fx.timer(p.extend(ie,{elem:g,anim:pe,queue:pe.opts.queue})),pe}p.Animation=p.extend(cn,{tweeners:{"*":[function(g,S){var A=this.createTween(g,S);return We(A.elem,g,Te.exec(S),A),A}]},tweener:function(g,S){m(g)?(S=g,g=["*"]):g=g.match(ce);for(var A,O=0,z=g.length;O<z;O++)A=g[O],cn.tweeners[A]=cn.tweeners[A]||[],cn.tweeners[A].unshift(S)},prefilters:[M2],prefilter:function(g,S){S?cn.prefilters.unshift(g):cn.prefilters.push(g)}}),p.speed=function(g,S,A){var O=g&&typeof g=="object"?p.extend({},g):{complete:A||!A&&S||m(g)&&g,duration:g,easing:A&&S||S&&!m(S)&&S};return p.fx.off?O.duration=0:typeof O.duration!="number"&&(O.duration in p.fx.speeds?O.duration=p.fx.speeds[O.duration]:O.duration=p.fx.speeds._default),(O.queue==null||O.queue===!0)&&(O.queue="fx"),O.old=O.complete,O.complete=function(){m(O.old)&&O.old.call(this),O.queue&&p.dequeue(this,O.queue)},O},p.fn.extend({fadeTo:function(g,S,A,O){return this.filter(Ue).css("opacity",0).show().end().animate({opacity:S},g,A,O)},animate:function(g,S,A,O){var z=p.isEmptyObject(g),V=p.speed(S,A,O),K=function(){var ue=cn(this,p.extend({},g),V);(z||G.get(this,"finish"))&&ue.stop(!0)};return K.finish=K,z||V.queue===!1?this.each(K):this.queue(V.queue,K)},stop:function(g,S,A){var O=function(z){var V=z.stop;delete z.stop,V(A)};return typeof g!="string"&&(A=S,S=g,g=void 0),S&&this.queue(g||"fx",[]),this.each(function(){var z=!0,V=g!=null&&g+"queueHooks",K=p.timers,ue=G.get(this);if(V)ue[V]&&ue[V].stop&&O(ue[V]);else for(V in ue)ue[V]&&ue[V].stop&&k2.test(V)&&O(ue[V]);for(V=K.length;V--;)K[V].elem===this&&(g==null||K[V].queue===g)&&(K[V].anim.stop(A),z=!1,K.splice(V,1));(z||!A)&&p.dequeue(this,g)})},finish:function(g){return g!==!1&&(g=g||"fx"),this.each(function(){var S,A=G.get(this),O=A[g+"queue"],z=A[g+"queueHooks"],V=p.timers,K=O?O.length:0;for(A.finish=!0,p.queue(this,g,[]),z&&z.stop&&z.stop.call(this,!0),S=V.length;S--;)V[S].elem===this&&V[S].queue===g&&(V[S].anim.stop(!0),V.splice(S,1));for(S=0;S<K;S++)O[S]&&O[S].finish&&O[S].finish.call(this);delete A.finish})}}),p.each(["toggle","show","hide"],function(g,S){var A=p.fn[S];p.fn[S]=function(O,z,V){return O==null||typeof O=="boolean"?A.apply(this,arguments):this.animate(ds(S,!0),O,z,V)}}),p.each({slideDown:ds("show"),slideUp:ds("hide"),slideToggle:ds("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(g,S){p.fn[g]=function(A,O,z){return this.animate(S,A,O,z)}}),p.timers=[],p.fx.tick=function(){var g,S=0,A=p.timers;for(Sn=Date.now();S<A.length;S++)g=A[S],!g()&&A[S]===g&&A.splice(S--,1);A.length||p.fx.stop(),Sn=void 0},p.fx.timer=function(g){p.timers.push(g),p.fx.start()},p.fx.interval=13,p.fx.start=function(){vi||(vi=!0,ql())},p.fx.stop=function(){vi=null},p.fx.speeds={slow:600,fast:200,_default:400},p.fn.delay=function(g,S){return g=p.fx&&p.fx.speeds[g]||g,S=S||"fx",this.queue(S,function(A,O){var z=e.setTimeout(A,g);O.stop=function(){e.clearTimeout(z)}})},function(){var g=b.createElement("input"),S=b.createElement("select"),A=S.appendChild(b.createElement("option"));g.type="checkbox",v.checkOn=g.value!=="",v.optSelected=A.selected,g=b.createElement("input"),g.value="t",g.type="radio",v.radioValue=g.value==="t"}();var _y,so=p.expr.attrHandle;p.fn.extend({attr:function(g,S){return de(this,p.attr,g,S,arguments.length>1)},removeAttr:function(g){return this.each(function(){p.removeAttr(this,g)})}}),p.extend({attr:function(g,S,A){var O,z,V=g.nodeType;if(!(V===3||V===8||V===2)){if(typeof g.getAttribute>"u")return p.prop(g,S,A);if((V!==1||!p.isXMLDoc(g))&&(z=p.attrHooks[S.toLowerCase()]||(p.expr.match.bool.test(S)?_y:void 0)),A!==void 0){if(A===null){p.removeAttr(g,S);return}return z&&"set"in z&&(O=z.set(g,A,S))!==void 0?O:(g.setAttribute(S,A+""),A)}return z&&"get"in z&&(O=z.get(g,S))!==null?O:(O=p.find.attr(g,S),O??void 0)}},attrHooks:{type:{set:function(g,S){if(!v.radioValue&&S==="radio"&&T(g,"input")){var A=g.value;return g.setAttribute("type",S),A&&(g.value=A),S}}}},removeAttr:function(g,S){var A,O=0,z=S&&S.match(ce);if(z&&g.nodeType===1)for(;A=z[O++];)g.removeAttribute(A)}}),_y={set:function(g,S,A){return S===!1?p.removeAttr(g,A):g.setAttribute(A,A),A}},p.each(p.expr.match.bool.source.match(/\w+/g),function(g,S){var A=so[S]||p.find.attr;so[S]=function(O,z,V){var K,ue,ie=z.toLowerCase();return V||(ue=so[ie],so[ie]=K,K=A(O,z,V)!=null?ie:null,so[ie]=ue),K}});var D2=/^(?:input|select|textarea|button)$/i,R2=/^(?:a|area)$/i;p.fn.extend({prop:function(g,S){return de(this,p.prop,g,S,arguments.length>1)},removeProp:function(g){return this.each(function(){delete this[p.propFix[g]||g]})}}),p.extend({prop:function(g,S,A){var O,z,V=g.nodeType;if(!(V===3||V===8||V===2))return(V!==1||!p.isXMLDoc(g))&&(S=p.propFix[S]||S,z=p.propHooks[S]),A!==void 0?z&&"set"in z&&(O=z.set(g,A,S))!==void 0?O:g[S]=A:z&&"get"in z&&(O=z.get(g,S))!==null?O:g[S]},propHooks:{tabIndex:{get:function(g){var S=p.find.attr(g,"tabindex");return S?parseInt(S,10):D2.test(g.nodeName)||R2.test(g.nodeName)&&g.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(p.propHooks.selected={get:function(g){var S=g.parentNode;return S&&S.parentNode&&S.parentNode.selectedIndex,null},set:function(g){var S=g.parentNode;S&&(S.selectedIndex,S.parentNode&&S.parentNode.selectedIndex)}}),p.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){p.propFix[this.toLowerCase()]=this});function Na(g){var S=g.match(ce)||[];return S.join(" ")}function Fa(g){return g.getAttribute&&g.getAttribute("class")||""}function zl(g){return Array.isArray(g)?g:typeof g=="string"?g.match(ce)||[]:[]}p.fn.extend({addClass:function(g){var S,A,O,z,V,K;return m(g)?this.each(function(ue){p(this).addClass(g.call(this,ue,Fa(this)))}):(S=zl(g),S.length?this.each(function(){if(O=Fa(this),A=this.nodeType===1&&" "+Na(O)+" ",A){for(V=0;V<S.length;V++)z=S[V],A.indexOf(" "+z+" ")<0&&(A+=z+" ");K=Na(A),O!==K&&this.setAttribute("class",K)}}):this)},removeClass:function(g){var S,A,O,z,V,K;return m(g)?this.each(function(ue){p(this).removeClass(g.call(this,ue,Fa(this)))}):arguments.length?(S=zl(g),S.length?this.each(function(){if(O=Fa(this),A=this.nodeType===1&&" "+Na(O)+" ",A){for(V=0;V<S.length;V++)for(z=S[V];A.indexOf(" "+z+" ")>-1;)A=A.replace(" "+z+" "," ");K=Na(A),O!==K&&this.setAttribute("class",K)}}):this):this.attr("class","")},toggleClass:function(g,S){var A,O,z,V,K=typeof g,ue=K==="string"||Array.isArray(g);return m(g)?this.each(function(ie){p(this).toggleClass(g.call(this,ie,Fa(this),S),S)}):typeof S=="boolean"&&ue?S?this.addClass(g):this.removeClass(g):(A=zl(g),this.each(function(){if(ue)for(V=p(this),z=0;z<A.length;z++)O=A[z],V.hasClass(O)?V.removeClass(O):V.addClass(O);else(g===void 0||K==="boolean")&&(O=Fa(this),O&&G.set(this,"__className__",O),this.setAttribute&&this.setAttribute("class",O||g===!1?"":G.get(this,"__className__")||""))}))},hasClass:function(g){var S,A,O=0;for(S=" "+g+" ";A=this[O++];)if(A.nodeType===1&&(" "+Na(Fa(A))+" ").indexOf(S)>-1)return!0;return!1}});var I2=/\r/g;p.fn.extend({val:function(g){var S,A,O,z=this[0];return arguments.length?(O=m(g),this.each(function(V){var K;this.nodeType===1&&(O?K=g.call(this,V,p(this).val()):K=g,K==null?K="":typeof K=="number"?K+="":Array.isArray(K)&&(K=p.map(K,function(ue){return ue==null?"":ue+""})),S=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()],(!S||!("set"in S)||S.set(this,K,"value")===void 0)&&(this.value=K))})):z?(S=p.valHooks[z.type]||p.valHooks[z.nodeName.toLowerCase()],S&&"get"in S&&(A=S.get(z,"value"))!==void 0?A:(A=z.value,typeof A=="string"?A.replace(I2,""):A??"")):void 0}}),p.extend({valHooks:{option:{get:function(g){var S=p.find.attr(g,"value");return S??Na(p.text(g))}},select:{get:function(g){var S,A,O,z=g.options,V=g.selectedIndex,K=g.type==="select-one",ue=K?null:[],ie=K?V+1:z.length;for(V<0?O=ie:O=K?V:0;O<ie;O++)if(A=z[O],(A.selected||O===V)&&!A.disabled&&(!A.parentNode.disabled||!T(A.parentNode,"optgroup"))){if(S=p(A).val(),K)return S;ue.push(S)}return ue},set:function(g,S){for(var A,O,z=g.options,V=p.makeArray(S),K=z.length;K--;)O=z[K],(O.selected=p.inArray(p.valHooks.option.get(O),V)>-1)&&(A=!0);return A||(g.selectedIndex=-1),V}}}}),p.each(["radio","checkbox"],function(){p.valHooks[this]={set:function(g,S){if(Array.isArray(S))return g.checked=p.inArray(p(g).val(),S)>-1}},v.checkOn||(p.valHooks[this].get=function(g){return g.getAttribute("value")===null?"on":g.value})});var uo=e.location,xy={guid:Date.now()},Gl=/\?/;p.parseXML=function(g){var S,A;if(!g||typeof g!="string")return null;try{S=new e.DOMParser().parseFromString(g,"text/xml")}catch{}return A=S&&S.getElementsByTagName("parsererror")[0],(!S||A)&&p.error("Invalid XML: "+(A?p.map(A.childNodes,function(O){return O.textContent}).join(`
`):g)),S};var Sy=/^(?:focusinfocus|focusoutblur)$/,Cy=function(g){g.stopPropagation()};p.extend(p.event,{trigger:function(g,S,A,O){var z,V,K,ue,ie,pe,Ee,ke,be=[A||b],Ie=f.call(g,"type")?g.type:g,it=f.call(g,"namespace")?g.namespace.split("."):[];if(V=ke=K=A=A||b,!(A.nodeType===3||A.nodeType===8)&&!Sy.test(Ie+p.event.triggered)&&(Ie.indexOf(".")>-1&&(it=Ie.split("."),Ie=it.shift(),it.sort()),ie=Ie.indexOf(":")<0&&"on"+Ie,g=g[p.expando]?g:new p.Event(Ie,typeof g=="object"&&g),g.isTrigger=O?2:3,g.namespace=it.join("."),g.rnamespace=g.namespace?new RegExp("(^|\\.)"+it.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,g.result=void 0,g.target||(g.target=A),S=S==null?[g]:p.makeArray(S,[g]),Ee=p.event.special[Ie]||{},!(!O&&Ee.trigger&&Ee.trigger.apply(A,S)===!1))){if(!O&&!Ee.noBubble&&!_(A)){for(ue=Ee.delegateType||Ie,Sy.test(ue+Ie)||(V=V.parentNode);V;V=V.parentNode)be.push(V),K=V;K===(A.ownerDocument||b)&&be.push(K.defaultView||K.parentWindow||e)}for(z=0;(V=be[z++])&&!g.isPropagationStopped();)ke=V,g.type=z>1?ue:Ee.bindType||Ie,pe=(G.get(V,"events")||Object.create(null))[g.type]&&G.get(V,"handle"),pe&&pe.apply(V,S),pe=ie&&V[ie],pe&&pe.apply&&De(V)&&(g.result=pe.apply(V,S),g.result===!1&&g.preventDefault());return g.type=Ie,!O&&!g.isDefaultPrevented()&&(!Ee._default||Ee._default.apply(be.pop(),S)===!1)&&De(A)&&ie&&m(A[Ie])&&!_(A)&&(K=A[ie],K&&(A[ie]=null),p.event.triggered=Ie,g.isPropagationStopped()&&ke.addEventListener(Ie,Cy),A[Ie](),g.isPropagationStopped()&&ke.removeEventListener(Ie,Cy),p.event.triggered=void 0,K&&(A[ie]=K)),g.result}},simulate:function(g,S,A){var O=p.extend(new p.Event,A,{type:g,isSimulated:!0});p.event.trigger(O,null,S)}}),p.fn.extend({trigger:function(g,S){return this.each(function(){p.event.trigger(g,S,this)})},triggerHandler:function(g,S){var A=this[0];if(A)return p.event.trigger(g,S,A,!0)}});var L2=/\[\]$/,Ey=/\r?\n/g,N2=/^(?:submit|button|image|reset|file)$/i,F2=/^(?:input|select|textarea|keygen)/i;function $l(g,S,A,O){var z;if(Array.isArray(S))p.each(S,function(V,K){A||L2.test(g)?O(g,K):$l(g+"["+(typeof K=="object"&&K!=null?V:"")+"]",K,A,O)});else if(!A&&x(S)==="object")for(z in S)$l(g+"["+z+"]",S[z],A,O);else O(g,S)}p.param=function(g,S){var A,O=[],z=function(V,K){var ue=m(K)?K():K;O[O.length]=encodeURIComponent(V)+"="+encodeURIComponent(ue??"")};if(g==null)return"";if(Array.isArray(g)||g.jquery&&!p.isPlainObject(g))p.each(g,function(){z(this.name,this.value)});else for(A in g)$l(A,g[A],S,z);return O.join("&")},p.fn.extend({serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var g=p.prop(this,"elements");return g?p.makeArray(g):this}).filter(function(){var g=this.type;return this.name&&!p(this).is(":disabled")&&F2.test(this.nodeName)&&!N2.test(g)&&(this.checked||!vt.test(g))}).map(function(g,S){var A=p(this).val();return A==null?null:Array.isArray(A)?p.map(A,function(O){return{name:S.name,value:O.replace(Ey,`\r
`)}}):{name:S.name,value:A.replace(Ey,`\r
`)}}).get()}});var B2=/%20/g,q2=/#.*$/,z2=/([?&])_=[^&]*/,G2=/^(.*?):[ \t]*([^\r\n]*)$/mg,$2=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,V2=/^(?:GET|HEAD)$/,U2=/^\/\//,Ty={},Vl={},Py="*/".concat("*"),Ul=b.createElement("a");Ul.href=uo.href;function Ay(g){return function(S,A){typeof S!="string"&&(A=S,S="*");var O,z=0,V=S.toLowerCase().match(ce)||[];if(m(A))for(;O=V[z++];)O[0]==="+"?(O=O.slice(1)||"*",(g[O]=g[O]||[]).unshift(A)):(g[O]=g[O]||[]).push(A)}}function ky(g,S,A,O){var z={},V=g===Vl;function K(ue){var ie;return z[ue]=!0,p.each(g[ue]||[],function(pe,Ee){var ke=Ee(S,A,O);if(typeof ke=="string"&&!V&&!z[ke])return S.dataTypes.unshift(ke),K(ke),!1;if(V)return!(ie=ke)}),ie}return K(S.dataTypes[0])||!z["*"]&&K("*")}function Hl(g,S){var A,O,z=p.ajaxSettings.flatOptions||{};for(A in S)S[A]!==void 0&&((z[A]?g:O||(O={}))[A]=S[A]);return O&&p.extend(!0,g,O),g}function H2(g,S,A){for(var O,z,V,K,ue=g.contents,ie=g.dataTypes;ie[0]==="*";)ie.shift(),O===void 0&&(O=g.mimeType||S.getResponseHeader("Content-Type"));if(O){for(z in ue)if(ue[z]&&ue[z].test(O)){ie.unshift(z);break}}if(ie[0]in A)V=ie[0];else{for(z in A){if(!ie[0]||g.converters[z+" "+ie[0]]){V=z;break}K||(K=z)}V=V||K}if(V)return V!==ie[0]&&ie.unshift(V),A[V]}function j2(g,S,A,O){var z,V,K,ue,ie,pe={},Ee=g.dataTypes.slice();if(Ee[1])for(K in g.converters)pe[K.toLowerCase()]=g.converters[K];for(V=Ee.shift();V;)if(g.responseFields[V]&&(A[g.responseFields[V]]=S),!ie&&O&&g.dataFilter&&(S=g.dataFilter(S,g.dataType)),ie=V,V=Ee.shift(),V){if(V==="*")V=ie;else if(ie!=="*"&&ie!==V){if(K=pe[ie+" "+V]||pe["* "+V],!K){for(z in pe)if(ue=z.split(" "),ue[1]===V&&(K=pe[ie+" "+ue[0]]||pe["* "+ue[0]],K)){K===!0?K=pe[z]:pe[z]!==!0&&(V=ue[0],Ee.unshift(ue[1]));break}}if(K!==!0)if(K&&g.throws)S=K(S);else try{S=K(S)}catch(ke){return{state:"parsererror",error:K?ke:"No conversion from "+ie+" to "+V}}}}return{state:"success",data:S}}p.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:uo.href,type:"GET",isLocal:$2.test(uo.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Py,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":p.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(g,S){return S?Hl(Hl(g,p.ajaxSettings),S):Hl(p.ajaxSettings,g)},ajaxPrefilter:Ay(Ty),ajaxTransport:Ay(Vl),ajax:function(g,S){typeof g=="object"&&(S=g,g=void 0),S=S||{};var A,O,z,V,K,ue,ie,pe,Ee,ke,be=p.ajaxSetup({},S),Ie=be.context||be,it=be.context&&(Ie.nodeType||Ie.jquery)?p(Ie):p.event,_t=p.Deferred(),ut=p.Callbacks("once memory"),Er=be.statusCode||{},hr={},Cn={},En="canceled",bt={readyState:0,getResponseHeader:function(St){var nr;if(ie){if(!V)for(V={};nr=G2.exec(z);)V[nr[1].toLowerCase()+" "]=(V[nr[1].toLowerCase()+" "]||[]).concat(nr[2]);nr=V[St.toLowerCase()+" "]}return nr==null?null:nr.join(", ")},getAllResponseHeaders:function(){return ie?z:null},setRequestHeader:function(St,nr){return ie==null&&(St=Cn[St.toLowerCase()]=Cn[St.toLowerCase()]||St,hr[St]=nr),this},overrideMimeType:function(St){return ie==null&&(be.mimeType=St),this},statusCode:function(St){var nr;if(St)if(ie)bt.always(St[bt.status]);else for(nr in St)Er[nr]=[Er[nr],St[nr]];return this},abort:function(St){var nr=St||En;return A&&A.abort(nr),Ba(0,nr),this}};if(_t.promise(bt),be.url=((g||be.url||uo.href)+"").replace(U2,uo.protocol+"//"),be.type=S.method||S.type||be.method||be.type,be.dataTypes=(be.dataType||"*").toLowerCase().match(ce)||[""],be.crossDomain==null){ue=b.createElement("a");try{ue.href=be.url,ue.href=ue.href,be.crossDomain=Ul.protocol+"//"+Ul.host!=ue.protocol+"//"+ue.host}catch{be.crossDomain=!0}}if(be.data&&be.processData&&typeof be.data!="string"&&(be.data=p.param(be.data,be.traditional)),ky(Ty,be,S,bt),ie)return bt;pe=p.event&&be.global,pe&&p.active++===0&&p.event.trigger("ajaxStart"),be.type=be.type.toUpperCase(),be.hasContent=!V2.test(be.type),O=be.url.replace(q2,""),be.hasContent?be.data&&be.processData&&(be.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(be.data=be.data.replace(B2,"+")):(ke=be.url.slice(O.length),be.data&&(be.processData||typeof be.data=="string")&&(O+=(Gl.test(O)?"&":"?")+be.data,delete be.data),be.cache===!1&&(O=O.replace(z2,"$1"),ke=(Gl.test(O)?"&":"?")+"_="+xy.guid+++ke),be.url=O+ke),be.ifModified&&(p.lastModified[O]&&bt.setRequestHeader("If-Modified-Since",p.lastModified[O]),p.etag[O]&&bt.setRequestHeader("If-None-Match",p.etag[O])),(be.data&&be.hasContent&&be.contentType!==!1||S.contentType)&&bt.setRequestHeader("Content-Type",be.contentType),bt.setRequestHeader("Accept",be.dataTypes[0]&&be.accepts[be.dataTypes[0]]?be.accepts[be.dataTypes[0]]+(be.dataTypes[0]!=="*"?", "+Py+"; q=0.01":""):be.accepts["*"]);for(Ee in be.headers)bt.setRequestHeader(Ee,be.headers[Ee]);if(be.beforeSend&&(be.beforeSend.call(Ie,bt,be)===!1||ie))return bt.abort();if(En="abort",ut.add(be.complete),bt.done(be.success),bt.fail(be.error),A=ky(Vl,be,S,bt),!A)Ba(-1,"No Transport");else{if(bt.readyState=1,pe&&it.trigger("ajaxSend",[bt,be]),ie)return bt;be.async&&be.timeout>0&&(K=e.setTimeout(function(){bt.abort("timeout")},be.timeout));try{ie=!1,A.send(hr,Ba)}catch(St){if(ie)throw St;Ba(-1,St)}}function Ba(St,nr,co,Wl){var Tn,fo,Pn,ua,la,tn=nr;ie||(ie=!0,K&&e.clearTimeout(K),A=void 0,z=Wl||"",bt.readyState=St>0?4:0,Tn=St>=200&&St<300||St===304,co&&(ua=H2(be,bt,co)),!Tn&&p.inArray("script",be.dataTypes)>-1&&p.inArray("json",be.dataTypes)<0&&(be.converters["text script"]=function(){}),ua=j2(be,ua,bt,Tn),Tn?(be.ifModified&&(la=bt.getResponseHeader("Last-Modified"),la&&(p.lastModified[O]=la),la=bt.getResponseHeader("etag"),la&&(p.etag[O]=la)),St===204||be.type==="HEAD"?tn="nocontent":St===304?tn="notmodified":(tn=ua.state,fo=ua.data,Pn=ua.error,Tn=!Pn)):(Pn=tn,(St||!tn)&&(tn="error",St<0&&(St=0))),bt.status=St,bt.statusText=(nr||tn)+"",Tn?_t.resolveWith(Ie,[fo,tn,bt]):_t.rejectWith(Ie,[bt,tn,Pn]),bt.statusCode(Er),Er=void 0,pe&&it.trigger(Tn?"ajaxSuccess":"ajaxError",[bt,be,Tn?fo:Pn]),ut.fireWith(Ie,[bt,tn]),pe&&(it.trigger("ajaxComplete",[bt,be]),--p.active||p.event.trigger("ajaxStop")))}return bt},getJSON:function(g,S,A){return p.get(g,S,A,"json")},getScript:function(g,S){return p.get(g,void 0,S,"script")}}),p.each(["get","post"],function(g,S){p[S]=function(A,O,z,V){return m(O)&&(V=V||z,z=O,O=void 0),p.ajax(p.extend({url:A,type:S,dataType:V,data:O,success:z},p.isPlainObject(A)&&A))}}),p.ajaxPrefilter(function(g){var S;for(S in g.headers)S.toLowerCase()==="content-type"&&(g.contentType=g.headers[S]||"")}),p._evalUrl=function(g,S,A){return p.ajax({url:g,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(O){p.globalEval(O,S,A)}})},p.fn.extend({wrapAll:function(g){var S;return this[0]&&(m(g)&&(g=g.call(this[0])),S=p(g,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&S.insertBefore(this[0]),S.map(function(){for(var A=this;A.firstElementChild;)A=A.firstElementChild;return A}).append(this)),this},wrapInner:function(g){return m(g)?this.each(function(S){p(this).wrapInner(g.call(this,S))}):this.each(function(){var S=p(this),A=S.contents();A.length?A.wrapAll(g):S.append(g)})},wrap:function(g){var S=m(g);return this.each(function(A){p(this).wrapAll(S?g.call(this,A):g)})},unwrap:function(g){return this.parent(g).not("body").each(function(){p(this).replaceWith(this.childNodes)}),this}}),p.expr.pseudos.hidden=function(g){return!p.expr.pseudos.visible(g)},p.expr.pseudos.visible=function(g){return!!(g.offsetWidth||g.offsetHeight||g.getClientRects().length)},p.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch{}};var W2={0:200,1223:204},lo=p.ajaxSettings.xhr();v.cors=!!lo&&"withCredentials"in lo,v.ajax=lo=!!lo,p.ajaxTransport(function(g){var S,A;if(v.cors||lo&&!g.crossDomain)return{send:function(O,z){var V,K=g.xhr();if(K.open(g.type,g.url,g.async,g.username,g.password),g.xhrFields)for(V in g.xhrFields)K[V]=g.xhrFields[V];g.mimeType&&K.overrideMimeType&&K.overrideMimeType(g.mimeType),!g.crossDomain&&!O["X-Requested-With"]&&(O["X-Requested-With"]="XMLHttpRequest");for(V in O)K.setRequestHeader(V,O[V]);S=function(ue){return function(){S&&(S=A=K.onload=K.onerror=K.onabort=K.ontimeout=K.onreadystatechange=null,ue==="abort"?K.abort():ue==="error"?typeof K.status!="number"?z(0,"error"):z(K.status,K.statusText):z(W2[K.status]||K.status,K.statusText,(K.responseType||"text")!=="text"||typeof K.responseText!="string"?{binary:K.response}:{text:K.responseText},K.getAllResponseHeaders()))}},K.onload=S(),A=K.onerror=K.ontimeout=S("error"),K.onabort!==void 0?K.onabort=A:K.onreadystatechange=function(){K.readyState===4&&e.setTimeout(function(){S&&A()})},S=S("abort");try{K.send(g.hasContent&&g.data||null)}catch(ue){if(S)throw ue}},abort:function(){S&&S()}}}),p.ajaxPrefilter(function(g){g.crossDomain&&(g.contents.script=!1)}),p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(g){return p.globalEval(g),g}}}),p.ajaxPrefilter("script",function(g){g.cache===void 0&&(g.cache=!1),g.crossDomain&&(g.type="GET")}),p.ajaxTransport("script",function(g){if(g.crossDomain||g.scriptAttrs){var S,A;return{send:function(O,z){S=p("<script>").attr(g.scriptAttrs||{}).prop({charset:g.scriptCharset,src:g.url}).on("load error",A=function(V){S.remove(),A=null,V&&z(V.type==="error"?404:200,V.type)}),b.head.appendChild(S[0])},abort:function(){A&&A()}}}});var My=[],jl=/(=)\?(?=&|$)|\?\?/;p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var g=My.pop()||p.expando+"_"+xy.guid++;return this[g]=!0,g}}),p.ajaxPrefilter("json jsonp",function(g,S,A){var O,z,V,K=g.jsonp!==!1&&(jl.test(g.url)?"url":typeof g.data=="string"&&(g.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&jl.test(g.data)&&"data");if(K||g.dataTypes[0]==="jsonp")return O=g.jsonpCallback=m(g.jsonpCallback)?g.jsonpCallback():g.jsonpCallback,K?g[K]=g[K].replace(jl,"$1"+O):g.jsonp!==!1&&(g.url+=(Gl.test(g.url)?"&":"?")+g.jsonp+"="+O),g.converters["script json"]=function(){return V||p.error(O+" was not called"),V[0]},g.dataTypes[0]="json",z=e[O],e[O]=function(){V=arguments},A.always(function(){z===void 0?p(e).removeProp(O):e[O]=z,g[O]&&(g.jsonpCallback=S.jsonpCallback,My.push(O)),V&&m(z)&&z(V[0]),V=z=void 0}),"script"}),v.createHTMLDocument=function(){var g=b.implementation.createHTMLDocument("").body;return g.innerHTML="<form></form><form></form>",g.childNodes.length===2}(),p.parseHTML=function(g,S,A){if(typeof g!="string")return[];typeof S=="boolean"&&(A=S,S=!1);var O,z,V;return S||(v.createHTMLDocument?(S=b.implementation.createHTMLDocument(""),O=S.createElement("base"),O.href=b.location.href,S.head.appendChild(O)):S=b),z=I.exec(g),V=!A&&[],z?[S.createElement(z[1])]:(z=lr([g],S,V),V&&V.length&&p(V).remove(),p.merge([],z.childNodes))},p.fn.load=function(g,S,A){var O,z,V,K=this,ue=g.indexOf(" ");return ue>-1&&(O=Na(g.slice(ue)),g=g.slice(0,ue)),m(S)?(A=S,S=void 0):S&&typeof S=="object"&&(z="POST"),K.length>0&&p.ajax({url:g,type:z||"GET",dataType:"html",data:S}).done(function(ie){V=arguments,K.html(O?p("<div>").append(p.parseHTML(ie)).find(O):ie)}).always(A&&function(ie,pe){K.each(function(){A.apply(this,V||[ie.responseText,pe,ie])})}),this},p.expr.pseudos.animated=function(g){return p.grep(p.timers,function(S){return g===S.elem}).length},p.offset={setOffset:function(g,S,A){var O,z,V,K,ue,ie,pe,Ee=p.css(g,"position"),ke=p(g),be={};Ee==="static"&&(g.style.position="relative"),ue=ke.offset(),V=p.css(g,"top"),ie=p.css(g,"left"),pe=(Ee==="absolute"||Ee==="fixed")&&(V+ie).indexOf("auto")>-1,pe?(O=ke.position(),K=O.top,z=O.left):(K=parseFloat(V)||0,z=parseFloat(ie)||0),m(S)&&(S=S.call(g,A,p.extend({},ue))),S.top!=null&&(be.top=S.top-ue.top+K),S.left!=null&&(be.left=S.left-ue.left+z),"using"in S?S.using.call(g,be):ke.css(be)}},p.fn.extend({offset:function(g){if(arguments.length)return g===void 0?this:this.each(function(z){p.offset.setOffset(this,g,z)});var S,A,O=this[0];if(O)return O.getClientRects().length?(S=O.getBoundingClientRect(),A=O.ownerDocument.defaultView,{top:S.top+A.pageYOffset,left:S.left+A.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var g,S,A,O=this[0],z={top:0,left:0};if(p.css(O,"position")==="fixed")S=O.getBoundingClientRect();else{for(S=this.offset(),A=O.ownerDocument,g=O.offsetParent||A.documentElement;g&&(g===A.body||g===A.documentElement)&&p.css(g,"position")==="static";)g=g.parentNode;g&&g!==O&&g.nodeType===1&&(z=p(g).offset(),z.top+=p.css(g,"borderTopWidth",!0),z.left+=p.css(g,"borderLeftWidth",!0))}return{top:S.top-z.top-p.css(O,"marginTop",!0),left:S.left-z.left-p.css(O,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var g=this.offsetParent;g&&p.css(g,"position")==="static";)g=g.offsetParent;return g||qe})}}),p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(g,S){var A=S==="pageYOffset";p.fn[g]=function(O){return de(this,function(z,V,K){var ue;if(_(z)?ue=z:z.nodeType===9&&(ue=z.defaultView),K===void 0)return ue?ue[S]:z[V];ue?ue.scrollTo(A?ue.pageXOffset:K,A?K:ue.pageYOffset):z[V]=K},g,O,arguments.length)}}),p.each(["top","left"],function(g,S){p.cssHooks[S]=ln(v.pixelPosition,function(A,O){if(O)return O=Ur(A,S),gt.test(O)?p(A).position()[S]+"px":O})}),p.each({Height:"height",Width:"width"},function(g,S){p.each({padding:"inner"+g,content:S,"":"outer"+g},function(A,O){p.fn[O]=function(z,V){var K=arguments.length&&(A||typeof z!="boolean"),ue=A||(z===!0||V===!0?"margin":"border");return de(this,function(ie,pe,Ee){var ke;return _(ie)?O.indexOf("outer")===0?ie["inner"+g]:ie.document.documentElement["client"+g]:ie.nodeType===9?(ke=ie.documentElement,Math.max(ie.body["scroll"+g],ke["scroll"+g],ie.body["offset"+g],ke["offset"+g],ke["client"+g])):Ee===void 0?p.css(ie,pe,ue):p.style(ie,pe,Ee,ue)},S,K?z:void 0,K)}})}),p.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(g,S){p.fn[S]=function(A){return this.on(S,A)}}),p.fn.extend({bind:function(g,S,A){return this.on(g,null,S,A)},unbind:function(g,S){return this.off(g,null,S)},delegate:function(g,S,A,O){return this.on(S,g,A,O)},undelegate:function(g,S,A){return arguments.length===1?this.off(g,"**"):this.off(S,g||"**",A)},hover:function(g,S){return this.on("mouseenter",g).on("mouseleave",S||g)}}),p.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(g,S){p.fn[S]=function(A,O){return arguments.length>0?this.on(S,null,A,O):this.trigger(S)}});var K2=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;p.proxy=function(g,S){var A,O,z;if(typeof S=="string"&&(A=g[S],S=g,g=A),!!m(g))return O=i.call(arguments,2),z=function(){return g.apply(S||this,O.concat(i.call(arguments)))},z.guid=g.guid=g.guid||p.guid++,z},p.holdReady=function(g){g?p.readyWait++:p.ready(!0)},p.isArray=Array.isArray,p.parseJSON=JSON.parse,p.nodeName=T,p.isFunction=m,p.isWindow=_,p.camelCase=Ne,p.type=x,p.now=Date.now,p.isNumeric=function(g){var S=p.type(g);return(S==="number"||S==="string")&&!isNaN(g-parseFloat(g))},p.trim=function(g){return g==null?"":(g+"").replace(K2,"$1")};var Y2=e.jQuery,X2=e.$;return p.noConflict=function(g){return e.$===p&&(e.$=X2),g&&e.jQuery===p&&(e.jQuery=Y2),p},typeof t>"u"&&(e.jQuery=e.$=p),p})}(Op)),Op.exports}/*!
Copyright (c) The Cytoscape Consortium

Permission is hereby granted, free of charge, to any person obtaining a copy of
this software and associated documentation files (the “Software”), to deal in
the Software without restriction, including without limitation the rights to
use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies
of the Software, and to permit persons to whom the Software is furnished to do
so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/(function(r){(function(){var e=function(a,i){!a||!i||(i.fn.cyPanzoom=i.fn.cytoscapePanzoom=function(o){return n.apply(this,[o,a,i]),this},a("core","panzoom",function(o){return n.apply(this,[o,a,i]),this}))},t={zoomFactor:.05,zoomDelay:45,minZoom:.1,maxZoom:10,fitPadding:50,panSpeed:10,panDistance:10,panDragAreaSize:75,panMinPercentSpeed:.25,panInactiveArea:8,panIndicatorMinOpacity:.5,zoomOnly:!1,fitSelector:void 0,animateOnFit:function(){return!1},fitAnimationDuration:1e3,sliderHandleIcon:"fa fa-minus",zoomInIcon:"fa fa-plus",zoomOutIcon:"fa fa-minus",resetIcon:"fa fa-expand"},n=function(a,i,o){var s=this,u=o.extend(!0,{},t,a),l=a,c={destroy:function(){var f=o(s.container()),d=f.find(".cy-panzoom");d.data("winbdgs").forEach(function(h){o(window).unbind(h.evt,h.fn)}),d.data("cybdgs").forEach(function(h){s.off(h.evt,h.fn)}),d.remove()},init:function(){return o(s.container()).each(function(){var f=o(this);f.cytoscape=i;var d=[],h=o(window),v=function(le,te){d.push({evt:le,fn:te}),h.bind(le,te)},m=function(le,te){for(var ne=0;ne<d.length;ne++){var de=d[ne];if(de.evt===le&&de.fn===te){d.splice(ne,1);break}}h.unbind(le,te)},_=[],b=function(le,te){_.push({evt:le,fn:te}),s.on(le,te)},w=o('<div class="cy-panzoom"></div>');f.prepend(w),w.css("position","absolute"),w.data("winbdgs",d),w.data("cybdgs",_),u.zoomOnly&&w.addClass("cy-panzoom-zoom-only");var y=o('<div class="cy-panzoom-zoom-in cy-panzoom-zoom-button"><span class="icon '+u.zoomInIcon+'"></span></div>');w.append(y);var x=o('<div class="cy-panzoom-zoom-out cy-panzoom-zoom-button"><span class="icon '+u.zoomOutIcon+'"></span></div>');w.append(x);var C=o('<div class="cy-panzoom-reset cy-panzoom-zoom-button"><span class="icon '+u.resetIcon+'"></span></div>');w.append(C);var E=o('<div class="cy-panzoom-slider"></div>');w.append(E),E.append('<div class="cy-panzoom-slider-background"></div>');var p=o('<div class="cy-panzoom-slider-handle"><span class="icon '+u.sliderHandleIcon+'"></span></div>');E.append(p);var P=o('<div class="cy-panzoom-no-zoom-tick"></div>');E.append(P);var T=o('<div class="cy-panzoom-panner"></div>');w.append(T);var R=o('<div class="cy-panzoom-panner-handle"></div>');T.append(R);var M=o('<div class="cy-panzoom-pan-up cy-panzoom-pan-button"></div>'),N=o('<div class="cy-panzoom-pan-down cy-panzoom-pan-button"></div>'),B=o('<div class="cy-panzoom-pan-left cy-panzoom-pan-button"></div>'),q=o('<div class="cy-panzoom-pan-right cy-panzoom-pan-button"></div>');T.append(M).append(N).append(B).append(q);var Z=o('<div class="cy-panzoom-pan-indicator"></div>');T.append(Z);function Q(le){var te={x:le.originalEvent.pageX-T.offset().left-T.width()/2,y:le.originalEvent.pageY-T.offset().top-T.height()/2},ne=u.panDragAreaSize,de=Math.sqrt(te.x*te.x+te.y*te.y),Ce=Math.min(de/ne,1);if(de<u.panInactiveArea)return{x:NaN,y:NaN};te={x:te.x/de,y:te.y/de},Ce=Math.max(u.panMinPercentSpeed,Ce);var Le={x:-1*te.x*(Ce*u.panDistance),y:-1*te.y*(Ce*u.panDistance)};return Le}function Y(){clearInterval(j),m("mousemove",W),Z.hide()}function J(le){var te=le,ne=Math.sqrt(te.x*te.x+te.y*te.y),de={x:-1*te.x/ne,y:-1*te.y/ne},Ce=T.width(),Le=T.height(),$e=ne/u.panDistance,Ne=Math.max(u.panIndicatorMinOpacity,$e),De=255-Math.round(Ne*255);Z.show().css({left:Ce/2*de.x+Ce/2,top:Le/2*de.y+Le/2,background:"rgb("+De+", "+De+", "+De+")"})}function X(){s.pan(),s.zoom(),F=f.width()/2,L=f.height()/2}var k=!1;function D(){k=!0,X()}function I(){k=!1}var F,L;function H(le){k||X(),s.zoom({level:le,renderedPosition:{x:F,y:L}})}var j,W=function(le){le.stopPropagation(),le.preventDefault(),clearInterval(j);var te=Q(le);if(isNaN(te.x)||isNaN(te.y)){Z.hide();return}J(te),j=setInterval(function(){s.panBy(te)},u.panSpeed)};R.bind("mousedown",function(le){W(le),v("mousemove",W)}),R.bind("mouseup",function(){Y()}),v("mouseup blur",function(){Y()}),E.bind("mousedown",function(){return!1});var re=!1,se=2;function ce(le,te){te===void 0&&(te=0);var ne=se,de=0+ne,Ce=E.height()-p.height()-2*ne,Le=le.pageY-E.offset().top-te;Le<de&&(Le=de),Le>Ce&&(Le=Ce);var $e=1-(Le-de)/(Ce-de);p.css("top",Le);var Ne=u.minZoom,De=u.maxZoom,me=Math.log(Ne)/Math.log(De),G=(1-me)*$e+me,U=Math.pow(De,G);U<Ne?U=Ne:U>De&&(U=De),H(U)}var ge,Pe;p.bind("mousedown",ge=function(le){var te=le.target===p[0]?le.offsetY:0;re=!0,D(),p.addClass("active");var ne=0;return v("mousemove",Pe=function(de){var Ce=+new Date;if(Ce>ne+10)ne=Ce;else return!1;return ce(de,te),!1}),v("mouseup",function(){m("mousemove",Pe),re=!1,p.removeClass("active"),I()}),!1}),E.bind("mousedown",function(le){le.target!==p[0]&&(ge(le),ce(le))});function Oe(){var le=s.zoom(),te=u.minZoom,ne=u.maxZoom,de=Math.log(te)/Math.log(ne),Ce=Math.log(le)/Math.log(ne),Le=1-(Ce-de)/(1-de),$e=se,Ne=E.height()-p.height()-2*se,De=Le*(Ne-$e);De<$e&&(De=$e),De>Ne&&(De=Ne),p.css("top",De)}Oe(),b("zoom",function(){re||Oe()}),function(){var le=1,te=u.minZoom,ne=u.maxZoom,de=Math.log(te)/Math.log(ne),Ce=Math.log(le)/Math.log(ne),Le=1-(Ce-de)/(1-de);if(Le>1||Le<0){P.hide();return}var $e=se,Ne=E.height()-p.height()-2*se,De=Le*(Ne-$e);De<$e&&(De=$e),De>Ne&&(De=Ne),P.css("top",De)}();function Se(le,te){var ne;le.bind("mousedown",function(de){if(de.preventDefault(),de.stopPropagation(),de.button==0){var Ce=function(){var Le=s.zoom(),$e=s.zoom()*te;$e<u.minZoom&&($e=u.minZoom),$e>u.maxZoom&&($e=u.maxZoom),!($e==u.maxZoom&&Le==u.maxZoom||$e==u.minZoom&&Le==u.minZoom)&&H($e)};return D(),Ce(),ne=setInterval(Ce,u.zoomDelay),!1}}),v("mouseup blur",function(){clearInterval(ne),I()})}Se(y,1+u.zoomFactor),Se(x,1-u.zoomFactor),C.bind("mousedown",function(le){if(le.button==0){var te=u.fitSelector?s.elements(u.fitSelector):s.elements();if(te.size()===0)s.reset();else{var ne=typeof u.animateOnFit=="function"?u.animateOnFit.call():u.animateOnFit;ne?s.animate({fit:{eles:te,padding:u.fitPadding}},{duration:u.fitAnimationDuration}):s.fit(te,u.fitPadding)}return!1}})})}};return c[l]?c[l].apply(this,Array.prototype.slice.call(arguments,1)):typeof l=="object"||!l?c.init.apply(this,arguments):(o.error("No such function `"+l+"` for jquery.cytoscapePanzoom"),o(this))};r.exports&&(r.exports=function(a,i){e(a,i||DE())}),typeof cytoscape<"u"&&typeof jQuery<"u"&&e(cytoscape,jQuery)})()})(OE);var nF=OE.exports;const aF=Aa(nF);var RE={exports:{}},Dp,vx;function iF(){if(vx)return Dp;vx=1;var r="Expected a function",e="__lodash_hash_undefined__",t="[object Function]",n="[object GeneratorFunction]",a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=typeof Ve=="object"&&Ve&&Ve.Object===Object&&Ve,s=typeof self=="object"&&self&&self.Object===Object&&self,u=o||s||Function("return this")();function l(te,ne){return te==null?void 0:te[ne]}function c(te){var ne=!1;if(te!=null&&typeof te.toString!="function")try{ne=!!(te+"")}catch{}return ne}var f=Array.prototype,d=Function.prototype,h=Object.prototype,v=u["__core-js_shared__"],m=function(){var te=/[^.]+$/.exec(v&&v.keys&&v.keys.IE_PROTO||"");return te?"Symbol(src)_1."+te:""}(),_=d.toString,b=h.hasOwnProperty,w=h.toString,y=RegExp("^"+_.call(b).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),x=f.splice,C=re(u,"Map"),E=re(Object,"create");function p(te){var ne=-1,de=te?te.length:0;for(this.clear();++ne<de;){var Ce=te[ne];this.set(Ce[0],Ce[1])}}function P(){this.__data__=E?E(null):{}}function T(te){return this.has(te)&&delete this.__data__[te]}function R(te){var ne=this.__data__;if(E){var de=ne[te];return de===e?void 0:de}return b.call(ne,te)?ne[te]:void 0}function M(te){var ne=this.__data__;return E?ne[te]!==void 0:b.call(ne,te)}function N(te,ne){var de=this.__data__;return de[te]=E&&ne===void 0?e:ne,this}p.prototype.clear=P,p.prototype.delete=T,p.prototype.get=R,p.prototype.has=M,p.prototype.set=N;function B(te){var ne=-1,de=te?te.length:0;for(this.clear();++ne<de;){var Ce=te[ne];this.set(Ce[0],Ce[1])}}function q(){this.__data__=[]}function Z(te){var ne=this.__data__,de=H(ne,te);if(de<0)return!1;var Ce=ne.length-1;return de==Ce?ne.pop():x.call(ne,de,1),!0}function Q(te){var ne=this.__data__,de=H(ne,te);return de<0?void 0:ne[de][1]}function Y(te){return H(this.__data__,te)>-1}function J(te,ne){var de=this.__data__,Ce=H(de,te);return Ce<0?de.push([te,ne]):de[Ce][1]=ne,this}B.prototype.clear=q,B.prototype.delete=Z,B.prototype.get=Q,B.prototype.has=Y,B.prototype.set=J;function X(te){var ne=-1,de=te?te.length:0;for(this.clear();++ne<de;){var Ce=te[ne];this.set(Ce[0],Ce[1])}}function k(){this.__data__={hash:new p,map:new(C||B),string:new p}}function D(te){return W(this,te).delete(te)}function I(te){return W(this,te).get(te)}function F(te){return W(this,te).has(te)}function L(te,ne){return W(this,te).set(te,ne),this}X.prototype.clear=k,X.prototype.delete=D,X.prototype.get=I,X.prototype.has=F,X.prototype.set=L;function H(te,ne){for(var de=te.length;de--;)if(Oe(te[de][0],ne))return de;return-1}function j(te){if(!le(te)||ce(te))return!1;var ne=Se(te)||c(te)?y:i;return ne.test(ge(te))}function W(te,ne){var de=te.__data__;return se(ne)?de[typeof ne=="string"?"string":"hash"]:de.map}function re(te,ne){var de=l(te,ne);return j(de)?de:void 0}function se(te){var ne=typeof te;return ne=="string"||ne=="number"||ne=="symbol"||ne=="boolean"?te!=="__proto__":te===null}function ce(te){return!!m&&m in te}function ge(te){if(te!=null){try{return _.call(te)}catch{}try{return te+""}catch{}}return""}function Pe(te,ne){if(typeof te!="function"||ne&&typeof ne!="function")throw new TypeError(r);var de=function(){var Ce=arguments,Le=ne?ne.apply(this,Ce):Ce[0],$e=de.cache;if($e.has(Le))return $e.get(Le);var Ne=te.apply(this,Ce);return de.cache=$e.set(Le,Ne),Ne};return de.cache=new(Pe.Cache||X),de}Pe.Cache=X;function Oe(te,ne){return te===ne||te!==te&&ne!==ne}function Se(te){var ne=le(te)?w.call(te):"";return ne==t||ne==n}function le(te){var ne=typeof te;return!!te&&(ne=="object"||ne=="function")}return Dp=Pe,Dp}var Rp,px;function oF(){if(px)return Rp;px=1;var r="Expected a function",e=NaN,t="[object Symbol]",n=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt,u=typeof Ve=="object"&&Ve&&Ve.Object===Object&&Ve,l=typeof self=="object"&&self&&self.Object===Object&&self,c=u||l||Function("return this")(),f=Object.prototype,d=f.toString,h=Math.max,v=Math.min,m=function(){return c.Date.now()};function _(E,p,P){var T,R,M,N,B,q,Z=0,Q=!1,Y=!1,J=!0;if(typeof E!="function")throw new TypeError(r);p=C(p)||0,w(P)&&(Q=!!P.leading,Y="maxWait"in P,M=Y?h(C(P.maxWait)||0,p):M,J="trailing"in P?!!P.trailing:J);function X(re){var se=T,ce=R;return T=R=void 0,Z=re,N=E.apply(ce,se),N}function k(re){return Z=re,B=setTimeout(F,p),Q?X(re):N}function D(re){var se=re-q,ce=re-Z,ge=p-se;return Y?v(ge,M-ce):ge}function I(re){var se=re-q,ce=re-Z;return q===void 0||se>=p||se<0||Y&&ce>=M}function F(){var re=m();if(I(re))return L(re);B=setTimeout(F,D(re))}function L(re){return B=void 0,J&&T?X(re):(T=R=void 0,N)}function H(){B!==void 0&&clearTimeout(B),Z=0,T=q=R=B=void 0}function j(){return B===void 0?N:L(m())}function W(){var re=m(),se=I(re);if(T=arguments,R=this,q=re,se){if(B===void 0)return k(q);if(Y)return B=setTimeout(F,p),X(q)}return B===void 0&&(B=setTimeout(F,p)),N}return W.cancel=H,W.flush=j,W}function b(E,p,P){var T=!0,R=!0;if(typeof E!="function")throw new TypeError(r);return w(P)&&(T="leading"in P?!!P.leading:T,R="trailing"in P?!!P.trailing:R),_(E,p,{leading:T,maxWait:p,trailing:R})}function w(E){var p=typeof E;return!!E&&(p=="object"||p=="function")}function y(E){return!!E&&typeof E=="object"}function x(E){return typeof E=="symbol"||y(E)&&d.call(E)==t}function C(E){if(typeof E=="number")return E;if(x(E))return e;if(w(E)){var p=typeof E.valueOf=="function"?E.valueOf():E;E=w(p)?p+"":p}if(typeof E!="string")return E===0?E:+E;E=E.replace(n,"");var P=i.test(E);return P||o.test(E)?s(E.slice(2),P?2:8):a.test(E)?e:+E}return Rp=b,Rp}(function(r,e){(function(n,a){r.exports=a(iF(),oF())})(Ve,function(t,n){return function(a){var i={};function o(s){if(i[s])return i[s].exports;var u=i[s]={i:s,l:!1,exports:{}};return a[s].call(u.exports,u,u.exports,o),u.l=!0,u.exports}return o.m=a,o.c=i,o.i=function(s){return s},o.d=function(s,u,l){o.o(s,u)||Object.defineProperty(s,u,{configurable:!1,enumerable:!0,get:l})},o.n=function(s){var u=s&&s.__esModule?function(){return s.default}:function(){return s};return o.d(u,"a",u),u},o.o=function(s,u){return Object.prototype.hasOwnProperty.call(s,u)},o.p="",o(o.s=12)}([function(a,i,o){a.exports=Object.assign!=null?Object.assign.bind(Object):function(s){for(var u=arguments.length,l=Array(u>1?u-1:0),c=1;c<u;c++)l[c-1]=arguments[c];return l.filter(function(f){return f!=null}).forEach(function(f){Object.keys(f).forEach(function(d){return s[d]=f[d]})}),s}},function(a,i,o){var s=o(10),u=o(0);a.exports=function(l){var c=this;return new s(u({cy:c},l))}},function(a,i,o){function s(){if(this.saveGestureState(),this.cy.zoomingEnabled(!1).panningEnabled(!1).boxSelectionEnabled(!1),this.options.disableBrowserGestures){var c=this.windowListenerOptions;window.addEventListener("touchstart",this.preventDefault,c),window.addEventListener("touchmove",this.preventDefault,c),window.addEventListener("wheel",this.preventDefault,c)}return this}function u(){if(this.cy.zoomingEnabled(this.lastZoomingEnabled).panningEnabled(this.lastPanningEnabled).boxSelectionEnabled(this.lastBoxSelectionEnabled),this.options.disableBrowserGestures){var c=this.windowListenerOptions;window.removeEventListener("touchstart",this.preventDefault,c),window.removeEventListener("touchmove",this.preventDefault,c),window.removeEventListener("wheel",this.preventDefault,c)}return this}function l(){var c=this.cy;return this.lastPanningEnabled=c.panningEnabled(),this.lastZoomingEnabled=c.zoomingEnabled(),this.lastBoxSelectionEnabled=c.boxSelectionEnabled(),this}a.exports={disableGestures:s,resetGestures:u,saveGestureState:l}},function(a,i,o){function s(){var u=this,l=this.cy,c=this.options;return this.addListener(l,"drag",function(){return u.grabbingNode=!0}),this.addListener(l,"free",function(){return u.grabbingNode=!1}),this.addListener(l,"tapstart","node",function(f){var d=f.target;u.drawMode&&u.start(d)}),this.addListener(l,"tapdrag",function(f){u.update(f.position)}),this.addListener(l,"tapdragover","node",function(f){c.snap||u.preview(f.target)}),this.addListener(l,"tapdragout","node",function(f){c.snap||u.unpreview(f.target)}),this.addListener(l,"tapend",function(){u.stop()}),this}a.exports={addCytoscapeListeners:s}},function(a,i,o){var s={canConnect:function(l,c){return!l.same(c)},edgeParams:function(l,c){return{}},hoverDelay:150,snap:!0,snapThreshold:50,snapFrequency:15,noEdgeEventsInDraw:!0,disableBrowserGestures:!0};a.exports=s},function(a,i,o){function s(c){var f=this.cy;return this.drawMode=c??!this.drawMode,this.drawMode?(this.prevUngrabifyState=f.autoungrabify(),f.autoungrabify(!0),this.emit("drawon")):(f.autoungrabify(this.prevUngrabifyState),this.emit("drawoff")),this}function u(){return this.toggleDrawMode(!0)}function l(){return this.toggleDrawMode(!1)}a.exports={toggleDrawMode:s,enableDrawMode:u,disableDrawMode:l}},function(a,i,o){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},u=o(0),l=function(w){return(typeof w>"u"?"undefined":s(w))===s("")},c=function(w){return(typeof w>"u"?"undefined":s(w))===s([])&&w.length!=null};function f(b,w,y){var x={};return u(x,w,b),u(x.data,w.data,b.data),l(w.classes)?x.classes=w.classes+" "+y:c(w.classes)?x.classes=w.classes.join(" ")+" "+y:x.classes=y,x}function d(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,w=this.cy;this.options;var y=this.presumptiveTargets,x=this.previewEles,C=this.active,E=this.sourceNode,p=this.targetNode,P=b?"eh-preview":"",T=w.collection(),R=this.canConnect(p);if(C&&R){if(!p||p.size()===0){x.remove(),this.emit("cancel",this.mp(),E,y);return}if(!b){x.removeClass("eh-preview").style("events",""),this.emit("complete",this.mp(),E,p,x);return}var M=w.add(f({group:"edges",data:{source:E.id(),target:p.id()}},this.edgeParams(p),P));return T=T.merge(M),b?(this.previewEles=T,T.style("events","no")):(T.style("events",""),this.emit("complete",this.mp(),E,p,T)),this}}function h(){return this.makeEdges(!0),this}function v(){return this.previewEles.nonempty()&&this.previewEles.inside()}function m(){return this.previewShown()&&this.previewEles.remove(),this}function _(){var b=this,w=this.sourceNode,y=this.ghostNode,x=this.cy,C=this.mx,E=this.my,p=C,P=E,T=void 0,R=void 0;if(w)return(!y||y.length===0||y.removed())&&(R=this.ghostEles=x.collection(),x.batch(function(){y=b.ghostNode=x.add({group:"nodes",classes:"eh-ghost eh-ghost-node",position:{x:0,y:0}}),y.style({"background-color":"blue",width:1e-4,height:1e-4,opacity:0,events:"no"});var M={};T=x.add(u({},M,{group:"edges",data:u({},M.data,{source:w.id(),target:y.id()}),classes:"eh-ghost eh-ghost-edge"})),T.style({events:"no"})}),R.merge(y).merge(T)),y.position({x:p,y:P}),this}a.exports={makeEdges:d,makePreview:h,removePreview:m,previewShown:v,updateEdge:_}},function(a,i,o){function s(){return this.options.noEdgeEventsInDraw&&this.cy.edges().style("events","no"),this}function u(){return this.options.noEdgeEventsInDraw&&this.cy.edges().style("events",""),this}a.exports={disableEdgeEvents:s,enableEdgeEvents:u}},function(a,i,o){function s(){return this.enabled=!0,this.emit("enable"),this}function u(){return this.enabled=!1,this.emit("disable"),this}a.exports={enable:s,disable:u}},function(a,i,o){var s=o(13),u=Math.sqrt(2);function l(w){var y=this.previewEles,x=this.ghostEles,C=function(N){return y.anySame(N)},E=function(N){return x.anySame(N)},p=function(N){return C(N)||E(N)},P=this.enabled,T=this.active,R=this.grabbingNode;return P&&!T&&!R&&w!=null&&w.nonempty()&&!p(w)}function c(w){return this.canStartOn(w)&&this.drawMode}function f(w){return this.canStartOn(w)&&!this.drawMode}function d(w){var y=this;if(this.canStartOn(w)){this.active=!0,this.sourceNode=w,this.sourceNode.addClass("eh-source"),this.disableGestures(),this.disableEdgeEvents();var x=function(E){return E.id()};this.canConnect=s(function(C){return y.options.canConnect(y.sourceNode,C)},x),this.edgeParams=s(function(C){return y.options.edgeParams(y.sourceNode,C)},x),this.emit("start",this.hp(),w)}}function h(w){if(this.active){var y=w;return this.mx=y.x,this.my=y.y,this.updateEdge(),this.throttledSnap(),this}}function v(){if(!this.active||!this.options.snap)return!1;var w=this.cy,y=this.targetNode,x=this.options.snapThreshold,C=this.mp(),E=this.previewEles,p=this.ghostNode,P=function(H){return u*Math.max(H.outerWidth(),H.outerHeight())/2},T=function(H,j,W,re){var se=W-H,ce=re-j;return se*se+ce*ce},R=function(H,j){return T(H.x,H.y,j.x,j.y)},M=function(H){return R(H.position(),C)},N=function(H){var j=P(H),W=j+x;return W*W},B=function(H){return M(H)<=N(H)},q=function(H){var j=H.position(),W=H.outerWidth()/2,re=H.outerHeight()/2,se=j.x,ce=j.y,ge=C.x,Pe=C.y,Oe=se-W,Se=se+W,le=ce-re,te=ce+re,ne=Oe<=ge&&ge<=Se,de=le<=Pe&&Pe<=te;if(ne&&de)return 0;if(ne){var Ce=Pe-le,Le=Pe-te;return Math.min(Ce*Ce,Le*Le)}else if(de){var $e=ge-Oe,Ne=ge-Se;return Math.min($e*$e,Ne*Ne)}else return ge<Oe&&Pe<le?T(ge,Pe,Oe,le):ge>Se&&Pe<le?T(ge,Pe,Se,le):ge<Oe&&Pe>te?T(ge,Pe,Oe,te):T(ge,Pe,Se,te)},Z=function(H,j){return q(H)-q(j)},Q=Z,Y=!1,J=function(H){var j=C,W=H.outerWidth(),re=W/2,se=H.outerHeight(),ce=se/2,ge=H.position(),Pe=ge.x-re,Oe=ge.x+re,Se=ge.y-ce,le=ge.y+ce;return Pe<=j.x&&j.x<=Oe&&Se<=j.y&&j.y<=le},X=function(H){return H.same(E)||H.same(p)},k=w.nodes(function(L){return!X(L)&&B(L)}).sort(Q),D=!1;y.nonempty()&&!B(y)&&this.unpreview(y);for(var I=0;I<k.length;I++){var F=k[I];if(!(F.isParent()&&J(F))&&!(F.isChild()&&!J(F.parent()))&&(F.same(y)||this.preview(F,Y))){D=!0;break}}return D}function m(w){var y=this,x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,C=this.options,E=this.sourceNode,p=this.ghostNode,P=this.ghostEles,T=this.presumptiveTargets,R=this.previewEles,M=this.active,N=E,B=w.same(p),q=!this.canConnect(w),Z=w.same(this.targetNode);if(!M||B||q||Z)return!1;this.targetNode.nonempty()&&this.unpreview(this.targetNode),clearTimeout(this.previewTimeout);var Q=function(){y.targetNode=w,T.merge(w),w.addClass("eh-presumptive-target"),w.addClass("eh-target"),y.emit("hoverover",y.mp(),N,w),w.addClass("eh-preview"),P.addClass("eh-preview-active"),E.addClass("eh-preview-active"),w.addClass("eh-preview-active"),y.makePreview(),y.emit("previewon",y.mp(),N,w,R)};return x&&C.hoverDelay>0?this.previewTimeout=setTimeout(Q,C.hoverDelay):Q(),!0}function _(w){if(this.active){var y=this.previewTimeout,x=this.sourceNode,C=this.previewEles,E=this.ghostEles,p=this.cy;clearTimeout(y),this.previewTimeout=null;var P=x;return w.removeClass("eh-preview eh-target eh-presumptive-target eh-preview-active"),E.removeClass("eh-preview-active"),x.removeClass("eh-preview-active"),this.targetNode=p.collection(),this.removePreview(P,w),this.emit("hoverout",this.mp(),P,w),this.emit("previewoff",this.mp(),P,w,C),this}}function b(){if(this.active){var w=this.sourceNode,y=this.targetNode,x=this.ghostEles,C=this.presumptiveTargets;return clearTimeout(this.previewTimeout),w.removeClass("eh-source eh-preview-active"),y.removeClass("eh-target eh-preview eh-hover eh-preview-active"),C.removeClass("eh-presumptive-target"),this.makeEdges(),x.remove(),this.clearCollections(),this.resetGestures(),this.enableEdgeEvents(),this.active=!1,this.emit("stop",this.mp(),w),this}}a.exports={start:d,update:h,preview:m,unpreview:_,stop:b,snap:v,canStartOn:l,canStartDrawModeOn:c,canStartNonDrawModeOn:f}},function(a,i,o){var s=o(4),u=o(0),l=o(14),c=o(2),f=o(3),d=o(5),h=o(6),v=o(8),m=o(9),_=o(11),b=o(7);function w(C){var E=C.cy;this.cy=E,this.listeners=[],this.enabled=!0,this.drawMode=!1,this.active=!1,this.grabbingNode=!1,this.clearCollections(),this.mx=0,this.my=0,this.options=u({},s,C),this.saveGestureState(),this.addListeners(),this.throttledSnap=l(this.snap.bind(this),1e3/C.snapFrequency),this.preventDefault=function(T){return T.preventDefault()},this.canConnect=function(){return!1};var p=!1;try{var P=Object.defineProperty({},"passive",{get:function(){p=!0}});window.addEventListener("test",null,P)}catch{}p?this.windowListenerOptions={capture:!0,passive:!1}:this.windowListenerOptions=!0}var y=w.prototype={},x=function(E){return u(y,E)};y.destroy=function(){this.removeListeners()},y.setOptions=function(C){u(this.options,C)},y.mp=function(){return{x:this.mx,y:this.my}},y.hp=function(){return{x:this.hx,y:this.hy}},y.clearCollections=function(){var C=this.cy;this.previewEles=C.collection(),this.ghostEles=C.collection(),this.ghostNode=C.collection(),this.sourceNode=C.collection(),this.targetNode=C.collection(),this.presumptiveTargets=C.collection()},[c,f,d,h,v,m,_,b].forEach(x),a.exports=w},function(a,i,o){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m};function u(){var m=this;return this.addCytoscapeListeners(),this.addListener(this.cy,"destroy",function(){return m.destroy()}),this}function l(){for(var m=this.listeners.length-1;m>=0;m--){var _=this.listeners[m];this.removeListener(_.target,_.event,_.selector,_.callback,_.options)}return this}function c(m,_,b,w,y){return(typeof b>"u"?"undefined":s(b))!==s("")&&(w=b,y=w,b=null),y==null&&(y=!1),{target:m,event:_,selector:b,callback:w,options:y}}function f(m){return m instanceof Element}function d(m,_,b,w,y){var x=c(m,_,b,w,y);return this.listeners.push(x),f(x.target)?x.target.addEventListener(x.event,x.callback,x.options):x.selector?x.target.addListener(x.event,x.selector,x.callback,x.options):x.target.addListener(x.event,x.callback,x.options),this}function h(m,_,b,w,y){for(var x=c(m,_,b,w,y),C=this.listeners.length-1;C>=0;C--){var E=this.listeners[C];if(x.target===E.target&&x.event===E.event&&(x.selector==null||x.selector===E.selector)&&(x.callback==null||x.callback===E.callback)){this.listeners.splice(C,1),f(x.target)?x.target.removeEventListener(x.event,x.callback,x.options):x.selector?x.target.removeListener(x.event,x.selector,x.callback,x.options):x.target.removeListener(x.event,x.callback,x.options);break}}return this}function v(m,_){for(var b=this.cy,w=arguments.length,y=Array(w>2?w-2:0),x=2;x<w;x++)y[x-2]=arguments[x];return b.emit({type:"eh"+m,position:_},y),this}a.exports={addListener:d,addListeners:u,removeListener:h,removeListeners:l,emit:v}},function(a,i,o){var s=o(1),u=function(c){c&&c("core","edgehandles",s)};typeof cytoscape<"u"&&u(cytoscape),a.exports=u},function(a,i){a.exports=t},function(a,i){a.exports=n}])})})(RE);var sF=RE.exports;const uF=Aa(sF);var IE={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(self,function(){return(()=>{var t={621:(i,o,s)=>{function u(k,D){(D==null||D>k.length)&&(D=k.length);for(var I=0,F=new Array(D);I<D;I++)F[I]=k[I];return F}function l(k){for(var D="",I=0;I<k.length;I++)D+=k[I],I!==k.length-1&&(D+=" ");return D}function c(k,D,I){I?k.setAttribute(D,""):k.removeAttribute(D)}function f(k,D,I){customElements.get(k)===void 0&&customElements.define(k,D,{extends:I})}s.r(o),s.d(o,{contextMenus:()=>X});var d="cy-context-menus-divider",h={evtType:"cxttap",menuItems:[],menuItemClasses:["cy-context-menus-cxt-menuitem"],contextMenuClasses:["cy-context-menus-cxt-menu"],submenuIndicator:{src:"assets/submenu-indicator-default.svg",width:12,height:12}};function v(k){return(v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(k)}function m(k,D){var I;if(typeof Symbol>"u"||k[Symbol.iterator]==null){if(Array.isArray(k)||(I=function(re,se){if(re){if(typeof re=="string")return _(re,se);var ce=Object.prototype.toString.call(re).slice(8,-1);return ce==="Object"&&re.constructor&&(ce=re.constructor.name),ce==="Map"||ce==="Set"?Array.from(re):ce==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ce)?_(re,se):void 0}}(k))||D){I&&(k=I);var F=0,L=function(){};return{s:L,n:function(){return F>=k.length?{done:!0}:{done:!1,value:k[F++]}},e:function(re){throw re},f:L}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var H,j=!0,W=!1;return{s:function(){I=k[Symbol.iterator]()},n:function(){var re=I.next();return j=re.done,re},e:function(re){W=!0,H=re},f:function(){try{j||I.return==null||I.return()}finally{if(W)throw H}}}}function _(k,D){(D==null||D>k.length)&&(D=k.length);for(var I=0,F=new Array(D);I<D;I++)F[I]=k[I];return F}function b(k,D){if(!(k instanceof D))throw new TypeError("Cannot call a class as a function")}function w(k,D){for(var I=0;I<D.length;I++){var F=D[I];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(k,F.key,F)}}function y(k,D,I){return D&&w(k.prototype,D),I&&w(k,I),k}function x(k,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function");k.prototype=Object.create(D&&D.prototype,{constructor:{value:k,writable:!0,configurable:!0}}),D&&N(k,D)}function C(k){var D=M();return function(){var I,F=B(k);if(D){var L=B(this).constructor;I=Reflect.construct(F,arguments,L)}else I=F.apply(this,arguments);return E(this,I)}}function E(k,D){return!D||v(D)!=="object"&&typeof D!="function"?p(k):D}function p(k){if(k===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k}function P(k,D,I){return(P=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(F,L,H){var j=function(re,se){for(;!Object.prototype.hasOwnProperty.call(re,se)&&(re=B(re))!==null;);return re}(F,L);if(j){var W=Object.getOwnPropertyDescriptor(j,L);return W.get?W.get.call(H):W.value}})(k,D,I||k)}function T(k){var D=typeof Map=="function"?new Map:void 0;return(T=function(I){if(I===null||(F=I,Function.toString.call(F).indexOf("[native code]")===-1))return I;var F;if(typeof I!="function")throw new TypeError("Super expression must either be null or a function");if(D!==void 0){if(D.has(I))return D.get(I);D.set(I,L)}function L(){return R(I,arguments,B(this).constructor)}return L.prototype=Object.create(I.prototype,{constructor:{value:L,enumerable:!1,writable:!0,configurable:!0}}),N(L,I)})(k)}function R(k,D,I){return(R=M()?Reflect.construct:function(F,L,H){var j=[null];j.push.apply(j,L);var W=new(Function.bind.apply(F,j));return H&&N(W,H.prototype),W}).apply(null,arguments)}function M(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function N(k,D){return(N=Object.setPrototypeOf||function(I,F){return I.__proto__=F,I})(k,D)}function B(k){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(D){return D.__proto__||Object.getPrototypeOf(D)})(k)}function q(k){k.preventDefault(),k.stopPropagation()}var Z=function(k){x(I,k);var D=C(I);function I(F,L,H){var j,W,re,se,ce,ge,Pe,Oe,Se,le;b(this,I),P((W=p(le=D.call(this)),B(I.prototype)),"setAttribute",W).call(W,"id",F.id);var te=le._getMenuItemClassStr(H.cxtMenuItemClasses,F.hasTrailingDivider);if(P((re=p(le),B(I.prototype)),"setAttribute",re).call(re,"class",te),P((se=p(le),B(I.prototype)),"setAttribute",se).call(se,"title",(j=F.tooltipText)!==null&&j!==void 0?j:""),F.disabled&&c(p(le),"disabled",!0),F.image){var ne=document.createElement("img");ne.src=F.image.src,ne.width=F.image.width,ne.height=F.image.height,ne.style.position="absolute",ne.style.top=F.image.y+"px",ne.style.left=F.image.x+"px",P((ce=p(le),B(I.prototype)),"appendChild",ce).call(ce,ne)}if(le.innerHTML+=F.content,le.onMenuItemClick=L,le.data={},le.clickFns=[],le.selector=F.selector,le.hasTrailingDivider=F.hasTrailingDivider,le.show=F.show===void 0||F.show,le.coreAsWell=F.coreAsWell||!1,le.scratchpad=H,F.onClickFunction===void 0&&F.submenu===void 0)throw new Error("A menu item must either have click function or a submenu or both");return le.onClickFunction=F.onClickFunction,F.submenu instanceof Array&&le._createSubmenu(F.submenu),P((ge=p(le),B(I.prototype)),"addEventListener",ge).call(ge,"mousedown",q),P((Pe=p(le),B(I.prototype)),"addEventListener",Pe).call(Pe,"mouseup",q),P((Oe=p(le),B(I.prototype)),"addEventListener",Oe).call(Oe,"touchstart",q),P((Se=p(le),B(I.prototype)),"addEventListener",Se).call(Se,"touchend",q),le}return y(I,[{key:"bindOnClickFunction",value:function(F){this.clickFns.push(F),P(B(I.prototype),"addEventListener",this).call(this,"click",F)}},{key:"unbindOnClickFunctions",value:function(){var F,L=m(this.clickFns);try{for(L.s();!(F=L.n()).done;){var H=F.value;P(B(I.prototype),"removeEventListener",this).call(this,"click",H)}}catch(j){L.e(j)}finally{L.f()}this.clickFns=[]}},{key:"enable",value:function(){c(this,"disabled",!1),this.hasSubmenu()&&this.addEventListener("mouseenter",this.mouseEnterHandler)}},{key:"disable",value:function(){c(this,"disabled",!0),this.hasSubmenu()&&this.removeEventListener("mouseenter",this.mouseEnterHandler)}},{key:"hide",value:function(){this.show=!1,this.style.display="none"}},{key:"getHasTrailingDivider",value:function(){return!!this.hasTrailingDivider}},{key:"setHasTrailingDivider",value:function(F){this.hasTrailingDivider=F}},{key:"hasSubmenu",value:function(){return this.submenu instanceof Q}},{key:"appendSubmenuItem",value:function(F){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;this.hasSubmenu()||this._createSubmenu(),this.submenu.appendMenuItem(F,L)}},{key:"isClickable",value:function(){return this.onClickFunction!==void 0}},{key:"display",value:function(){this.show=!0,this.style.display="block"}},{key:"isVisible",value:function(){return this.show===!0&&this.style.display!=="none"}},{key:"removeSubmenu",value:function(){this.hasSubmenu()&&(this.submenu.removeAllMenuItems(),this.detachSubmenu())}},{key:"detachSubmenu",value:function(){this.hasSubmenu()&&(this.removeChild(this.submenu),this.removeChild(this.indicator),this.removeEventListener("mouseenter",this.mouseEnterHandler),this.removeEventListener("mouseleave",this.mouseLeaveHandler),this.submenu=void 0,this.indicator=void 0)}},{key:"_onMouseEnter",value:function(F){var L=this.getBoundingClientRect(),H=function(ce){ce.style.opacity="0",ce.style.display="block";var ge=ce.getBoundingClientRect();return ce.style.opacity="1",ce.style.display="none",ge}(this.submenu),j=L.right+H.width>window.innerWidth,W=L.top+H.height>window.innerHeight;j||W?j&&!W?(this.submenu.style.right=this.clientWidth+"px",this.submenu.style.top="0px",this.submenu.style.left="auto",this.submenu.style.bottom="auto"):j&&W?(this.submenu.style.right=this.clientWidth+"px",this.submenu.style.bottom="0px",this.submenu.style.top="auto",this.submenu.style.left="auto"):(this.submenu.style.left=this.clientWidth+"px",this.submenu.style.bottom="0px",this.submenu.style.right="auto",this.submenu.style.top="auto"):(this.submenu.style.left=this.clientWidth+"px",this.submenu.style.top="0px",this.submenu.style.right="auto",this.submenu.style.bottom="auto"),this.submenu.display();var re=Array.from(this.submenu.children).filter(function(ce){if(ce instanceof I)return ce.isVisible()}),se=re.length;re.forEach(function(ce,ge){ce instanceof I&&(ge<se-1&&ce.getHasTrailingDivider()?ce.classList.add(d):ce.getHasTrailingDivider()&&ce.classList.remove(d))})}},{key:"_onMouseLeave",value:function(F){var L,H,j,W,re;L={x:F.clientX,y:F.clientY},H=this.submenu,W=L.y,(j=L.x)>=(re=H.getBoundingClientRect()).left&&j<=re.right&&W>=re.top&&W<=re.bottom||this.submenu.hide()}},{key:"_createSubmenu",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.indicator=this.scratchpad.submenuIndicatorGen(),this.submenu=new Q(this.onMenuItemClick,this.scratchpad),this.appendChild(this.indicator),this.appendChild(this.submenu);var L,H=m(F);try{for(H.s();!(L=H.n()).done;){var j=L.value,W=new I(j,this.onMenuItemClick,this.scratchpad);this.submenu.appendMenuItem(W)}}catch(re){H.e(re)}finally{H.f()}this.mouseEnterHandler=this._onMouseEnter.bind(this),this.mouseLeaveHandler=this._onMouseLeave.bind(this),this.addEventListener("mouseenter",this.mouseEnterHandler),this.addEventListener("mouseleave",this.mouseLeaveHandler)}},{key:"_getMenuItemClassStr",value:function(F,L){return L?F+" "+d:F}}],[{key:"define",value:function(){f("ctx-menu-item",I,"button")}}]),I}(T(HTMLButtonElement)),Q=function(k){x(I,k);var D=C(I);function I(F,L){var H,j;return b(this,I),P((H=p(j=D.call(this)),B(I.prototype)),"setAttribute",H).call(H,"class",L.cxtMenuClasses),j.style.position="absolute",j.onMenuItemClick=F,j.scratchpad=L,j}return y(I,[{key:"hide",value:function(){this.isVisible()&&(this.hideSubmenus(),this.style.display="none")}},{key:"display",value:function(){this.style.display="block"}},{key:"isVisible",value:function(){return this.style.display!=="none"}},{key:"hideMenuItems",value:function(){var F,L=m(this.children);try{for(L.s();!(F=L.n()).done;){var H=F.value;H instanceof HTMLElement?H.style.display="none":console.warn("".concat(H," is not a HTMLElement"))}}catch(j){L.e(j)}finally{L.f()}}},{key:"hideSubmenus",value:function(){var F,L=m(this.children);try{for(L.s();!(F=L.n()).done;){var H=F.value;H instanceof Z&&H.submenu&&H.submenu.hide()}}catch(j){L.e(j)}finally{L.f()}}},{key:"appendMenuItem",value:function(F){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;if(L!==void 0){if(L.parentNode!==this)throw new Error("The item with id='".concat(L.id,"' is not a child of the context menu"));this.insertBefore(F,L)}else this.appendChild(F);F.isClickable()&&this._performBindings(F)}},{key:"moveBefore",value:function(F,L){if(F.parentNode!==this)throw new Error("The item with id='".concat(F.id,"' is not a child of context menu"));if(L.parentNode!==this)throw new Error("The item with id='".concat(L.id,"' is not a child of context menu"));this.removeChild(F),this.insertBefore(F,L)}},{key:"removeAllMenuItems",value:function(){for(;this.firstChild;){var F=this.lastChild;F instanceof Z?this._removeImmediateMenuItem(F):(console.warn("Found non menu item in the context menu: ",F),this.removeChild(F))}}},{key:"_removeImmediateMenuItem",value:function(F){if(!this._detachImmediateMenuItem(F))throw new Error("menu item(id=".concat(F.id,") is not in the context menu"));F.detachSubmenu(),F.unbindOnClickFunctions()}},{key:"_detachImmediateMenuItem",value:function(F){if(F.parentNode===this){if(this.removeChild(F),this.children.length<=0){var L=this.parentNode;L instanceof Z&&L.detachSubmenu()}return!0}return!1}},{key:"_performBindings",value:function(F){var L=this._bindOnClick(F.onClickFunction);F.bindOnClickFunction(L),F.bindOnClickFunction(this.onMenuItemClick)}},{key:"_bindOnClick",value:function(F){var L=this;return function(){var H=L.scratchpad.currentCyEvent;F(H)}}}],[{key:"define",value:function(){f("menu-item-list",I,"div")}}]),I}(T(HTMLDivElement)),Y=function(k){x(I,k);var D=C(I);function I(F,L){var H;return b(this,I),(H=D.call(this,F,L)).onMenuItemClick=function(j){q(j),H.hide(),F()},H}return y(I,[{key:"removeMenuItem",value:function(F){var L=F.parentElement;L instanceof Q&&this.contains(L)&&L._removeImmediateMenuItem(F)}},{key:"appendMenuItem",value:function(F){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;this.ensureDoesntContain(F.id),P(B(I.prototype),"appendMenuItem",this).call(this,F,L)}},{key:"insertMenuItem",value:function(F){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},H=L.before,j=L.parent;if(this.ensureDoesntContain(F.id),H!==void 0){if(!this.contains(H))throw new Error("before(id=".concat(H.id,") is not in the context menu"));var W=H.parentNode;if(!(W instanceof Q))throw new Error("Parent of before(id=".concat(H.id,") is not a submenu"));W.appendMenuItem(F,H)}else if(j!==void 0){if(!this.contains(j))throw new Error("parent(id=".concat(j.id,") is not a descendant of the context menu"));j.appendSubmenuItem(F)}else this.appendMenuItem(F)}},{key:"moveBefore",value:function(F,L){var H=F.parentElement;if(!this.contains(H))throw new Error("parent(id=".concat(H.id,") is not in the contex menu"));if(!this.contains(L))throw new Error("before(id=".concat(L.id,") is not in the context menu"));H.removeChild(F),this.insertMenuItem(F,{before:L})}},{key:"moveToSubmenu",value:function(F){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,j=F.parentElement;if(!(j instanceof Q))throw new Error("current parent(id=".concat(j.id,") is not a submenu"));if(!this.contains(j))throw new Error("parent of the menu item(id=".concat(j.id,") is not in the context menu"));if(L!==null){if(!this.contains(L))throw new Error("parent(id=".concat(L.id,") is not in the context menu"));j._detachImmediateMenuItem(F),L.appendSubmenuItem(F)}else H!==null&&(F.selector=H.selector,F.coreAsWell=H.coreAsWell),j._detachImmediateMenuItem(F),this.appendMenuItem(F)}},{key:"ensureDoesntContain",value:function(F){var L=document.getElementById(F);if(L!==void 0&&this.contains(L))throw new Error("There is already an element with id=".concat(F," in the context menu"))}}],[{key:"define",value:function(){f("ctx-menu",I,"div")}}]),I}(Q);function J(k,D){(D==null||D>k.length)&&(D=k.length);for(var I=0,F=new Array(D);I<D;I++)F[I]=k[I];return F}function X(k){var D=this;D.scratch("cycontextmenus")||D.scratch("cycontextmenus",{});var I,F,L=function(te){return D.scratch("cycontextmenus")[te]},H=function(te,ne){return D.scratch("cycontextmenus")[te]=ne},j=L("options"),W=L("cxtMenu"),re=function(te){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,de=ce(te);if(ne!==void 0){var Ce=Pe(ne);W.insertMenuItem(de,{parent:Ce})}else W.insertMenuItem(de)},se=function(te){for(var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,de=0;de<te.length;de++)re(te[de],ne)},ce=function(te){var ne=D.scratch("cycontextmenus");return new Z(te,W.onMenuItemClick,ne)},ge=function(){L("active")&&(W.removeAllMenuItems(),D.off("tapstart",L("eventCyTapStart")),D.off(j.evtType,L("onCxttap")),D.off("viewport",L("onViewport")),document.removeEventListener("mouseup",L("hideOnNonCyClick")),W.parentNode.removeChild(W),W=void 0,H("cxtMenu",void 0),H("active",!1),H("anyVisibleChild",!1),H("onCxttap",void 0),H("onViewport",void 0),H("hideOnNonCyClick",void 0))},Pe=function(te){var ne=document.getElementById(te);if(ne instanceof Z)return ne;throw new Error("The item with id=".concat(te," is not a menu item"))};if(k!=="get"){Z.define(),Q.define(),Y.define(),j=function(te,ne){var de={};for(var Ce in te)de[Ce]=te[Ce];for(var Le in ne)de[Le]instanceof Array?de[Le]=de[Le].concat(ne[Le]):de[Le]=ne[Le];return de}(h,k),H("options",j),L("active")&&ge(),H("active",!0),H("submenuIndicatorGen",(function(te){var ne=document.createElement("img");return ne.src=te.src,ne.width=te.width,ne.height=te.height,ne.classList.add("cy-context-menus-submenu-indicator"),ne}).bind(void 0,j.submenuIndicator));var Oe=l(j.contextMenuClasses);H("cxtMenuClasses",Oe);var Se=D.scratch("cycontextmenus");W=new Y(function(){return H("cxtMenuPosition",void 0)},Se),H("cxtMenu",W),D.container().appendChild(W),H("cxtMenuItemClasses",l(j.menuItemClasses));var le=j.menuItems;se(le),F=function(te){H("currentCyEvent",te),function(De){var me,G=D.container(),U=L("cxtMenuPosition"),oe=De.position||De.cyPosition;if(U!=oe){W.hideMenuItems(),H("anyVisibleChild",!1),H("cxtMenuPosition",oe);var ae={top:(me=G.getBoundingClientRect()).top,left:me.left},fe=De.renderedPosition||De.cyRenderedPosition,we=getComputedStyle(G)["border-width"],ve=parseInt(we.replace("px",""))||0;ve>0&&(ae.top+=ve,ae.left+=ve);var Te=G.clientHeight,Fe=G.clientWidth,qe=Te/2,Be=Fe/2;fe.y>qe&&fe.x<=Be?(W.style.left=fe.x+"px",W.style.bottom=Te-fe.y+"px",W.style.right="auto",W.style.top="auto"):fe.y>qe&&fe.x>Be?(W.style.right=Fe-fe.x+"px",W.style.bottom=Te-fe.y+"px",W.style.left="auto",W.style.top="auto"):fe.y<=qe&&fe.x<=Be?(W.style.left=fe.x+"px",W.style.top=fe.y+"px",W.style.right="auto",W.style.bottom="auto"):(W.style.right=Fe-fe.x+"px",W.style.top=fe.y+"px",W.style.left="auto",W.style.bottom="auto")}}(te);var ne,de=te.target||te.cyTarget,Ce=function(De,me){var G;if(typeof Symbol>"u"||De[Symbol.iterator]==null){if(Array.isArray(De)||(G=function(ve,Te){if(ve){if(typeof ve=="string")return J(ve,Te);var Fe=Object.prototype.toString.call(ve).slice(8,-1);return Fe==="Object"&&ve.constructor&&(Fe=ve.constructor.name),Fe==="Map"||Fe==="Set"?Array.from(ve):Fe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Fe)?J(ve,Te):void 0}}(De))||me){G&&(De=G);var U=0,oe=function(){};return{s:oe,n:function(){return U>=De.length?{done:!0}:{done:!1,value:De[U++]}},e:function(ve){throw ve},f:oe}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ae,fe=!0,we=!1;return{s:function(){G=De[Symbol.iterator]()},n:function(){var ve=G.next();return fe=ve.done,ve},e:function(ve){we=!0,ae=ve},f:function(){try{fe||G.return==null||G.return()}finally{if(we)throw ae}}}}(W.children);try{for(Ce.s();!(ne=Ce.n()).done;){var Le=ne.value;Le instanceof Z&&(de===D?Le.coreAsWell:de.is(Le.selector))&&Le.show&&(W.display(),H("anyVisibleChild",!0),Le.display())}}catch(De){Ce.e(De)}finally{Ce.f()}var $e=Array.from(W.children).filter(function(De){if(De instanceof Z)return De.isVisible()}),Ne=$e.length;$e.forEach(function(De,me){De instanceof Z&&(me<Ne-1&&De.getHasTrailingDivider()?De.classList.add(d):De.getHasTrailingDivider()&&De.classList.remove(d))}),!L("anyVisibleChild")&&!function(De){return De.offsetWidth<=0&&De.offsetHeight<=0||De.style&&De.style.display||getComputedStyle(De).display}(W)&&W.hide()},D.on(j.evtType,F),H("onCxttap",F),function(){var te=function(de){if(W.contains(de.originalEvent.target))return!1;W.hide(),H("cxtMenuPosition",void 0),H("currentCyEvent",void 0)};D.on("tapstart",te),H("eventCyTapStart",te);var ne=function(){W.hide()};D.on("viewport",ne),H("onViewport",ne)}(),I=function(te){D.container().contains(te.target)||W.contains(te.target)||(W.hide(),H("cxtMenuPosition",void 0))},document.addEventListener("mouseup",I),H("hideOnNonCyClick",I),function(){var te,ne=function(de,Ce){var Le;if(typeof Symbol>"u"||de[Symbol.iterator]==null){if(Array.isArray(de)||(Le=function(U,oe){if(U){if(typeof U=="string")return u(U,oe);var ae=Object.prototype.toString.call(U).slice(8,-1);return ae==="Object"&&U.constructor&&(ae=U.constructor.name),ae==="Map"||ae==="Set"?Array.from(U):ae==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ae)?u(U,oe):void 0}}(de))||Ce){Le&&(de=Le);var $e=0,Ne=function(){};return{s:Ne,n:function(){return $e>=de.length?{done:!0}:{done:!1,value:de[$e++]}},e:function(U){throw U},f:Ne}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var De,me=!0,G=!1;return{s:function(){Le=de[Symbol.iterator]()},n:function(){var U=Le.next();return me=U.done,U},e:function(U){G=!0,De=U},f:function(){try{me||Le.return==null||Le.return()}finally{if(G)throw De}}}}(document.getElementsByClassName("cy-context-menus-cxt-menu"));try{for(ne.s();!(te=ne.n()).done;)te.value.addEventListener("contextmenu",function(de){return de.preventDefault()})}catch(de){ne.e(de)}finally{ne.f()}}()}return function(te){return{isActive:function(){return L("active")},appendMenuItem:function(ne){var de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return re(ne,de),te},appendMenuItems:function(ne){var de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return se(ne,de),te},removeMenuItem:function(ne){var de=Pe(ne);return W.removeMenuItem(de),te},setTrailingDivider:function(ne,de){var Ce=Pe(ne);return Ce.setHasTrailingDivider(de),de?Ce.classList.add(d):Ce.classList.remove(d),te},insertBeforeMenuItem:function(ne,de){var Ce=ce(ne),Le=Pe(de);return W.insertMenuItem(Ce,{before:Le}),te},moveToSubmenu:function(ne){var de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,Ce=Pe(ne);if(de===null)W.moveToSubmenu(Ce);else if(typeof de=="string"){var Le=Pe(de.toString());W.moveToSubmenu(Ce,Le)}else de.coreAsWell!==void 0||de.selector!==void 0?W.moveToSubmenu(Ce,null,de):console.warn("options neither has coreAsWell nor selector property but it is an object. Are you sure that this is what you want to do?");return te},moveBeforeOtherMenuItem:function(ne,de){var Ce=Pe(ne),Le=Pe(de);return W.moveBefore(Ce,Le),te},disableMenuItem:function(ne){return Pe(ne).disable(),te},enableMenuItem:function(ne){return Pe(ne).enable(),te},hideMenuItem:function(ne){return Pe(ne).hide(),te},showMenuItem:function(ne){return Pe(ne).display(),te},destroy:function(){return ge(),te}}}(this)}},579:(i,o,s)=>{var u=s(621).contextMenus,l=function(c){c&&c("core","contextMenus",u)};typeof cytoscape<"u"&&l(cytoscape),i.exports=l}},n={};function a(i){var o=n[i];if(o!==void 0)return o.exports;var s=n[i]={exports:{}};return t[i](s,s.exports,a),s.exports}return a.d=(i,o)=>{for(var s in o)a.o(o,s)&&!a.o(i,s)&&Object.defineProperty(i,s,{enumerable:!0,get:o[s]})},a.o=(i,o)=>Object.prototype.hasOwnProperty.call(i,o),a.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},a(579)})()})})(IE);var lF=IE.exports;const cF=Aa(lF);var fF=DE();const iy=Aa(fF);var ug={exports:{}},Uu={},Hu={},dt={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r._registerNode=r._NODES_REGISTRY=r.Konva=r.glob=r._parseUA=void 0;var e=Math.PI/180;function t(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}var n=function(o){var s=o.indexOf("msie ");if(s>0)return parseInt(o.substring(s+5,o.indexOf(".",s)),10);var u=o.indexOf("trident/");if(u>0){var l=o.indexOf("rv:");return parseInt(o.substring(l+3,o.indexOf(".",l)),10)}var c=o.indexOf("edge/");return c>0?parseInt(o.substring(c+5,o.indexOf(".",c)),10):!1},a=function(o){var s=o.toLowerCase(),u=/(chrome)[ /]([\w.]+)/.exec(s)||/(webkit)[ /]([\w.]+)/.exec(s)||/(opera)(?:.*version|)[ /]([\w.]+)/.exec(s)||/(msie) ([\w.]+)/.exec(s)||s.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(s)||[],l=!!o.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i),c=!!o.match(/IEMobile/i);return{browser:u[1]||"",version:u[2]||"0",isIE:n(s),mobile:l,ieMobile:c}};r._parseUA=a,r.glob=typeof Ve<"u"?Ve:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},r.Konva={_global:r.glob,version:"7.2.5",isBrowser:t(),isUnminified:/param/.test((function(o){}).toString()),dblClickWindow:400,getAngle:function(o){return r.Konva.angleDeg?o*e:o},enableTrace:!1,_pointerEventsEnabled:!1,hitOnDragEnabled:!1,captureTouchEventsEnabled:!1,listenClickTap:!1,inDblClickWindow:!1,pixelRatio:void 0,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging:function(){return r.Konva.DD.isDragging},isDragReady:function(){return!!r.Konva.DD.node},UA:r._parseUA(r.glob.navigator&&r.glob.navigator.userAgent||""),document:r.glob.document,_injectGlobal:function(o){r.glob.Konva=o},_parseUA:r._parseUA},r._NODES_REGISTRY={};var i=function(o){r._NODES_REGISTRY[o.prototype.getClassName()]=o,r.Konva[o.prototype.getClassName()]=o};r._registerNode=i})(dt);var wt={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Util=r.Transform=r.Collection=void 0;var e=dt,t=function(){function y(){}return y.toCollection=function(x){var C=new y,E=x.length,p;for(p=0;p<E;p++)C.push(x[p]);return C},y._mapMethod=function(x){y.prototype[x]=function(){var C=this.length,E,p=[].slice.call(arguments);for(E=0;E<C;E++)this[E][x].apply(this[E],p);return this}},y.mapMethods=function(x){var C=x.prototype;for(var E in C)y._mapMethod(E)},y}();r.Collection=t,t.prototype=[],t.prototype.each=function(y){for(var x=0;x<this.length;x++)y(this[x],x)},t.prototype.toArray=function(){var y=[],x=this.length,C;for(C=0;C<x;C++)y.push(this[C]);return y};var n=function(){function y(x){x===void 0&&(x=[1,0,0,1,0,0]),this.dirty=!1,this.m=x&&x.slice()||[1,0,0,1,0,0]}return y.prototype.reset=function(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0},y.prototype.copy=function(){return new y(this.m)},y.prototype.copyInto=function(x){x.m[0]=this.m[0],x.m[1]=this.m[1],x.m[2]=this.m[2],x.m[3]=this.m[3],x.m[4]=this.m[4],x.m[5]=this.m[5]},y.prototype.point=function(x){var C=this.m;return{x:C[0]*x.x+C[2]*x.y+C[4],y:C[1]*x.x+C[3]*x.y+C[5]}},y.prototype.translate=function(x,C){return this.m[4]+=this.m[0]*x+this.m[2]*C,this.m[5]+=this.m[1]*x+this.m[3]*C,this},y.prototype.scale=function(x,C){return this.m[0]*=x,this.m[1]*=x,this.m[2]*=C,this.m[3]*=C,this},y.prototype.rotate=function(x){var C=Math.cos(x),E=Math.sin(x),p=this.m[0]*C+this.m[2]*E,P=this.m[1]*C+this.m[3]*E,T=this.m[0]*-E+this.m[2]*C,R=this.m[1]*-E+this.m[3]*C;return this.m[0]=p,this.m[1]=P,this.m[2]=T,this.m[3]=R,this},y.prototype.getTranslation=function(){return{x:this.m[4],y:this.m[5]}},y.prototype.skew=function(x,C){var E=this.m[0]+this.m[2]*C,p=this.m[1]+this.m[3]*C,P=this.m[2]+this.m[0]*x,T=this.m[3]+this.m[1]*x;return this.m[0]=E,this.m[1]=p,this.m[2]=P,this.m[3]=T,this},y.prototype.multiply=function(x){var C=this.m[0]*x.m[0]+this.m[2]*x.m[1],E=this.m[1]*x.m[0]+this.m[3]*x.m[1],p=this.m[0]*x.m[2]+this.m[2]*x.m[3],P=this.m[1]*x.m[2]+this.m[3]*x.m[3],T=this.m[0]*x.m[4]+this.m[2]*x.m[5]+this.m[4],R=this.m[1]*x.m[4]+this.m[3]*x.m[5]+this.m[5];return this.m[0]=C,this.m[1]=E,this.m[2]=p,this.m[3]=P,this.m[4]=T,this.m[5]=R,this},y.prototype.invert=function(){var x=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),C=this.m[3]*x,E=-this.m[1]*x,p=-this.m[2]*x,P=this.m[0]*x,T=x*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),R=x*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=C,this.m[1]=E,this.m[2]=p,this.m[3]=P,this.m[4]=T,this.m[5]=R,this},y.prototype.getMatrix=function(){return this.m},y.prototype.setAbsolutePosition=function(x,C){var E=this.m[0],p=this.m[1],P=this.m[2],T=this.m[3],R=this.m[4],M=this.m[5],N=(E*(C-M)-p*(x-R))/(E*T-p*P),B=(x-R-P*N)/E;return this.translate(B,N)},y.prototype.decompose=function(){var x=this.m[0],C=this.m[1],E=this.m[2],p=this.m[3],P=this.m[4],T=this.m[5],R=x*p-C*E,M={x:P,y:T,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(x!=0||C!=0){var N=Math.sqrt(x*x+C*C);M.rotation=C>0?Math.acos(x/N):-Math.acos(x/N),M.scaleX=N,M.scaleY=R/N,M.skewX=(x*E+C*p)/R,M.skewY=0}else if(E!=0||p!=0){var B=Math.sqrt(E*E+p*p);M.rotation=Math.PI/2-(p>0?Math.acos(-E/B):-Math.acos(E/B)),M.scaleX=R/B,M.scaleY=B,M.skewX=0,M.skewY=(x*E+C*p)/R}return M.rotation=r.Util._getRotation(M.rotation),M},y}();r.Transform=n;var a="[object Array]",i="[object Number]",o="[object String]",s="[object Boolean]",u=Math.PI/180,l=180/Math.PI,c="#",f="",d="0",h="Konva warning: ",v="Konva error: ",m="rgb(",_={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},b=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,w=[];r.Util={_isElement:function(y){return!!(y&&y.nodeType==1)},_isFunction:function(y){return!!(y&&y.constructor&&y.call&&y.apply)},_isPlainObject:function(y){return!!y&&y.constructor===Object},_isArray:function(y){return Object.prototype.toString.call(y)===a},_isNumber:function(y){return Object.prototype.toString.call(y)===i&&!isNaN(y)&&isFinite(y)},_isString:function(y){return Object.prototype.toString.call(y)===o},_isBoolean:function(y){return Object.prototype.toString.call(y)===s},isObject:function(y){return y instanceof Object},isValidSelector:function(y){if(typeof y!="string")return!1;var x=y[0];return x==="#"||x==="."||x===x.toUpperCase()},_sign:function(y){return y===0||y>0?1:-1},requestAnimFrame:function(y){w.push(y),w.length===1&&requestAnimationFrame(function(){var x=w;w=[],x.forEach(function(C){C()})})},createCanvasElement:function(){var y=document.createElement("canvas");try{y.style=y.style||{}}catch{}return y},createImageElement:function(){return document.createElement("img")},_isInDocument:function(y){for(;y=y.parentNode;)if(y==document)return!0;return!1},_simplifyArray:function(y){var x=[],C=y.length,E=r.Util,p,P;for(p=0;p<C;p++)P=y[p],E._isNumber(P)?P=Math.round(P*1e3)/1e3:E._isString(P)||(P=P.toString()),x.push(P);return x},_urlToImage:function(y,x){var C=new e.glob.Image;C.onload=function(){x(C)},C.src=y},_rgbToHex:function(y,x,C){return((1<<24)+(y<<16)+(x<<8)+C).toString(16).slice(1)},_hexToRgb:function(y){y=y.replace(c,f);var x=parseInt(y,16);return{r:x>>16&255,g:x>>8&255,b:x&255}},getRandomColor:function(){for(var y=(Math.random()*16777215<<0).toString(16);y.length<6;)y=d+y;return c+y},get:function(y,x){return y===void 0?x:y},getRGB:function(y){var x;return y in _?(x=_[y],{r:x[0],g:x[1],b:x[2]}):y[0]===c?this._hexToRgb(y.substring(1)):y.substr(0,4)===m?(x=b.exec(y.replace(/ /g,"")),{r:parseInt(x[1],10),g:parseInt(x[2],10),b:parseInt(x[3],10)}):{r:0,g:0,b:0}},colorToRGBA:function(y){return y=y||"black",r.Util._namedColorToRBA(y)||r.Util._hex3ColorToRGBA(y)||r.Util._hex6ColorToRGBA(y)||r.Util._rgbColorToRGBA(y)||r.Util._rgbaColorToRGBA(y)||r.Util._hslColorToRGBA(y)},_namedColorToRBA:function(y){var x=_[y.toLowerCase()];return x?{r:x[0],g:x[1],b:x[2],a:1}:null},_rgbColorToRGBA:function(y){if(y.indexOf("rgb(")===0){y=y.match(/rgb\(([^)]+)\)/)[1];var x=y.split(/ *, */).map(Number);return{r:x[0],g:x[1],b:x[2],a:1}}},_rgbaColorToRGBA:function(y){if(y.indexOf("rgba(")===0){y=y.match(/rgba\(([^)]+)\)/)[1];var x=y.split(/ *, */).map(Number);return{r:x[0],g:x[1],b:x[2],a:x[3]}}},_hex6ColorToRGBA:function(y){if(y[0]==="#"&&y.length===7)return{r:parseInt(y.slice(1,3),16),g:parseInt(y.slice(3,5),16),b:parseInt(y.slice(5,7),16),a:1}},_hex3ColorToRGBA:function(y){if(y[0]==="#"&&y.length===4)return{r:parseInt(y[1]+y[1],16),g:parseInt(y[2]+y[2],16),b:parseInt(y[3]+y[3],16),a:1}},_hslColorToRGBA:function(y){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(y)){var x=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(y);x[0];var C=x.slice(1),E=Number(C[0])/360,p=Number(C[1])/100,P=Number(C[2])/100,T=void 0,R=void 0,M=void 0;if(p===0)return M=P*255,{r:Math.round(M),g:Math.round(M),b:Math.round(M),a:1};P<.5?T=P*(1+p):T=P+p-P*p;for(var N=2*P-T,B=[0,0,0],q=0;q<3;q++)R=E+1/3*-(q-1),R<0&&R++,R>1&&R--,6*R<1?M=N+(T-N)*6*R:2*R<1?M=T:3*R<2?M=N+(T-N)*(2/3-R)*6:M=N,B[q]=M*255;return{r:Math.round(B[0]),g:Math.round(B[1]),b:Math.round(B[2]),a:1}}},haveIntersection:function(y,x){return!(x.x>y.x+y.width||x.x+x.width<y.x||x.y>y.y+y.height||x.y+x.height<y.y)},cloneObject:function(y){var x={};for(var C in y)this._isPlainObject(y[C])?x[C]=this.cloneObject(y[C]):this._isArray(y[C])?x[C]=this.cloneArray(y[C]):x[C]=y[C];return x},cloneArray:function(y){return y.slice(0)},_degToRad:function(y){return y*u},_radToDeg:function(y){return y*l},_getRotation:function(y){return e.Konva.angleDeg?r.Util._radToDeg(y):y},_capitalize:function(y){return y.charAt(0).toUpperCase()+y.slice(1)},throw:function(y){throw new Error(v+y)},error:function(y){console.error(v+y)},warn:function(y){e.Konva.showWarnings&&console.warn(h+y)},extend:function(y,x){function C(){this.constructor=y}C.prototype=x.prototype;var E=y.prototype;y.prototype=new C;for(var p in E)E.hasOwnProperty(p)&&(y.prototype[p]=E[p]);y.__super__=x.prototype,y.super=x},_getControlPoints:function(y,x,C,E,p,P,T){var R=Math.sqrt(Math.pow(C-y,2)+Math.pow(E-x,2)),M=Math.sqrt(Math.pow(p-C,2)+Math.pow(P-E,2)),N=T*R/(R+M),B=T*M/(R+M),q=C-N*(p-y),Z=E-N*(P-x),Q=C+B*(p-y),Y=E+B*(P-x);return[q,Z,Q,Y]},_expandPoints:function(y,x){var C=y.length,E=[],p,P;for(p=2;p<C-2;p+=2)P=r.Util._getControlPoints(y[p-2],y[p-1],y[p],y[p+1],y[p+2],y[p+3],x),!isNaN(P[0])&&(E.push(P[0]),E.push(P[1]),E.push(y[p]),E.push(y[p+1]),E.push(P[2]),E.push(P[3]));return E},each:function(y,x){for(var C in y)x(C,y[C])},_inRange:function(y,x,C){return x<=y&&y<C},_getProjectionToSegment:function(y,x,C,E,p,P){var T,R,M,N=(y-C)*(y-C)+(x-E)*(x-E);if(N==0)T=y,R=x,M=(p-C)*(p-C)+(P-E)*(P-E);else{var B=((p-y)*(C-y)+(P-x)*(E-x))/N;B<0?(T=y,R=x,M=(y-p)*(y-p)+(x-P)*(x-P)):B>1?(T=C,R=E,M=(C-p)*(C-p)+(E-P)*(E-P)):(T=y+B*(C-y),R=x+B*(E-x),M=(T-p)*(T-p)+(R-P)*(R-P))}return[T,R,M]},_getProjectionToLine:function(y,x,C){var E=r.Util.cloneObject(y),p=Number.MAX_VALUE;return x.forEach(function(P,T){if(!(!C&&T===x.length-1)){var R=x[(T+1)%x.length],M=r.Util._getProjectionToSegment(P.x,P.y,R.x,R.y,y.x,y.y),N=M[0],B=M[1],q=M[2];q<p&&(E.x=N,E.y=B,p=q)}}),E},_prepareArrayForTween:function(y,x,C){var E,p=[],P=[];if(y.length>x.length){var T=x;x=y,y=T}for(E=0;E<y.length;E+=2)p.push({x:y[E],y:y[E+1]});for(E=0;E<x.length;E+=2)P.push({x:x[E],y:x[E+1]});var R=[];return P.forEach(function(M){var N=r.Util._getProjectionToLine(M,p,C);R.push(N.x),R.push(N.y)}),R},_prepareToStringify:function(y){var x;y.visitedByCircularReferenceRemoval=!0;for(var C in y)if(y.hasOwnProperty(C)&&y[C]&&typeof y[C]=="object"){if(x=Object.getOwnPropertyDescriptor(y,C),y[C].visitedByCircularReferenceRemoval||r.Util._isElement(y[C]))if(x.configurable)delete y[C];else return null;else if(r.Util._prepareToStringify(y[C])===null)if(x.configurable)delete y[C];else return null}return delete y.visitedByCircularReferenceRemoval,y},_assign:function(y,x){for(var C in x)y[C]=x[C];return y},_getFirstPointerId:function(y){return y.touches?y.changedTouches[0].identifier:999}}})(wt);var sr={},ft={},Ze={};Object.defineProperty(Ze,"__esModule",{value:!0});Ze.getComponentValidator=Ze.getBooleanValidator=Ze.getNumberArrayValidator=Ze.getFunctionValidator=Ze.getStringOrGradientValidator=Ze.getStringValidator=Ze.getNumberOrAutoValidator=Ze.getNumberOrArrayOfNumbersValidator=Ze.getNumberValidator=Ze.alphaComponent=Ze.RGBComponent=void 0;var ta=dt,ir=wt;function ra(r){return ir.Util._isString(r)?'"'+r+'"':Object.prototype.toString.call(r)==="[object Number]"||ir.Util._isBoolean(r)?r:Object.prototype.toString.call(r)}function dF(r){return r>255?255:r<0?0:Math.round(r)}Ze.RGBComponent=dF;function hF(r){return r>1?1:r<1e-4?1e-4:r}Ze.alphaComponent=hF;function vF(){if(ta.Konva.isUnminified)return function(r,e){return ir.Util._isNumber(r)||ir.Util.warn(ra(r)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),r}}Ze.getNumberValidator=vF;function pF(r){if(ta.Konva.isUnminified)return function(e,t){var n=ir.Util._isNumber(e),a=ir.Util._isArray(e)&&e.length==r;return!n&&!a&&ir.Util.warn(ra(e)+' is a not valid value for "'+t+'" attribute. The value should be a number or Array<number>('+r+")"),e}}Ze.getNumberOrArrayOfNumbersValidator=pF;function gF(){if(ta.Konva.isUnminified)return function(r,e){var t=ir.Util._isNumber(r),n=r==="auto";return t||n||ir.Util.warn(ra(r)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),r}}Ze.getNumberOrAutoValidator=gF;function yF(){if(ta.Konva.isUnminified)return function(r,e){return ir.Util._isString(r)||ir.Util.warn(ra(r)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),r}}Ze.getStringValidator=yF;function mF(){if(ta.Konva.isUnminified)return function(r,e){var t=ir.Util._isString(r),n=Object.prototype.toString.call(r)==="[object CanvasGradient]";return t||n||ir.Util.warn(ra(r)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),r}}Ze.getStringOrGradientValidator=mF;function bF(){if(ta.Konva.isUnminified)return function(r,e){return ir.Util._isFunction(r)||ir.Util.warn(ra(r)+' is a not valid value for "'+e+'" attribute. The value should be a function.'),r}}Ze.getFunctionValidator=bF;function wF(){if(ta.Konva.isUnminified)return function(r,e){return ir.Util._isArray(r)?r.forEach(function(t){ir.Util._isNumber(t)||ir.Util.warn('"'+e+'" attribute has non numeric element '+t+". Make sure that all elements are numbers.")}):ir.Util.warn(ra(r)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.'),r}}Ze.getNumberArrayValidator=wF;function _F(){if(ta.Konva.isUnminified)return function(r,e){var t=r===!0||r===!1;return t||ir.Util.warn(ra(r)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),r}}Ze.getBooleanValidator=_F;function xF(r){if(ta.Konva.isUnminified)return function(e,t){return ir.Util.isObject(e)||ir.Util.warn(ra(e)+' is a not valid value for "'+t+'" attribute. The value should be an object with properties '+r),e}}Ze.getComponentValidator=xF;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Factory=void 0;var e=wt,t=Ze,n="get",a="set";r.Factory={addGetterSetter:function(i,o,s,u,l){r.Factory.addGetter(i,o,s),r.Factory.addSetter(i,o,u,l),r.Factory.addOverloadedGetterSetter(i,o)},addGetter:function(i,o,s){var u=n+e.Util._capitalize(o);i.prototype[u]=i.prototype[u]||function(){var l=this.attrs[o];return l===void 0?s:l}},addSetter:function(i,o,s,u){var l=a+e.Util._capitalize(o);i.prototype[l]||r.Factory.overWriteSetter(i,o,s,u)},overWriteSetter:function(i,o,s,u){var l=a+e.Util._capitalize(o);i.prototype[l]=function(c){return s&&c!==void 0&&c!==null&&(c=s.call(this,c,o)),this._setAttr(o,c),u&&u.call(this),this}},addComponentsGetterSetter:function(i,o,s,u,l){var c=s.length,f=e.Util._capitalize,d=n+f(o),h=a+f(o),v,m;i.prototype[d]=function(){var b={};for(v=0;v<c;v++)m=s[v],b[m]=this.getAttr(o+f(m));return b};var _=t.getComponentValidator(s);i.prototype[h]=function(b){var w=this.attrs[o],y;u&&(b=u.call(this,b)),_&&_.call(this,b,o);for(y in b)b.hasOwnProperty(y)&&this._setAttr(o+f(y),b[y]);return this._fireChangeEvent(o,w,b),l&&l.call(this),this},r.Factory.addOverloadedGetterSetter(i,o)},addOverloadedGetterSetter:function(i,o){var s=e.Util._capitalize(o),u=a+s,l=n+s;i.prototype[o]=function(){return arguments.length?(this[u](arguments[0]),this):this[l]()}},addDeprecatedGetterSetter:function(i,o,s,u){e.Util.error("Adding deprecated "+o);var l=n+e.Util._capitalize(o),c=o+" property is deprecated and will be removed soon. Look at Konva change log for more information.";i.prototype[l]=function(){e.Util.error(c);var f=this.attrs[o];return f===void 0?s:f},r.Factory.addSetter(i,o,u,function(){e.Util.error(c)}),r.Factory.addOverloadedGetterSetter(i,o)},backCompat:function(i,o){e.Util.each(o,function(s,u){var l=i.prototype[u],c=n+e.Util._capitalize(s),f=a+e.Util._capitalize(s);function d(){l.apply(this,arguments),e.Util.error('"'+s+'" method is deprecated and will be removed soon. Use ""'+u+'" instead.')}i.prototype[s]=d,i.prototype[c]=d,i.prototype[f]=d})},afterSetFilter:function(){this._filterUpToDate=!1}}})(ft);var yn={},Wn={},LE=Ve&&Ve.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Wn,"__esModule",{value:!0});Wn.HitContext=Wn.SceneContext=Wn.Context=void 0;var lg=wt,NE=dt,gx=",",SF="(",CF=")",EF="([",TF="])",PF=";",AF="()",kF="=",yx=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],MF=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],OF=100,ju=function(){function r(e){this.canvas=e,this._context=e._canvas.getContext("2d"),NE.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}return r.prototype.fillShape=function(e){e.fillEnabled()&&this._fill(e)},r.prototype._fill=function(e){},r.prototype.strokeShape=function(e){e.hasStroke()&&this._stroke(e)},r.prototype._stroke=function(e){},r.prototype.fillStrokeShape=function(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))},r.prototype.getTrace=function(e){var t=this.traceArr,n=t.length,a="",i,o,s,u;for(i=0;i<n;i++)o=t[i],s=o.method,s?(u=o.args,a+=s,e?a+=AF:lg.Util._isArray(u[0])?a+=EF+u.join(gx)+TF:a+=SF+u.join(gx)+CF):(a+=o.property,e||(a+=kF+o.val)),a+=PF;return a},r.prototype.clearTrace=function(){this.traceArr=[]},r.prototype._trace=function(e){var t=this.traceArr,n;t.push(e),n=t.length,n>=OF&&t.shift()},r.prototype.reset=function(){var e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)},r.prototype.getCanvas=function(){return this.canvas},r.prototype.clear=function(e){var t=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,t.getWidth()/t.pixelRatio,t.getHeight()/t.pixelRatio)},r.prototype._applyLineCap=function(e){var t=e.getLineCap();t&&this.setAttr("lineCap",t)},r.prototype._applyOpacity=function(e){var t=e.getAbsoluteOpacity();t!==1&&this.setAttr("globalAlpha",t)},r.prototype._applyLineJoin=function(e){var t=e.attrs.lineJoin;t&&this.setAttr("lineJoin",t)},r.prototype.setAttr=function(e,t){this._context[e]=t},r.prototype.arc=function(e,t,n,a,i,o){this._context.arc(e,t,n,a,i,o)},r.prototype.arcTo=function(e,t,n,a,i){this._context.arcTo(e,t,n,a,i)},r.prototype.beginPath=function(){this._context.beginPath()},r.prototype.bezierCurveTo=function(e,t,n,a,i,o){this._context.bezierCurveTo(e,t,n,a,i,o)},r.prototype.clearRect=function(e,t,n,a){this._context.clearRect(e,t,n,a)},r.prototype.clip=function(){this._context.clip()},r.prototype.closePath=function(){this._context.closePath()},r.prototype.createImageData=function(e,t){var n=arguments;if(n.length===2)return this._context.createImageData(e,t);if(n.length===1)return this._context.createImageData(e)},r.prototype.createLinearGradient=function(e,t,n,a){return this._context.createLinearGradient(e,t,n,a)},r.prototype.createPattern=function(e,t){return this._context.createPattern(e,t)},r.prototype.createRadialGradient=function(e,t,n,a,i,o){return this._context.createRadialGradient(e,t,n,a,i,o)},r.prototype.drawImage=function(e,t,n,a,i,o,s,u,l){var c=arguments,f=this._context;c.length===3?f.drawImage(e,t,n):c.length===5?f.drawImage(e,t,n,a,i):c.length===9&&f.drawImage(e,t,n,a,i,o,s,u,l)},r.prototype.ellipse=function(e,t,n,a,i,o,s,u){this._context.ellipse(e,t,n,a,i,o,s,u)},r.prototype.isPointInPath=function(e,t){return this._context.isPointInPath(e,t)},r.prototype.fill=function(){this._context.fill()},r.prototype.fillRect=function(e,t,n,a){this._context.fillRect(e,t,n,a)},r.prototype.strokeRect=function(e,t,n,a){this._context.strokeRect(e,t,n,a)},r.prototype.fillText=function(e,t,n){this._context.fillText(e,t,n)},r.prototype.measureText=function(e){return this._context.measureText(e)},r.prototype.getImageData=function(e,t,n,a){return this._context.getImageData(e,t,n,a)},r.prototype.lineTo=function(e,t){this._context.lineTo(e,t)},r.prototype.moveTo=function(e,t){this._context.moveTo(e,t)},r.prototype.rect=function(e,t,n,a){this._context.rect(e,t,n,a)},r.prototype.putImageData=function(e,t,n){this._context.putImageData(e,t,n)},r.prototype.quadraticCurveTo=function(e,t,n,a){this._context.quadraticCurveTo(e,t,n,a)},r.prototype.restore=function(){this._context.restore()},r.prototype.rotate=function(e){this._context.rotate(e)},r.prototype.save=function(){this._context.save()},r.prototype.scale=function(e,t){this._context.scale(e,t)},r.prototype.setLineDash=function(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)},r.prototype.getLineDash=function(){return this._context.getLineDash()},r.prototype.setTransform=function(e,t,n,a,i,o){this._context.setTransform(e,t,n,a,i,o)},r.prototype.stroke=function(){this._context.stroke()},r.prototype.strokeText=function(e,t,n,a){this._context.strokeText(e,t,n,a)},r.prototype.transform=function(e,t,n,a,i,o){this._context.transform(e,t,n,a,i,o)},r.prototype.translate=function(e,t){this._context.translate(e,t)},r.prototype._enableTrace=function(){var e=this,t=yx.length,n=lg.Util._simplifyArray,a=this.setAttr,i,o,s=function(u){var l=e[u],c;e[u]=function(){return o=n(Array.prototype.slice.call(arguments,0)),c=l.apply(e,arguments),e._trace({method:u,args:o}),c}};for(i=0;i<t;i++)s(yx[i]);e.setAttr=function(){a.apply(e,arguments);var u=arguments[0],l=arguments[1];(u==="shadowOffsetX"||u==="shadowOffsetY"||u==="shadowBlur")&&(l=l/this.canvas.getPixelRatio()),e._trace({property:u,val:l})}},r.prototype._applyGlobalCompositeOperation=function(e){var t=e.getGlobalCompositeOperation();t!=="source-over"&&this.setAttr("globalCompositeOperation",t)},r}();Wn.Context=ju;MF.forEach(function(r){Object.defineProperty(ju.prototype,r,{get:function(){return this._context[r]},set:function(e){this._context[r]=e}})});var DF=function(r){LE(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._fillColor=function(t){var n=t.fill();this.setAttr("fillStyle",n),t._fillFunc(this)},e.prototype._fillPattern=function(t){var n=t.getFillPatternX(),a=t.getFillPatternY(),i=NE.Konva.getAngle(t.getFillPatternRotation()),o=t.getFillPatternOffsetX(),s=t.getFillPatternOffsetY();t.getFillPatternScaleX(),t.getFillPatternScaleY(),(n||a)&&this.translate(n||0,a||0),i&&this.rotate(i),(o||s)&&this.translate(-1*o,-1*s),this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)},e.prototype._fillLinearGradient=function(t){var n=t._getLinearGradient();n&&(this.setAttr("fillStyle",n),t._fillFunc(this))},e.prototype._fillRadialGradient=function(t){var n=t._getRadialGradient();n&&(this.setAttr("fillStyle",n),t._fillFunc(this))},e.prototype._fill=function(t){var n=t.fill(),a=t.getFillPriority();if(n&&a==="color"){this._fillColor(t);return}var i=t.getFillPatternImage();if(i&&a==="pattern"){this._fillPattern(t);return}var o=t.getFillLinearGradientColorStops();if(o&&a==="linear-gradient"){this._fillLinearGradient(t);return}var s=t.getFillRadialGradientColorStops();if(s&&a==="radial-gradient"){this._fillRadialGradient(t);return}n?this._fillColor(t):i?this._fillPattern(t):o?this._fillLinearGradient(t):s&&this._fillRadialGradient(t)},e.prototype._strokeLinearGradient=function(t){var n=t.getStrokeLinearGradientStartPoint(),a=t.getStrokeLinearGradientEndPoint(),i=t.getStrokeLinearGradientColorStops(),o=this.createLinearGradient(n.x,n.y,a.x,a.y);if(i){for(var s=0;s<i.length;s+=2)o.addColorStop(i[s],i[s+1]);this.setAttr("strokeStyle",o)}},e.prototype._stroke=function(t){var n=t.dash(),a=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!a){this.save();var i=this.getCanvas().getPixelRatio();this.setTransform(i,0,0,i,0,0)}this._applyLineCap(t),n&&t.dashEnabled()&&(this.setLineDash(n),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var o=t.getStrokeLinearGradientColorStops();o?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),a||this.restore()}},e.prototype._applyShadow=function(t){var n=lg.Util,a=n.get(t.getShadowRGBA(),"black"),i=n.get(t.getShadowBlur(),5),o=n.get(t.getShadowOffset(),{x:0,y:0}),s=t.getAbsoluteScale(),u=this.canvas.getPixelRatio(),l=s.x*u,c=s.y*u;this.setAttr("shadowColor",a),this.setAttr("shadowBlur",i*Math.min(Math.abs(l),Math.abs(c))),this.setAttr("shadowOffsetX",o.x*l),this.setAttr("shadowOffsetY",o.y*c)},e}(ju);Wn.SceneContext=DF;var RF=function(r){LE(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._fill=function(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()},e.prototype.strokeShape=function(t){t.hasHitStroke()&&this._stroke(t)},e.prototype._stroke=function(t){if(t.hasHitStroke()){var n=t.getStrokeScaleEnabled();if(!n){this.save();var a=this.getCanvas().getPixelRatio();this.setTransform(a,0,0,a,0,0)}this._applyLineCap(t);var i=t.hitStrokeWidth(),o=i==="auto"?t.strokeWidth():i;this.setAttr("lineWidth",o),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),n||this.restore()}},e}(ju);Wn.HitContext=RF;var FE=Ve&&Ve.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(yn,"__esModule",{value:!0});yn.HitCanvas=yn.SceneCanvas=yn.Canvas=void 0;var cg=wt,BE=Wn,qE=dt,IF=ft,LF=Ze,ks;function NF(){if(ks)return ks;var r=cg.Util.createCanvasElement(),e=r.getContext("2d");return ks=function(){var t=qE.Konva._global.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/n}(),ks}var Wu=function(){function r(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var t=e||{},n=t.pixelRatio||qE.Konva.pixelRatio||NF();this.pixelRatio=n,this._canvas=cg.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}return r.prototype.getContext=function(){return this.context},r.prototype.getPixelRatio=function(){return this.pixelRatio},r.prototype.setPixelRatio=function(e){var t=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/t,this.getHeight()/t)},r.prototype.setWidth=function(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";var t=this.pixelRatio,n=this.getContext()._context;n.scale(t,t)},r.prototype.setHeight=function(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";var t=this.pixelRatio,n=this.getContext()._context;n.scale(t,t)},r.prototype.getWidth=function(){return this.width},r.prototype.getHeight=function(){return this.height},r.prototype.setSize=function(e,t){this.setWidth(e||0),this.setHeight(t||0)},r.prototype.toDataURL=function(e,t){try{return this._canvas.toDataURL(e,t)}catch{try{return this._canvas.toDataURL()}catch(a){return cg.Util.error("Unable to get data URL. "+a.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}},r}();yn.Canvas=Wu;IF.Factory.addGetterSetter(Wu,"pixelRatio",void 0,LF.getNumberValidator());var FF=function(r){FE(e,r);function e(t){t===void 0&&(t={width:0,height:0});var n=r.call(this,t)||this;return n.context=new BE.SceneContext(n),n.setSize(t.width,t.height),n}return e}(Wu);yn.SceneCanvas=FF;var BF=function(r){FE(e,r);function e(t){t===void 0&&(t={width:0,height:0});var n=r.call(this,t)||this;return n.hitCanvas=!0,n.context=new BE.HitContext(n),n.setSize(t.width,t.height),n}return e}(Wu);yn.HitCanvas=BF;var Ku={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.DD=void 0;var e=dt,t=wt;r.DD={get isDragging(){var n=!1;return r.DD._dragElements.forEach(function(a){a.dragStatus==="dragging"&&(n=!0)}),n},justDragged:!1,get node(){var n;return r.DD._dragElements.forEach(function(a){n=a.node}),n},_dragElements:new Map,_drag:function(n){var a=[];r.DD._dragElements.forEach(function(i,o){var s=i.node,u=s.getStage();u.setPointersPositions(n),i.pointerId===void 0&&(i.pointerId=t.Util._getFirstPointerId(n));var l=u._changedPointerPositions.find(function(d){return d.id===i.pointerId});if(l){if(i.dragStatus!=="dragging"){var c=s.dragDistance(),f=Math.max(Math.abs(l.x-i.startPointerPos.x),Math.abs(l.y-i.startPointerPos.y));if(f<c||(s.startDrag({evt:n}),!s.isDragging()))return}s._setDragPosition(n,i),a.push(s)}}),a.forEach(function(i){i.fire("dragmove",{type:"dragmove",target:i,evt:n},!0)})},_endDragBefore:function(n){r.DD._dragElements.forEach(function(a,i){var o=a.node,s=o.getStage();n&&s.setPointersPositions(n);var u=s._changedPointerPositions.find(function(c){return c.id===a.pointerId});if(u){(a.dragStatus==="dragging"||a.dragStatus==="stopped")&&(r.DD.justDragged=!0,e.Konva.listenClickTap=!1,a.dragStatus="stopped");var l=a.node.getLayer()||a.node instanceof e.Konva.Stage&&a.node;l&&l.batchDraw()}})},_endDragAfter:function(n){r.DD._dragElements.forEach(function(a,i){a.dragStatus==="stopped"&&a.node.fire("dragend",{type:"dragend",target:a.node,evt:n},!0),a.dragStatus!=="dragging"&&r.DD._dragElements.delete(i)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",r.DD._endDragBefore,!0),window.addEventListener("touchend",r.DD._endDragBefore,!0),window.addEventListener("mousemove",r.DD._drag),window.addEventListener("touchmove",r.DD._drag),window.addEventListener("mouseup",r.DD._endDragAfter,!1),window.addEventListener("touchend",r.DD._endDragAfter,!1))})(Ku);(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Node=r._removeName=r._addName=r._removeId=r.names=r.ids=void 0;var e=wt,t=ft,n=yn,a=dt,i=Ku,o=Ze;r.ids={},r.names={};var s=function(X,k){k&&(r.ids[k]=X)},u=function(X,k){X&&r.ids[X]===k&&delete r.ids[X]};r._removeId=u;var l=function(X,k){k&&(r.names[k]||(r.names[k]=[]),r.names[k].push(X))};r._addName=l;var c=function(X,k){if(X){var D=r.names[X];if(D){for(var I=0;I<D.length;I++){var F=D[I];F._id===k&&D.splice(I,1)}D.length===0&&delete r.names[X]}}};r._removeName=c;var f="absoluteOpacity",d="allEventListeners",h="absoluteTransform",v="absoluteScale",m="canvas",_="Change",b="children",w="konva",y="listening",x="mouseenter",C="mouseleave",E="name",p="set",P="Shape",T=" ",R="stage",M="transform",N="Stage",B="visible",q=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(T),Z=new e.Collection,Q=1,Y=function(){function X(k){this._id=Q++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this.children=Z,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(k),this._shouldFireChangeEvents=!0}return X.prototype.hasChildren=function(){return!1},X.prototype.getChildren=function(){return Z},X.prototype._clearCache=function(k){(k===M||k===h)&&this._cache.get(k)?this._cache.get(k).dirty=!0:k?this._cache.delete(k):this._cache.clear()},X.prototype._getCache=function(k,D){var I=this._cache.get(k),F=k===M||k===h,L=I===void 0||F&&I.dirty===!0;return L&&(I=D.call(this),this._cache.set(k,I)),I},X.prototype._calculate=function(k,D,I){var F=this;if(!this._attachedDepsListeners.get(k)){var L=D.map(function(H){return H+"Change.konva"}).join(T);this.on(L,function(){F._clearCache(k)}),this._attachedDepsListeners.set(k,!0)}return this._getCache(k,I)},X.prototype._getCanvasCache=function(){return this._cache.get(m)},X.prototype._clearSelfAndDescendantCache=function(k,D){this._clearCache(k),D&&k===h&&this.fire("_clearTransformCache"),!this.isCached()&&this.children&&this.children.each(function(I){I._clearSelfAndDescendantCache(k,!0)})},X.prototype.clearCache=function(){return this._cache.delete(m),this._clearSelfAndDescendantCache(),this},X.prototype.cache=function(k){var D=k||{},I={};(D.x===void 0||D.y===void 0||D.width===void 0||D.height===void 0)&&(I=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var F=Math.ceil(D.width||I.width),L=Math.ceil(D.height||I.height),H=D.pixelRatio,j=D.x===void 0?I.x:D.x,W=D.y===void 0?I.y:D.y,re=D.offset||0,se=D.drawBorder||!1;if(!F||!L){e.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}F+=re*2,L+=re*2,j-=re,W-=re;var ce=new n.SceneCanvas({pixelRatio:H,width:F,height:L}),ge=new n.SceneCanvas({pixelRatio:H,width:0,height:0}),Pe=new n.HitCanvas({pixelRatio:1,width:F,height:L}),Oe=ce.getContext(),Se=Pe.getContext();return Pe.isCache=!0,ce.isCache=!0,this._cache.delete("canvas"),this._filterUpToDate=!1,D.imageSmoothingEnabled===!1&&(ce.getContext()._context.imageSmoothingEnabled=!1,ge.getContext()._context.imageSmoothingEnabled=!1),Oe.save(),Se.save(),Oe.translate(-j,-W),Se.translate(-j,-W),this._isUnderCache=!0,this._clearSelfAndDescendantCache(f),this._clearSelfAndDescendantCache(v),this.drawScene(ce,this),this.drawHit(Pe,this),this._isUnderCache=!1,Oe.restore(),Se.restore(),se&&(Oe.save(),Oe.beginPath(),Oe.rect(0,0,F,L),Oe.closePath(),Oe.setAttr("strokeStyle","red"),Oe.setAttr("lineWidth",5),Oe.stroke(),Oe.restore()),this._cache.set(m,{scene:ce,filter:ge,hit:Pe,x:j,y:W}),this},X.prototype.isCached=function(){return this._cache.has("canvas")},X.prototype.getClientRect=function(k){throw new Error('abstract "getClientRect" method call')},X.prototype._transformedRect=function(k,D){var I=[{x:k.x,y:k.y},{x:k.x+k.width,y:k.y},{x:k.x+k.width,y:k.y+k.height},{x:k.x,y:k.y+k.height}],F,L,H,j,W=this.getAbsoluteTransform(D);return I.forEach(function(re){var se=W.point(re);F===void 0&&(F=H=se.x,L=j=se.y),F=Math.min(F,se.x),L=Math.min(L,se.y),H=Math.max(H,se.x),j=Math.max(j,se.y)}),{x:F,y:L,width:H-F,height:j-L}},X.prototype._drawCachedSceneCanvas=function(k){k.save(),k._applyOpacity(this),k._applyGlobalCompositeOperation(this);var D=this._getCanvasCache();k.translate(D.x,D.y);var I=this._getCachedSceneCanvas(),F=I.pixelRatio;k.drawImage(I._canvas,0,0,I.width/F,I.height/F),k.restore()},X.prototype._drawCachedHitCanvas=function(k){var D=this._getCanvasCache(),I=D.hit;k.save(),k.translate(D.x,D.y),k.drawImage(I._canvas,0,0),k.restore()},X.prototype._getCachedSceneCanvas=function(){var k=this.filters(),D=this._getCanvasCache(),I=D.scene,F=D.filter,L=F.getContext(),H,j,W,re;if(k){if(!this._filterUpToDate){var se=I.pixelRatio;F.setSize(I.width/I.pixelRatio,I.height/I.pixelRatio);try{for(H=k.length,L.clear(),L.drawImage(I._canvas,0,0,I.getWidth()/se,I.getHeight()/se),j=L.getImageData(0,0,F.getWidth(),F.getHeight()),W=0;W<H;W++){if(re=k[W],typeof re!="function"){e.Util.error("Filter should be type of function, but got "+typeof re+" instead. Please check correct filters");continue}re.call(this,j),L.putImageData(j,0,0)}}catch(ce){e.Util.error("Unable to apply filter. "+ce.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return F}return I},X.prototype.on=function(k,D){if(this._cache&&this._cache.delete(d),arguments.length===3)return this._delegate.apply(this,arguments);var I=k.split(T),F=I.length,L,H,j,W,re;for(L=0;L<F;L++)H=I[L],j=H.split("."),W=j[0],re=j[1]||"",this.eventListeners[W]||(this.eventListeners[W]=[]),this.eventListeners[W].push({name:re,handler:D});return this},X.prototype.off=function(k,D){var I=(k||"").split(T),F=I.length,L,H,j,W,re,se;if(this._cache&&this._cache.delete(d),!k)for(H in this.eventListeners)this._off(H);for(L=0;L<F;L++)if(j=I[L],W=j.split("."),re=W[0],se=W[1],re)this.eventListeners[re]&&this._off(re,se,D);else for(H in this.eventListeners)this._off(H,se,D);return this},X.prototype.dispatchEvent=function(k){var D={target:this,type:k.type,evt:k};return this.fire(k.type,D),this},X.prototype.addEventListener=function(k,D){return this.on(k,function(I){D.call(this,I.evt)}),this},X.prototype.removeEventListener=function(k){return this.off(k),this},X.prototype._delegate=function(k,D,I){var F=this;this.on(k,function(L){for(var H=L.target.findAncestors(D,!0,F),j=0;j<H.length;j++)L=e.Util.cloneObject(L),L.currentTarget=H[j],I.call(H[j],L)})},X.prototype.remove=function(){return this.isDragging()&&this.stopDrag(),i.DD._dragElements.delete(this._id),this._remove(),this},X.prototype._clearCaches=function(){this._clearSelfAndDescendantCache(h),this._clearSelfAndDescendantCache(f),this._clearSelfAndDescendantCache(v),this._clearSelfAndDescendantCache(R),this._clearSelfAndDescendantCache(B),this._clearSelfAndDescendantCache(y)},X.prototype._remove=function(){this._clearCaches();var k=this.getParent();k&&k.children&&(k.children.splice(this.index,1),k._setChildrenIndices(),this.parent=null)},X.prototype.destroy=function(){r._removeId(this.id(),this);for(var k=(this.name()||"").split(/\s/g),D=0;D<k.length;D++){var I=k[D];r._removeName(I,this._id)}return this.remove(),this},X.prototype.getAttr=function(k){var D="get"+e.Util._capitalize(k);return e.Util._isFunction(this[D])?this[D]():this.attrs[k]},X.prototype.getAncestors=function(){for(var k=this.getParent(),D=new e.Collection;k;)D.push(k),k=k.getParent();return D},X.prototype.getAttrs=function(){return this.attrs||{}},X.prototype.setAttrs=function(k){var D=this;return this._batchTransformChanges(function(){var I,F;if(!k)return D;for(I in k)I!==b&&(F=p+e.Util._capitalize(I),e.Util._isFunction(D[F])?D[F](k[I]):D._setAttr(I,k[I]))}),this},X.prototype.isListening=function(){return this._getCache(y,this._isListening)},X.prototype._isListening=function(k){var D=this.listening();if(!D)return!1;var I=this.getParent();return I&&I!==k&&this!==k?I._isListening(k):!0},X.prototype.isVisible=function(){return this._getCache(B,this._isVisible)},X.prototype._isVisible=function(k){var D=this.visible();if(!D)return!1;var I=this.getParent();return I&&I!==k&&this!==k?I._isVisible(k):!0},X.prototype.shouldDrawHit=function(k,D){if(D===void 0&&(D=!1),k)return this._isVisible(k)&&this._isListening(k);var I=this.getLayer(),F=!1;i.DD._dragElements.forEach(function(H){H.dragStatus==="dragging"&&(H.node.nodeType==="Stage"||H.node.getLayer()===I)&&(F=!0)});var L=!D&&!a.Konva.hitOnDragEnabled&&F;return this.isListening()&&this.isVisible()&&!L},X.prototype.show=function(){return this.visible(!0),this},X.prototype.hide=function(){return this.visible(!1),this},X.prototype.getZIndex=function(){return this.index||0},X.prototype.getAbsoluteZIndex=function(){var k=this.getDepth(),D=this,I=0,F,L,H,j;function W(re){for(F=[],L=re.length,H=0;H<L;H++)j=re[H],I++,j.nodeType!==P&&(F=F.concat(j.getChildren().toArray())),j._id===D._id&&(H=L);F.length>0&&F[0].getDepth()<=k&&W(F)}return D.nodeType!==N&&W(D.getStage().getChildren()),I},X.prototype.getDepth=function(){for(var k=0,D=this.parent;D;)k++,D=D.parent;return k},X.prototype._batchTransformChanges=function(k){this._batchingTransformChange=!0,k(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(M),this._clearSelfAndDescendantCache(h,!0)),this._needClearTransformCache=!1},X.prototype.setPosition=function(k){var D=this;return this._batchTransformChanges(function(){D.x(k.x),D.y(k.y)}),this},X.prototype.getPosition=function(){return{x:this.x(),y:this.y()}},X.prototype.getAbsolutePosition=function(k){for(var D=!1,I=this.parent;I;){if(I.isCached()){D=!0;break}I=I.parent}D&&!k&&(k=!0);var F=this.getAbsoluteTransform(k).getMatrix(),L=new e.Transform,H=this.offset();return L.m=F.slice(),L.translate(H.x,H.y),L.getTranslation()},X.prototype.setAbsolutePosition=function(k){var D=this._clearTransform();this.attrs.x=D.x,this.attrs.y=D.y,delete D.x,delete D.y,this._clearCache(M);var I=this._getAbsoluteTransform().copy();return I.invert(),I.translate(k.x,k.y),k={x:this.attrs.x+I.getTranslation().x,y:this.attrs.y+I.getTranslation().y},this._setTransform(D),this.setPosition({x:k.x,y:k.y}),this._clearCache(M),this._clearSelfAndDescendantCache(h),this},X.prototype._setTransform=function(k){var D;for(D in k)this.attrs[D]=k[D]},X.prototype._clearTransform=function(){var k={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,k},X.prototype.move=function(k){var D=k.x,I=k.y,F=this.x(),L=this.y();return D!==void 0&&(F+=D),I!==void 0&&(L+=I),this.setPosition({x:F,y:L}),this},X.prototype._eachAncestorReverse=function(k,D){var I=[],F=this.getParent(),L,H;if(!(D&&D._id===this._id)){for(I.unshift(this);F&&(!D||F._id!==D._id);)I.unshift(F),F=F.parent;for(L=I.length,H=0;H<L;H++)k(I[H])}},X.prototype.rotate=function(k){return this.rotation(this.rotation()+k),this},X.prototype.moveToTop=function(){if(!this.parent)return e.Util.warn("Node has no parent. moveToTop function is ignored."),!1;var k=this.index;return this.parent.children.splice(k,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0},X.prototype.moveUp=function(){if(!this.parent)return e.Util.warn("Node has no parent. moveUp function is ignored."),!1;var k=this.index,D=this.parent.getChildren().length;return k<D-1?(this.parent.children.splice(k,1),this.parent.children.splice(k+1,0,this),this.parent._setChildrenIndices(),!0):!1},X.prototype.moveDown=function(){if(!this.parent)return e.Util.warn("Node has no parent. moveDown function is ignored."),!1;var k=this.index;return k>0?(this.parent.children.splice(k,1),this.parent.children.splice(k-1,0,this),this.parent._setChildrenIndices(),!0):!1},X.prototype.moveToBottom=function(){if(!this.parent)return e.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var k=this.index;return k>0?(this.parent.children.splice(k,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1},X.prototype.setZIndex=function(k){if(!this.parent)return e.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(k<0||k>=this.parent.children.length)&&e.Util.warn("Unexpected value "+k+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var D=this.index;return this.parent.children.splice(D,1),this.parent.children.splice(k,0,this),this.parent._setChildrenIndices(),this},X.prototype.getAbsoluteOpacity=function(){return this._getCache(f,this._getAbsoluteOpacity)},X.prototype._getAbsoluteOpacity=function(){var k=this.opacity(),D=this.getParent();return D&&!D._isUnderCache&&(k*=D.getAbsoluteOpacity()),k},X.prototype.moveTo=function(k){return this.getParent()!==k&&(this._remove(),k.add(this)),this},X.prototype.toObject=function(){var k={},D=this.getAttrs(),I,F,L,H,j;k.attrs={};for(I in D)F=D[I],j=e.Util.isObject(F)&&!e.Util._isPlainObject(F)&&!e.Util._isArray(F),!j&&(L=typeof this[I]=="function"&&this[I],delete D[I],H=L?L.call(this):null,D[I]=F,H!==F&&(k.attrs[I]=F));return k.className=this.getClassName(),e.Util._prepareToStringify(k)},X.prototype.toJSON=function(){return JSON.stringify(this.toObject())},X.prototype.getParent=function(){return this.parent},X.prototype.findAncestors=function(k,D,I){var F=[];D&&this._isMatch(k)&&F.push(this);for(var L=this.parent;L;){if(L===I)return F;L._isMatch(k)&&F.push(L),L=L.parent}return F},X.prototype.isAncestorOf=function(k){return!1},X.prototype.findAncestor=function(k,D,I){return this.findAncestors(k,D,I)[0]},X.prototype._isMatch=function(k){if(!k)return!1;if(typeof k=="function")return k(this);var D=k.replace(/ /g,"").split(","),I=D.length,F,L;for(F=0;F<I;F++)if(L=D[F],e.Util.isValidSelector(L)||(e.Util.warn('Selector "'+L+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),e.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),e.Util.warn("Konva is awesome, right?")),L.charAt(0)==="#"){if(this.id()===L.slice(1))return!0}else if(L.charAt(0)==="."){if(this.hasName(L.slice(1)))return!0}else if(this.className===L||this.nodeType===L)return!0;return!1},X.prototype.getLayer=function(){var k=this.getParent();return k?k.getLayer():null},X.prototype.getStage=function(){return this._getCache(R,this._getStage)},X.prototype._getStage=function(){var k=this.getParent();if(k)return k.getStage()},X.prototype.fire=function(k,D,I){return D===void 0&&(D={}),D.target=D.target||this,I?this._fireAndBubble(k,D):this._fire(k,D),this},X.prototype.getAbsoluteTransform=function(k){return k?this._getAbsoluteTransform(k):this._getCache(h,this._getAbsoluteTransform)},X.prototype._getAbsoluteTransform=function(k){var D;if(k)return D=new e.Transform,this._eachAncestorReverse(function(W){var re=W.transformsEnabled();re==="all"?D.multiply(W.getTransform()):re==="position"&&D.translate(W.x()-W.offsetX(),W.y()-W.offsetY())},k),D;D=this._cache.get(h)||new e.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(D):D.reset();var I=this.transformsEnabled();if(I==="all")D.multiply(this.getTransform());else if(I==="position"){var F=this.attrs.x||0,L=this.attrs.y||0,H=this.attrs.offsetX||0,j=this.attrs.offsetY||0;D.translate(F-H,L-j)}return D.dirty=!1,D},X.prototype.getAbsoluteScale=function(k){for(var D=this;D;)D._isUnderCache&&(k=D),D=D.getParent();var I=this.getAbsoluteTransform(k),F=I.decompose();return{x:F.scaleX,y:F.scaleY}},X.prototype.getAbsoluteRotation=function(){return this.getAbsoluteTransform().decompose().rotation},X.prototype.getTransform=function(){return this._getCache(M,this._getTransform)},X.prototype._getTransform=function(){var k,D,I=this._cache.get(M)||new e.Transform;I.reset();var F=this.x(),L=this.y(),H=a.Konva.getAngle(this.rotation()),j=(k=this.attrs.scaleX)!==null&&k!==void 0?k:1,W=(D=this.attrs.scaleY)!==null&&D!==void 0?D:1,re=this.attrs.skewX||0,se=this.attrs.skewY||0,ce=this.attrs.offsetX||0,ge=this.attrs.offsetY||0;return(F!==0||L!==0)&&I.translate(F,L),H!==0&&I.rotate(H),(re!==0||se!==0)&&I.skew(re,se),(j!==1||W!==1)&&I.scale(j,W),(ce!==0||ge!==0)&&I.translate(-1*ce,-1*ge),I.dirty=!1,I},X.prototype.clone=function(k){var D=e.Util.cloneObject(this.attrs),I,F,L,H,j;for(I in k)D[I]=k[I];var W=new this.constructor(D);for(I in this.eventListeners)for(F=this.eventListeners[I],L=F.length,H=0;H<L;H++)j=F[H],j.name.indexOf(w)<0&&(W.eventListeners[I]||(W.eventListeners[I]=[]),W.eventListeners[I].push(j));return W},X.prototype._toKonvaCanvas=function(k){k=k||{};var D=this.getClientRect(),I=this.getStage(),F=k.x!==void 0?k.x:D.x,L=k.y!==void 0?k.y:D.y,H=k.pixelRatio||1,j=new n.SceneCanvas({width:k.width||D.width||(I?I.width():0),height:k.height||D.height||(I?I.height():0),pixelRatio:H}),W=j.getContext();return W.save(),(F||L)&&W.translate(-1*F,-1*L),this.drawScene(j),W.restore(),j},X.prototype.toCanvas=function(k){return this._toKonvaCanvas(k)._canvas},X.prototype.toDataURL=function(k){k=k||{};var D=k.mimeType||null,I=k.quality||null,F=this._toKonvaCanvas(k).toDataURL(D,I);return k.callback&&k.callback(F),F},X.prototype.toImage=function(k){if(!k||!k.callback)throw"callback required for toImage method config argument";var D=k.callback;delete k.callback,e.Util._urlToImage(this.toDataURL(k),function(I){D(I)})},X.prototype.setSize=function(k){return this.width(k.width),this.height(k.height),this},X.prototype.getSize=function(){return{width:this.width(),height:this.height()}},X.prototype.getClassName=function(){return this.className||this.nodeType},X.prototype.getType=function(){return this.nodeType},X.prototype.getDragDistance=function(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():a.Konva.dragDistance},X.prototype._off=function(k,D,I){var F=this.eventListeners[k],L,H,j;for(L=0;L<F.length;L++)if(H=F[L].name,j=F[L].handler,(H!=="konva"||D==="konva")&&(!D||H===D)&&(!I||I===j)){if(F.splice(L,1),F.length===0){delete this.eventListeners[k];break}L--}},X.prototype._fireChangeEvent=function(k,D,I){this._fire(k+_,{oldVal:D,newVal:I})},X.prototype.setId=function(k){var D=this.id();return r._removeId(D,this),s(this,k),this._setAttr("id",k),this},X.prototype.setName=function(k){var D=(this.name()||"").split(/\s/g),I=(k||"").split(/\s/g),F,L;for(L=0;L<D.length;L++)F=D[L],I.indexOf(F)===-1&&F&&r._removeName(F,this._id);for(L=0;L<I.length;L++)F=I[L],D.indexOf(F)===-1&&F&&r._addName(this,F);return this._setAttr(E,k),this},X.prototype.addName=function(k){if(!this.hasName(k)){var D=this.name(),I=D?D+" "+k:k;this.setName(I)}return this},X.prototype.hasName=function(k){if(!k)return!1;var D=this.name();if(!D)return!1;var I=(D||"").split(/\s/g);return I.indexOf(k)!==-1},X.prototype.removeName=function(k){var D=(this.name()||"").split(/\s/g),I=D.indexOf(k);return I!==-1&&(D.splice(I,1),this.setName(D.join(" "))),this},X.prototype.setAttr=function(k,D){var I=this[p+e.Util._capitalize(k)];return e.Util._isFunction(I)?I.call(this,D):this._setAttr(k,D),this},X.prototype._setAttr=function(k,D,I){var F=this.attrs[k];F===D&&!e.Util.isObject(D)||(D==null?delete this.attrs[k]:this.attrs[k]=D,this._shouldFireChangeEvents&&this._fireChangeEvent(k,F,D))},X.prototype._setComponentAttr=function(k,D,I){var F;I!==void 0&&(F=this.attrs[k],F||(this.attrs[k]=this.getAttr(k)),this.attrs[k][D]=I,this._fireChangeEvent(k,F,I))},X.prototype._fireAndBubble=function(k,D,I){D&&this.nodeType===P&&(D.target=this);var F=(k===x||k===C)&&(I&&(this===I||this.isAncestorOf&&this.isAncestorOf(I))||this.nodeType==="Stage"&&!I);if(!F){this._fire(k,D);var L=(k===x||k===C)&&I&&I.isAncestorOf&&I.isAncestorOf(this)&&!I.isAncestorOf(this.parent);(D&&!D.cancelBubble||!D)&&this.parent&&this.parent.isListening()&&!L&&(I&&I.parent?this._fireAndBubble.call(this.parent,k,D,I):this._fireAndBubble.call(this.parent,k,D))}},X.prototype._getProtoListeners=function(k){var D=this._cache.get(d);if(!D){D={};for(var I=Object.getPrototypeOf(this);I;){if(!I.eventListeners){I=Object.getPrototypeOf(I);continue}for(var F in I.eventListeners){var L=I.eventListeners[F],H=D[F]||[];D[F]=L.concat(H)}I=Object.getPrototypeOf(I)}this._cache.set(d,D)}return D[k]},X.prototype._fire=function(k,D){D=D||{},D.currentTarget=this,D.type=k;var I=this._getProtoListeners(k);if(I)for(var F=0;F<I.length;F++)I[F].handler.call(this,D);var L=this.eventListeners[k];if(L)for(var F=0;F<L.length;F++)L[F].handler.call(this,D)},X.prototype.draw=function(){return this.drawScene(),this.drawHit(),this},X.prototype._createDragElement=function(k){var D=k?k.pointerId:void 0,I=this.getStage(),F=this.getAbsolutePosition(),L=I._getPointerById(D)||I._changedPointerPositions[0]||F;i.DD._dragElements.set(this._id,{node:this,startPointerPos:L,offset:{x:L.x-F.x,y:L.y-F.y},dragStatus:"ready",pointerId:D})},X.prototype.startDrag=function(k,D){D===void 0&&(D=!0),i.DD._dragElements.has(this._id)||this._createDragElement(k);var I=i.DD._dragElements.get(this._id);I.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:k&&k.evt},D)},X.prototype._setDragPosition=function(k,D){var I=this.getStage()._getPointerById(D.pointerId);if(I){var F={x:I.x-D.offset.x,y:I.y-D.offset.y},L=this.dragBoundFunc();if(L!==void 0){var H=L.call(this,F,k);H?F=H:e.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==F.x||this._lastPos.y!==F.y)&&(this.setAbsolutePosition(F),this.getLayer()?this.getLayer().batchDraw():this.getStage()&&this.getStage().batchDraw()),this._lastPos=F}},X.prototype.stopDrag=function(k){var D=i.DD._dragElements.get(this._id);D&&(D.dragStatus="stopped"),i.DD._endDragBefore(k),i.DD._endDragAfter(k)},X.prototype.setDraggable=function(k){this._setAttr("draggable",k),this._dragChange()},X.prototype.isDragging=function(){var k=i.DD._dragElements.get(this._id);return k?k.dragStatus==="dragging":!1},X.prototype._listenDrag=function(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(k){var D=this,I=k.evt.button!==void 0,F=!I||a.Konva.dragButtons.indexOf(k.evt.button)>=0;if(F&&!this.isDragging()){var L=!1;i.DD._dragElements.forEach(function(H){D.isAncestorOf(H.node)&&(L=!0)}),L||this._createDragElement(k)}})},X.prototype._dragChange=function(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var k=this.getStage();if(!k)return;var D=i.DD._dragElements.get(this._id),I=D&&D.dragStatus==="dragging",F=D&&D.dragStatus==="ready";I?this.stopDrag():F&&i.DD._dragElements.delete(this._id)}},X.prototype._dragCleanup=function(){this.off("mousedown.konva"),this.off("touchstart.konva")},X.create=function(k,D){return e.Util._isString(k)&&(k=JSON.parse(k)),this._createNode(k,D)},X._createNode=function(k,D){var I=X.prototype.getClassName.call(k),F=k.children,L,H,j;D&&(k.attrs.container=D),a._NODES_REGISTRY[I]||(e.Util.warn('Can not find a node with class name "'+I+'". Fallback to "Shape".'),I="Shape");var W=a._NODES_REGISTRY[I];if(L=new W(k.attrs),F)for(H=F.length,j=0;j<H;j++)L.add(X._createNode(F[j]));return L},X}();r.Node=Y,Y.prototype.nodeType="Node",Y.prototype._attrsAffectingSize=[],Y.prototype.eventListeners={},Y.prototype.on.call(Y.prototype,q,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(M),this._clearSelfAndDescendantCache(h)}),Y.prototype.on.call(Y.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(B)}),Y.prototype.on.call(Y.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(y)}),Y.prototype.on.call(Y.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(f)});var J=t.Factory.addGetterSetter;J(Y,"zIndex"),J(Y,"absolutePosition"),J(Y,"position"),J(Y,"x",0,o.getNumberValidator()),J(Y,"y",0,o.getNumberValidator()),J(Y,"globalCompositeOperation","source-over",o.getStringValidator()),J(Y,"opacity",1,o.getNumberValidator()),J(Y,"name","",o.getStringValidator()),J(Y,"id","",o.getStringValidator()),J(Y,"rotation",0,o.getNumberValidator()),t.Factory.addComponentsGetterSetter(Y,"scale",["x","y"]),J(Y,"scaleX",1,o.getNumberValidator()),J(Y,"scaleY",1,o.getNumberValidator()),t.Factory.addComponentsGetterSetter(Y,"skew",["x","y"]),J(Y,"skewX",0,o.getNumberValidator()),J(Y,"skewY",0,o.getNumberValidator()),t.Factory.addComponentsGetterSetter(Y,"offset",["x","y"]),J(Y,"offsetX",0,o.getNumberValidator()),J(Y,"offsetY",0,o.getNumberValidator()),J(Y,"dragDistance",null,o.getNumberValidator()),J(Y,"width",0,o.getNumberValidator()),J(Y,"height",0,o.getNumberValidator()),J(Y,"listening",!0,o.getBooleanValidator()),J(Y,"preventDefault",!0,o.getBooleanValidator()),J(Y,"filters",null,function(X){return this._filterUpToDate=!1,X}),J(Y,"visible",!0,o.getBooleanValidator()),J(Y,"transformsEnabled","all",o.getStringValidator()),J(Y,"size"),J(Y,"dragBoundFunc"),J(Y,"draggable",!1,o.getBooleanValidator()),t.Factory.backCompat(Y,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),e.Collection.mapMethods(Y)})(sr);var ui={},qF=Ve&&Ve.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(ui,"__esModule",{value:!0});ui.Container=void 0;var Ha=wt,ro=ft,Ip=sr,Yu=Ze,Ma=function(r){qF(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.children=new Ha.Collection,t}return e.prototype.getChildren=function(t){if(!t)return this.children;var n=new Ha.Collection;return this.children.each(function(a){t(a)&&n.push(a)}),n},e.prototype.hasChildren=function(){return this.getChildren().length>0},e.prototype.removeChildren=function(){for(var t,n=0;n<this.children.length;n++)t=this.children[n],t.parent=null,t.index=0,t.remove();return this.children=new Ha.Collection,this},e.prototype.destroyChildren=function(){for(var t,n=0;n<this.children.length;n++)t=this.children[n],t.parent=null,t.index=0,t.destroy();return this.children=new Ha.Collection,this},e.prototype.add=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(arguments.length>1){for(var a=0;a<arguments.length;a++)this.add(arguments[a]);return this}var i=t[0];if(i.getParent())return i.moveTo(this),this;var o=this.children;return this._validateAdd(i),i._clearCaches(),i.index=o.length,i.parent=this,o.push(i),this._fire("add",{child:i}),this},e.prototype.destroy=function(){return this.hasChildren()&&this.destroyChildren(),r.prototype.destroy.call(this),this},e.prototype.find=function(t){return this._generalFind(t,!1)},e.prototype.get=function(t){return Ha.Util.warn("collection.get() method is deprecated. Please use collection.find() instead."),this.find(t)},e.prototype.findOne=function(t){var n=this._generalFind(t,!0);return n.length>0?n[0]:void 0},e.prototype._generalFind=function(t,n){var a=[];return this._descendants(function(i){var o=i._isMatch(t);return o&&a.push(i),!!(o&&n)}),Ha.Collection.toCollection(a)},e.prototype._descendants=function(t){for(var n=!1,a=0;a<this.children.length;a++){var i=this.children[a];if(n=t(i),n)return!0;if(i.hasChildren()&&(n=i._descendants(t),n))return!0}return!1},e.prototype.toObject=function(){var t=Ip.Node.prototype.toObject.call(this);t.children=[];for(var n=this.getChildren(),a=n.length,i=0;i<a;i++){var o=n[i];t.children.push(o.toObject())}return t},e.prototype.isAncestorOf=function(t){for(var n=t.getParent();n;){if(n._id===this._id)return!0;n=n.getParent()}return!1},e.prototype.clone=function(t){var n=Ip.Node.prototype.clone.call(this,t);return this.getChildren().each(function(a){n.add(a.clone())}),n},e.prototype.getAllIntersections=function(t){var n=[];return this.find("Shape").each(function(a){a.isVisible()&&a.intersects(t)&&n.push(a)}),n},e.prototype._setChildrenIndices=function(){this.children.each(function(t,n){t.index=n})},e.prototype.drawScene=function(t,n){var a=this.getLayer(),i=t||a&&a.getCanvas(),o=i&&i.getContext(),s=this._getCanvasCache(),u=s&&s.scene,l=i&&i.isCache;if(!this.isVisible()&&!l)return this;if(u){o.save();var c=this.getAbsoluteTransform(n).getMatrix();o.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this._drawCachedSceneCanvas(o),o.restore()}else this._drawChildren("drawScene",i,n);return this},e.prototype.drawHit=function(t,n){if(!this.shouldDrawHit(n))return this;var a=this.getLayer(),i=t||a&&a.hitCanvas,o=i&&i.getContext(),s=this._getCanvasCache(),u=s&&s.hit;if(u){o.save();var l=this.getAbsoluteTransform(n).getMatrix();o.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedHitCanvas(o),o.restore()}else this._drawChildren("drawHit",i,n);return this},e.prototype._drawChildren=function(t,n,a){var i=n&&n.getContext(),o=this.clipWidth(),s=this.clipHeight(),u=this.clipFunc(),l=o&&s||u,c=a===this;if(l){i.save();var f=this.getAbsoluteTransform(a),d=f.getMatrix();if(i.transform(d[0],d[1],d[2],d[3],d[4],d[5]),i.beginPath(),u)u.call(this,i,this);else{var h=this.clipX(),v=this.clipY();i.rect(h,v,o,s)}i.clip(),d=f.copy().invert().getMatrix(),i.transform(d[0],d[1],d[2],d[3],d[4],d[5])}var m=!c&&this.globalCompositeOperation()!=="source-over"&&t==="drawScene";m&&(i.save(),i._applyGlobalCompositeOperation(this)),this.children.each(function(_){_[t](n,a)}),m&&i.restore(),l&&i.restore()},e.prototype.getClientRect=function(t){t=t||{};var n=t.skipTransform,a=t.relativeTo,i,o,s,u,l={x:1/0,y:1/0,width:0,height:0},c=this;this.children.each(function(m){if(m.visible()){var _=m.getClientRect({relativeTo:c,skipShadow:t.skipShadow,skipStroke:t.skipStroke});_.width===0&&_.height===0||(i===void 0?(i=_.x,o=_.y,s=_.x+_.width,u=_.y+_.height):(i=Math.min(i,_.x),o=Math.min(o,_.y),s=Math.max(s,_.x+_.width),u=Math.max(u,_.y+_.height)))}});for(var f=this.find("Shape"),d=!1,h=0;h<f.length;h++){var v=f[h];if(v._isVisible(this)){d=!0;break}}return d&&i!==void 0?l={x:i,y:o,width:s-i,height:u-o}:l={x:0,y:0,width:0,height:0},n?l:this._transformedRect(l,a)},e}(Ip.Node);ui.Container=Ma;ro.Factory.addComponentsGetterSetter(Ma,"clip",["x","y","width","height"]);ro.Factory.addGetterSetter(Ma,"clipX",void 0,Yu.getNumberValidator());ro.Factory.addGetterSetter(Ma,"clipY",void 0,Yu.getNumberValidator());ro.Factory.addGetterSetter(Ma,"clipWidth",void 0,Yu.getNumberValidator());ro.Factory.addGetterSetter(Ma,"clipHeight",void 0,Yu.getNumberValidator());ro.Factory.addGetterSetter(Ma,"clipFunc");Ha.Collection.mapMethods(Ma);var zE={},Xr={};Object.defineProperty(Xr,"__esModule",{value:!0});Xr.releaseCapture=Xr.setPointerCapture=Xr.hasPointerCapture=Xr.createEvent=Xr.getCapturedShape=void 0;var zF=dt,Uo=new Map,GE=zF.Konva._global.PointerEvent!==void 0;function GF(r){return Uo.get(r)}Xr.getCapturedShape=GF;function oy(r){return{evt:r,pointerId:r.pointerId}}Xr.createEvent=oy;function $F(r,e){return Uo.get(r)===e}Xr.hasPointerCapture=$F;function VF(r,e){$E(r);var t=e.getStage();t&&(Uo.set(r,e),GE&&e._fire("gotpointercapture",oy(new PointerEvent("gotpointercapture"))))}Xr.setPointerCapture=VF;function $E(r,e){var t=Uo.get(r);if(t){var n=t.getStage();n&&n.content,Uo.delete(r),GE&&t._fire("lostpointercapture",oy(new PointerEvent("lostpointercapture")))}}Xr.releaseCapture=$E;(function(r){var e=Ve&&Ve.__extends||function(){var me=function(G,U){return me=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(oe,ae){oe.__proto__=ae}||function(oe,ae){for(var fe in ae)Object.prototype.hasOwnProperty.call(ae,fe)&&(oe[fe]=ae[fe])},me(G,U)};return function(G,U){me(G,U);function oe(){this.constructor=G}G.prototype=U===null?Object.create(U):(oe.prototype=U.prototype,new oe)}}();Object.defineProperty(r,"__esModule",{value:!0}),r.Stage=r.stages=void 0;var t=wt,n=ft,a=ui,i=dt,o=yn,s=Ku,u=dt,l=Xr,c="Stage",f="string",d="px",h="mouseout",v="mouseleave",m="mouseover",_="mouseenter",b="mousemove",w="mousedown",y="mouseup",x="pointermove",C="pointerdown",E="pointerup",p="pointercancel",P="lostpointercapture",T="contextmenu",R="click",M="dblclick",N="touchstart",B="touchend",q="tap",Z="dbltap",Q="touchmove",Y="wheel",J="contentMouseout",X="contentMouseover",k="contentMousemove",D="contentMousedown",I="contentMouseup",F="contentContextmenu",L="contentClick",H="contentDblclick",j="contentTouchstart",W="contentTouchend",re="contentDbltap",se="contentTap",ce="contentTouchmove",ge="contentWheel",Pe="relative",Oe="konvajs-content",Se="_",le="container",te=5,ne="",de=[_,w,b,y,v,N,Q,B,m,Y,T,C,x,E,p,P],Ce=de.length;function Le(me,G){me.content.addEventListener(G,function(U){me[Se+G](U)},!1)}var $e="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";r.stages=[];function Ne(me){return me===void 0&&(me={}),(me.clipFunc||me.clipWidth||me.clipHeight)&&t.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),me}var De=function(me){e(G,me);function G(U){var oe=me.call(this,Ne(U))||this;return oe._pointerPositions=[],oe._changedPointerPositions=[],oe._buildDOM(),oe._bindContentEvents(),r.stages.push(oe),oe.on("widthChange.konva heightChange.konva",oe._resizeDOM),oe.on("visibleChange.konva",oe._checkVisibility),oe.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",function(){Ne(oe.attrs)}),oe._checkVisibility(),oe}return G.prototype._validateAdd=function(U){var oe=U.getType()==="Layer",ae=U.getType()==="FastLayer",fe=oe||ae;fe||t.Util.throw("You may only add layers to the stage.")},G.prototype._checkVisibility=function(){if(this.content){var U=this.visible()?"":"none";this.content.style.display=U}},G.prototype.setContainer=function(U){if(typeof U===f){if(U.charAt(0)==="."){var oe=U.slice(1);U=document.getElementsByClassName(oe)[0]}else{var ae;U.charAt(0)!=="#"?ae=U:ae=U.slice(1),U=document.getElementById(ae)}if(!U)throw"Can not find container in document with id "+ae}return this._setAttr(le,U),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),U.appendChild(this.content)),this},G.prototype.shouldDrawHit=function(){return!0},G.prototype.clear=function(){var U=this.children,oe=U.length,ae;for(ae=0;ae<oe;ae++)U[ae].clear();return this},G.prototype.clone=function(U){return U||(U={}),U.container=document.createElement("div"),a.Container.prototype.clone.call(this,U)},G.prototype.destroy=function(){me.prototype.destroy.call(this);var U=this.content;U&&t.Util._isInDocument(U)&&this.container().removeChild(U);var oe=r.stages.indexOf(this);return oe>-1&&r.stages.splice(oe,1),this},G.prototype.getPointerPosition=function(){var U=this._pointerPositions[0]||this._changedPointerPositions[0];return U?{x:U.x,y:U.y}:(t.Util.warn($e),null)},G.prototype._getPointerById=function(U){return this._pointerPositions.find(function(oe){return oe.id===U})},G.prototype.getPointersPositions=function(){return this._pointerPositions},G.prototype.getStage=function(){return this},G.prototype.getContent=function(){return this.content},G.prototype._toKonvaCanvas=function(U){U=U||{},U.x=U.x||0,U.y=U.y||0,U.width=U.width||this.width(),U.height=U.height||this.height();var oe=new o.SceneCanvas({width:U.width,height:U.height,pixelRatio:U.pixelRatio||1}),ae=oe.getContext()._context,fe=this.children;return(U.x||U.y)&&ae.translate(-1*U.x,-1*U.y),fe.each(function(we){if(we.isVisible()){var ve=we._toKonvaCanvas(U);ae.drawImage(ve._canvas,U.x,U.y,ve.getWidth()/ve.getPixelRatio(),ve.getHeight()/ve.getPixelRatio())}}),oe},G.prototype.getIntersection=function(U,oe){if(!U)return null;var ae=this.children,fe=ae.length,we=fe-1,ve,Te;for(ve=we;ve>=0;ve--)if(Te=ae[ve].getIntersection(U,oe),Te)return Te;return null},G.prototype._resizeDOM=function(){var U=this.width(),oe=this.height();this.content&&(this.content.style.width=U+d,this.content.style.height=oe+d),this.bufferCanvas.setSize(U,oe),this.bufferHitCanvas.setSize(U,oe),this.children.each(function(ae){ae.setSize({width:U,height:oe}),ae.draw()})},G.prototype.add=function(U){if(arguments.length>1){for(var oe=0;oe<arguments.length;oe++)this.add(arguments[oe]);return this}me.prototype.add.call(this,U);var ae=this.children.length;return ae>te&&t.Util.warn("The stage has "+ae+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),U.setSize({width:this.width(),height:this.height()}),U.draw(),i.Konva.isBrowser&&this.content.appendChild(U.canvas._canvas),this},G.prototype.getParent=function(){return null},G.prototype.getLayer=function(){return null},G.prototype.hasPointerCapture=function(U){return l.hasPointerCapture(U,this)},G.prototype.setPointerCapture=function(U){l.setPointerCapture(U,this)},G.prototype.releaseCapture=function(U){l.releaseCapture(U,this)},G.prototype.getLayers=function(){return this.getChildren()},G.prototype._bindContentEvents=function(){if(i.Konva.isBrowser)for(var U=0;U<Ce;U++)Le(this,de[U])},G.prototype._mouseenter=function(U){this.setPointersPositions(U),this._fire(_,{evt:U,target:this,currentTarget:this})},G.prototype._mouseover=function(U){this.setPointersPositions(U),this._fire(X,{evt:U}),this._fire(m,{evt:U,target:this,currentTarget:this})},G.prototype._mouseleave=function(U){var oe;this.setPointersPositions(U);var ae=!((oe=this.targetShape)===null||oe===void 0)&&oe.getStage()?this.targetShape:null,fe=!s.DD.isDragging||i.Konva.hitOnDragEnabled;ae&&fe?(ae._fireAndBubble(h,{evt:U}),ae._fireAndBubble(v,{evt:U}),this._fire(v,{evt:U,target:this,currentTarget:this}),this.targetShape=null):fe&&(this._fire(v,{evt:U,target:this,currentTarget:this}),this._fire(h,{evt:U,target:this,currentTarget:this})),this.pointerPos=void 0,this._pointerPositions=[],this._fire(J,{evt:U})},G.prototype._mousemove=function(U){var oe;if(i.Konva.UA.ieMobile)return this._touchmove(U);this.setPointersPositions(U);var ae=t.Util._getFirstPointerId(U),fe,we=!((oe=this.targetShape)===null||oe===void 0)&&oe.getStage()?this.targetShape:null,ve=!s.DD.isDragging||i.Konva.hitOnDragEnabled;if(ve){if(fe=this.getIntersection(this.getPointerPosition()),fe&&fe.isListening()){var Te=we!==fe;ve&&Te?(we&&(we._fireAndBubble(h,{evt:U,pointerId:ae},fe),we._fireAndBubble(v,{evt:U,pointerId:ae},fe)),fe._fireAndBubble(m,{evt:U,pointerId:ae},we),fe._fireAndBubble(_,{evt:U,pointerId:ae},we),fe._fireAndBubble(b,{evt:U,pointerId:ae}),this.targetShape=fe):fe._fireAndBubble(b,{evt:U,pointerId:ae})}else we&&ve&&(we._fireAndBubble(h,{evt:U,pointerId:ae}),we._fireAndBubble(v,{evt:U,pointerId:ae}),this._fire(m,{evt:U,target:this,currentTarget:this,pointerId:ae}),this.targetShape=null),this._fire(b,{evt:U,target:this,currentTarget:this,pointerId:ae});this._fire(k,{evt:U})}U.cancelable&&U.preventDefault()},G.prototype._mousedown=function(U){if(i.Konva.UA.ieMobile)return this._touchstart(U);this.setPointersPositions(U);var oe=t.Util._getFirstPointerId(U),ae=this.getIntersection(this.getPointerPosition());s.DD.justDragged=!1,i.Konva.listenClickTap=!0,ae&&ae.isListening()?(this.clickStartShape=ae,ae._fireAndBubble(w,{evt:U,pointerId:oe})):this._fire(w,{evt:U,target:this,currentTarget:this,pointerId:oe}),this._fire(D,{evt:U})},G.prototype._mouseup=function(U){if(i.Konva.UA.ieMobile)return this._touchend(U);this.setPointersPositions(U);var oe=t.Util._getFirstPointerId(U),ae=this.getIntersection(this.getPointerPosition()),fe=this.clickStartShape,we=this.clickEndShape,ve=!1;i.Konva.inDblClickWindow?(ve=!0,clearTimeout(this.dblTimeout)):s.DD.justDragged||(i.Konva.inDblClickWindow=!0,clearTimeout(this.dblTimeout)),this.dblTimeout=setTimeout(function(){i.Konva.inDblClickWindow=!1},i.Konva.dblClickWindow),ae&&ae.isListening()?(this.clickEndShape=ae,ae._fireAndBubble(y,{evt:U,pointerId:oe}),i.Konva.listenClickTap&&fe&&fe._id===ae._id&&(ae._fireAndBubble(R,{evt:U,pointerId:oe}),ve&&we&&we===ae&&ae._fireAndBubble(M,{evt:U,pointerId:oe}))):(this.clickEndShape=null,this._fire(y,{evt:U,target:this,currentTarget:this,pointerId:oe}),i.Konva.listenClickTap&&this._fire(R,{evt:U,target:this,currentTarget:this,pointerId:oe}),ve&&this._fire(M,{evt:U,target:this,currentTarget:this,pointerId:oe})),this._fire(I,{evt:U}),i.Konva.listenClickTap&&(this._fire(L,{evt:U}),ve&&this._fire(H,{evt:U})),i.Konva.listenClickTap=!1,U.cancelable&&U.preventDefault()},G.prototype._contextmenu=function(U){this.setPointersPositions(U);var oe=this.getIntersection(this.getPointerPosition());oe&&oe.isListening()?oe._fireAndBubble(T,{evt:U}):this._fire(T,{evt:U,target:this,currentTarget:this}),this._fire(F,{evt:U})},G.prototype._touchstart=function(U){var oe=this;this.setPointersPositions(U);var ae=!1;this._changedPointerPositions.forEach(function(fe){var we=oe.getIntersection(fe);i.Konva.listenClickTap=!0,s.DD.justDragged=!1;var ve=we&&we.isListening();ve&&(i.Konva.captureTouchEventsEnabled&&we.setPointerCapture(fe.id),oe.tapStartShape=we,we._fireAndBubble(N,{evt:U,pointerId:fe.id},oe),ae=!0,we.isListening()&&we.preventDefault()&&U.cancelable&&U.preventDefault())}),ae||this._fire(N,{evt:U,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),this._fire(j,{evt:U})},G.prototype._touchmove=function(U){var oe=this;this.setPointersPositions(U);var ae=!s.DD.isDragging||i.Konva.hitOnDragEnabled;if(ae){var fe=!1,we={};this._changedPointerPositions.forEach(function(ve){var Te=l.getCapturedShape(ve.id)||oe.getIntersection(ve),Fe=Te&&Te.isListening();Fe&&(we[Te._id]||(we[Te._id]=!0,Te._fireAndBubble(Q,{evt:U,pointerId:ve.id}),fe=!0,Te.isListening()&&Te.preventDefault()&&U.cancelable&&U.preventDefault()))}),fe||this._fire(Q,{evt:U,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),this._fire(ce,{evt:U})}s.DD.isDragging&&s.DD.node.preventDefault()&&U.cancelable&&U.preventDefault()},G.prototype._touchend=function(U){var oe=this;this.setPointersPositions(U);var ae=this.tapEndShape,fe=!1;i.Konva.inDblClickWindow?(fe=!0,clearTimeout(this.dblTimeout)):s.DD.justDragged||(i.Konva.inDblClickWindow=!0,clearTimeout(this.dblTimeout)),this.dblTimeout=setTimeout(function(){i.Konva.inDblClickWindow=!1},i.Konva.dblClickWindow);var we=!1,ve={},Te=!1,Fe=!1;this._changedPointerPositions.forEach(function(qe){var Be=l.getCapturedShape(qe.id)||oe.getIntersection(qe);Be&&Be.releaseCapture(qe.id);var et=Be&&Be.isListening();et&&(ve[Be._id]||(ve[Be._id]=!0,oe.tapEndShape=Be,Be._fireAndBubble(B,{evt:U,pointerId:qe.id}),we=!0,i.Konva.listenClickTap&&Be===oe.tapStartShape&&(Te=!0,Be._fireAndBubble(q,{evt:U,pointerId:qe.id}),fe&&ae&&ae===Be&&(Fe=!0,Be._fireAndBubble(Z,{evt:U,pointerId:qe.id}))),Be.isListening()&&Be.preventDefault()&&U.cancelable&&U.preventDefault()))}),we||this._fire(B,{evt:U,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),i.Konva.listenClickTap&&!Te&&(this.tapEndShape=null,this._fire(q,{evt:U,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})),fe&&!Fe&&this._fire(Z,{evt:U,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),this._fire(W,{evt:U}),i.Konva.listenClickTap&&(this._fire(se,{evt:U}),fe&&this._fire(re,{evt:U})),this.preventDefault()&&U.cancelable&&U.preventDefault(),i.Konva.listenClickTap=!1},G.prototype._wheel=function(U){this.setPointersPositions(U);var oe=this.getIntersection(this.getPointerPosition());oe&&oe.isListening()?oe._fireAndBubble(Y,{evt:U}):this._fire(Y,{evt:U,target:this,currentTarget:this}),this._fire(ge,{evt:U})},G.prototype._pointerdown=function(U){if(i.Konva._pointerEventsEnabled){this.setPointersPositions(U);var oe=l.getCapturedShape(U.pointerId)||this.getIntersection(this.getPointerPosition());oe&&oe._fireAndBubble(C,l.createEvent(U))}},G.prototype._pointermove=function(U){if(i.Konva._pointerEventsEnabled){this.setPointersPositions(U);var oe=l.getCapturedShape(U.pointerId)||this.getIntersection(this.getPointerPosition());oe&&oe._fireAndBubble(x,l.createEvent(U))}},G.prototype._pointerup=function(U){if(i.Konva._pointerEventsEnabled){this.setPointersPositions(U);var oe=l.getCapturedShape(U.pointerId)||this.getIntersection(this.getPointerPosition());oe&&oe._fireAndBubble(E,l.createEvent(U)),l.releaseCapture(U.pointerId)}},G.prototype._pointercancel=function(U){if(i.Konva._pointerEventsEnabled){this.setPointersPositions(U);var oe=l.getCapturedShape(U.pointerId)||this.getIntersection(this.getPointerPosition());oe&&oe._fireAndBubble(E,l.createEvent(U)),l.releaseCapture(U.pointerId)}},G.prototype._lostpointercapture=function(U){l.releaseCapture(U.pointerId)},G.prototype.setPointersPositions=function(U){var oe=this,ae=this._getContentPosition(),fe=null,we=null;U=U||window.event,U.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],t.Collection.prototype.each.call(U.touches,function(ve){oe._pointerPositions.push({id:ve.identifier,x:(ve.clientX-ae.left)/ae.scaleX,y:(ve.clientY-ae.top)/ae.scaleY})}),t.Collection.prototype.each.call(U.changedTouches||U.touches,function(ve){oe._changedPointerPositions.push({id:ve.identifier,x:(ve.clientX-ae.left)/ae.scaleX,y:(ve.clientY-ae.top)/ae.scaleY})})):(fe=(U.clientX-ae.left)/ae.scaleX,we=(U.clientY-ae.top)/ae.scaleY,this.pointerPos={x:fe,y:we},this._pointerPositions=[{x:fe,y:we,id:t.Util._getFirstPointerId(U)}],this._changedPointerPositions=[{x:fe,y:we,id:t.Util._getFirstPointerId(U)}])},G.prototype._setPointerPosition=function(U){t.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(U)},G.prototype._getContentPosition=function(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var U=this.content.getBoundingClientRect();return{top:U.top,left:U.left,scaleX:U.width/this.content.clientWidth||1,scaleY:U.height/this.content.clientHeight||1}},G.prototype._buildDOM=function(){if(this.bufferCanvas=new o.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new o.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!!i.Konva.isBrowser){var U=this.container();if(!U)throw"Stage has no container. A container is required.";U.innerHTML=ne,this.content=document.createElement("div"),this.content.style.position=Pe,this.content.style.userSelect="none",this.content.className=Oe,this.content.setAttribute("role","presentation"),U.appendChild(this.content),this._resizeDOM()}},G.prototype.cache=function(){return t.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this},G.prototype.clearCache=function(){return this},G.prototype.batchDraw=function(){return this.children.each(function(U){U.batchDraw()}),this},G}(a.Container);r.Stage=De,De.prototype.nodeType=c,u._registerNode(De),n.Factory.addGetterSetter(De,"container")})(zE);var os={},mr={};(function(r){var e=Ve&&Ve.__extends||function(){var T=function(R,M){return T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,B){N.__proto__=B}||function(N,B){for(var q in B)Object.prototype.hasOwnProperty.call(B,q)&&(N[q]=B[q])},T(R,M)};return function(R,M){T(R,M);function N(){this.constructor=R}R.prototype=M===null?Object.create(M):(N.prototype=M.prototype,new N)}}();Object.defineProperty(r,"__esModule",{value:!0}),r.Shape=r.shapes=void 0;var t=wt,n=ft,a=sr,i=Ze,o=dt,s=Xr,u="hasShadow",l="shadowRGBA",c="patternImage",f="linearGradient",d="radialGradient",h;function v(){return h||(h=t.Util.createCanvasElement().getContext("2d"),h)}r.shapes={};function m(T){T.fill()}function _(T){T.stroke()}function b(T){T.fill()}function w(T){T.stroke()}function y(){this._clearCache(u)}function x(){this._clearCache(l)}function C(){this._clearCache(c)}function E(){this._clearCache(f)}function p(){this._clearCache(d)}var P=function(T){e(R,T);function R(M){for(var N=T.call(this,M)||this,B;B=t.Util.getRandomColor(),!(B&&!(B in r.shapes)););return N.colorKey=B,r.shapes[B]=N,N}return R.prototype.getContext=function(){return this.getLayer().getContext()},R.prototype.getCanvas=function(){return this.getLayer().getCanvas()},R.prototype.getSceneFunc=function(){return this.attrs.sceneFunc||this._sceneFunc},R.prototype.getHitFunc=function(){return this.attrs.hitFunc||this._hitFunc},R.prototype.hasShadow=function(){return this._getCache(u,this._hasShadow)},R.prototype._hasShadow=function(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())},R.prototype._getFillPattern=function(){return this._getCache(c,this.__getFillPattern)},R.prototype.__getFillPattern=function(){if(this.fillPatternImage()){var M=v(),N=M.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");return N&&N.setTransform&&N.setTransform({a:this.fillPatternScaleX(),b:0,c:0,d:this.fillPatternScaleY(),e:0,f:0}),N}},R.prototype._getLinearGradient=function(){return this._getCache(f,this.__getLinearGradient)},R.prototype.__getLinearGradient=function(){var M=this.fillLinearGradientColorStops();if(M){for(var N=v(),B=this.fillLinearGradientStartPoint(),q=this.fillLinearGradientEndPoint(),Z=N.createLinearGradient(B.x,B.y,q.x,q.y),Q=0;Q<M.length;Q+=2)Z.addColorStop(M[Q],M[Q+1]);return Z}},R.prototype._getRadialGradient=function(){return this._getCache(d,this.__getRadialGradient)},R.prototype.__getRadialGradient=function(){var M=this.fillRadialGradientColorStops();if(M){for(var N=v(),B=this.fillRadialGradientStartPoint(),q=this.fillRadialGradientEndPoint(),Z=N.createRadialGradient(B.x,B.y,this.fillRadialGradientStartRadius(),q.x,q.y,this.fillRadialGradientEndRadius()),Q=0;Q<M.length;Q+=2)Z.addColorStop(M[Q],M[Q+1]);return Z}},R.prototype.getShadowRGBA=function(){return this._getCache(l,this._getShadowRGBA)},R.prototype._getShadowRGBA=function(){if(this.hasShadow()){var M=t.Util.colorToRGBA(this.shadowColor());return"rgba("+M.r+","+M.g+","+M.b+","+M.a*(this.shadowOpacity()||1)+")"}},R.prototype.hasFill=function(){var M=this;return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],function(){return M.fillEnabled()&&!!(M.fill()||M.fillPatternImage()||M.fillLinearGradientColorStops()||M.fillRadialGradientColorStops())})},R.prototype.hasStroke=function(){var M=this;return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],function(){return M.strokeEnabled()&&M.strokeWidth()&&!!(M.stroke()||M.strokeLinearGradientColorStops())})},R.prototype.hasHitStroke=function(){var M=this.hitStrokeWidth();return M==="auto"?this.hasStroke():this.strokeEnabled()&&!!M},R.prototype.intersects=function(M){var N=this.getStage(),B=N.bufferHitCanvas,q;return B.getContext().clear(),this.drawHit(B,null,!0),q=B.context.getImageData(Math.round(M.x),Math.round(M.y),1,1).data,q[3]>0},R.prototype.destroy=function(){return a.Node.prototype.destroy.call(this),delete r.shapes[this.colorKey],delete this.colorKey,this},R.prototype._useBufferCanvas=function(M){var N;if(!this.getStage())return!1;var B=(N=this.attrs.perfectDrawEnabled)!==null&&N!==void 0?N:!0;if(!B)return!1;var q=M||this.hasFill(),Z=this.hasStroke(),Q=this.getAbsoluteOpacity()!==1;if(q&&Z&&Q)return!0;var Y=this.hasShadow(),J=this.shadowForStrokeEnabled();return!!(q&&Z&&Y&&J)},R.prototype.setStrokeHitEnabled=function(M){t.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),M?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)},R.prototype.getStrokeHitEnabled=function(){return this.hitStrokeWidth()!==0},R.prototype.getSelfRect=function(){var M=this.size();return{x:this._centroid?-M.width/2:0,y:this._centroid?-M.height/2:0,width:M.width,height:M.height}},R.prototype.getClientRect=function(M){M===void 0&&(M={});var N=M.skipTransform,B=M.relativeTo,q=this.getSelfRect(),Z=!M.skipStroke&&this.hasStroke(),Q=Z&&this.strokeWidth()||0,Y=q.width+Q,J=q.height+Q,X=!M.skipShadow&&this.hasShadow(),k=X?this.shadowOffsetX():0,D=X?this.shadowOffsetY():0,I=Y+Math.abs(k),F=J+Math.abs(D),L=X&&this.shadowBlur()||0,H=I+L*2,j=F+L*2,W=0;Math.round(Q/2)!==Q/2&&(W=1);var re={width:H+W,height:j+W,x:-Math.round(Q/2+L)+Math.min(k,0)+q.x,y:-Math.round(Q/2+L)+Math.min(D,0)+q.y};return N?re:this._transformedRect(re,B)},R.prototype.drawScene=function(M,N){var B=this.getLayer(),q=M||B.getCanvas(),Z=q.getContext(),Q=this._getCanvasCache(),Y=this.getSceneFunc(),J=this.hasShadow(),X,k,D,I=q.isCache,F=q.isCache,L=N===this;if(!this.isVisible()&&!I)return this;if(Q){Z.save();var H=this.getAbsoluteTransform(N).getMatrix();return Z.transform(H[0],H[1],H[2],H[3],H[4],H[5]),this._drawCachedSceneCanvas(Z),Z.restore(),this}if(!Y)return this;if(Z.save(),this._useBufferCanvas()&&!F){X=this.getStage(),k=X.bufferCanvas,D=k.getContext(),D.clear(),D.save(),D._applyLineJoin(this);var j=this.getAbsoluteTransform(N).getMatrix();D.transform(j[0],j[1],j[2],j[3],j[4],j[5]),Y.call(this,D,this),D.restore();var W=k.pixelRatio;J&&Z._applyShadow(this),Z._applyOpacity(this),Z._applyGlobalCompositeOperation(this),Z.drawImage(k._canvas,0,0,k.width/W,k.height/W)}else{if(Z._applyLineJoin(this),!L){var j=this.getAbsoluteTransform(N).getMatrix();Z.transform(j[0],j[1],j[2],j[3],j[4],j[5]),Z._applyOpacity(this),Z._applyGlobalCompositeOperation(this)}J&&Z._applyShadow(this),Y.call(this,Z,this)}return Z.restore(),this},R.prototype.drawHit=function(M,N,B){if(B===void 0&&(B=!1),!this.shouldDrawHit(N,B))return this;var q=this.getLayer(),Z=M||q.hitCanvas,Q=Z&&Z.getContext(),Y=this.hitFunc()||this.sceneFunc(),J=this._getCanvasCache(),X=J&&J.hit;if(this.colorKey||(console.log(this),t.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. See the shape in logs above. If you want to reuse shape you should call remove() instead of destroy()")),X){Q.save();var k=this.getAbsoluteTransform(N).getMatrix();return Q.transform(k[0],k[1],k[2],k[3],k[4],k[5]),this._drawCachedHitCanvas(Q),Q.restore(),this}if(!Y)return this;Q.save(),Q._applyLineJoin(this);var D=this===N;if(!D){var I=this.getAbsoluteTransform(N).getMatrix();Q.transform(I[0],I[1],I[2],I[3],I[4],I[5])}return Y.call(this,Q,this),Q.restore(),this},R.prototype.drawHitFromCache=function(M){M===void 0&&(M=0);var N=this._getCanvasCache(),B=this._getCachedSceneCanvas(),q=N.hit,Z=q.getContext(),Q=q.getWidth(),Y=q.getHeight(),J,X,k,D,I,F;Z.clear(),Z.drawImage(B._canvas,0,0,Q,Y);try{for(J=Z.getImageData(0,0,Q,Y),X=J.data,k=X.length,D=t.Util._hexToRgb(this.colorKey),I=0;I<k;I+=4)F=X[I+3],F>M?(X[I]=D.r,X[I+1]=D.g,X[I+2]=D.b,X[I+3]=255):X[I+3]=0;Z.putImageData(J,0,0)}catch(L){t.Util.error("Unable to draw hit graph from cached scene canvas. "+L.message)}return this},R.prototype.hasPointerCapture=function(M){return s.hasPointerCapture(M,this)},R.prototype.setPointerCapture=function(M){s.setPointerCapture(M,this)},R.prototype.releaseCapture=function(M){s.releaseCapture(M,this)},R}(a.Node);r.Shape=P,P.prototype._fillFunc=m,P.prototype._strokeFunc=_,P.prototype._fillFuncHit=b,P.prototype._strokeFuncHit=w,P.prototype._centroid=!1,P.prototype.nodeType="Shape",o._registerNode(P),P.prototype.eventListeners={},P.prototype.on.call(P.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",y),P.prototype.on.call(P.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",x),P.prototype.on.call(P.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva",C),P.prototype.on.call(P.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",E),P.prototype.on.call(P.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",p),n.Factory.addGetterSetter(P,"stroke",void 0,i.getStringOrGradientValidator()),n.Factory.addGetterSetter(P,"strokeWidth",2,i.getNumberValidator()),n.Factory.addGetterSetter(P,"fillAfterStrokeEnabled",!1),n.Factory.addGetterSetter(P,"hitStrokeWidth","auto",i.getNumberOrAutoValidator()),n.Factory.addGetterSetter(P,"strokeHitEnabled",!0,i.getBooleanValidator()),n.Factory.addGetterSetter(P,"perfectDrawEnabled",!0,i.getBooleanValidator()),n.Factory.addGetterSetter(P,"shadowForStrokeEnabled",!0,i.getBooleanValidator()),n.Factory.addGetterSetter(P,"lineJoin"),n.Factory.addGetterSetter(P,"lineCap"),n.Factory.addGetterSetter(P,"sceneFunc"),n.Factory.addGetterSetter(P,"hitFunc"),n.Factory.addGetterSetter(P,"dash"),n.Factory.addGetterSetter(P,"dashOffset",0,i.getNumberValidator()),n.Factory.addGetterSetter(P,"shadowColor",void 0,i.getStringValidator()),n.Factory.addGetterSetter(P,"shadowBlur",0,i.getNumberValidator()),n.Factory.addGetterSetter(P,"shadowOpacity",1,i.getNumberValidator()),n.Factory.addComponentsGetterSetter(P,"shadowOffset",["x","y"]),n.Factory.addGetterSetter(P,"shadowOffsetX",0,i.getNumberValidator()),n.Factory.addGetterSetter(P,"shadowOffsetY",0,i.getNumberValidator()),n.Factory.addGetterSetter(P,"fillPatternImage"),n.Factory.addGetterSetter(P,"fill",void 0,i.getStringOrGradientValidator()),n.Factory.addGetterSetter(P,"fillPatternX",0,i.getNumberValidator()),n.Factory.addGetterSetter(P,"fillPatternY",0,i.getNumberValidator()),n.Factory.addGetterSetter(P,"fillLinearGradientColorStops"),n.Factory.addGetterSetter(P,"strokeLinearGradientColorStops"),n.Factory.addGetterSetter(P,"fillRadialGradientStartRadius",0),n.Factory.addGetterSetter(P,"fillRadialGradientEndRadius",0),n.Factory.addGetterSetter(P,"fillRadialGradientColorStops"),n.Factory.addGetterSetter(P,"fillPatternRepeat","repeat"),n.Factory.addGetterSetter(P,"fillEnabled",!0),n.Factory.addGetterSetter(P,"strokeEnabled",!0),n.Factory.addGetterSetter(P,"shadowEnabled",!0),n.Factory.addGetterSetter(P,"dashEnabled",!0),n.Factory.addGetterSetter(P,"strokeScaleEnabled",!0),n.Factory.addGetterSetter(P,"fillPriority","color"),n.Factory.addComponentsGetterSetter(P,"fillPatternOffset",["x","y"]),n.Factory.addGetterSetter(P,"fillPatternOffsetX",0,i.getNumberValidator()),n.Factory.addGetterSetter(P,"fillPatternOffsetY",0,i.getNumberValidator()),n.Factory.addComponentsGetterSetter(P,"fillPatternScale",["x","y"]),n.Factory.addGetterSetter(P,"fillPatternScaleX",1,i.getNumberValidator()),n.Factory.addGetterSetter(P,"fillPatternScaleY",1,i.getNumberValidator()),n.Factory.addComponentsGetterSetter(P,"fillLinearGradientStartPoint",["x","y"]),n.Factory.addComponentsGetterSetter(P,"strokeLinearGradientStartPoint",["x","y"]),n.Factory.addGetterSetter(P,"fillLinearGradientStartPointX",0),n.Factory.addGetterSetter(P,"strokeLinearGradientStartPointX",0),n.Factory.addGetterSetter(P,"fillLinearGradientStartPointY",0),n.Factory.addGetterSetter(P,"strokeLinearGradientStartPointY",0),n.Factory.addComponentsGetterSetter(P,"fillLinearGradientEndPoint",["x","y"]),n.Factory.addComponentsGetterSetter(P,"strokeLinearGradientEndPoint",["x","y"]),n.Factory.addGetterSetter(P,"fillLinearGradientEndPointX",0),n.Factory.addGetterSetter(P,"strokeLinearGradientEndPointX",0),n.Factory.addGetterSetter(P,"fillLinearGradientEndPointY",0),n.Factory.addGetterSetter(P,"strokeLinearGradientEndPointY",0),n.Factory.addComponentsGetterSetter(P,"fillRadialGradientStartPoint",["x","y"]),n.Factory.addGetterSetter(P,"fillRadialGradientStartPointX",0),n.Factory.addGetterSetter(P,"fillRadialGradientStartPointY",0),n.Factory.addComponentsGetterSetter(P,"fillRadialGradientEndPoint",["x","y"]),n.Factory.addGetterSetter(P,"fillRadialGradientEndPointX",0),n.Factory.addGetterSetter(P,"fillRadialGradientEndPointY",0),n.Factory.addGetterSetter(P,"fillPatternRotation",0),n.Factory.backCompat(P,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"}),t.Collection.mapMethods(P)})(mr);var UF=Ve&&Ve.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(os,"__esModule",{value:!0});os.Layer=void 0;var Hn=wt,Lp=ui,Si=sr,sy=ft,mx=yn,HF=Ze,jF=mr,WF=dt,KF="#",YF="beforeDraw",XF="draw",VE=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],ZF=VE.length,li=function(r){UF(e,r);function e(t){var n=r.call(this,t)||this;return n.canvas=new mx.SceneCanvas,n.hitCanvas=new mx.HitCanvas({pixelRatio:1}),n._waitingForDraw=!1,n.on("visibleChange.konva",n._checkVisibility),n._checkVisibility(),n.on("imageSmoothingEnabledChange.konva",n._setSmoothEnabled),n._setSmoothEnabled(),n}return e.prototype.createPNGStream=function(){var t=this.canvas._canvas;return t.createPNGStream()},e.prototype.getCanvas=function(){return this.canvas},e.prototype.getHitCanvas=function(){return this.hitCanvas},e.prototype.getContext=function(){return this.getCanvas().getContext()},e.prototype.clear=function(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this},e.prototype.setZIndex=function(t){r.prototype.setZIndex.call(this,t);var n=this.getStage();return n&&(n.content.removeChild(this.getCanvas()._canvas),t<n.children.length-1?n.content.insertBefore(this.getCanvas()._canvas,n.children[t+1].getCanvas()._canvas):n.content.appendChild(this.getCanvas()._canvas)),this},e.prototype.moveToTop=function(){Si.Node.prototype.moveToTop.call(this);var t=this.getStage();return t&&(t.content.removeChild(this.getCanvas()._canvas),t.content.appendChild(this.getCanvas()._canvas)),!0},e.prototype.moveUp=function(){var t=Si.Node.prototype.moveUp.call(this);if(!t)return!1;var n=this.getStage();return n?(n.content.removeChild(this.getCanvas()._canvas),this.index<n.children.length-1?n.content.insertBefore(this.getCanvas()._canvas,n.children[this.index+1].getCanvas()._canvas):n.content.appendChild(this.getCanvas()._canvas),!0):!1},e.prototype.moveDown=function(){if(Si.Node.prototype.moveDown.call(this)){var t=this.getStage();if(t){var n=t.children;t.content.removeChild(this.getCanvas()._canvas),t.content.insertBefore(this.getCanvas()._canvas,n[this.index+1].getCanvas()._canvas)}return!0}return!1},e.prototype.moveToBottom=function(){if(Si.Node.prototype.moveToBottom.call(this)){var t=this.getStage();if(t){var n=t.children;t.content.removeChild(this.getCanvas()._canvas),t.content.insertBefore(this.getCanvas()._canvas,n[1].getCanvas()._canvas)}return!0}return!1},e.prototype.getLayer=function(){return this},e.prototype.remove=function(){var t=this.getCanvas()._canvas;return Si.Node.prototype.remove.call(this),t&&t.parentNode&&Hn.Util._isInDocument(t)&&t.parentNode.removeChild(t),this},e.prototype.getStage=function(){return this.parent},e.prototype.setSize=function(t){var n=t.width,a=t.height;return this.canvas.setSize(n,a),this.hitCanvas.setSize(n,a),this._setSmoothEnabled(),this},e.prototype._validateAdd=function(t){var n=t.getType();n!=="Group"&&n!=="Shape"&&Hn.Util.throw("You may only add groups and shapes to a layer.")},e.prototype._toKonvaCanvas=function(t){return t=t||{},t.width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=t.x!==void 0?t.x:this.x(),t.y=t.y!==void 0?t.y:this.y(),Si.Node.prototype._toKonvaCanvas.call(this,t)},e.prototype._checkVisibility=function(){var t=this.visible();t?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"},e.prototype._setSmoothEnabled=function(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()},e.prototype.getWidth=function(){if(this.parent)return this.parent.width()},e.prototype.setWidth=function(){Hn.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')},e.prototype.getHeight=function(){if(this.parent)return this.parent.height()},e.prototype.setHeight=function(){Hn.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')},e.prototype.batchDraw=function(){var t=this;return this._waitingForDraw||(this._waitingForDraw=!0,Hn.Util.requestAnimFrame(function(){t.draw(),t._waitingForDraw=!1})),this},e.prototype.getIntersection=function(t,n){if(!this.isListening()||!this.isVisible())return null;for(var a=1,i=!1;;){for(var o=0;o<ZF;o++){var s=VE[o],u=this._getIntersection({x:t.x+s.x*a,y:t.y+s.y*a}),l=u.shape;if(l&&n)return l.findAncestor(n,!0);if(l)return l;if(i=!!u.antialiased,!u.antialiased)break}if(i)a+=1;else return null}},e.prototype._getIntersection=function(t){var n=this.hitCanvas.pixelRatio,a=this.hitCanvas.context.getImageData(Math.round(t.x*n),Math.round(t.y*n),1,1).data,i=a[3];if(i===255){var o=Hn.Util._rgbToHex(a[0],a[1],a[2]),s=jF.shapes[KF+o];return s?{shape:s}:{antialiased:!0}}else if(i>0)return{antialiased:!0};return{}},e.prototype.drawScene=function(t,n){var a=this.getLayer(),i=t||a&&a.getCanvas();return this._fire(YF,{node:this}),this.clearBeforeDraw()&&i.getContext().clear(),Lp.Container.prototype.drawScene.call(this,i,n),this._fire(XF,{node:this}),this},e.prototype.drawHit=function(t,n){var a=this.getLayer(),i=t||a&&a.hitCanvas;return a&&a.clearBeforeDraw()&&a.getHitCanvas().getContext().clear(),Lp.Container.prototype.drawHit.call(this,i,n),this},e.prototype.enableHitGraph=function(){return this.hitGraphEnabled(!0),this},e.prototype.disableHitGraph=function(){return this.hitGraphEnabled(!1),this},e.prototype.setHitGraphEnabled=function(t){Hn.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)},e.prototype.getHitGraphEnabled=function(t){return Hn.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()},e.prototype.toggleHitCanvas=function(){if(this.parent){var t=this.parent,n=!!this.hitCanvas._canvas.parentNode;n?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}},e}(Lp.Container);os.Layer=li;li.prototype.nodeType="Layer";WF._registerNode(li);sy.Factory.addGetterSetter(li,"imageSmoothingEnabled",!0);sy.Factory.addGetterSetter(li,"clearBeforeDraw",!0);sy.Factory.addGetterSetter(li,"hitGraphEnabled",!0,HF.getBooleanValidator());Hn.Collection.mapMethods(li);var Xu={},QF=Ve&&Ve.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Xu,"__esModule",{value:!0});Xu.FastLayer=void 0;var UE=wt,JF=os,eB=dt,Zu=function(r){QF(e,r);function e(t){var n=r.call(this,t)||this;return n.listening(!1),UE.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.'),n}return e}(JF.Layer);Xu.FastLayer=Zu;Zu.prototype.nodeType="FastLayer";eB._registerNode(Zu);UE.Collection.mapMethods(Zu);var no={},tB=Ve&&Ve.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(no,"__esModule",{value:!0});no.Group=void 0;var HE=wt,rB=ui,nB=dt,Qu=function(r){tB(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._validateAdd=function(t){var n=t.getType();n!=="Group"&&n!=="Shape"&&HE.Util.throw("You may only add groups and shapes to groups.")},e}(rB.Container);no.Group=Qu;Qu.prototype.nodeType="Group";nB._registerNode(Qu);HE.Collection.mapMethods(Qu);var ao={};Object.defineProperty(ao,"__esModule",{value:!0});ao.Animation=void 0;var Np=dt,Fp=function(){return Np.glob.performance&&Np.glob.performance.now?function(){return Np.glob.performance.now()}:function(){return new Date().getTime()}}(),aB=function(){function r(e,t){this.id=r.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:Fp(),frameRate:0},this.func=e,this.setLayers(t)}return r.prototype.setLayers=function(e){var t=[];return e?e.length>0?t=e:t=[e]:t=[],this.layers=t,this},r.prototype.getLayers=function(){return this.layers},r.prototype.addLayer=function(e){var t=this.layers,n=t.length,a;for(a=0;a<n;a++)if(t[a]._id===e._id)return!1;return this.layers.push(e),!0},r.prototype.isRunning=function(){var e=r,t=e.animations,n=t.length,a;for(a=0;a<n;a++)if(t[a].id===this.id)return!0;return!1},r.prototype.start=function(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=Fp(),r._addAnimation(this),this},r.prototype.stop=function(){return r._removeAnimation(this),this},r.prototype._updateFrameObject=function(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff},r._addAnimation=function(e){this.animations.push(e),this._handleAnimation()},r._removeAnimation=function(e){var t=e.id,n=this.animations,a=n.length,i;for(i=0;i<a;i++)if(n[i].id===t){this.animations.splice(i,1);break}},r._runFrames=function(){var e={},t=this.animations,n,a,i,o,s,u,l,c,f;for(o=0;o<t.length;o++)if(n=t[o],a=n.layers,i=n.func,n._updateFrameObject(Fp()),u=a.length,i?f=i.call(n,n.frame)!==!1:f=!0,!!f)for(s=0;s<u;s++)l=a[s],l._id!==void 0&&(e[l._id]=l);for(c in e)e.hasOwnProperty(c)&&e[c].draw()},r._animationLoop=function(){var e=r;e.animations.length?(e._runFrames(),requestAnimationFrame(e._animationLoop)):e.animRunning=!1},r._handleAnimation=function(){this.animRunning||(this.animRunning=!0,requestAnimationFrame(this._animationLoop))},r.animations=[],r.animIdCounter=0,r.animRunning=!1,r}();ao.Animation=aB;var jE={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Easings=r.Tween=void 0;var e=wt,t=ao,n=sr,a=dt,i={node:1,duration:1,easing:1,onFinish:1,yoyo:1},o=1,s=2,u=3,l=0,c=["fill","stroke","shadowColor"],f=function(){function h(v,m,_,b,w,y,x){this.prop=v,this.propFunc=m,this.begin=b,this._pos=b,this.duration=y,this._change=0,this.prevPos=0,this.yoyo=x,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=_,this._change=w-this.begin,this.pause()}return h.prototype.fire=function(v){var m=this[v];m&&m()},h.prototype.setTime=function(v){v>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():v<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=v,this.update())},h.prototype.getTime=function(){return this._time},h.prototype.setPosition=function(v){this.prevPos=this._pos,this.propFunc(v),this._pos=v},h.prototype.getPosition=function(v){return v===void 0&&(v=this._time),this.func(v,this.begin,this._change,this.duration)},h.prototype.play=function(){this.state=s,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")},h.prototype.reverse=function(){this.state=u,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")},h.prototype.seek=function(v){this.pause(),this._time=v,this.update(),this.fire("onSeek")},h.prototype.reset=function(){this.pause(),this._time=0,this.update(),this.fire("onReset")},h.prototype.finish=function(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")},h.prototype.update=function(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")},h.prototype.onEnterFrame=function(){var v=this.getTimer()-this._startTime;this.state===s?this.setTime(v):this.state===u&&this.setTime(this.duration-v)},h.prototype.pause=function(){this.state=o,this.fire("onPause")},h.prototype.getTimer=function(){return new Date().getTime()},h}(),d=function(){function h(v){var m=this,_=v.node,b=_._id,w,y=v.easing||r.Easings.Linear,x=!!v.yoyo,C;typeof v.duration>"u"?w=.3:v.duration===0?w=.001:w=v.duration,this.node=_,this._id=l++;var E=_.getLayer()||(_ instanceof a.Konva.Stage?_.getLayers():null);E||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new t.Animation(function(){m.tween.onEnterFrame()},E),this.tween=new f(C,function(p){m._tweenFunc(p)},y,0,1,w*1e3,x),this._addListeners(),h.attrs[b]||(h.attrs[b]={}),h.attrs[b][this._id]||(h.attrs[b][this._id]={}),h.tweens[b]||(h.tweens[b]={});for(C in v)i[C]===void 0&&this._addAttr(C,v[C]);this.reset(),this.onFinish=v.onFinish,this.onReset=v.onReset,this.onUpdate=v.onUpdate}return h.prototype._addAttr=function(v,m){var _=this.node,b=_._id,w,y,x,C,E,p,P,T;if(x=h.tweens[b][v],x&&delete h.attrs[b][x][v],w=_.getAttr(v),e.Util._isArray(m))if(y=[],E=Math.max(m.length,w.length),v==="points"&&m.length!==w.length&&(m.length>w.length?(P=w,w=e.Util._prepareArrayForTween(w,m,_.closed())):(p=m,m=e.Util._prepareArrayForTween(m,w,_.closed()))),v.indexOf("fill")===0)for(C=0;C<E;C++)if(C%2===0)y.push(m[C]-w[C]);else{var R=e.Util.colorToRGBA(w[C]);T=e.Util.colorToRGBA(m[C]),w[C]=R,y.push({r:T.r-R.r,g:T.g-R.g,b:T.b-R.b,a:T.a-R.a})}else for(C=0;C<E;C++)y.push(m[C]-w[C]);else c.indexOf(v)!==-1?(w=e.Util.colorToRGBA(w),T=e.Util.colorToRGBA(m),y={r:T.r-w.r,g:T.g-w.g,b:T.b-w.b,a:T.a-w.a}):y=m-w;h.attrs[b][this._id][v]={start:w,diff:y,end:m,trueEnd:p,trueStart:P},h.tweens[b][v]=this._id},h.prototype._tweenFunc=function(v){var m=this.node,_=h.attrs[m._id][this._id],b,w,y,x,C,E,p,P;for(b in _){if(w=_[b],y=w.start,x=w.diff,P=w.end,e.Util._isArray(y))if(C=[],p=Math.max(y.length,P.length),b.indexOf("fill")===0)for(E=0;E<p;E++)E%2===0?C.push((y[E]||0)+x[E]*v):C.push("rgba("+Math.round(y[E].r+x[E].r*v)+","+Math.round(y[E].g+x[E].g*v)+","+Math.round(y[E].b+x[E].b*v)+","+(y[E].a+x[E].a*v)+")");else for(E=0;E<p;E++)C.push((y[E]||0)+x[E]*v);else c.indexOf(b)!==-1?C="rgba("+Math.round(y.r+x.r*v)+","+Math.round(y.g+x.g*v)+","+Math.round(y.b+x.b*v)+","+(y.a+x.a*v)+")":C=y+x*v;m.setAttr(b,C)}},h.prototype._addListeners=function(){var v=this;this.tween.onPlay=function(){v.anim.start()},this.tween.onReverse=function(){v.anim.start()},this.tween.onPause=function(){v.anim.stop()},this.tween.onFinish=function(){var m=v.node,_=h.attrs[m._id][v._id];_.points&&_.points.trueEnd&&m.setAttr("points",_.points.trueEnd),v.onFinish&&v.onFinish.call(v)},this.tween.onReset=function(){var m=v.node,_=h.attrs[m._id][v._id];_.points&&_.points.trueStart&&m.points(_.points.trueStart),v.onReset&&v.onReset()},this.tween.onUpdate=function(){v.onUpdate&&v.onUpdate.call(v)}},h.prototype.play=function(){return this.tween.play(),this},h.prototype.reverse=function(){return this.tween.reverse(),this},h.prototype.reset=function(){return this.tween.reset(),this},h.prototype.seek=function(v){return this.tween.seek(v*1e3),this},h.prototype.pause=function(){return this.tween.pause(),this},h.prototype.finish=function(){return this.tween.finish(),this},h.prototype.destroy=function(){var v=this.node._id,m=this._id,_=h.tweens[v],b;this.pause();for(b in _)delete h.tweens[v][b];delete h.attrs[v][m]},h.attrs={},h.tweens={},h}();r.Tween=d,n.Node.prototype.to=function(h){var v=h.onFinish;h.node=this,h.onFinish=function(){this.destroy(),v&&v()};var m=new d(h);m.play()},r.Easings={BackEaseIn:function(h,v,m,_){var b=1.70158;return m*(h/=_)*h*((b+1)*h-b)+v},BackEaseOut:function(h,v,m,_){var b=1.70158;return m*((h=h/_-1)*h*((b+1)*h+b)+1)+v},BackEaseInOut:function(h,v,m,_){var b=1.70158;return(h/=_/2)<1?m/2*(h*h*(((b*=1.525)+1)*h-b))+v:m/2*((h-=2)*h*(((b*=1.525)+1)*h+b)+2)+v},ElasticEaseIn:function(h,v,m,_,b,w){var y=0;return h===0?v:(h/=_)===1?v+m:(w||(w=_*.3),!b||b<Math.abs(m)?(b=m,y=w/4):y=w/(2*Math.PI)*Math.asin(m/b),-(b*Math.pow(2,10*(h-=1))*Math.sin((h*_-y)*(2*Math.PI)/w))+v)},ElasticEaseOut:function(h,v,m,_,b,w){var y=0;return h===0?v:(h/=_)===1?v+m:(w||(w=_*.3),!b||b<Math.abs(m)?(b=m,y=w/4):y=w/(2*Math.PI)*Math.asin(m/b),b*Math.pow(2,-10*h)*Math.sin((h*_-y)*(2*Math.PI)/w)+m+v)},ElasticEaseInOut:function(h,v,m,_,b,w){var y=0;return h===0?v:(h/=_/2)===2?v+m:(w||(w=_*(.3*1.5)),!b||b<Math.abs(m)?(b=m,y=w/4):y=w/(2*Math.PI)*Math.asin(m/b),h<1?-.5*(b*Math.pow(2,10*(h-=1))*Math.sin((h*_-y)*(2*Math.PI)/w))+v:b*Math.pow(2,-10*(h-=1))*Math.sin((h*_-y)*(2*Math.PI)/w)*.5+m+v)},BounceEaseOut:function(h,v,m,_){return(h/=_)<1/2.75?m*(7.5625*h*h)+v:h<2/2.75?m*(7.5625*(h-=1.5/2.75)*h+.75)+v:h<2.5/2.75?m*(7.5625*(h-=2.25/2.75)*h+.9375)+v:m*(7.5625*(h-=2.625/2.75)*h+.984375)+v},BounceEaseIn:function(h,v,m,_){return m-r.Easings.BounceEaseOut(_-h,0,m,_)+v},BounceEaseInOut:function(h,v,m,_){return h<_/2?r.Easings.BounceEaseIn(h*2,0,m,_)*.5+v:r.Easings.BounceEaseOut(h*2-_,0,m,_)*.5+m*.5+v},EaseIn:function(h,v,m,_){return m*(h/=_)*h+v},EaseOut:function(h,v,m,_){return-m*(h/=_)*(h-2)+v},EaseInOut:function(h,v,m,_){return(h/=_/2)<1?m/2*h*h+v:-m/2*(--h*(h-2)-1)+v},StrongEaseIn:function(h,v,m,_){return m*(h/=_)*h*h*h*h+v},StrongEaseOut:function(h,v,m,_){return m*((h=h/_-1)*h*h*h*h+1)+v},StrongEaseInOut:function(h,v,m,_){return(h/=_/2)<1?m/2*h*h*h*h*h+v:m/2*((h-=2)*h*h*h*h+2)+v},Linear:function(h,v,m,_){return m*h/_+v}}})(jE);Object.defineProperty(Hu,"__esModule",{value:!0});Hu.Konva=void 0;var iB=dt,Ms=wt,Bp=sr,oB=ui,bx=zE,sB=os,uB=Xu,lB=no,cB=Ku,wx=mr,fB=ao,_x=jE,dB=Wn,hB=yn;Hu.Konva=Ms.Util._assign(iB.Konva,{Collection:Ms.Collection,Util:Ms.Util,Transform:Ms.Transform,Node:Bp.Node,ids:Bp.ids,names:Bp.names,Container:oB.Container,Stage:bx.Stage,stages:bx.stages,Layer:sB.Layer,FastLayer:uB.FastLayer,Group:lB.Group,DD:cB.DD,Shape:wx.Shape,shapes:wx.shapes,Animation:fB.Animation,Tween:_x.Tween,Easings:_x.Easings,Context:dB.Context,Canvas:hB.Canvas});var Ju={},vB=Ve&&Ve.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Ju,"__esModule",{value:!0});Ju.Arc=void 0;var pB=wt,el=ft,gB=mr,yB=dt,tl=Ze,mB=dt,Bn=function(r){vB(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._sceneFunc=function(t){var n=yB.Konva.getAngle(this.angle()),a=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,n,a),t.arc(0,0,this.innerRadius(),n,0,!a),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return this.outerRadius()*2},e.prototype.getHeight=function(){return this.outerRadius()*2},e.prototype.setWidth=function(t){this.outerRadius(t/2)},e.prototype.setHeight=function(t){this.outerRadius(t/2)},e}(gB.Shape);Ju.Arc=Bn;Bn.prototype._centroid=!0;Bn.prototype.className="Arc";Bn.prototype._attrsAffectingSize=["innerRadius","outerRadius"];mB._registerNode(Bn);el.Factory.addGetterSetter(Bn,"innerRadius",0,tl.getNumberValidator());el.Factory.addGetterSetter(Bn,"outerRadius",0,tl.getNumberValidator());el.Factory.addGetterSetter(Bn,"angle",0,tl.getNumberValidator());el.Factory.addGetterSetter(Bn,"clockwise",!1,tl.getBooleanValidator());pB.Collection.mapMethods(Bn);var rl={},ss={},bB=Ve&&Ve.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),wB=Ve&&Ve.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),a=0,e=0;e<t;e++)for(var i=arguments[e],o=0,s=i.length;o<s;o++,a++)n[a]=i[o];return n};Object.defineProperty(ss,"__esModule",{value:!0});ss.Line=void 0;var Mo=wt,nl=ft,_B=mr,WE=Ze,xB=dt,na=function(r){bB(e,r);function e(t){var n=r.call(this,t)||this;return n.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")}),n}return e.prototype._sceneFunc=function(t){var n=this.points(),a=n.length,i=this.tension(),o=this.closed(),s=this.bezier(),u,l,c;if(a){if(t.beginPath(),t.moveTo(n[0],n[1]),i!==0&&a>4){for(u=this.getTensionPoints(),l=u.length,c=o?0:4,o||t.quadraticCurveTo(u[0],u[1],u[2],u[3]);c<l-2;)t.bezierCurveTo(u[c++],u[c++],u[c++],u[c++],u[c++],u[c++]);o||t.quadraticCurveTo(u[l-2],u[l-1],n[a-2],n[a-1])}else if(s)for(c=2;c<a;)t.bezierCurveTo(n[c++],n[c++],n[c++],n[c++],n[c++],n[c++]);else for(c=2;c<a;c+=2)t.lineTo(n[c],n[c+1]);o?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}},e.prototype.getTensionPoints=function(){return this._getCache("tensionPoints",this._getTensionPoints)},e.prototype._getTensionPoints=function(){return this.closed()?this._getTensionPointsClosed():Mo.Util._expandPoints(this.points(),this.tension())},e.prototype._getTensionPointsClosed=function(){var t=this.points(),n=t.length,a=this.tension(),i=Mo.Util._getControlPoints(t[n-2],t[n-1],t[0],t[1],t[2],t[3],a),o=Mo.Util._getControlPoints(t[n-4],t[n-3],t[n-2],t[n-1],t[0],t[1],a),s=Mo.Util._expandPoints(t,a),u=[i[2],i[3]].concat(s).concat([o[0],o[1],t[n-2],t[n-1],o[2],o[3],i[0],i[1],t[0],t[1]]);return u},e.prototype.getWidth=function(){return this.getSelfRect().width},e.prototype.getHeight=function(){return this.getSelfRect().height},e.prototype.getSelfRect=function(){var t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};this.tension()!==0?t=wB([t[0],t[1]],this._getTensionPoints(),[t[t.length-2],t[t.length-1]]):t=this.points();for(var n=t[0],a=t[0],i=t[1],o=t[1],s,u,l=0;l<t.length/2;l++)s=t[l*2],u=t[l*2+1],n=Math.min(n,s),a=Math.max(a,s),i=Math.min(i,u),o=Math.max(o,u);return{x:n,y:i,width:a-n,height:o-i}},e}(_B.Shape);ss.Line=na;na.prototype.className="Line";na.prototype._attrsAffectingSize=["points","bezier","tension"];xB._registerNode(na);nl.Factory.addGetterSetter(na,"closed",!1);nl.Factory.addGetterSetter(na,"bezier",!1);nl.Factory.addGetterSetter(na,"tension",0,WE.getNumberValidator());nl.Factory.addGetterSetter(na,"points",[],WE.getNumberArrayValidator());Mo.Collection.mapMethods(na);var SB=Ve&&Ve.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(rl,"__esModule",{value:!0});rl.Arrow=void 0;var CB=wt,uy=ft,EB=ss,KE=Ze,TB=dt,ci=function(r){SB(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._sceneFunc=function(t){r.prototype._sceneFunc.call(this,t);var n=Math.PI*2,a=this.points(),i=a,o=this.tension()!==0&&a.length>4;o&&(i=this.getTensionPoints());var s=a.length,u,l;o?(u=a[s-2]-(i[i.length-2]+i[i.length-4])/2,l=a[s-1]-(i[i.length-1]+i[i.length-3])/2):(u=a[s-2]-a[s-4],l=a[s-1]-a[s-3]);var c=(Math.atan2(l,u)+n)%n,f=this.pointerLength(),d=this.pointerWidth();t.save(),t.beginPath(),t.translate(a[s-2],a[s-1]),t.rotate(c),t.moveTo(0,0),t.lineTo(-f,d/2),t.lineTo(-f,-d/2),t.closePath(),t.restore(),this.pointerAtBeginning()&&(t.save(),t.translate(a[0],a[1]),o?(u=(i[0]+i[2])/2-a[0],l=(i[1]+i[3])/2-a[1]):(u=a[2]-a[0],l=a[3]-a[1]),t.rotate((Math.atan2(-l,-u)+n)%n),t.moveTo(0,0),t.lineTo(-f,d/2),t.lineTo(-f,-d/2),t.closePath(),t.restore());var h=this.dashEnabled();h&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),h&&(this.attrs.dashEnabled=!0)},e.prototype.getSelfRect=function(){var t=r.prototype.getSelfRect.call(this),n=this.pointerWidth()/2;return{x:t.x-n,y:t.y-n,width:t.width+n*2,height:t.height+n*2}},e}(EB.Line);rl.Arrow=ci;ci.prototype.className="Arrow";TB._registerNode(ci);uy.Factory.addGetterSetter(ci,"pointerLength",10,KE.getNumberValidator());uy.Factory.addGetterSetter(ci,"pointerWidth",10,KE.getNumberValidator());uy.Factory.addGetterSetter(ci,"pointerAtBeginning",!1);CB.Collection.mapMethods(ci);var al={},PB=Ve&&Ve.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(al,"__esModule",{value:!0});al.Circle=void 0;var AB=wt,kB=ft,MB=mr,OB=Ze,DB=dt,fi=function(r){PB(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._sceneFunc=function(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return this.radius()*2},e.prototype.getHeight=function(){return this.radius()*2},e.prototype.setWidth=function(t){this.radius()!==t/2&&this.radius(t/2)},e.prototype.setHeight=function(t){this.radius()!==t/2&&this.radius(t/2)},e}(MB.Shape);al.Circle=fi;fi.prototype._centroid=!0;fi.prototype.className="Circle";fi.prototype._attrsAffectingSize=["radius"];DB._registerNode(fi);kB.Factory.addGetterSetter(fi,"radius",0,OB.getNumberValidator());AB.Collection.mapMethods(fi);var il={},RB=Ve&&Ve.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(il,"__esModule",{value:!0});il.Ellipse=void 0;var IB=wt,ly=ft,LB=mr,YE=Ze,NB=dt,aa=function(r){RB(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._sceneFunc=function(t){var n=this.radiusX(),a=this.radiusY();t.beginPath(),t.save(),n!==a&&t.scale(1,a/n),t.arc(0,0,n,0,Math.PI*2,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return this.radiusX()*2},e.prototype.getHeight=function(){return this.radiusY()*2},e.prototype.setWidth=function(t){this.radiusX(t/2)},e.prototype.setHeight=function(t){this.radiusY(t/2)},e}(LB.Shape);il.Ellipse=aa;aa.prototype.className="Ellipse";aa.prototype._centroid=!0;aa.prototype._attrsAffectingSize=["radiusX","radiusY"];NB._registerNode(aa);ly.Factory.addComponentsGetterSetter(aa,"radius",["x","y"]);ly.Factory.addGetterSetter(aa,"radiusX",0,YE.getNumberValidator());ly.Factory.addGetterSetter(aa,"radiusY",0,YE.getNumberValidator());IB.Collection.mapMethods(aa);var ol={},FB=Ve&&Ve.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(ol,"__esModule",{value:!0});ol.Image=void 0;var XE=wt,io=ft,BB=mr,sl=Ze,qB=dt,qn=function(r){FB(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._useBufferCanvas=function(){return r.prototype._useBufferCanvas.call(this,!0)},e.prototype._sceneFunc=function(t){var n=this.getWidth(),a=this.getHeight(),i=this.attrs.image,o;if(i){var s=this.attrs.cropWidth,u=this.attrs.cropHeight;s&&u?o=[i,this.cropX(),this.cropY(),s,u,0,0,n,a]:o=[i,0,0,n,a]}(this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,n,a),t.closePath(),t.fillStrokeShape(this)),i&&t.drawImage.apply(t,o)},e.prototype._hitFunc=function(t){var n=this.width(),a=this.height();t.beginPath(),t.rect(0,0,n,a),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){var t,n;return(t=this.attrs.width)!==null&&t!==void 0?t:((n=this.image())===null||n===void 0?void 0:n.width)||0},e.prototype.getHeight=function(){var t,n;return(t=this.attrs.height)!==null&&t!==void 0?t:((n=this.image())===null||n===void 0?void 0:n.height)||0},e.fromURL=function(t,n){var a=XE.Util.createImageElement();a.onload=function(){var i=new e({image:a});n(i)},a.crossOrigin="Anonymous",a.src=t},e}(BB.Shape);ol.Image=qn;qn.prototype.className="Image";qB._registerNode(qn);io.Factory.addGetterSetter(qn,"image");io.Factory.addComponentsGetterSetter(qn,"crop",["x","y","width","height"]);io.Factory.addGetterSetter(qn,"cropX",0,sl.getNumberValidator());io.Factory.addGetterSetter(qn,"cropY",0,sl.getNumberValidator());io.Factory.addGetterSetter(qn,"cropWidth",0,sl.getNumberValidator());io.Factory.addGetterSetter(qn,"cropHeight",0,sl.getNumberValidator());XE.Collection.mapMethods(qn);var Bi={},ZE=Ve&&Ve.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Bi,"__esModule",{value:!0});Bi.Tag=Bi.Label=void 0;var QE=wt,ul=ft,zB=mr,GB=no,cy=Ze,JE=dt,e2=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height"],$B="Change.konva",VB="none",fg="up",dg="right",hg="down",vg="left",UB=e2.length,ll=function(r){ZE(e,r);function e(t){var n=r.call(this,t)||this;return n.on("add.konva",function(a){this._addListeners(a.child),this._sync()}),n}return e.prototype.getText=function(){return this.find("Text")[0]},e.prototype.getTag=function(){return this.find("Tag")[0]},e.prototype._addListeners=function(t){var n=this,a,i=function(){n._sync()};for(a=0;a<UB;a++)t.on(e2[a]+$B,i)},e.prototype.getWidth=function(){return this.getText().width()},e.prototype.getHeight=function(){return this.getText().height()},e.prototype._sync=function(){var t=this.getText(),n=this.getTag(),a,i,o,s,u,l,c;if(t&&n){switch(a=t.width(),i=t.height(),o=n.pointerDirection(),s=n.pointerWidth(),c=n.pointerHeight(),u=0,l=0,o){case fg:u=a/2,l=-1*c;break;case dg:u=a+s,l=i/2;break;case hg:u=a/2,l=i+c;break;case vg:u=-1*s,l=i/2;break}n.setAttrs({x:-1*u,y:-1*l,width:a,height:i}),t.setAttrs({x:-1*u,y:-1*l})}},e}(GB.Group);Bi.Label=ll;ll.prototype.className="Label";JE._registerNode(ll);QE.Collection.mapMethods(ll);var Oa=function(r){ZE(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._sceneFunc=function(t){var n=this.width(),a=this.height(),i=this.pointerDirection(),o=this.pointerWidth(),s=this.pointerHeight(),u=this.cornerRadius(),l=0,c=0,f=0,d=0;typeof u=="number"?l=c=f=d=Math.min(u,n/2,a/2):(l=Math.min(u[0]||0,n/2,a/2),c=Math.min(u[1]||0,n/2,a/2),d=Math.min(u[2]||0,n/2,a/2),f=Math.min(u[3]||0,n/2,a/2)),t.beginPath(),t.moveTo(l,0),i===fg&&(t.lineTo((n-o)/2,0),t.lineTo(n/2,-1*s),t.lineTo((n+o)/2,0)),t.lineTo(n-c,0),t.arc(n-c,c,c,Math.PI*3/2,0,!1),i===dg&&(t.lineTo(n,(a-s)/2),t.lineTo(n+o,a/2),t.lineTo(n,(a+s)/2)),t.lineTo(n,a-d),t.arc(n-d,a-d,d,0,Math.PI/2,!1),i===hg&&(t.lineTo((n+o)/2,a),t.lineTo(n/2,a+s),t.lineTo((n-o)/2,a)),t.lineTo(f,a),t.arc(f,a-f,f,Math.PI/2,Math.PI,!1),i===vg&&(t.lineTo(0,(a+s)/2),t.lineTo(-1*o,a/2),t.lineTo(0,(a-s)/2)),t.lineTo(0,l),t.arc(l,l,l,Math.PI,Math.PI*3/2,!1),t.closePath(),t.fillStrokeShape(this)},e.prototype.getSelfRect=function(){var t=0,n=0,a=this.pointerWidth(),i=this.pointerHeight(),o=this.pointerDirection(),s=this.width(),u=this.height();return o===fg?(n-=i,u+=i):o===hg?u+=i:o===vg?(t-=a*1.5,s+=a):o===dg&&(s+=a*1.5),{x:t,y:n,width:s,height:u}},e}(zB.Shape);Bi.Tag=Oa;Oa.prototype.className="Tag";JE._registerNode(Oa);ul.Factory.addGetterSetter(Oa,"pointerDirection",VB);ul.Factory.addGetterSetter(Oa,"pointerWidth",0,cy.getNumberValidator());ul.Factory.addGetterSetter(Oa,"pointerHeight",0,cy.getNumberValidator());ul.Factory.addGetterSetter(Oa,"cornerRadius",0,cy.getNumberOrArrayOfNumbersValidator(4));QE.Collection.mapMethods(Oa);var us={},HB=Ve&&Ve.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(us,"__esModule",{value:!0});us.Path=void 0;var jB=wt,WB=ft,KB=mr,YB=dt,oo=function(r){HB(e,r);function e(t){var n=r.call(this,t)||this;n.dataArray=[],n.pathLength=0,n.dataArray=e.parsePathData(n.data()),n.pathLength=0;for(var a=0;a<n.dataArray.length;++a)n.pathLength+=n.dataArray[a].pathLength;return n.on("dataChange.konva",function(){this.dataArray=e.parsePathData(this.data()),this.pathLength=0;for(var i=0;i<this.dataArray.length;++i)this.pathLength+=this.dataArray[i].pathLength}),n}return e.prototype._sceneFunc=function(t){var n=this.dataArray;t.beginPath();for(var a=!1,i=0;i<n.length;i++){var o=n[i].command,s=n[i].points;switch(o){case"L":t.lineTo(s[0],s[1]);break;case"M":t.moveTo(s[0],s[1]);break;case"C":t.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);break;case"Q":t.quadraticCurveTo(s[0],s[1],s[2],s[3]);break;case"A":var u=s[0],l=s[1],c=s[2],f=s[3],d=s[4],h=s[5],v=s[6],m=s[7],_=c>f?c:f,b=c>f?1:c/f,w=c>f?f/c:1;t.translate(u,l),t.rotate(v),t.scale(b,w),t.arc(0,0,_,d,d+h,1-m),t.scale(1/b,1/w),t.rotate(-v),t.translate(-u,-l);break;case"z":a=!0,t.closePath();break}}!a&&!this.hasFill()?t.strokeShape(this):t.fillStrokeShape(this)},e.prototype.getSelfRect=function(){var t=[];this.dataArray.forEach(function(c){if(c.command==="A"){var f=c.points[4],d=c.points[5],h=c.points[4]+d,v=Math.PI/180;if(Math.abs(f-h)<v&&(v=Math.abs(f-h)),d<0)for(var m=f-v;m>h;m-=v){var _=e.getPointOnEllipticalArc(c.points[0],c.points[1],c.points[2],c.points[3],m,0);t.push(_.x,_.y)}else for(var m=f+v;m<h;m+=v){var _=e.getPointOnEllipticalArc(c.points[0],c.points[1],c.points[2],c.points[3],m,0);t.push(_.x,_.y)}}else if(c.command==="C")for(var m=0;m<=1;m+=.01){var _=e.getPointOnCubicBezier(m,c.start.x,c.start.y,c.points[0],c.points[1],c.points[2],c.points[3],c.points[4],c.points[5]);t.push(_.x,_.y)}else t=t.concat(c.points)});for(var n=t[0],a=t[0],i=t[1],o=t[1],s,u,l=0;l<t.length/2;l++)s=t[l*2],u=t[l*2+1],isNaN(s)||(n=Math.min(n,s),a=Math.max(a,s)),isNaN(u)||(i=Math.min(i,u),o=Math.max(o,u));return{x:Math.round(n),y:Math.round(i),width:Math.round(a-n),height:Math.round(o-i)}},e.prototype.getLength=function(){return this.pathLength},e.prototype.getPointAtLength=function(t){var n,a=0,i=this.dataArray.length;if(!i)return null;for(;a<i&&t>this.dataArray[a].pathLength;)t-=this.dataArray[a].pathLength,++a;if(a===i)return n=this.dataArray[a-1].points.slice(-2),{x:n[0],y:n[1]};if(t<.01)return n=this.dataArray[a].points.slice(0,2),{x:n[0],y:n[1]};var o=this.dataArray[a],s=o.points;switch(o.command){case"L":return e.getPointOnLine(t,o.start.x,o.start.y,s[0],s[1]);case"C":return e.getPointOnCubicBezier(t/o.pathLength,o.start.x,o.start.y,s[0],s[1],s[2],s[3],s[4],s[5]);case"Q":return e.getPointOnQuadraticBezier(t/o.pathLength,o.start.x,o.start.y,s[0],s[1],s[2],s[3]);case"A":var u=s[0],l=s[1],c=s[2],f=s[3],d=s[4],h=s[5],v=s[6];return d+=h*t/o.pathLength,e.getPointOnEllipticalArc(u,l,c,f,d,v)}return null},e.getLineLength=function(t,n,a,i){return Math.sqrt((a-t)*(a-t)+(i-n)*(i-n))},e.getPointOnLine=function(t,n,a,i,o,s,u){s===void 0&&(s=n),u===void 0&&(u=a);var l=(o-a)/(i-n+1e-8),c=Math.sqrt(t*t/(1+l*l));i<n&&(c*=-1);var f=l*c,d;if(i===n)d={x:s,y:u+f};else if((u-a)/(s-n+1e-8)===l)d={x:s+c,y:u+f};else{var h,v,m=this.getLineLength(n,a,i,o),_=(s-n)*(i-n)+(u-a)*(o-a);_=_/(m*m),h=n+_*(i-n),v=a+_*(o-a);var b=this.getLineLength(s,u,h,v),w=Math.sqrt(t*t-b*b);c=Math.sqrt(w*w/(1+l*l)),i<n&&(c*=-1),f=l*c,d={x:h+c,y:v+f}}return d},e.getPointOnCubicBezier=function(t,n,a,i,o,s,u,l,c){function f(b){return b*b*b}function d(b){return 3*b*b*(1-b)}function h(b){return 3*b*(1-b)*(1-b)}function v(b){return(1-b)*(1-b)*(1-b)}var m=l*f(t)+s*d(t)+i*h(t)+n*v(t),_=c*f(t)+u*d(t)+o*h(t)+a*v(t);return{x:m,y:_}},e.getPointOnQuadraticBezier=function(t,n,a,i,o,s,u){function l(v){return v*v}function c(v){return 2*v*(1-v)}function f(v){return(1-v)*(1-v)}var d=s*l(t)+i*c(t)+n*f(t),h=u*l(t)+o*c(t)+a*f(t);return{x:d,y:h}},e.getPointOnEllipticalArc=function(t,n,a,i,o,s){var u=Math.cos(s),l=Math.sin(s),c={x:a*Math.cos(o),y:i*Math.sin(o)};return{x:t+(c.x*u-c.y*l),y:n+(c.x*l+c.y*u)}},e.parsePathData=function(t){if(!t)return[];var n=t,a=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];n=n.replace(new RegExp(" ","g"),",");for(var i=0;i<a.length;i++)n=n.replace(new RegExp(a[i],"g"),"|"+a[i]);var o=n.split("|"),s=[],u=[],l=0,c=0,f=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,d;for(i=1;i<o.length;i++){var h=o[i],v=h.charAt(0);for(h=h.slice(1),u.length=0;d=f.exec(h);)u.push(d[0]);for(var m=[],_=0,b=u.length;_<b;_++){var w=parseFloat(u[_]);isNaN(w)?m.push(0):m.push(w)}for(;m.length>0&&!isNaN(m[0]);){var y=null,x=[],C=l,E=c,p,P,T,R,M,N,B,q,Z,Q;switch(v){case"l":l+=m.shift(),c+=m.shift(),y="L",x.push(l,c);break;case"L":l=m.shift(),c=m.shift(),x.push(l,c);break;case"m":var Y=m.shift(),J=m.shift();if(l+=Y,c+=J,y="M",s.length>2&&s[s.length-1].command==="z"){for(var X=s.length-2;X>=0;X--)if(s[X].command==="M"){l=s[X].points[0]+Y,c=s[X].points[1]+J;break}}x.push(l,c),v="l";break;case"M":l=m.shift(),c=m.shift(),y="M",x.push(l,c),v="L";break;case"h":l+=m.shift(),y="L",x.push(l,c);break;case"H":l=m.shift(),y="L",x.push(l,c);break;case"v":c+=m.shift(),y="L",x.push(l,c);break;case"V":c=m.shift(),y="L",x.push(l,c);break;case"C":x.push(m.shift(),m.shift(),m.shift(),m.shift()),l=m.shift(),c=m.shift(),x.push(l,c);break;case"c":x.push(l+m.shift(),c+m.shift(),l+m.shift(),c+m.shift()),l+=m.shift(),c+=m.shift(),y="C",x.push(l,c);break;case"S":P=l,T=c,p=s[s.length-1],p.command==="C"&&(P=l+(l-p.points[2]),T=c+(c-p.points[3])),x.push(P,T,m.shift(),m.shift()),l=m.shift(),c=m.shift(),y="C",x.push(l,c);break;case"s":P=l,T=c,p=s[s.length-1],p.command==="C"&&(P=l+(l-p.points[2]),T=c+(c-p.points[3])),x.push(P,T,l+m.shift(),c+m.shift()),l+=m.shift(),c+=m.shift(),y="C",x.push(l,c);break;case"Q":x.push(m.shift(),m.shift()),l=m.shift(),c=m.shift(),x.push(l,c);break;case"q":x.push(l+m.shift(),c+m.shift()),l+=m.shift(),c+=m.shift(),y="Q",x.push(l,c);break;case"T":P=l,T=c,p=s[s.length-1],p.command==="Q"&&(P=l+(l-p.points[0]),T=c+(c-p.points[1])),l=m.shift(),c=m.shift(),y="Q",x.push(P,T,l,c);break;case"t":P=l,T=c,p=s[s.length-1],p.command==="Q"&&(P=l+(l-p.points[0]),T=c+(c-p.points[1])),l+=m.shift(),c+=m.shift(),y="Q",x.push(P,T,l,c);break;case"A":R=m.shift(),M=m.shift(),N=m.shift(),B=m.shift(),q=m.shift(),Z=l,Q=c,l=m.shift(),c=m.shift(),y="A",x=this.convertEndpointToCenterParameterization(Z,Q,l,c,B,q,R,M,N);break;case"a":R=m.shift(),M=m.shift(),N=m.shift(),B=m.shift(),q=m.shift(),Z=l,Q=c,l+=m.shift(),c+=m.shift(),y="A",x=this.convertEndpointToCenterParameterization(Z,Q,l,c,B,q,R,M,N);break}s.push({command:y||v,points:x,start:{x:C,y:E},pathLength:this.calcLength(C,E,y||v,x)})}(v==="z"||v==="Z")&&s.push({command:"z",points:[],start:void 0,pathLength:0})}return s},e.calcLength=function(t,n,a,i){var o,s,u,l,c=e;switch(a){case"L":return c.getLineLength(t,n,i[0],i[1]);case"C":for(o=0,s=c.getPointOnCubicBezier(0,t,n,i[0],i[1],i[2],i[3],i[4],i[5]),l=.01;l<=1;l+=.01)u=c.getPointOnCubicBezier(l,t,n,i[0],i[1],i[2],i[3],i[4],i[5]),o+=c.getLineLength(s.x,s.y,u.x,u.y),s=u;return o;case"Q":for(o=0,s=c.getPointOnQuadraticBezier(0,t,n,i[0],i[1],i[2],i[3]),l=.01;l<=1;l+=.01)u=c.getPointOnQuadraticBezier(l,t,n,i[0],i[1],i[2],i[3]),o+=c.getLineLength(s.x,s.y,u.x,u.y),s=u;return o;case"A":o=0;var f=i[4],d=i[5],h=i[4]+d,v=Math.PI/180;if(Math.abs(f-h)<v&&(v=Math.abs(f-h)),s=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],f,0),d<0)for(l=f-v;l>h;l-=v)u=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],l,0),o+=c.getLineLength(s.x,s.y,u.x,u.y),s=u;else for(l=f+v;l<h;l+=v)u=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],l,0),o+=c.getLineLength(s.x,s.y,u.x,u.y),s=u;return u=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],h,0),o+=c.getLineLength(s.x,s.y,u.x,u.y),o}return 0},e.convertEndpointToCenterParameterization=function(t,n,a,i,o,s,u,l,c){var f=c*(Math.PI/180),d=Math.cos(f)*(t-a)/2+Math.sin(f)*(n-i)/2,h=-1*Math.sin(f)*(t-a)/2+Math.cos(f)*(n-i)/2,v=d*d/(u*u)+h*h/(l*l);v>1&&(u*=Math.sqrt(v),l*=Math.sqrt(v));var m=Math.sqrt((u*u*(l*l)-u*u*(h*h)-l*l*(d*d))/(u*u*(h*h)+l*l*(d*d)));o===s&&(m*=-1),isNaN(m)&&(m=0);var _=m*u*h/l,b=m*-l*d/u,w=(t+a)/2+Math.cos(f)*_-Math.sin(f)*b,y=(n+i)/2+Math.sin(f)*_+Math.cos(f)*b,x=function(M){return Math.sqrt(M[0]*M[0]+M[1]*M[1])},C=function(M,N){return(M[0]*N[0]+M[1]*N[1])/(x(M)*x(N))},E=function(M,N){return(M[0]*N[1]<M[1]*N[0]?-1:1)*Math.acos(C(M,N))},p=E([1,0],[(d-_)/u,(h-b)/l]),P=[(d-_)/u,(h-b)/l],T=[(-1*d-_)/u,(-1*h-b)/l],R=E(P,T);return C(P,T)<=-1&&(R=Math.PI),C(P,T)>=1&&(R=0),s===0&&R>0&&(R=R-2*Math.PI),s===1&&R<0&&(R=R+2*Math.PI),[w,y,u,l,p,R,f,s]},e}(KB.Shape);us.Path=oo;oo.prototype.className="Path";oo.prototype._attrsAffectingSize=["data"];YB._registerNode(oo);WB.Factory.addGetterSetter(oo,"data");jB.Collection.mapMethods(oo);var ls={},XB=Ve&&Ve.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(ls,"__esModule",{value:!0});ls.Rect=void 0;var ZB=wt,QB=ft,JB=mr,e5=dt,t5=Ze,cs=function(r){XB(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._sceneFunc=function(t){var n=this.cornerRadius(),a=this.width(),i=this.height();if(t.beginPath(),!n)t.rect(0,0,a,i);else{var o=0,s=0,u=0,l=0;typeof n=="number"?o=s=u=l=Math.min(n,a/2,i/2):(o=Math.min(n[0]||0,a/2,i/2),s=Math.min(n[1]||0,a/2,i/2),l=Math.min(n[2]||0,a/2,i/2),u=Math.min(n[3]||0,a/2,i/2)),t.moveTo(o,0),t.lineTo(a-s,0),t.arc(a-s,s,s,Math.PI*3/2,0,!1),t.lineTo(a,i-l),t.arc(a-l,i-l,l,0,Math.PI/2,!1),t.lineTo(u,i),t.arc(u,i-u,u,Math.PI/2,Math.PI,!1),t.lineTo(0,o),t.arc(o,o,o,Math.PI,Math.PI*3/2,!1)}t.closePath(),t.fillStrokeShape(this)},e}(JB.Shape);ls.Rect=cs;cs.prototype.className="Rect";e5._registerNode(cs);QB.Factory.addGetterSetter(cs,"cornerRadius",0,t5.getNumberOrArrayOfNumbersValidator(4));ZB.Collection.mapMethods(cs);var cl={},r5=Ve&&Ve.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(cl,"__esModule",{value:!0});cl.RegularPolygon=void 0;var n5=wt,t2=ft,a5=mr,r2=Ze,i5=dt,Da=function(r){r5(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._sceneFunc=function(t){var n=this._getPoints();t.beginPath(),t.moveTo(n[0].x,n[0].y);for(var a=1;a<n.length;a++)t.lineTo(n[a].x,n[a].y);t.closePath(),t.fillStrokeShape(this)},e.prototype._getPoints=function(){for(var t=this.attrs.sides,n=this.attrs.radius||0,a=[],i=0;i<t;i++)a.push({x:n*Math.sin(i*2*Math.PI/t),y:-1*n*Math.cos(i*2*Math.PI/t)});return a},e.prototype.getSelfRect=function(){var t=this._getPoints(),n=t[0].x,a=t[0].y,i=t[0].x,o=t[0].y;return t.forEach(function(s){n=Math.min(n,s.x),a=Math.max(a,s.x),i=Math.min(i,s.y),o=Math.max(o,s.y)}),{x:n,y:i,width:a-n,height:o-i}},e.prototype.getWidth=function(){return this.radius()*2},e.prototype.getHeight=function(){return this.radius()*2},e.prototype.setWidth=function(t){this.radius(t/2)},e.prototype.setHeight=function(t){this.radius(t/2)},e}(a5.Shape);cl.RegularPolygon=Da;Da.prototype.className="RegularPolygon";Da.prototype._centroid=!0;Da.prototype._attrsAffectingSize=["radius"];i5._registerNode(Da);t2.Factory.addGetterSetter(Da,"radius",0,r2.getNumberValidator());t2.Factory.addGetterSetter(Da,"sides",0,r2.getNumberValidator());n5.Collection.mapMethods(Da);var fl={},o5=Ve&&Ve.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(fl,"__esModule",{value:!0});fl.Ring=void 0;var s5=wt,n2=ft,u5=mr,a2=Ze,l5=dt,xx=Math.PI*2,Ra=function(r){o5(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._sceneFunc=function(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,xx,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),xx,0,!0),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return this.outerRadius()*2},e.prototype.getHeight=function(){return this.outerRadius()*2},e.prototype.setWidth=function(t){this.outerRadius(t/2)},e.prototype.setHeight=function(t){this.outerRadius(t/2)},e}(u5.Shape);fl.Ring=Ra;Ra.prototype.className="Ring";Ra.prototype._centroid=!0;Ra.prototype._attrsAffectingSize=["innerRadius","outerRadius"];l5._registerNode(Ra);n2.Factory.addGetterSetter(Ra,"innerRadius",0,a2.getNumberValidator());n2.Factory.addGetterSetter(Ra,"outerRadius",0,a2.getNumberValidator());s5.Collection.mapMethods(Ra);var dl={},c5=Ve&&Ve.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(dl,"__esModule",{value:!0});dl.Sprite=void 0;var f5=wt,di=ft,d5=mr,h5=ao,i2=Ze,v5=dt,wn=function(r){c5(e,r);function e(t){var n=r.call(this,t)||this;return n._updated=!0,n.anim=new h5.Animation(function(){var a=n._updated;return n._updated=!1,a}),n.on("animationChange.konva",function(){this.frameIndex(0)}),n.on("frameIndexChange.konva",function(){this._updated=!0}),n.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())}),n}return e.prototype._sceneFunc=function(t){var n=this.animation(),a=this.frameIndex(),i=a*4,o=this.animations()[n],s=this.frameOffsets(),u=o[i+0],l=o[i+1],c=o[i+2],f=o[i+3],d=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,c,f),t.closePath(),t.fillStrokeShape(this)),d)if(s){var h=s[n],v=a*2;t.drawImage(d,u,l,c,f,h[v+0],h[v+1],c,f)}else t.drawImage(d,u,l,c,f,0,0,c,f)},e.prototype._hitFunc=function(t){var n=this.animation(),a=this.frameIndex(),i=a*4,o=this.animations()[n],s=this.frameOffsets(),u=o[i+2],l=o[i+3];if(t.beginPath(),s){var c=s[n],f=a*2;t.rect(c[f+0],c[f+1],u,l)}else t.rect(0,0,u,l);t.closePath(),t.fillShape(this)},e.prototype._useBufferCanvas=function(){return r.prototype._useBufferCanvas.call(this,!0)},e.prototype._setInterval=function(){var t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this.frameRate())},e.prototype.start=function(){if(!this.isRunning()){var t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}},e.prototype.stop=function(){this.anim.stop(),clearInterval(this.interval)},e.prototype.isRunning=function(){return this.anim.isRunning()},e.prototype._updateIndex=function(){var t=this.frameIndex(),n=this.animation(),a=this.animations(),i=a[n],o=i.length/4;t<o-1?this.frameIndex(t+1):this.frameIndex(0)},e}(d5.Shape);dl.Sprite=wn;wn.prototype.className="Sprite";v5._registerNode(wn);di.Factory.addGetterSetter(wn,"animation");di.Factory.addGetterSetter(wn,"animations");di.Factory.addGetterSetter(wn,"frameOffsets");di.Factory.addGetterSetter(wn,"image");di.Factory.addGetterSetter(wn,"frameIndex",0,i2.getNumberValidator());di.Factory.addGetterSetter(wn,"frameRate",17,i2.getNumberValidator());di.Factory.backCompat(wn,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});f5.Collection.mapMethods(wn);var hl={},p5=Ve&&Ve.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(hl,"__esModule",{value:!0});hl.Star=void 0;var g5=wt,fy=ft,y5=mr,dy=Ze,m5=dt,ia=function(r){p5(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._sceneFunc=function(t){var n=this.innerRadius(),a=this.outerRadius(),i=this.numPoints();t.beginPath(),t.moveTo(0,0-a);for(var o=1;o<i*2;o++){var s=o%2===0?a:n,u=s*Math.sin(o*Math.PI/i),l=-1*s*Math.cos(o*Math.PI/i);t.lineTo(u,l)}t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return this.outerRadius()*2},e.prototype.getHeight=function(){return this.outerRadius()*2},e.prototype.setWidth=function(t){this.outerRadius(t/2)},e.prototype.setHeight=function(t){this.outerRadius(t/2)},e}(y5.Shape);hl.Star=ia;ia.prototype.className="Star";ia.prototype._centroid=!0;ia.prototype._attrsAffectingSize=["innerRadius","outerRadius"];m5._registerNode(ia);fy.Factory.addGetterSetter(ia,"numPoints",5,dy.getNumberValidator());fy.Factory.addGetterSetter(ia,"innerRadius",0,dy.getNumberValidator());fy.Factory.addGetterSetter(ia,"outerRadius",0,dy.getNumberValidator());g5.Collection.mapMethods(ia);var ti={},b5=Ve&&Ve.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(ti,"__esModule",{value:!0});ti.Text=ti.stringToArray=void 0;var au=wt,Gr=ft,w5=mr,_5=dt,Ia=Ze,x5=dt;function o2(r){return Array.from(r)}ti.stringToArray=o2;var Os="auto",S5="center",bo="justify",C5="Change.konva",E5="2d",Sx="-",s2="left",T5="text",P5="Text",A5="top",k5="bottom",Cx="middle",u2="normal",Ex="px ",wo=" ",M5="right",O5="word",D5="char",R5="none",qp="…",l2=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],I5=l2.length;function L5(r){return r.split(",").map(function(e){e=e.trim();var t=e.indexOf(" ")>=0,n=e.indexOf('"')>=0||e.indexOf("'")>=0;return t&&!n&&(e='"'+e+'"'),e}).join(", ")}var Ds;function zp(){return Ds||(Ds=au.Util.createCanvasElement().getContext(E5),Ds)}function N5(r){r.fillText(this._partialText,this._partialTextX,this._partialTextY)}function F5(r){r.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function B5(r){return r=r||{},!r.fillLinearGradientColorStops&&!r.fillRadialGradientColorStops&&!r.fillPatternImage&&(r.fill=r.fill||"black"),r}var ur=function(r){b5(e,r);function e(t){var n=r.call(this,B5(t))||this;n._partialTextX=0,n._partialTextY=0;for(var a=0;a<I5;a++)n.on(l2[a]+C5,n._setTextData);return n._setTextData(),n}return e.prototype._sceneFunc=function(t){var n=this.textArr,a=n.length;if(this.text()){var i=this.padding(),o=this.fontSize(),s=this.lineHeight()*o,u=this.verticalAlign(),l=0,c=this.align(),f=this.getWidth(),d=this.letterSpacing(),h=this.fill(),v=this.textDecoration(),m=v.indexOf("underline")!==-1,_=v.indexOf("line-through")!==-1,b,w=0,w=s/2,y=0,x=0;for(t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",Cx),t.setAttr("textAlign",s2),u===Cx?l=(this.getHeight()-a*s-i*2)/2:u===k5&&(l=this.getHeight()-a*s-i*2),t.translate(i,l+i),b=0;b<a;b++){var y=0,x=0,C=n[b],E=C.text,p=C.width,P=b!==a-1,T,R,M;if(t.save(),c===M5?y+=f-p-i*2:c===S5&&(y+=(f-p-i*2)/2),m&&(t.save(),t.beginPath(),t.moveTo(y,w+x+Math.round(o/2)),T=E.split(" ").length-1,R=T===0,M=c===bo&&P&&!R?f-i*2:p,t.lineTo(y+Math.round(M),w+x+Math.round(o/2)),t.lineWidth=o/15,t.strokeStyle=h,t.stroke(),t.restore()),_&&(t.save(),t.beginPath(),t.moveTo(y,w+x),T=E.split(" ").length-1,R=T===0,M=c===bo&&P&&!R?f-i*2:p,t.lineTo(y+Math.round(M),w+x),t.lineWidth=o/15,t.strokeStyle=h,t.stroke(),t.restore()),d!==0||c===bo){T=E.split(" ").length-1;for(var N=o2(E),B=0;B<N.length;B++){var q=N[B];q===" "&&b!==a-1&&c===bo&&(y+=(f-i*2-p)/T),this._partialTextX=y,this._partialTextY=w+x,this._partialText=q,t.fillStrokeShape(this),y+=this.measureSize(q).width+d}}else this._partialTextX=y,this._partialTextY=w+x,this._partialText=E,t.fillStrokeShape(this);t.restore(),a>1&&(w+=s)}}},e.prototype._hitFunc=function(t){var n=this.getWidth(),a=this.getHeight();t.beginPath(),t.rect(0,0,n,a),t.closePath(),t.fillStrokeShape(this)},e.prototype.setText=function(t){var n=au.Util._isString(t)?t:t==null?"":t+"";return this._setAttr(T5,n),this},e.prototype.getWidth=function(){var t=this.attrs.width===Os||this.attrs.width===void 0;return t?this.getTextWidth()+this.padding()*2:this.attrs.width},e.prototype.getHeight=function(){var t=this.attrs.height===Os||this.attrs.height===void 0;return t?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height},e.prototype.getTextWidth=function(){return this.textWidth},e.prototype.getTextHeight=function(){return au.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight},e.prototype.measureSize=function(t){var n=zp(),a=this.fontSize(),i;return n.save(),n.font=this._getContextFont(),i=n.measureText(t),n.restore(),{width:i.width,height:a}},e.prototype._getContextFont=function(){return _5.Konva.UA.isIE?this.fontStyle()+wo+this.fontSize()+Ex+this.fontFamily():this.fontStyle()+wo+this.fontVariant()+wo+(this.fontSize()+Ex)+L5(this.fontFamily())},e.prototype._addTextLine=function(t){this.align()===bo&&(t=t.trim());var n=this._getTextWidth(t);return this.textArr.push({text:t,width:n})},e.prototype._getTextWidth=function(t){var n=this.letterSpacing(),a=t.length;return zp().measureText(t).width+(a?n*(a-1):0)},e.prototype._setTextData=function(){var t=this.text().split(`
`),n=+this.fontSize(),a=0,i=this.lineHeight()*n,o=this.attrs.width,s=this.attrs.height,u=o!==Os&&o!==void 0,l=s!==Os&&s!==void 0,c=this.padding(),f=o-c*2,d=s-c*2,h=0,v=this.wrap(),m=v!==R5,_=v!==D5&&m,b=this.ellipsis();this.textArr=[],zp().font=this._getContextFont();for(var w=b?this._getTextWidth(qp):0,y=0,x=t.length;y<x;++y){var C=t[y],E=this._getTextWidth(C);if(u&&E>f)for(;C.length>0;){for(var p=0,P=C.length,T="",R=0;p<P;){var M=p+P>>>1,N=C.slice(0,M+1),B=this._getTextWidth(N)+w;B<=f?(p=M+1,T=N,R=B):P=M}if(T){if(_){var q,Z=C[T.length],Q=Z===wo||Z===Sx;Q&&R<=f?q=T.length:q=Math.max(T.lastIndexOf(wo),T.lastIndexOf(Sx))+1,q>0&&(p=q,T=T.slice(0,p),R=this._getTextWidth(T))}if(T=T.trimRight(),this._addTextLine(T),a=Math.max(a,R),h+=i,!m||l&&h+i>d){var Y=this.textArr[this.textArr.length-1];if(Y&&b){var J=this._getTextWidth(Y.text+qp)<f;J||(Y.text=Y.text.slice(0,Y.text.length-3)),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(Y.text+qp)}break}if(C=C.slice(p),C=C.trimLeft(),C.length>0&&(E=this._getTextWidth(C),E<=f)){this._addTextLine(C),h+=i,a=Math.max(a,E);break}}else break}else this._addTextLine(C),h+=i,a=Math.max(a,E);if(l&&h+i>d)break}this.textHeight=n,this.textWidth=a},e.prototype.getStrokeScaleEnabled=function(){return!0},e}(w5.Shape);ti.Text=ur;ur.prototype._fillFunc=N5;ur.prototype._strokeFunc=F5;ur.prototype.className=P5;ur.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];x5._registerNode(ur);Gr.Factory.overWriteSetter(ur,"width",Ia.getNumberOrAutoValidator());Gr.Factory.overWriteSetter(ur,"height",Ia.getNumberOrAutoValidator());Gr.Factory.addGetterSetter(ur,"fontFamily","Arial");Gr.Factory.addGetterSetter(ur,"fontSize",12,Ia.getNumberValidator());Gr.Factory.addGetterSetter(ur,"fontStyle",u2);Gr.Factory.addGetterSetter(ur,"fontVariant",u2);Gr.Factory.addGetterSetter(ur,"padding",0,Ia.getNumberValidator());Gr.Factory.addGetterSetter(ur,"align",s2);Gr.Factory.addGetterSetter(ur,"verticalAlign",A5);Gr.Factory.addGetterSetter(ur,"lineHeight",1,Ia.getNumberValidator());Gr.Factory.addGetterSetter(ur,"wrap",O5);Gr.Factory.addGetterSetter(ur,"ellipsis",!1,Ia.getBooleanValidator());Gr.Factory.addGetterSetter(ur,"letterSpacing",0,Ia.getNumberValidator());Gr.Factory.addGetterSetter(ur,"text","",Ia.getStringValidator());Gr.Factory.addGetterSetter(ur,"textDecoration","");au.Collection.mapMethods(ur);var vl={},q5=Ve&&Ve.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(vl,"__esModule",{value:!0});vl.TextPath=void 0;var Hs=wt,_n=ft,z5=mr,Mn=us,Gp=ti,c2=Ze,G5=dt,$5="",f2="normal";function d2(r){r.fillText(this.partialText,0,0)}function h2(r){r.strokeText(this.partialText,0,0)}var fr=function(r){q5(e,r);function e(t){var n=r.call(this,t)||this;return n.dummyCanvas=Hs.Util.createCanvasElement(),n.dataArray=[],n.dataArray=Mn.Path.parsePathData(n.attrs.data),n.on("dataChange.konva",function(){this.dataArray=Mn.Path.parsePathData(this.attrs.data),this._setTextData()}),n.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva",n._setTextData),t&&t.getKerning&&(Hs.Util.warn('getKerning TextPath API is deprecated. Please use "kerningFunc" instead.'),n.kerningFunc(t.getKerning)),n._setTextData(),n}return e.prototype._sceneFunc=function(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();var n=this.textDecoration(),a=this.fill(),i=this.fontSize(),o=this.glyphInfo;n==="underline"&&t.beginPath();for(var s=0;s<o.length;s++){t.save();var u=o[s].p0;t.translate(u.x,u.y),t.rotate(o[s].rotation),this.partialText=o[s].text,t.fillStrokeShape(this),n==="underline"&&(s===0&&t.moveTo(0,i/2+1),t.lineTo(i,i/2+1)),t.restore()}n==="underline"&&(t.strokeStyle=a,t.lineWidth=i/20,t.stroke()),t.restore()},e.prototype._hitFunc=function(t){t.beginPath();var n=this.glyphInfo;if(n.length>=1){var a=n[0].p0;t.moveTo(a.x,a.y)}for(var i=0;i<n.length;i++){var o=n[i].p1;t.lineTo(o.x,o.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()},e.prototype.getTextWidth=function(){return this.textWidth},e.prototype.getTextHeight=function(){return Hs.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight},e.prototype.setText=function(t){return Gp.Text.prototype.setText.call(this,t)},e.prototype._getContextFont=function(){return Gp.Text.prototype._getContextFont.call(this)},e.prototype._getTextSize=function(t){var n=this.dummyCanvas,a=n.getContext("2d");a.save(),a.font=this._getContextFont();var i=a.measureText(t);return a.restore(),{width:i.width,height:parseInt(this.attrs.fontSize,10)}},e.prototype._setTextData=function(){var t=this,n=this._getTextSize(this.attrs.text),a=this.letterSpacing(),i=this.align(),o=this.kerningFunc();this.textWidth=n.width,this.textHeight=n.height;var s=Math.max(this.textWidth+((this.attrs.text||"").length-1)*a,0);this.glyphInfo=[];for(var u=0,l=0;l<t.dataArray.length;l++)t.dataArray[l].pathLength>0&&(u+=t.dataArray[l].pathLength);var c=0;i==="center"&&(c=Math.max(0,u/2-s/2)),i==="right"&&(c=Math.max(0,u-s));for(var f=Gp.stringToArray(this.text()),d=this.text().split(" ").length-1,h,v,m,_=-1,b=0,w=function(){b=0;for(var B=t.dataArray,q=_+1;q<B.length;q++){if(B[q].pathLength>0)return _=q,B[q];B[q].command==="M"&&(h={x:B[q].points[0],y:B[q].points[1]})}return{}},y=function(B){var q=t._getTextSize(B).width+a;B===" "&&i==="justify"&&(q+=(u-s)/d);var Z=0,Q=0;for(v=void 0;Math.abs(q-Z)/q>.01&&Q<20;){Q++;for(var Y=Z;m===void 0;)m=w(),m&&Y+m.pathLength<q&&(Y+=m.pathLength,m=void 0);if(m==={}||h===void 0)return;var J=!1;switch(m.command){case"L":Mn.Path.getLineLength(h.x,h.y,m.points[0],m.points[1])>q?v=Mn.Path.getPointOnLine(q,h.x,h.y,m.points[0],m.points[1],h.x,h.y):m=void 0;break;case"A":var X=m.points[4],k=m.points[5],D=m.points[4]+k;b===0?b=X+1e-8:q>Z?b+=Math.PI/180*k/Math.abs(k):b-=Math.PI/360*k/Math.abs(k),(k<0&&b<D||k>=0&&b>D)&&(b=D,J=!0),v=Mn.Path.getPointOnEllipticalArc(m.points[0],m.points[1],m.points[2],m.points[3],b,m.points[6]);break;case"C":b===0?q>m.pathLength?b=1e-8:b=q/m.pathLength:q>Z?b+=(q-Z)/m.pathLength/2:b=Math.max(b-(Z-q)/m.pathLength/2,0),b>1&&(b=1,J=!0),v=Mn.Path.getPointOnCubicBezier(b,m.start.x,m.start.y,m.points[0],m.points[1],m.points[2],m.points[3],m.points[4],m.points[5]);break;case"Q":b===0?b=q/m.pathLength:q>Z?b+=(q-Z)/m.pathLength:b-=(Z-q)/m.pathLength,b>1&&(b=1,J=!0),v=Mn.Path.getPointOnQuadraticBezier(b,m.start.x,m.start.y,m.points[0],m.points[1],m.points[2],m.points[3]);break}v!==void 0&&(Z=Mn.Path.getLineLength(h.x,h.y,v.x,v.y)),J&&(J=!1,m=void 0)}},x="C",C=t._getTextSize(x).width+a,E=c/C-1,p=0;p<E&&(y(x),!(h===void 0||v===void 0));p++)h=v;for(var P=0;P<f.length&&(y(f[P]),!(h===void 0||v===void 0));P++){var T=Mn.Path.getLineLength(h.x,h.y,v.x,v.y),R=0;if(o)try{R=o(f[P-1],f[P])*this.fontSize()}catch{R=0}h.x+=R,v.x+=R,this.textWidth+=R;var M=Mn.Path.getPointOnLine(R+T/2,h.x,h.y,v.x,v.y),N=Math.atan2(v.y-h.y,v.x-h.x);this.glyphInfo.push({transposeX:M.x,transposeY:M.y,text:f[P],rotation:N,p0:h,p1:v}),h=v}},e.prototype.getSelfRect=function(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var t=[];this.glyphInfo.forEach(function(f){t.push(f.p0.x),t.push(f.p0.y),t.push(f.p1.x),t.push(f.p1.y)});for(var n=t[0]||0,a=t[0]||0,i=t[1]||0,o=t[1]||0,s,u,l=0;l<t.length/2;l++)s=t[l*2],u=t[l*2+1],n=Math.min(n,s),a=Math.max(a,s),i=Math.min(i,u),o=Math.max(o,u);var c=this.fontSize();return{x:n-c/2,y:i-c/2,width:a-n+c,height:o-i+c}},e}(z5.Shape);vl.TextPath=fr;fr.prototype._fillFunc=d2;fr.prototype._strokeFunc=h2;fr.prototype._fillFuncHit=d2;fr.prototype._strokeFuncHit=h2;fr.prototype.className="TextPath";fr.prototype._attrsAffectingSize=["text","fontSize","data"];G5._registerNode(fr);_n.Factory.addGetterSetter(fr,"data");_n.Factory.addGetterSetter(fr,"fontFamily","Arial");_n.Factory.addGetterSetter(fr,"fontSize",12,c2.getNumberValidator());_n.Factory.addGetterSetter(fr,"fontStyle",f2);_n.Factory.addGetterSetter(fr,"align","left");_n.Factory.addGetterSetter(fr,"letterSpacing",0,c2.getNumberValidator());_n.Factory.addGetterSetter(fr,"textBaseline","middle");_n.Factory.addGetterSetter(fr,"fontVariant",f2);_n.Factory.addGetterSetter(fr,"text",$5);_n.Factory.addGetterSetter(fr,"textDecoration",null);_n.Factory.addGetterSetter(fr,"kerningFunc",null);Hs.Collection.mapMethods(fr);var pl={},V5=Ve&&Ve.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),iu=Ve&&Ve.__assign||function(){return iu=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},iu.apply(this,arguments)};Object.defineProperty(pl,"__esModule",{value:!0});pl.Transformer=void 0;var Nt=wt,Zt=ft,U5=sr,H5=mr,j5=ls,Tx=no,dn=dt,hi=Ze,W5=dt,jn="tr-konva",K5=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange"].map(function(r){return r+("."+jn)}).join(" "),Px="nodesRect",Y5=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"].map(function(r){return r+("."+jn)}).join(" "),X5={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},Z5="ontouchstart"in dn.Konva._global;function Q5(r,e){if(r==="rotater")return"crosshair";e+=Nt.Util._degToRad(X5[r]||0);var t=(Nt.Util._radToDeg(e)%360+360)%360;return Nt.Util._inRange(t,315+22.5,360)||Nt.Util._inRange(t,0,22.5)?"ns-resize":Nt.Util._inRange(t,45-22.5,45+22.5)?"nesw-resize":Nt.Util._inRange(t,90-22.5,90+22.5)?"ew-resize":Nt.Util._inRange(t,135-22.5,135+22.5)?"nwse-resize":Nt.Util._inRange(t,180-22.5,180+22.5)?"ns-resize":Nt.Util._inRange(t,225-22.5,225+22.5)?"nesw-resize":Nt.Util._inRange(t,270-22.5,270+22.5)?"ew-resize":Nt.Util._inRange(t,315-22.5,315+22.5)?"nwse-resize":(Nt.Util.error("Transformer has unknown angle for cursor detection: "+t),"pointer")}var ou=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],Ax=1e8;function J5(r){return{x:r.x+r.width/2*Math.cos(r.rotation)+r.height/2*Math.sin(-r.rotation),y:r.y+r.height/2*Math.cos(r.rotation)+r.width/2*Math.sin(r.rotation)}}function v2(r,e,t){var n=t.x+(r.x-t.x)*Math.cos(e)-(r.y-t.y)*Math.sin(e),a=t.y+(r.x-t.x)*Math.sin(e)+(r.y-t.y)*Math.cos(e);return iu(iu({},r),{rotation:r.rotation+e,x:n,y:a})}function eq(r,e){var t=J5(r);return v2(r,e,t)}function tq(r,e,t){for(var n=e,a=0;a<r.length;a++){var i=dn.Konva.getAngle(r[a]),o=Math.abs(i-e)%(Math.PI*2),s=Math.min(o,Math.PI*2-o);s<t&&(n=i)}return n}var Ft=function(r){V5(e,r);function e(t){var n=r.call(this,t)||this;return n._transforming=!1,n._createElements(),n._handleMouseMove=n._handleMouseMove.bind(n),n._handleMouseUp=n._handleMouseUp.bind(n),n.update=n.update.bind(n),n.on(K5,n.update),n.getNode()&&n.update(),n}return e.prototype.attachTo=function(t){return this.setNode(t),this},e.prototype.setNode=function(t){return Nt.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])},e.prototype.getNode=function(){return this._nodes&&this._nodes[0]},e.prototype.setNodes=function(t){var n=this;t===void 0&&(t=[]),this._nodes&&this._nodes.length&&this.detach(),this._nodes=t,t.length===1?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(function(i){var o=i._attrsAffectingSize.map(function(u){return u+"Change."+jn}).join(" "),s=function(){n.nodes().length===1&&n.rotation(n.nodes()[0].getAbsoluteRotation()),n._resetTransformCache(),!n._transforming&&!n.isDragging()&&n.update()};i.on(o,s),i.on(Y5,s),i.on("_clearTransformCache."+jn,s),i.on("xChange."+jn+" yChange."+jn,s),n._proxyDrag(i)}),this._resetTransformCache();var a=!!this.findOne(".top-left");return a&&this.update(),this},e.prototype._proxyDrag=function(t){var n=this,a;t.on("dragstart."+jn,function(i){a=t.getAbsolutePosition(),!n.isDragging()&&t!==n.findOne(".back")&&n.startDrag(i,!1)}),t.on("dragmove."+jn,function(i){if(a){var o=t.getAbsolutePosition(),s=o.x-a.x,u=o.y-a.y;n.nodes().forEach(function(l){if(l!==t&&!l.isDragging()){var c=l.getAbsolutePosition();l.setAbsolutePosition({x:c.x+s,y:c.y+u}),l.startDrag(i)}}),a=null}})},e.prototype.getNodes=function(){return this._nodes||[]},e.prototype.getActiveAnchor=function(){return this._movingAnchorName},e.prototype.detach=function(){this._nodes&&this._nodes.forEach(function(t){t.off("."+jn)}),this._nodes=[],this._resetTransformCache()},e.prototype._resetTransformCache=function(){this._clearCache(Px),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")},e.prototype._getNodeRect=function(){return this._getCache(Px,this.__getNodeRect)},e.prototype.__getNodeShape=function(t,n,a){n===void 0&&(n=this.rotation());var i=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),o=t.getAbsoluteScale(a),s=t.getAbsolutePosition(a),u=i.x*o.x-t.offsetX()*o.x,l=i.y*o.y-t.offsetY()*o.y,c=(dn.Konva.getAngle(t.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),f={x:s.x+u*Math.cos(c)+l*Math.sin(-c),y:s.y+l*Math.cos(c)+u*Math.sin(c),width:i.width*o.x,height:i.height*o.y,rotation:c};return v2(f,-dn.Konva.getAngle(n),{x:0,y:0})},e.prototype.__getNodeRect=function(){var t=this,n=this.getNode();if(!n)return{x:-Ax,y:-Ax,width:0,height:0,rotation:0};var a=[];this.nodes().map(function(f){var d=f.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:t.ignoreStroke()}),h=[{x:d.x,y:d.y},{x:d.x+d.width,y:d.y},{x:d.x+d.width,y:d.y+d.height},{x:d.x,y:d.y+d.height}],v=f.getAbsoluteTransform();h.forEach(function(m){var _=v.point(m);a.push(_)})});var i=new Nt.Transform;i.rotate(-dn.Konva.getAngle(this.rotation()));var o,s,u,l;a.forEach(function(f){var d=i.point(f);o===void 0&&(o=u=d.x,s=l=d.y),o=Math.min(o,d.x),s=Math.min(s,d.y),u=Math.max(u,d.x),l=Math.max(l,d.y)}),i.invert();var c=i.point({x:o,y:s});return{x:c.x,y:c.y,width:u-o,height:l-s,rotation:dn.Konva.getAngle(this.rotation())}},e.prototype.getX=function(){return this._getNodeRect().x},e.prototype.getY=function(){return this._getNodeRect().y},e.prototype.getWidth=function(){return this._getNodeRect().width},e.prototype.getHeight=function(){return this._getNodeRect().height},e.prototype._createElements=function(){this._createBack(),ou.forEach((function(t){this._createAnchor(t)}).bind(this)),this._createAnchor("rotater")},e.prototype._createAnchor=function(t){var n=this,a=new j5.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:Z5?10:"auto"}),i=this;a.on("mousedown touchstart",function(o){i._handleMouseDown(o)}),a.on("dragstart",function(o){a.stopDrag(),o.cancelBubble=!0}),a.on("dragend",function(o){o.cancelBubble=!0}),a.on("mouseenter",function(){var o=dn.Konva.getAngle(n.rotation()),s=Q5(t,o);a.getStage().content.style.cursor=s,n._cursorChange=!0}),a.on("mouseout",function(){a.getStage().content.style.cursor="",n._cursorChange=!1}),this.add(a)},e.prototype._createBack=function(){var t=this,n=new H5.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc:function(a){var i=this.getParent(),o=i.padding();a.beginPath(),a.rect(-o,-o,this.width()+o*2,this.height()+o*2),a.moveTo(this.width()/2,-o),i.rotateEnabled()&&a.lineTo(this.width()/2,-i.rotateAnchorOffset()*Nt.Util._sign(this.height())-o),a.fillStrokeShape(this)},hitFunc:function(a,i){if(t.shouldOverdrawWholeArea()){var o=t.padding();a.beginPath(),a.rect(-o,-o,i.width()+o*2,i.height()+o*2),a.fillStrokeShape(i)}}});this.add(n),this._proxyDrag(n),n.on("dragstart",function(a){a.cancelBubble=!0}),n.on("dragmove",function(a){a.cancelBubble=!0}),n.on("dragend",function(a){a.cancelBubble=!0})},e.prototype._handleMouseDown=function(t){this._movingAnchorName=t.target.name().split(" ")[0];var n=this._getNodeRect(),a=n.width,i=n.height,o=Math.sqrt(Math.pow(a,2)+Math.pow(i,2));this.sin=Math.abs(i/o),this.cos=Math.abs(a/o),window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0),this._transforming=!0;var s=t.target.getAbsolutePosition(),u=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:u.x-s.x,y:u.y-s.y},this._fire("transformstart",{evt:t,target:this.getNode()}),this._nodes.forEach(function(l){l._fire("transformstart",{evt:t,target:l})})},e.prototype._handleMouseMove=function(t){var n,a,i,o=this.findOne("."+this._movingAnchorName),s=o.getStage();s.setPointersPositions(t);var u=s.getPointerPosition(),l={x:u.x-this._anchorDragOffset.x,y:u.y-this._anchorDragOffset.y},c=o.getAbsolutePosition();o.setAbsolutePosition(l);var f=o.getAbsolutePosition();if(!(c.x===f.x&&c.y===f.y)){if(this._movingAnchorName==="rotater"){var d=this._getNodeRect();n=o.x()-d.width/2,a=-o.y()+d.height/2;var h=Math.atan2(-a,n)+Math.PI/2;d.height<0&&(h-=Math.PI);var v=dn.Konva.getAngle(this.rotation()),m=v+h,_=dn.Konva.getAngle(this.rotationSnapTolerance()),b=tq(this.rotationSnaps(),m,_),w=b-d.rotation,y=eq(d,w);this._fitNodesInto(y,t);return}var x=this.keepRatio()||t.shiftKey,T=this.centeredScaling()||t.altKey;if(this._movingAnchorName==="top-left"){if(x){var C=T?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};i=Math.sqrt(Math.pow(C.x-o.x(),2)+Math.pow(C.y-o.y(),2));var E=this.findOne(".top-left").x()>C.x?-1:1,p=this.findOne(".top-left").y()>C.y?-1:1;n=i*this.cos*E,a=i*this.sin*p,this.findOne(".top-left").x(C.x-n),this.findOne(".top-left").y(C.y-a)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(o.y());else if(this._movingAnchorName==="top-right"){if(x){var C=T?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};i=Math.sqrt(Math.pow(o.x()-C.x,2)+Math.pow(C.y-o.y(),2));var E=this.findOne(".top-right").x()<C.x?-1:1,p=this.findOne(".top-right").y()>C.y?-1:1;n=i*this.cos*E,a=i*this.sin*p,this.findOne(".top-right").x(C.x+n),this.findOne(".top-right").y(C.y-a)}var P=o.position();this.findOne(".top-left").y(P.y),this.findOne(".bottom-right").x(P.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(o.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(o.x());else if(this._movingAnchorName==="bottom-left"){if(x){var C=T?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};i=Math.sqrt(Math.pow(C.x-o.x(),2)+Math.pow(o.y()-C.y,2));var E=C.x<o.x()?-1:1,p=o.y()<C.y?-1:1;n=i*this.cos*E,a=i*this.sin*p,o.x(C.x-n),o.y(C.y+a)}P=o.position(),this.findOne(".top-left").x(P.x),this.findOne(".bottom-right").y(P.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(o.y());else if(this._movingAnchorName==="bottom-right"){if(x){var C=T?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};i=Math.sqrt(Math.pow(o.x()-C.x,2)+Math.pow(o.y()-C.y,2));var E=this.findOne(".bottom-right").x()<C.x?-1:1,p=this.findOne(".bottom-right").y()<C.y?-1:1;n=i*this.cos*E,a=i*this.sin*p,this.findOne(".bottom-right").x(C.x+n),this.findOne(".bottom-right").y(C.y+a)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var T=this.centeredScaling()||t.altKey;if(T){var R=this.findOne(".top-left"),M=this.findOne(".bottom-right"),N=R.x(),B=R.y(),q=this.getWidth()-M.x(),Z=this.getHeight()-M.y();M.move({x:-N,y:-B}),R.move({x:q,y:Z})}var Q=this.findOne(".top-left").getAbsolutePosition();n=Q.x,a=Q.y;var Y=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),J=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:n,y:a,width:Y,height:J,rotation:dn.Konva.getAngle(this.rotation())},t)}},e.prototype._handleMouseUp=function(t){this._removeEvents(t)},e.prototype.getAbsoluteTransform=function(){return this.getTransform()},e.prototype._removeEvents=function(t){if(this._transforming){this._transforming=!1,window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0);var n=this.getNode();this._fire("transformend",{evt:t,target:n}),n&&this._nodes.forEach(function(a){a._fire("transformend",{evt:t,target:a})}),this._movingAnchorName=null}},e.prototype._fitNodesInto=function(t,n){var a=this,i=this._getNodeRect(),o=1;if(Nt.Util._inRange(t.width,-this.padding()*2-o,o)){this.update();return}if(Nt.Util._inRange(t.height,-this.padding()*2-o,o)){this.update();return}var s=new Nt.Transform;if(s.rotate(dn.Konva.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){var u=s.point({x:-this.padding()*2,y:0});t.x+=u.x,t.y+=u.y,t.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=u.x,this._anchorDragOffset.y-=u.y}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){var u=s.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=u.x,this._anchorDragOffset.y-=u.y,t.width+=this.padding()*2}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){var u=s.point({x:0,y:-this.padding()*2});t.x+=u.x,t.y+=u.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=u.x,this._anchorDragOffset.y-=u.y,t.height+=this.padding()*2}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){var u=s.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=u.x,this._anchorDragOffset.y-=u.y,t.height+=this.padding()*2}if(this.boundBoxFunc()){var l=this.boundBoxFunc()(i,t);l?t=l:Nt.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}var c=1e7,f=new Nt.Transform;f.translate(i.x,i.y),f.rotate(i.rotation),f.scale(i.width/c,i.height/c);var d=new Nt.Transform;d.translate(t.x,t.y),d.rotate(t.rotation),d.scale(t.width/c,t.height/c);var h=d.multiply(f.invert());this._nodes.forEach(function(v){var m,_=v.getParent().getAbsoluteTransform(),b=v.getTransform().copy();b.translate(v.offsetX(),v.offsetY());var w=new Nt.Transform;w.multiply(_.copy().invert()).multiply(h).multiply(_).multiply(b);var y=w.decompose();v.setAttrs(y),a._fire("transform",{evt:n,target:v}),v._fire("transform",{evt:n,target:v}),(m=v.getLayer())===null||m===void 0||m.batchDraw()}),this.rotation(Nt.Util._getRotation(t.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()},e.prototype.forceUpdate=function(){this._resetTransformCache(),this.update()},e.prototype._batchChangeChild=function(t,n){var a=this.findOne(t);a.setAttrs(n)},e.prototype.update=function(){var t=this,n,a=this._getNodeRect();this.rotation(Nt.Util._getRotation(a.rotation));var i=a.width,o=a.height,s=this.enabledAnchors(),u=this.resizeEnabled(),l=this.padding(),c=this.anchorSize();this.find("._anchor").each(function(f){f.setAttrs({width:c,height:c,offsetX:c/2,offsetY:c/2,stroke:t.anchorStroke(),strokeWidth:t.anchorStrokeWidth(),fill:t.anchorFill(),cornerRadius:t.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:c/2+l,offsetY:c/2+l,visible:u&&s.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:i/2,y:0,offsetY:c/2+l,visible:u&&s.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:i,y:0,offsetX:c/2-l,offsetY:c/2+l,visible:u&&s.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:o/2,offsetX:c/2+l,visible:u&&s.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:i,y:o/2,offsetX:c/2-l,visible:u&&s.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:o,offsetX:c/2+l,offsetY:c/2-l,visible:u&&s.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:i/2,y:o,offsetY:c/2-l,visible:u&&s.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:i,y:o,offsetX:c/2-l,offsetY:c/2-l,visible:u&&s.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:i/2,y:-this.rotateAnchorOffset()*Nt.Util._sign(o)-l,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:i,height:o,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0}),(n=this.getLayer())===null||n===void 0||n.batchDraw()},e.prototype.isTransforming=function(){return this._transforming},e.prototype.stopTransform=function(){if(this._transforming){this._removeEvents();var t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}},e.prototype.destroy=function(){return this.getStage()&&this._cursorChange&&(this.getStage().content.style.cursor=""),Tx.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this},e.prototype.toObject=function(){return U5.Node.prototype.toObject.call(this)},e}(Tx.Group);pl.Transformer=Ft;function rq(r){return r instanceof Array||Nt.Util.warn("enabledAnchors value should be an array"),r instanceof Array&&r.forEach(function(e){ou.indexOf(e)===-1&&Nt.Util.warn("Unknown anchor name: "+e+". Available names are: "+ou.join(", "))}),r||[]}Ft.prototype.className="Transformer";W5._registerNode(Ft);Zt.Factory.addGetterSetter(Ft,"enabledAnchors",ou,rq);Zt.Factory.addGetterSetter(Ft,"resizeEnabled",!0);Zt.Factory.addGetterSetter(Ft,"anchorSize",10,hi.getNumberValidator());Zt.Factory.addGetterSetter(Ft,"rotateEnabled",!0);Zt.Factory.addGetterSetter(Ft,"rotationSnaps",[]);Zt.Factory.addGetterSetter(Ft,"rotateAnchorOffset",50,hi.getNumberValidator());Zt.Factory.addGetterSetter(Ft,"rotationSnapTolerance",5,hi.getNumberValidator());Zt.Factory.addGetterSetter(Ft,"borderEnabled",!0);Zt.Factory.addGetterSetter(Ft,"anchorStroke","rgb(0, 161, 255)");Zt.Factory.addGetterSetter(Ft,"anchorStrokeWidth",1,hi.getNumberValidator());Zt.Factory.addGetterSetter(Ft,"anchorFill","white");Zt.Factory.addGetterSetter(Ft,"anchorCornerRadius",0,hi.getNumberValidator());Zt.Factory.addGetterSetter(Ft,"borderStroke","rgb(0, 161, 255)");Zt.Factory.addGetterSetter(Ft,"borderStrokeWidth",1,hi.getNumberValidator());Zt.Factory.addGetterSetter(Ft,"borderDash");Zt.Factory.addGetterSetter(Ft,"keepRatio",!0);Zt.Factory.addGetterSetter(Ft,"centeredScaling",!1);Zt.Factory.addGetterSetter(Ft,"ignoreStroke",!1);Zt.Factory.addGetterSetter(Ft,"padding",0,hi.getNumberValidator());Zt.Factory.addGetterSetter(Ft,"node");Zt.Factory.addGetterSetter(Ft,"nodes");Zt.Factory.addGetterSetter(Ft,"boundBoxFunc");Zt.Factory.addGetterSetter(Ft,"shouldOverdrawWholeArea",!1);Zt.Factory.backCompat(Ft,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});Nt.Collection.mapMethods(Ft);var gl={},nq=Ve&&Ve.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(gl,"__esModule",{value:!0});gl.Wedge=void 0;var aq=wt,yl=ft,iq=mr,oq=dt,p2=Ze,sq=dt,zn=function(r){nq(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._sceneFunc=function(t){t.beginPath(),t.arc(0,0,this.radius(),0,oq.Konva.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return this.radius()*2},e.prototype.getHeight=function(){return this.radius()*2},e.prototype.setWidth=function(t){this.radius(t/2)},e.prototype.setHeight=function(t){this.radius(t/2)},e}(iq.Shape);gl.Wedge=zn;zn.prototype.className="Wedge";zn.prototype._centroid=!0;zn.prototype._attrsAffectingSize=["radius"];sq._registerNode(zn);yl.Factory.addGetterSetter(zn,"radius",0,p2.getNumberValidator());yl.Factory.addGetterSetter(zn,"angle",0,p2.getNumberValidator());yl.Factory.addGetterSetter(zn,"clockwise",!1);yl.Factory.backCompat(zn,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});aq.Collection.mapMethods(zn);var ml={};Object.defineProperty(ml,"__esModule",{value:!0});ml.Blur=void 0;var kx=ft,uq=sr,lq=Ze;function Mx(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var cq=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],fq=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function dq(r,e){var t=r.data,n=r.width,a=r.height,i,o,s,u,l,c,f,d,h,v,m,_,b,w,y,x,C,E,p,P,T,R,M,N,B=e+e+1,q=n-1,Z=a-1,Q=e+1,Y=Q*(Q+1)/2,J=new Mx,X=null,k=J,D=null,I=null,F=cq[e],L=fq[e];for(s=1;s<B;s++)k=k.next=new Mx,s===Q&&(X=k);for(k.next=J,f=c=0,o=0;o<a;o++){for(x=C=E=p=d=h=v=m=0,_=Q*(P=t[c]),b=Q*(T=t[c+1]),w=Q*(R=t[c+2]),y=Q*(M=t[c+3]),d+=Y*P,h+=Y*T,v+=Y*R,m+=Y*M,k=J,s=0;s<Q;s++)k.r=P,k.g=T,k.b=R,k.a=M,k=k.next;for(s=1;s<Q;s++)u=c+((q<s?q:s)<<2),d+=(k.r=P=t[u])*(N=Q-s),h+=(k.g=T=t[u+1])*N,v+=(k.b=R=t[u+2])*N,m+=(k.a=M=t[u+3])*N,x+=P,C+=T,E+=R,p+=M,k=k.next;for(D=J,I=X,i=0;i<n;i++)t[c+3]=M=m*F>>L,M!==0?(M=255/M,t[c]=(d*F>>L)*M,t[c+1]=(h*F>>L)*M,t[c+2]=(v*F>>L)*M):t[c]=t[c+1]=t[c+2]=0,d-=_,h-=b,v-=w,m-=y,_-=D.r,b-=D.g,w-=D.b,y-=D.a,u=f+((u=i+e+1)<q?u:q)<<2,x+=D.r=t[u],C+=D.g=t[u+1],E+=D.b=t[u+2],p+=D.a=t[u+3],d+=x,h+=C,v+=E,m+=p,D=D.next,_+=P=I.r,b+=T=I.g,w+=R=I.b,y+=M=I.a,x-=P,C-=T,E-=R,p-=M,I=I.next,c+=4;f+=n}for(i=0;i<n;i++){for(C=E=p=x=h=v=m=d=0,c=i<<2,_=Q*(P=t[c]),b=Q*(T=t[c+1]),w=Q*(R=t[c+2]),y=Q*(M=t[c+3]),d+=Y*P,h+=Y*T,v+=Y*R,m+=Y*M,k=J,s=0;s<Q;s++)k.r=P,k.g=T,k.b=R,k.a=M,k=k.next;for(l=n,s=1;s<=e;s++)c=l+i<<2,d+=(k.r=P=t[c])*(N=Q-s),h+=(k.g=T=t[c+1])*N,v+=(k.b=R=t[c+2])*N,m+=(k.a=M=t[c+3])*N,x+=P,C+=T,E+=R,p+=M,k=k.next,s<Z&&(l+=n);for(c=i,D=J,I=X,o=0;o<a;o++)u=c<<2,t[u+3]=M=m*F>>L,M>0?(M=255/M,t[u]=(d*F>>L)*M,t[u+1]=(h*F>>L)*M,t[u+2]=(v*F>>L)*M):t[u]=t[u+1]=t[u+2]=0,d-=_,h-=b,v-=w,m-=y,_-=D.r,b-=D.g,w-=D.b,y-=D.a,u=i+((u=o+Q)<Z?u:Z)*n<<2,d+=x+=D.r=t[u],h+=C+=D.g=t[u+1],v+=E+=D.b=t[u+2],m+=p+=D.a=t[u+3],D=D.next,_+=P=I.r,b+=T=I.g,w+=R=I.b,y+=M=I.a,x-=P,C-=T,E-=R,p-=M,I=I.next,c+=n}}var hq=function(e){var t=Math.round(this.blurRadius());t>0&&dq(e,t)};ml.Blur=hq;kx.Factory.addGetterSetter(uq.Node,"blurRadius",0,lq.getNumberValidator(),kx.Factory.afterSetFilter);var bl={};Object.defineProperty(bl,"__esModule",{value:!0});bl.Brighten=void 0;var Ox=ft,vq=sr,pq=Ze,gq=function(r){var e=this.brightness()*255,t=r.data,n=t.length,a;for(a=0;a<n;a+=4)t[a]+=e,t[a+1]+=e,t[a+2]+=e};bl.Brighten=gq;Ox.Factory.addGetterSetter(vq.Node,"brightness",0,pq.getNumberValidator(),Ox.Factory.afterSetFilter);var wl={};Object.defineProperty(wl,"__esModule",{value:!0});wl.Contrast=void 0;var Dx=ft,yq=sr,mq=Ze,bq=function(r){var e=Math.pow((this.contrast()+100)/100,2),t=r.data,n=t.length,a=150,i=150,o=150,s;for(s=0;s<n;s+=4)a=t[s],i=t[s+1],o=t[s+2],a/=255,a-=.5,a*=e,a+=.5,a*=255,i/=255,i-=.5,i*=e,i+=.5,i*=255,o/=255,o-=.5,o*=e,o+=.5,o*=255,a=a<0?0:a>255?255:a,i=i<0?0:i>255?255:i,o=o<0?0:o>255?255:o,t[s]=a,t[s+1]=i,t[s+2]=o};wl.Contrast=bq;Dx.Factory.addGetterSetter(yq.Node,"contrast",0,mq.getNumberValidator(),Dx.Factory.afterSetFilter);var _l={};Object.defineProperty(_l,"__esModule",{value:!0});_l.Emboss=void 0;var Ea=ft,xl=sr,wq=wt,g2=Ze,_q=function(r){var e=this.embossStrength()*10,t=this.embossWhiteLevel()*255,n=this.embossDirection(),a=this.embossBlend(),i=0,o=0,s=r.data,u=r.width,l=r.height,c=u*4,f=l;switch(n){case"top-left":i=-1,o=-1;break;case"top":i=-1,o=0;break;case"top-right":i=-1,o=1;break;case"right":i=0,o=1;break;case"bottom-right":i=1,o=1;break;case"bottom":i=1,o=0;break;case"bottom-left":i=1,o=-1;break;case"left":i=0,o=-1;break;default:wq.Util.error("Unknown emboss direction: "+n)}do{var d=(f-1)*c,h=i;f+h<1&&(h=0),f+h>l&&(h=0);var v=(f-1+h)*u*4,m=u;do{var _=d+(m-1)*4,b=o;m+b<1&&(b=0),m+b>u&&(b=0);var w=v+(m-1+b)*4,y=s[_]-s[w],x=s[_+1]-s[w+1],C=s[_+2]-s[w+2],E=y,p=E>0?E:-E,P=x>0?x:-x,T=C>0?C:-C;if(P>p&&(E=x),T>p&&(E=C),E*=e,a){var R=s[_]+E,M=s[_+1]+E,N=s[_+2]+E;s[_]=R>255?255:R<0?0:R,s[_+1]=M>255?255:M<0?0:M,s[_+2]=N>255?255:N<0?0:N}else{var B=t-E;B<0?B=0:B>255&&(B=255),s[_]=s[_+1]=s[_+2]=B}}while(--m)}while(--f)};_l.Emboss=_q;Ea.Factory.addGetterSetter(xl.Node,"embossStrength",.5,g2.getNumberValidator(),Ea.Factory.afterSetFilter);Ea.Factory.addGetterSetter(xl.Node,"embossWhiteLevel",.5,g2.getNumberValidator(),Ea.Factory.afterSetFilter);Ea.Factory.addGetterSetter(xl.Node,"embossDirection","top-left",null,Ea.Factory.afterSetFilter);Ea.Factory.addGetterSetter(xl.Node,"embossBlend",!1,null,Ea.Factory.afterSetFilter);var Sl={};Object.defineProperty(Sl,"__esModule",{value:!0});Sl.Enhance=void 0;var Rx=ft,xq=sr,Sq=Ze;function $p(r,e,t,n,a){var i=t-e,o=a-n,s;return i===0?n+o/2:o===0?n:(s=(r-e)/i,s=o*s+n,s)}var Cq=function(r){var e=r.data,t=e.length,n=e[0],a=n,i,o=e[1],s=o,u,l=e[2],c=l,f,d,h=this.enhance();if(h!==0){for(d=0;d<t;d+=4)i=e[d+0],i<n?n=i:i>a&&(a=i),u=e[d+1],u<o?o=u:u>s&&(s=u),f=e[d+2],f<l?l=f:f>c&&(c=f);a===n&&(a=255,n=0),s===o&&(s=255,o=0),c===l&&(c=255,l=0);var v,m,_,b,w,y,x,C,E;for(h>0?(m=a+h*(255-a),_=n-h*(n-0),w=s+h*(255-s),y=o-h*(o-0),C=c+h*(255-c),E=l-h*(l-0)):(v=(a+n)*.5,m=a+h*(a-v),_=n+h*(n-v),b=(s+o)*.5,w=s+h*(s-b),y=o+h*(o-b),x=(c+l)*.5,C=c+h*(c-x),E=l+h*(l-x)),d=0;d<t;d+=4)e[d+0]=$p(e[d+0],n,a,_,m),e[d+1]=$p(e[d+1],o,s,y,w),e[d+2]=$p(e[d+2],l,c,E,C)}};Sl.Enhance=Cq;Rx.Factory.addGetterSetter(xq.Node,"enhance",0,Sq.getNumberValidator(),Rx.Factory.afterSetFilter);var Cl={};Object.defineProperty(Cl,"__esModule",{value:!0});Cl.Grayscale=void 0;var Eq=function(r){var e=r.data,t=e.length,n,a;for(n=0;n<t;n+=4)a=.34*e[n]+.5*e[n+1]+.16*e[n+2],e[n]=a,e[n+1]=a,e[n+2]=a};Cl.Grayscale=Eq;var El={};Object.defineProperty(El,"__esModule",{value:!0});El.HSL=void 0;var qi=ft,hy=sr,vy=Ze;qi.Factory.addGetterSetter(hy.Node,"hue",0,vy.getNumberValidator(),qi.Factory.afterSetFilter);qi.Factory.addGetterSetter(hy.Node,"saturation",0,vy.getNumberValidator(),qi.Factory.afterSetFilter);qi.Factory.addGetterSetter(hy.Node,"luminance",0,vy.getNumberValidator(),qi.Factory.afterSetFilter);var Tq=function(r){var e=r.data,t=e.length,n=1,a=Math.pow(2,this.saturation()),i=Math.abs(this.hue()+360)%360,o=this.luminance()*127,s,u=n*a*Math.cos(i*Math.PI/180),l=n*a*Math.sin(i*Math.PI/180),c=.299*n+.701*u+.167*l,f=.587*n-.587*u+.33*l,d=.114*n-.114*u-.497*l,h=.299*n-.299*u-.328*l,v=.587*n+.413*u+.035*l,m=.114*n-.114*u+.293*l,_=.299*n-.3*u+1.25*l,b=.587*n-.586*u-1.05*l,w=.114*n+.886*u-.2*l,y,x,C,E;for(s=0;s<t;s+=4)y=e[s+0],x=e[s+1],C=e[s+2],E=e[s+3],e[s+0]=c*y+f*x+d*C+o,e[s+1]=h*y+v*x+m*C+o,e[s+2]=_*y+b*x+w*C+o,e[s+3]=E};El.HSL=Tq;var Tl={};Object.defineProperty(Tl,"__esModule",{value:!0});Tl.HSV=void 0;var zi=ft,py=sr,gy=Ze,Pq=function(r){var e=r.data,t=e.length,n=Math.pow(2,this.value()),a=Math.pow(2,this.saturation()),i=Math.abs(this.hue()+360)%360,o,s=n*a*Math.cos(i*Math.PI/180),u=n*a*Math.sin(i*Math.PI/180),l=.299*n+.701*s+.167*u,c=.587*n-.587*s+.33*u,f=.114*n-.114*s-.497*u,d=.299*n-.299*s-.328*u,h=.587*n+.413*s+.035*u,v=.114*n-.114*s+.293*u,m=.299*n-.3*s+1.25*u,_=.587*n-.586*s-1.05*u,b=.114*n+.886*s-.2*u,w,y,x,C;for(o=0;o<t;o+=4)w=e[o+0],y=e[o+1],x=e[o+2],C=e[o+3],e[o+0]=l*w+c*y+f*x,e[o+1]=d*w+h*y+v*x,e[o+2]=m*w+_*y+b*x,e[o+3]=C};Tl.HSV=Pq;zi.Factory.addGetterSetter(py.Node,"hue",0,gy.getNumberValidator(),zi.Factory.afterSetFilter);zi.Factory.addGetterSetter(py.Node,"saturation",0,gy.getNumberValidator(),zi.Factory.afterSetFilter);zi.Factory.addGetterSetter(py.Node,"value",0,gy.getNumberValidator(),zi.Factory.afterSetFilter);var Pl={};Object.defineProperty(Pl,"__esModule",{value:!0});Pl.Invert=void 0;var Aq=function(r){var e=r.data,t=e.length,n;for(n=0;n<t;n+=4)e[n]=255-e[n],e[n+1]=255-e[n+1],e[n+2]=255-e[n+2]};Pl.Invert=Aq;var Al={};Object.defineProperty(Al,"__esModule",{value:!0});Al.Kaleidoscope=void 0;var su=ft,y2=sr,kq=wt,m2=Ze,Mq=function(r,e,t){var n=r.data,a=e.data,i=r.width,o=r.height,s=t.polarCenterX||i/2,u=t.polarCenterY||o/2,l,c,f,d=0,h=0,v=0,m=0,_,b=Math.sqrt(s*s+u*u);c=i-s,f=o-u,_=Math.sqrt(c*c+f*f),b=_>b?_:b;var w=o,y=i,x,C,E=360/y*Math.PI/180,p,P;for(C=0;C<y;C+=1)for(p=Math.sin(C*E),P=Math.cos(C*E),x=0;x<w;x+=1)c=Math.floor(s+b*x/w*P),f=Math.floor(u+b*x/w*p),l=(f*i+c)*4,d=n[l+0],h=n[l+1],v=n[l+2],m=n[l+3],l=(C+x*i)*4,a[l+0]=d,a[l+1]=h,a[l+2]=v,a[l+3]=m},Oq=function(r,e,t){var n=r.data,a=e.data,i=r.width,o=r.height,s=t.polarCenterX||i/2,u=t.polarCenterY||o/2,l,c,f,d,h,v=0,m=0,_=0,b=0,w,y=Math.sqrt(s*s+u*u);c=i-s,f=o-u,w=Math.sqrt(c*c+f*f),y=w>y?w:y;var x=o,C=i,E,p,P=0,T,R;for(c=0;c<i;c+=1)for(f=0;f<o;f+=1)d=c-s,h=f-u,E=Math.sqrt(d*d+h*h)*x/y,p=(Math.atan2(h,d)*180/Math.PI+360+P)%360,p=p*C/360,T=Math.floor(p),R=Math.floor(E),l=(R*i+T)*4,v=n[l+0],m=n[l+1],_=n[l+2],b=n[l+3],l=(f*i+c)*4,a[l+0]=v,a[l+1]=m,a[l+2]=_,a[l+3]=b},Dq=function(r){var e=r.width,t=r.height,n,a,i,o,s,u,l,c,f,d,h=Math.round(this.kaleidoscopePower()),v=Math.round(this.kaleidoscopeAngle()),m=Math.floor(e*(v%360)/360);if(!(h<1)){var _=kq.Util.createCanvasElement();_.width=e,_.height=t;var b=_.getContext("2d").getImageData(0,0,e,t);Mq(r,b,{polarCenterX:e/2,polarCenterY:t/2});for(var w=e/Math.pow(2,h);w<=8;)w=w*2,h-=1;w=Math.ceil(w);var y=w,x=0,C=y,E=1;for(m+w>e&&(x=y,C=0,E=-1),a=0;a<t;a+=1)for(n=x;n!==C;n+=E)i=Math.round(n+m)%e,f=(e*a+i)*4,s=b.data[f+0],u=b.data[f+1],l=b.data[f+2],c=b.data[f+3],d=(e*a+n)*4,b.data[d+0]=s,b.data[d+1]=u,b.data[d+2]=l,b.data[d+3]=c;for(a=0;a<t;a+=1)for(y=Math.floor(w),o=0;o<h;o+=1){for(n=0;n<y+1;n+=1)f=(e*a+n)*4,s=b.data[f+0],u=b.data[f+1],l=b.data[f+2],c=b.data[f+3],d=(e*a+y*2-n-1)*4,b.data[d+0]=s,b.data[d+1]=u,b.data[d+2]=l,b.data[d+3]=c;y*=2}Oq(b,r,{polarRotation:0})}};Al.Kaleidoscope=Dq;su.Factory.addGetterSetter(y2.Node,"kaleidoscopePower",2,m2.getNumberValidator(),su.Factory.afterSetFilter);su.Factory.addGetterSetter(y2.Node,"kaleidoscopeAngle",0,m2.getNumberValidator(),su.Factory.afterSetFilter);var kl={};Object.defineProperty(kl,"__esModule",{value:!0});kl.Mask=void 0;var Ix=ft,Rq=sr,Iq=Ze;function Rs(r,e,t){var n=(t*r.width+e)*4,a=[];return a.push(r.data[n++],r.data[n++],r.data[n++],r.data[n++]),a}function _o(r,e){return Math.sqrt(Math.pow(r[0]-e[0],2)+Math.pow(r[1]-e[1],2)+Math.pow(r[2]-e[2],2))}function Lq(r){for(var e=[0,0,0],t=0;t<r.length;t++)e[0]+=r[t][0],e[1]+=r[t][1],e[2]+=r[t][2];return e[0]/=r.length,e[1]/=r.length,e[2]/=r.length,e}function Nq(r,e){var t=Rs(r,0,0),n=Rs(r,r.width-1,0),a=Rs(r,0,r.height-1),i=Rs(r,r.width-1,r.height-1),o=e||10;if(_o(t,n)<o&&_o(n,i)<o&&_o(i,a)<o&&_o(a,t)<o){for(var s=Lq([n,t,i,a]),u=[],l=0;l<r.width*r.height;l++){var c=_o(s,[r.data[l*4],r.data[l*4+1],r.data[l*4+2]]);u[l]=c<o?0:255}return u}}function Fq(r,e){for(var t=0;t<r.width*r.height;t++)r.data[4*t+3]=e[t]}function Bq(r,e,t){for(var n=[1,1,1,1,0,1,1,1,1],a=Math.round(Math.sqrt(n.length)),i=Math.floor(a/2),o=[],s=0;s<t;s++)for(var u=0;u<e;u++){for(var l=s*e+u,c=0,f=0;f<a;f++)for(var d=0;d<a;d++){var h=s+f-i,v=u+d-i;if(h>=0&&h<t&&v>=0&&v<e){var m=h*e+v,_=n[f*a+d];c+=r[m]*_}}o[l]=c===255*8?255:0}return o}function qq(r,e,t){for(var n=[1,1,1,1,1,1,1,1,1],a=Math.round(Math.sqrt(n.length)),i=Math.floor(a/2),o=[],s=0;s<t;s++)for(var u=0;u<e;u++){for(var l=s*e+u,c=0,f=0;f<a;f++)for(var d=0;d<a;d++){var h=s+f-i,v=u+d-i;if(h>=0&&h<t&&v>=0&&v<e){var m=h*e+v,_=n[f*a+d];c+=r[m]*_}}o[l]=c>=255*4?255:0}return o}function zq(r,e,t){for(var n=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],a=Math.round(Math.sqrt(n.length)),i=Math.floor(a/2),o=[],s=0;s<t;s++)for(var u=0;u<e;u++){for(var l=s*e+u,c=0,f=0;f<a;f++)for(var d=0;d<a;d++){var h=s+f-i,v=u+d-i;if(h>=0&&h<t&&v>=0&&v<e){var m=h*e+v,_=n[f*a+d];c+=r[m]*_}}o[l]=c}return o}var Gq=function(r){var e=this.threshold(),t=Nq(r,e);return t&&(t=Bq(t,r.width,r.height),t=qq(t,r.width,r.height),t=zq(t,r.width,r.height),Fq(r,t)),r};kl.Mask=Gq;Ix.Factory.addGetterSetter(Rq.Node,"threshold",0,Iq.getNumberValidator(),Ix.Factory.afterSetFilter);var Ml={};Object.defineProperty(Ml,"__esModule",{value:!0});Ml.Noise=void 0;var Lx=ft,$q=sr,Vq=Ze,Uq=function(r){var e=this.noise()*255,t=r.data,n=t.length,a=e/2,i;for(i=0;i<n;i+=4)t[i+0]+=a-2*a*Math.random(),t[i+1]+=a-2*a*Math.random(),t[i+2]+=a-2*a*Math.random()};Ml.Noise=Uq;Lx.Factory.addGetterSetter($q.Node,"noise",.2,Vq.getNumberValidator(),Lx.Factory.afterSetFilter);var Ol={};Object.defineProperty(Ol,"__esModule",{value:!0});Ol.Pixelate=void 0;var Nx=ft,Hq=wt,jq=sr,Wq=Ze,Kq=function(r){var e=Math.ceil(this.pixelSize()),t=r.width,n=r.height,a,i,o,s,u,l,c,f=Math.ceil(t/e),d=Math.ceil(n/e),h,v,m,_,b,w,y,x=r.data;if(e<=0){Hq.Util.error("pixelSize value can not be <= 0");return}for(b=0;b<f;b+=1)for(w=0;w<d;w+=1){for(s=0,u=0,l=0,c=0,h=b*e,v=h+e,m=w*e,_=m+e,y=0,a=h;a<v;a+=1)if(!(a>=t))for(i=m;i<_;i+=1)i>=n||(o=(t*i+a)*4,s+=x[o+0],u+=x[o+1],l+=x[o+2],c+=x[o+3],y+=1);for(s=s/y,u=u/y,l=l/y,c=c/y,a=h;a<v;a+=1)if(!(a>=t))for(i=m;i<_;i+=1)i>=n||(o=(t*i+a)*4,x[o+0]=s,x[o+1]=u,x[o+2]=l,x[o+3]=c)}};Ol.Pixelate=Kq;Nx.Factory.addGetterSetter(jq.Node,"pixelSize",8,Wq.getNumberValidator(),Nx.Factory.afterSetFilter);var Dl={};Object.defineProperty(Dl,"__esModule",{value:!0});Dl.Posterize=void 0;var Fx=ft,Yq=sr,Xq=Ze,Zq=function(r){var e=Math.round(this.levels()*254)+1,t=r.data,n=t.length,a=255/e,i;for(i=0;i<n;i+=1)t[i]=Math.floor(t[i]/a)*a};Dl.Posterize=Zq;Fx.Factory.addGetterSetter(Yq.Node,"levels",.5,Xq.getNumberValidator(),Fx.Factory.afterSetFilter);var Rl={};Object.defineProperty(Rl,"__esModule",{value:!0});Rl.RGB=void 0;var uu=ft,yy=sr,Qq=Ze,Jq=function(r){var e=r.data,t=e.length,n=this.red(),a=this.green(),i=this.blue(),o,s;for(o=0;o<t;o+=4)s=(.34*e[o]+.5*e[o+1]+.16*e[o+2])/255,e[o]=s*n,e[o+1]=s*a,e[o+2]=s*i,e[o+3]=e[o+3]};Rl.RGB=Jq;uu.Factory.addGetterSetter(yy.Node,"red",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)});uu.Factory.addGetterSetter(yy.Node,"green",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)});uu.Factory.addGetterSetter(yy.Node,"blue",0,Qq.RGBComponent,uu.Factory.afterSetFilter);var Il={};Object.defineProperty(Il,"__esModule",{value:!0});Il.RGBA=void 0;var Ho=ft,Ll=sr,ez=Ze,tz=function(r){var e=r.data,t=e.length,n=this.red(),a=this.green(),i=this.blue(),o=this.alpha(),s,u;for(s=0;s<t;s+=4)u=1-o,e[s]=n*o+e[s]*u,e[s+1]=a*o+e[s+1]*u,e[s+2]=i*o+e[s+2]*u};Il.RGBA=tz;Ho.Factory.addGetterSetter(Ll.Node,"red",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)});Ho.Factory.addGetterSetter(Ll.Node,"green",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)});Ho.Factory.addGetterSetter(Ll.Node,"blue",0,ez.RGBComponent,Ho.Factory.afterSetFilter);Ho.Factory.addGetterSetter(Ll.Node,"alpha",1,function(r){return this._filterUpToDate=!1,r>1?1:r<0?0:r});var Nl={};Object.defineProperty(Nl,"__esModule",{value:!0});Nl.Sepia=void 0;var rz=function(r){var e=r.data,t=e.length,n,a,i,o;for(n=0;n<t;n+=4)a=e[n+0],i=e[n+1],o=e[n+2],e[n+0]=Math.min(255,a*.393+i*.769+o*.189),e[n+1]=Math.min(255,a*.349+i*.686+o*.168),e[n+2]=Math.min(255,a*.272+i*.534+o*.131)};Nl.Sepia=rz;var Fl={};Object.defineProperty(Fl,"__esModule",{value:!0});Fl.Solarize=void 0;var nz=function(r){var e=r.data,t=r.width,n=r.height,a=t*4,i=n;do{var o=(i-1)*a,s=t;do{var u=o+(s-1)*4,l=e[u],c=e[u+1],f=e[u+2];l>127&&(l=255-l),c>127&&(c=255-c),f>127&&(f=255-f),e[u]=l,e[u+1]=c,e[u+2]=f}while(--s)}while(--i)};Fl.Solarize=nz;var Bl={};Object.defineProperty(Bl,"__esModule",{value:!0});Bl.Threshold=void 0;var Bx=ft,az=sr,iz=Ze,oz=function(r){var e=this.threshold()*255,t=r.data,n=t.length,a;for(a=0;a<n;a+=1)t[a]=t[a]<e?0:255};Bl.Threshold=oz;Bx.Factory.addGetterSetter(az.Node,"threshold",.5,iz.getNumberValidator(),Bx.Factory.afterSetFilter);Object.defineProperty(Uu,"__esModule",{value:!0});Uu.Konva=void 0;var qx=Hu,sz=Ju,uz=rl,lz=al,cz=il,fz=ol,zx=Bi,dz=ss,hz=us,vz=ls,pz=cl,gz=fl,yz=dl,mz=hl,bz=ti,wz=vl,_z=pl,xz=gl,Sz=ml,Cz=bl,Ez=wl,Tz=_l,Pz=Sl,Az=Cl,kz=El,Mz=Tl,Oz=Pl,Dz=Al,Rz=kl,Iz=Ml,Lz=Ol,Nz=Dl,Fz=Rl,Bz=Il,qz=Nl,zz=Fl,Gz=Bl;Uu.Konva=qx.Konva.Util._assign(qx.Konva,{Arc:sz.Arc,Arrow:uz.Arrow,Circle:lz.Circle,Ellipse:cz.Ellipse,Image:fz.Image,Label:zx.Label,Tag:zx.Tag,Line:dz.Line,Path:hz.Path,Rect:vz.Rect,RegularPolygon:pz.RegularPolygon,Ring:gz.Ring,Sprite:yz.Sprite,Star:mz.Star,Text:bz.Text,TextPath:wz.TextPath,Transformer:_z.Transformer,Wedge:xz.Wedge,Filters:{Blur:Sz.Blur,Brighten:Cz.Brighten,Contrast:Ez.Contrast,Emboss:Tz.Emboss,Enhance:Pz.Enhance,Grayscale:Az.Grayscale,HSL:kz.HSL,HSV:Mz.HSV,Invert:Oz.Invert,Kaleidoscope:Dz.Kaleidoscope,Mask:Rz.Mask,Noise:Iz.Noise,Pixelate:Lz.Pixelate,Posterize:Nz.Posterize,RGB:Fz.RGB,RGBA:Bz.RGBA,Sepia:qz.Sepia,Solarize:zz.Solarize,Threshold:Gz.Threshold}});(function(r,e){var t=Uu.Konva;t._injectGlobal(t),e.default=t,r.exports=e.default})(ug,ug.exports);var $z=ug.exports;const Vz=Aa($z);var b2={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(self,function(){return(()=>{var t={347:(a,i,o)=>{var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},u=o(218),l=o(259),c=o(171),f=o(961),d=0;a.exports=function(h,v){var m=h;l.options=h;var _,b,w,y,x,C,E,p,P,T,R,M,N,B,q,Z,Q,Y,J,X="cy-edge-bend-editing-cxt-add-bend-point"+d,k="cy-edge-bend-editing-cxt-remove-bend-point"+d,D="cy-edge-bend-editing-cxt-remove-multiple-bend-point"+d,I="cy-edge-control-editing-cxt-add-control-point"+d,F="cy-edge-control-editing-cxt-remove-control-point"+d,L="cy-edge-bend-editing-cxt-remove-multiple-control-point"+d,H=null,j=null,W=!1,re={init:function(){f(v,l,h);var se=h,ce=$(this),ge="cy-node-edge-editing-stage"+d;d++;var Pe,Oe,Se=$('<div id="'+ge+'"></div>');ce.find("#"+ge).length<1&&ce.append(Se),(Pe=Konva.stages.length<d?new Konva.Stage({id:"node-edge-editing-stage",container:ge,width:ce.width(),height:ce.height()}):Konva.stages[d-1]).getChildren().length<1?(Oe=new Konva.Layer,Pe.add(Oe)):Oe=Pe.getChildren()[0];var le={edge:void 0,edgeType:"none",anchors:[],touchedAnchor:void 0,touchedAnchorIndex:void 0,bindListeners:function(Me){Me.on("mousedown touchstart",this.eMouseDown)},unbindListeners:function(Me){Me.off("mousedown touchstart",this.eMouseDown)},eMouseDown:function(Me){v.autounselectify(!1),W=!0,le.touchedAnchor=Me.target,J=!1,le.edge.unselect();var _e=l.syntax[le.edgeType].weight,Re=l.syntax[le.edgeType].distance,Ye=le.edge;ht={edge:Ye,type:le.edgeType,weights:Ye.data(_e)?[].concat(Ye.data(_e)):[],distances:Ye.data(Re)?[].concat(Ye.data(Re)):[]},Q=v.style()._private.coreStyle["active-bg-opacity"]?v.style()._private.coreStyle["active-bg-opacity"].value:.15,v.style().selector("core").style("active-bg-opacity",0).update(),qe(),v.autoungrabify(!0),Oe.getStage().on("contentTouchend contentMouseup",le.eMouseUp),Oe.getStage().on("contentMouseout",le.eMouseOut)},eMouseUp:function(Me){W=!1,le.touchedAnchor=void 0,J=!1,le.edge.select(),v.style().selector("core").style("active-bg-opacity",Q).update(),Be(),v.autounselectify(!0),v.autoungrabify(!1),Oe.getStage().off("contentTouchend contentMouseup",le.eMouseUp),Oe.getStage().off("contentMouseout",le.eMouseOut)},eMouseOut:function(Me){J=!0},clearAnchorsExcept:function(){var Me=this,_e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,Re=!1;this.anchors.forEach(function(Ye,nt){_e&&Ye===_e?Re=!0:(Me.unbindListeners(Ye),Ye.destroy())}),Re?this.anchors=[_e]:(this.anchors=[],this.edge=void 0,this.edgeType="none")},renderAnchorShapes:function(Me){if(this.edge=Me,this.edgeType=l.getEdgeType(Me),Me.hasClass("edgebendediting-hasbendpoints")||Me.hasClass("edgecontrolediting-hascontrolpoints")){for(var _e=l.getAnchorsAsArray(Me),Re=.65*ve(Me),Ye=(Me.source().position(),Me.target().position(),0);_e&&Ye<_e.length;Ye+=2){var nt=_e[Ye],Je=_e[Ye+1];this.renderAnchorShape(nt,Je,Re)}Oe.draw()}},renderAnchorShape:function(Me,_e,Re){var Ye=fe({x:Me-Re/2,y:_e-Re/2});Re*=v.zoom();var nt=new Konva.Rect({x:Ye.x,y:Ye.y,width:Re,height:Re,fill:"black",strokeWidth:0,draggable:!0});this.anchors.push(nt),this.bindListeners(nt),Oe.add(nt)}},te=function(Me,_e){var Re=Me.target||Me.cyTarget;if(!l.isIgnoredEdge(Re)){var Ye,nt,Je,xt,er=l.getEdgeType(Re);er==="none"?(Ye=[],nt=[]):(Je=l.syntax[er].weight,xt=l.syntax[er].distance,Ye=Re.data(Je)?[].concat(Re.data(Je)):Re.data(Je),nt=Re.data(xt)?[].concat(Re.data(xt)):Re.data(xt));var Kt={edge:Re,type:er,weights:Ye,distances:nt};l.addAnchorPoint(void 0,void 0,_e),ae().undoable&&v.undoRedo().do("changeAnchorPoints",Kt)}we(),Re.select()},ne=function(Me){var _e=le.edge,Re=l.getEdgeType(_e);if(!l.edgeTypeNoneShouldntHappen(Re,"UiUtilities.js, cxtRemoveAnchorFcn")){var Ye={edge:_e,type:Re,weights:[].concat(_e.data(l.syntax[Re].weight)),distances:[].concat(_e.data(l.syntax[Re].distance))};l.removeAnchor(),ae().undoable&&v.undoRedo().do("changeAnchorPoints",Ye),setTimeout(function(){we(),_e.select()},50)}},de=function(Me){var _e=le.edge,Re=l.getEdgeType(_e),Ye={edge:_e,type:Re,weights:[].concat(_e.data(l.syntax[Re].weight)),distances:[].concat(_e.data(l.syntax[Re].distance))};l.removeAllAnchors(),ae().undoable&&v.undoRedo().do("changeAnchorPoints",Ye),setTimeout(function(){we(),_e.select()},50)},Ce=se.handleReconnectEdge,Le=se.validateEdge,$e=se.actOnUnsuccessfulReconnection,Ne=[{id:X,content:se.addBendMenuItemTitle,selector:"edge",onClickFunction:function(Me){te(Me,"bend")},hasTrailingDivider:se.useTrailingDividersAfterContextMenuOptions},{id:k,content:se.removeBendMenuItemTitle,selector:"edge",onClickFunction:ne,hasTrailingDivider:se.useTrailingDividersAfterContextMenuOptions},{id:D,content:se.removeAllBendMenuItemTitle,selector:se.enableMultipleAnchorRemovalOption&&":selected.edgebendediting-hasmultiplebendpoints",onClickFunction:de,hasTrailingDivider:se.useTrailingDividersAfterContextMenuOptions},{id:I,content:se.addControlMenuItemTitle,selector:"edge",coreAsWell:!0,onClickFunction:function(Me){te(Me,"control")},hasTrailingDivider:se.useTrailingDividersAfterContextMenuOptions},{id:F,content:se.removeControlMenuItemTitle,selector:"edge",coreAsWell:!0,onClickFunction:ne,hasTrailingDivider:se.useTrailingDividersAfterContextMenuOptions},{id:L,content:se.removeAllControlMenuItemTitle,selector:se.enableMultipleAnchorRemovalOption&&":selected.edgecontrolediting-hasmultiplecontrolpoints",onClickFunction:de,hasTrailingDivider:se.useTrailingDividersAfterContextMenuOptions}];if(v.contextMenus){var De=v.contextMenus("get");De.isActive()?De.appendMenuItems(Ne):v.contextMenus({menuItems:Ne})}var me=u(function(){Se.attr("height",ce.height()).attr("width",ce.width()).css({position:"absolute",top:0,left:0,"z-index":ae().zIndex}),setTimeout(function(){var Me=Se.offset(),_e=ce.offset();Se.css({top:-(Me.top-_e.top),left:-(Me.left-_e.left)}),Oe.getStage().setWidth(ce.width()),Oe.getStage().setHeight(ce.height()),v&&we()},0)},250);function G(){me()}G(),$(window).bind("resize",function(){G()});var U,oe=ce.data("cyedgeediting");function ae(){return U||(U=ce.data("cyedgeediting").options)}function fe(Me){var _e=v.pan(),Re=v.zoom();return{x:Me.x*Re+_e.x,y:Me.y*Re+_e.y}}function we(){le.clearAnchorsExcept(le.touchedAnchor),H!==null&&(H.destroy(),H=null),j!==null&&(j.destroy(),j=null),Oe.draw(),Y&&(le.renderAnchorShapes(Y),function(Me){if(Me){var _e=l.getAnchorsAsArray(Me);_e===void 0&&(_e=[]);var Re=Me.sourceEndpoint(),Ye=Me.targetEndpoint();if(Re.x&&Ye.x&&(_e.unshift(Re.y),_e.unshift(Re.x),_e.push(Ye.x),_e.push(Ye.y),_e)){var nt={x:_e[0],y:_e[1]},Je={x:_e[_e.length-2],y:_e[_e.length-1]},xt={x:_e[2],y:_e[3]},er={x:_e[_e.length-4],y:_e[_e.length-3]};(function(Kt,Ut,gt,tr,$r){var Cr=Ut.x-gt/2,Vr=Ut.y-gt/2,Ur=tr.x-gt/2,ln=tr.y-gt/2,dr=$r.x-gt/2,xn=$r.y-gt/2,Br=fe({x:Kt.x-gt/2,y:Kt.y-gt/2}),Or=fe({x:Cr,y:Vr});gt=gt*v.zoom()/2;var It=fe({x:Ur,y:ln}),en=fe({x:dr,y:xn}),oa=gt,Gn=Math.sqrt(Math.pow(It.x-Br.x,2)+Math.pow(It.y-Br.y,2)),sa=Br.x+oa/Gn*(It.x-Br.x),Hr=Br.y+oa/Gn*(It.y-Br.y),La=Math.sqrt(Math.pow(en.x-Or.x,2)+Math.pow(en.y-Or.y,2)),wr=Or.x+oa/La*(en.x-Or.x),Sn=Or.y+oa/La*(en.y-Or.y);H===null&&(H=new Konva.Circle({x:sa+gt,y:Hr+gt,radius:gt,fill:"black"})),j===null&&(j=new Konva.Circle({x:wr+gt,y:Sn+gt,radius:gt,fill:"black"})),Oe.add(H),Oe.add(j),Oe.draw()})(nt,Je,.65*ve(Me),xt,er)}}}(Y))}function ve(Me){var _e=ae().anchorShapeSizeFactor;return parseFloat(Me.css("width"))<=2.5?2.5*_e:parseFloat(Me.css("width"))*_e}function Te(Me,_e,Re,Ye,nt){return Me>=Ye-Re/2&&Me<=Ye+Re/2&&_e>=nt-Re/2&&_e<=nt+Re/2}function Fe(Me,_e,Re){var Ye=l.getEdgeType(Re);if(Ye==="none"||Re.data(l.syntax[Ye].weight)==null||Re.data(l.syntax[Ye].weight).length==0)return-1;for(var nt=l.getAnchorsAsArray(Re),Je=ve(Re),xt=0;nt&&xt<nt.length;xt+=2)if(Te(Me,_e,Je,nt[xt],nt[xt+1]))return xt/2;return-1}function qe(){B=v.panningEnabled(),q=v.zoomingEnabled(),Z=v.boxSelectionEnabled(),v.zoomingEnabled(!1).panningEnabled(!1).boxSelectionEnabled(!1)}function Be(){v.zoomingEnabled(q).panningEnabled(B).boxSelectionEnabled(Z)}oe==null&&(oe={}),oe.options=se;var et=u(function(Me,_e,Re,Ye){var nt=Me.data(l.syntax[_e].weight),Je=Me.data(l.syntax[_e].distance),xt=l.convertToRelativePosition(Me,Ye);nt[Re]=xt.weight,Je[Re]=xt.distance,Me.data(l.syntax[_e].weight,nt),Me.data(l.syntax[_e].distance,Je)},5);B=v.panningEnabled(),q=v.zoomingEnabled(),Z=v.boxSelectionEnabled();var Ue,We,lt,ht,Rt,vt,Ot,Bt,pt,st=(Wt=v.edges(":selected")).length;st===1&&(Y=Wt[0]),v.bind("zoom pan",y=function(){Y&&we()}),v.on("data","edge",N=function(){Y&&we()}),v.on("style","edge.edgebendediting-hasbendpoints:selected, edge.edgecontrolediting-hascontrolpoints:selected",_=function(){setTimeout(function(){we()},50)}),v.on("remove","edge",b=function(){if(this.selected()){if(st-=1,v.startBatch(),Y&&Y.removeClass("cy-edge-editing-highlight"),st===1){var Me=v.edges(":selected");Me.length===1?(Y=Me[0]).addClass("cy-edge-editing-highlight"):Y=void 0}else Y=void 0;v.endBatch()}we()}),v.on("add","edge",w=function(){this.selected()&&(st+=1,v.startBatch(),Y&&Y.removeClass("cy-edge-editing-highlight"),st===1?(Y=this).addClass("cy-edge-editing-highlight"):Y=void 0,v.endBatch()),we()}),v.on("select","edge",x=function(){var Me=this;Me.target().connectedEdges().length!=0&&Me.source().connectedEdges().length!=0&&(st+=1,v.startBatch(),Y&&Y.removeClass("cy-edge-editing-highlight"),st===1?(Y=Me).addClass("cy-edge-editing-highlight"):Y=void 0,v.endBatch(),we())}),v.on("unselect","edge",C=function(){if(st-=1,v.startBatch(),Y&&Y.removeClass("cy-edge-editing-highlight"),st===1){var Me=v.edges(":selected");Me.length===1?(Y=Me[0]).addClass("cy-edge-editing-highlight"):Y=void 0}else Y=void 0;v.endBatch(),we()});var Qt,br,lr,Sr,Wt,Jt=!1;v.on("tapstart",E=function(Me){We=Me.position||Me.cyPosition}),v.on("tapstart","edge",p=function(Me){var _e=this;if(Y&&Y.id()===_e.id()){lt=_e,l.getEdgeType(_e);var Re=function(Je,xt,er){var Kt=ve(er),Ut=er._private.rscratch.allpts,gt={x:Ut[0],y:Ut[1]},tr={x:Ut[Ut.length-2],y:Ut[Ut.length-1]};return fe(gt),fe(tr),Te(Je,xt,Kt,gt.x,gt.y)?0:Te(Je,xt,Kt,tr.x,tr.y)?1:-1}(We.x,We.y,_e);if(Re==0||Re==1){_e.unselect(),vt=Re,Bt=Re==0?lt.source():lt.target();var Ye=Re==0?"source":"target",nt=c.disconnectEdge(lt,v,Me.renderedPosition,Ye);Ot=nt.dummyNode,lt=nt.edge,qe()}else Ue=void 0,Rt=!0}else Rt=!1}),v.on("drag","node",M=function(){Y&&we()}),v.on("tapdrag",P=function(Me){v.edges(":selected").length>0&&v.autounselectify(!1);var _e=lt;if(lt===void 0||!l.isIgnoredEdge(_e)){var Re=l.getEdgeType(_e);if(Rt&&se.enableCreateAnchorOnDrag&&!W&&Re!=="none"){var Ye=l.syntax[Re].weight,nt=l.syntax[Re].distance;ht={edge:_e,type:Re,weights:_e.data(Ye)?[].concat(_e.data(Ye)):[],distances:_e.data(nt)?[].concat(_e.data(nt)):[]},_e.unselect(),Ue=l.addAnchorPoint(_e,We),lt=_e,Rt=void 0,Jt=!0,qe()}if(W||lt!==void 0&&(Ue!==void 0||vt!==void 0)){var Je=Me.position||Me.cyPosition;vt!=-1&&Ot?Ot.position(Je):Ue!=null?et(_e,Re,Ue,Je):W&&(le.touchedAnchorIndex===void 0&&We&&(le.touchedAnchorIndex=Fe(We.x,We.y,le.edge)),le.touchedAnchorIndex!==void 0&&et(le.edge,le.edgeType,le.touchedAnchorIndex,Je)),Me.target&&Me.target[0]&&Me.target.isNode()&&(pt=Me.target)}}}),v.on("tapend",T=function(Me){J&&Oe.getStage().fire("contentMouseup");var _e=lt||le.edge;if(_e!==void 0){var Re=le.touchedAnchorIndex;if(Re!=null){var Ye,nt=_e.source().position("x"),Je=_e.source().position("y"),xt=_e.target().position("x"),er=_e.target().position("y"),Kt=l.getAnchorsAsArray(_e),Ut=[nt,Je].concat(Kt).concat([xt,er]),gt=Re+1,tr=gt-1,$r=gt+1,Cr={x:Ut[2*gt],y:Ut[2*gt+1]},Vr={x:Ut[2*tr],y:Ut[2*tr+1]},Ur={x:Ut[2*$r],y:Ut[2*$r+1]};if(Cr.x===Vr.x&&Cr.y===Vr.y||Cr.x===Vr.x&&Cr.y===Vr.y)Ye=!0;else{var ln,dr=(Vr.y-Ur.y)/(Vr.x-Ur.x),xn={srcPoint:Vr,tgtPoint:Ur,m1:dr,m2:-1/dr},Br=l.getIntersection(_e,Cr,xn),Or=Math.sqrt(Math.pow(Cr.x-Br.x,2)+Math.pow(Cr.y-Br.y,2));(ln=l.getEdgeType(_e))==="bend"&&Or<ae().bendRemovalSensitivity&&(Ye=!0)}Ye&&l.removeAnchor(_e,Re)}else if(Ot!=null&&(vt==0||vt==1)){var It=Bt,en="valid",oa=vt==0?"source":"target";if(pt){var Gn=vt==0?pt:_e.source(),sa=vt==1?pt:_e.target();typeof Le=="function"&&(en=Le(_e,Gn,sa)),It=en==="valid"?pt:Bt}if(Gn=vt==0?It:_e.source(),sa=vt==1?It:_e.target(),_e=c.connectEdge(_e,Bt,oa),Bt.id()!==It.id())if(typeof Ce=="function"){var Hr=Ce(Gn.id(),sa.id(),_e.data());if(Hr&&(c.copyEdge(_e,Hr),l.initAnchorPoints(ae().bendPositionsFunction,ae().controlPositionsFunction,[Hr])),Hr&&ae().undoable){var La={newEdge:Hr,oldEdge:_e};v.undoRedo().do("removeReconnectedEdge",La),_e=Hr}else Hr&&(v.remove(_e),_e=Hr)}else{var wr=vt==0?{source:It.id()}:{target:It.id()},Sn=vt==0?{source:Bt.id()}:{target:Bt.id()};if(ae().undoable&&It.id()!==Bt.id()){var vi={edge:_e,location:wr,oldLoc:Sn};_e=v.undoRedo().do("reconnectEdge",vi).edge}}en!=="valid"&&typeof $e=="function"&&$e(),_e.select(),v.remove(Ot)}}(ln=l.getEdgeType(_e))==="none"&&(ln="bend"),le.touchedAnchorIndex!==void 0||Jt||(ht=void 0);var fs=l.syntax[ln].weight;_e!==void 0&&ht!==void 0&&(_e.data(fs)?_e.data(fs).toString():null)!=ht.weights.toString()&&(Jt&&(_e.select(),v.autounselectify(!0)),ae().undoable&&v.undoRedo().do("changeAnchorPoints",ht)),Ue=void 0,lt=void 0,ht=void 0,Rt=void 0,vt=void 0,Ot=void 0,Bt=void 0,pt=void 0,We=void 0,Jt=!1,le.touchedAnchorIndex=void 0,Be(),setTimeout(function(){we()},50)}),v.on("edgeediting.movestart",function(Me,_e){Sr=!1,_e[0]!=null&&_e.forEach(function(Re){l.getAnchorsAsArray(Re)==null||Sr||(br={x:l.getAnchorsAsArray(Re)[0],y:l.getAnchorsAsArray(Re)[1]},Qt={firstTime:!0,firstAnchorPosition:{x:br.x,y:br.y},edges:_e},lr=Re,Sr=!0)})}),v.on("edgeediting.moveend",function(Me,_e){if(Qt!=null){var Re=Qt.firstAnchorPosition,Ye={x:l.getAnchorsAsArray(lr)[0],y:l.getAnchorsAsArray(lr)[1]};Qt.positionDiff={x:-Ye.x+Re.x,y:-Ye.y+Re.y},delete Qt.firstAnchorPosition,ae().undoable&&v.undoRedo().do("moveAnchorPoints",Qt),Qt=void 0}}),v.on("cxttap",R=function(Me){var _e,Re,Ye=Me.target||Me.cyTarget,nt=!1;try{nt=Ye.isEdge()}catch{}nt?(_e=Ye,Re=l.getEdgeType(_e)):(_e=le.edge,Re=le.edgeType);var Je=v.contextMenus("get");if(!Y||Y.id()!=_e.id()||l.isIgnoredEdge(_e)||Y!==_e)return Je.hideMenuItem(k),Je.hideMenuItem(X),Je.hideMenuItem(F),void Je.hideMenuItem(I);var xt=Me.position||Me.cyPosition,er=Fe(xt.x,xt.y,_e);er==-1?(Je.hideMenuItem(k),Je.hideMenuItem(F),Re==="control"&&nt?(Je.showMenuItem(I),Je.hideMenuItem(X)):Re==="bend"&&nt?(Je.showMenuItem(X),Je.hideMenuItem(I)):nt?(Je.showMenuItem(X),Je.showMenuItem(I)):(Je.hideMenuItem(X),Je.hideMenuItem(I)),l.currentCtxPos=xt):(Je.hideMenuItem(X),Je.hideMenuItem(I),Re==="control"?(Je.showMenuItem(F),Je.hideMenuItem(k),se.enableMultipleAnchorRemovalOption&&_e.hasClass("edgecontrolediting-hasmultiplecontrolpoints")&&Je.showMenuItem(L)):Re==="bend"?(Je.showMenuItem(k),Je.hideMenuItem(F)):(Je.hideMenuItem(k),Je.hideMenuItem(F),Je.hideMenuItem(L)),l.currentAnchorIndex=er),l.currentCtxEdge=_e}),v.on("cyedgeediting.changeAnchorPoints","edge",function(){v.startBatch(),v.edges().unselect(),v.trigger("bendPointMovement"),v.endBatch(),we()});var qt=!1,At={37:!1,38:!1,39:!1,40:!1};document.addEventListener("keydown",function(Me){if(typeof ae().moveSelectedAnchorsOnKeyEvents=="function"?ae().moveSelectedAnchorsOnKeyEvents():ae().moveSelectedAnchorsOnKeyEvents){var _e,Re,Ye=document.activeElement.tagName;if(Ye!="TEXTAREA"&&Ye!="INPUT"){switch(Me.keyCode){case 37:case 39:case 38:case 40:case 32:Me.preventDefault()}if(Me.keyCode<"37"||Me.keyCode>"40"||(At[Me.keyCode]=!0,v.edges(":selected").length!=v.elements(":selected").length||v.edges(":selected").length!=1))return;qt||(Wt=v.edges(":selected"),v.trigger("edgeediting.movestart",[Wt]),qt=!0);var nt=3;if(Me.altKey&&Me.shiftKey)return;Me.altKey?nt=1:Me.shiftKey&&(nt=10);var Je=0,xt=0;Je+=At[39]?nt:0,Je-=At[37]?nt:0,xt+=At[40]?nt:0,xt-=At[38]?nt:0,_e={x:Je,y:xt},(Re=Wt).forEach(function(er){var Kt=l.getAnchorsAsArray(er),Ut=[];if(Kt!=null){for(var gt=0;gt<Kt.length;gt+=2)Ut.push({x:Kt[gt]+_e.x,y:Kt[gt+1]+_e.y});var tr=l.getEdgeType(er);if(l.edgeTypeNoneShouldntHappen(tr,"UiUtilities.js, moveAnchorPoints"))return;tr==="bend"?h.bendPointPositionsSetterFunction(er,Ut):tr==="control"&&h.controlPointPositionsSetterFunction(er,Ut)}}),l.initAnchorPoints(ae().bendPositionsFunction,ae().controlPositionsFunction,Re),v.trigger("bendPointMovement")}}},!0),document.addEventListener("keyup",function(Me){Me.keyCode<"37"||Me.keyCode>"40"||(Me.preventDefault(),At[Me.keyCode]=!1,(typeof ae().moveSelectedAnchorsOnKeyEvents=="function"?ae().moveSelectedAnchorsOnKeyEvents():ae().moveSelectedAnchorsOnKeyEvents)&&(v.trigger("edgeediting.moveend",[Wt]),Wt=void 0,qt=!1))},!0),ce.data("cyedgeediting",oe)},unbind:function(){v.off("remove","node",b).off("add","node",w).off("style","edge.edgebendediting-hasbendpoints:selected, edge.edgecontrolediting-hascontrolpoints:selected",_).off("select","edge",x).off("unselect","edge",C).off("tapstart",E).off("tapstart","edge",p).off("tapdrag",P).off("tapend",T).off("cxttap",R).off("drag","node",M).off("data","edge",N),v.unbind("zoom pan",y)}};return re[m]?re[m].apply($(v.container()),Array.prototype.slice.call(arguments,1)):(m===void 0?"undefined":s(m))!="object"&&m?($.error("No such function `"+m+"` for cytoscape.js-edge-editing"),$(this)):re.init.apply($(v.container()),arguments)}},259:a=>{var i={options:void 0,currentCtxEdge:void 0,currentCtxPos:void 0,currentAnchorIndex:void 0,ignoredClasses:void 0,setIgnoredClasses:function(o){this.ignoredClasses=o},syntax:{bend:{edge:"segments",class:"edgebendediting-hasbendpoints",multiClass:"edgebendediting-hasmultiplebendpoints",weight:"cyedgebendeditingWeights",distance:"cyedgebendeditingDistances",weightCss:"segment-weights",distanceCss:"segment-distances"},control:{edge:"unbundled-bezier",class:"edgecontrolediting-hascontrolpoints",multiClass:"edgecontrolediting-hasmultiplecontrolpoints",weight:"cyedgecontroleditingWeights",distance:"cyedgecontroleditingDistances",weightCss:"control-point-weights",distanceCss:"control-point-distances"}},getEdgeType:function(o){return o?o.hasClass(this.syntax.bend.class)?"bend":o.hasClass(this.syntax.control.class)?"control":o.css("curve-style")===this.syntax.bend.edge?"bend":o.css("curve-style")===this.syntax.control.edge?"control":this.options.bendPositionsFunction(o)&&this.options.bendPositionsFunction(o).length>0?"bend":this.options.controlPositionsFunction(o)&&this.options.controlPositionsFunction(o).length>0?"control":"none":"none"},initAnchorPoints:function(o,s,u){for(var l=0;l<u.length;l++){var c=u[l],f=this.getEdgeType(c);if(f!=="none"&&!this.isIgnoredEdge(c)){var d;f==="bend"?d=o.apply(this,c):f==="control"&&(d=s.apply(this,c));var h={weights:[],distances:[]};if(d)h=this.convertToRelativePositions(c,d);else{var v=c.data(this.syntax[f].weight),m=c.data(this.syntax[f].distance);v&&m&&(h={weights:v,distances:m})}h.distances.length>0?(c.data(this.syntax[f].weight,h.weights),c.data(this.syntax[f].distance,h.distances),c.addClass(this.syntax[f].class),h.distances.length>1&&c.addClass(this.syntax[f].multiClass)):(c.data(this.syntax[f].weight,[]),c.data(this.syntax[f].distance,[]),c.hasClass(this.syntax[f].class)&&c.removeClass(this.syntax[f].class),c.hasClass(this.syntax[f].multiClass)&&c.removeClass(this.syntax[f].multiClass))}}},isIgnoredEdge:function(o){var s=o.source().position("x"),u=o.source().position("y"),l=o.target().position("x"),c=o.target().position("y");if(s==l&&u==c||o.source().id()==o.target().id())return!0;for(var f=0;this.ignoredClasses&&f<this.ignoredClasses.length;f++)if(o.hasClass(this.ignoredClasses[f]))return!0;return!1},getLineDirection:function(o,s){return o.y==s.y&&o.x<s.x?1:o.y<s.y&&o.x<s.x?2:o.y<s.y&&o.x==s.x?3:o.y<s.y&&o.x>s.x?4:o.y==s.y&&o.x>s.x?5:o.y>s.y&&o.x>s.x?6:o.y>s.y&&o.x==s.x?7:8},getSrcTgtPointsAndTangents:function(o){var s=o.source(),u=o.target(),l=(u.position(),s.position(),s.position()),c=u.position(),f=(c.y-l.y)/(c.x-l.x);return{m1:f,m2:-1/f,srcPoint:l,tgtPoint:c}},getIntersection:function(o,s,u){u===void 0&&(u=this.getSrcTgtPointsAndTangents(o));var l,c,f=u.srcPoint,d=(u.tgtPoint,u.m1),h=u.m2;if(d==1/0||d==-1/0)l=f.x,c=s.y;else if(d==0)l=s.x,c=f.y;else{var v=f.y-d*f.x;c=d*(l=(s.y-h*s.x-v)/(d-h))+v}return{x:l,y:c}},getAnchorsAsArray:function(o){var s=this.getEdgeType(o);if(s!=="none"&&o.css("curve-style")===this.syntax[s].edge){for(var u=[],l=o.pstyle(this.syntax[s].weightCss)?o.pstyle(this.syntax[s].weightCss).pfValue:[],c=o.pstyle(this.syntax[s].distanceCss)?o.pstyle(this.syntax[s].distanceCss).pfValue:[],f=Math.min(l.length,c.length),d=o.source().position(),h=o.target().position(),v=h.y-d.y,m=h.x-d.x,_=Math.sqrt(m*m+v*v),b={x:m/_,y:v/_},w=-b.y,y=b.x,x=0;x<f;x++){var C=l[x],E=c[x],p=1-C,P=C,T={x1:d.x,x2:h.x,y1:d.y,y2:h.y},R={x:T.x1*p+T.x2*P,y:T.y1*p+T.y2*P};u.push(R.x+w*E,R.y+y*E)}return u}},convertToRelativePosition:function(o,s,u){u===void 0&&(u=this.getSrcTgtPointsAndTangents(o));var l,c=this.getIntersection(o,s,u),f=c.x,d=c.y,h=u.srcPoint,v=u.tgtPoint;l=f!=h.x?(f-h.x)/(v.x-h.x):d!=h.y?(d-h.y)/(v.y-h.y):0;var m=Math.sqrt(Math.pow(d-s.y,2)+Math.pow(f-s.x,2)),_=this.getLineDirection(h,v),b=this.getLineDirection(c,s);return _-b!=-2&&_-b!=6&&m!=0&&(m*=-1),{weight:l,distance:m}},convertToRelativePositions:function(o,s){for(var u=this.getSrcTgtPointsAndTangents(o),l=[],c=[],f=0;s&&f<s.length;f++){var d=s[f],h=this.convertToRelativePosition(o,d,u);l.push(h.weight),c.push(h.distance)}return{weights:l,distances:c}},getDistancesString:function(o,s){for(var u="",l=o.data(this.syntax[s].distance),c=0;l&&c<l.length;c++)u=u+" "+l[c];return u},getWeightsString:function(o,s){for(var u="",l=o.data(this.syntax[s].weight),c=0;l&&c<l.length;c++)u=u+" "+l[c];return u},addAnchorPoint:function(o,s){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;o!==void 0&&s!==void 0||(o=this.currentCtxEdge,s=this.currentCtxPos),u===void 0&&(u=this.getEdgeType(o));for(var l,c=this.syntax[u].weight,f=this.syntax[u].distance,d=this.convertToRelativePosition(o,s),h=d.weight,v=o.source().position("x"),m=o.source().position("y"),_=o.target().position("x"),b=o.target().position("y"),w=this.convertToRelativePosition(o,{x:v,y:m}).weight,y=this.convertToRelativePosition(o,{x:_,y:b}).weight,x=[w].concat(o.data(c)?o.data(c):[]).concat([y]),C=this.getAnchorsAsArray(o),E=1/0,p=[v,m].concat(C||[]).concat([_,b]),P=-1,T=0;T<x.length-1;T++){var R=x[T],M=x[T+1],N=this.compareWithPrecision(h,R,!0),B=this.compareWithPrecision(h,M),q=this.compareWithPrecision(h,M,!0),Z=this.compareWithPrecision(h,R);if(N&&B||q&&Z){var Q={x:v=p[2*T],y:m=p[2*T+1]},Y={x:_=p[2*T+2],y:b=p[2*T+3]},J=(m-b)/(v-_),X=-1/J,k={srcPoint:Q,tgtPoint:Y,m1:J,m2:X},D=this.getIntersection(o,s,k),I=Math.sqrt(Math.pow(s.x-D.x,2)+Math.pow(s.y-D.y,2));I<E&&(E=I,l=D,P=T)}}l!==void 0&&(s=l),d=this.convertToRelativePosition(o,s),l===void 0&&(d.distance=0);var F=o.data(c),L=o.data(f);return L=L||[],(F=F||[]).length===0&&(P=0),P!=-1&&(F.splice(P,0,d.weight),L.splice(P,0,d.distance)),o.data(c,F),o.data(f,L),o.addClass(this.syntax[u].class),(F.length>1||L.length>1)&&o.addClass(this.syntax[u].multiClass),P},removeAnchor:function(o,s){o!==void 0&&s!==void 0||(o=this.currentCtxEdge,s=this.currentAnchorIndex);var u=this.getEdgeType(o);if(!this.edgeTypeNoneShouldntHappen(u,"anchorPointUtilities.js, removeAnchor")){var l,c=this.syntax[u].weight,f=this.syntax[u].distance,d=o.data(c),h=o.data(f);u==="bend"?l=this.options.bendPositionsFunction(o):u==="control"&&(l=this.options.controlPositionsFunction(o)),d.splice(s,1),h.splice(s,1),l&&l.splice(s,1),d.length==1||h.length==1?o.removeClass(this.syntax[u].multiClass):d.length==0||h.length==0?(o.removeClass(this.syntax[u].class),o.data(c,[]),o.data(f,[])):(o.data(c,d),o.data(f,h))}},removeAllAnchors:function(o){o===void 0&&(o=this.currentCtxEdge);var s=this.getEdgeType(o);if(!this.edgeTypeNoneShouldntHappen(s,"anchorPointUtilities.js, removeAllAnchors")){o.removeClass(this.syntax[s].class),o.removeClass(this.syntax[s].multiClass);var u=this.syntax[s].weight,l=this.syntax[s].distance;o.data(u,[]),o.data(l,[]),s==="bend"&&this.options.bendPositionsFunction(o)?this.options.bendPointPositionsSetterFunction(o,[]):s==="control"&&this.options.controlPositionsFunction(o)&&this.options.controlPointPositionsSetterFunction(o,[])}},calculateDistance:function(o,s){var u=o.x-s.x,l=o.y-s.y;return Math.sqrt(Math.pow(u,2)+Math.pow(l,2))},compareWithPrecision:function(o,s){var u=arguments.length>2&&arguments[2]!==void 0&&arguments[2],l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.01,c=o-s;return Math.abs(c)<=l||(u?o<s:o>s)},edgeTypeNoneShouldntHappen:function(o,s){return o==="none"&&(console.log("In "+s+": edge type none should never happen here!!"),!0)}};a.exports=i},218:a=>{var i,o,s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},u=(i=Math.max,o=Date.now||function(){return new Date().getTime()},function(l,c,f){var d,h,v,m,_,b,w,y,x,C=0,E=!1,p=!0;if(typeof l!="function")throw new TypeError("Expected a function");if(c=c<0?0:+c||0,f===!0){var P=!0;p=!1}else x=(y=f)===void 0?"undefined":s(y),!y||x!="object"&&x!="function"||(P=!!f.leading,E="maxWait"in f&&i(+f.maxWait||0,c),p="trailing"in f?!!f.trailing:p);function T(B,q){q&&clearTimeout(q),h=b=w=void 0,B&&(C=o(),v=l.apply(_,d),b||h||(d=_=void 0))}function R(){var B=c-(o()-m);B<=0||B>c?T(w,h):b=setTimeout(R,B)}function M(){T(p,b)}function N(){if(d=arguments,m=o(),_=this,w=p&&(b||!P),E===!1)var B=P&&!b;else{h||P||(C=m);var q=E-(m-C),Z=q<=0||q>E;Z?(h&&(h=clearTimeout(h)),C=m,v=l.apply(_,d)):h||(h=setTimeout(M,q))}return Z&&b?b=clearTimeout(b):b||c===E||(b=setTimeout(R,c)),B&&(Z=!0,v=l.apply(_,d)),!Z||b||h||(d=_=void 0),v}return N.cancel=function(){b&&clearTimeout(b),h&&clearTimeout(h),C=0,h=b=w=void 0},N});a.exports=u},579:(a,i,o)=>{var s,u,l;u=o(259),o(218),l=function(c,f,d){var h=o(347);if(c&&f&&d){var v,m={bendPositionsFunction:function(b){return b.data("bendPointPositions")},controlPositionsFunction:function(b){return b.data("controlPointPositions")},bendPointPositionsSetterFunction:function(b,w){b.data("bendPointPositions",w)},controlPointPositionsSetterFunction:function(b,w){b.data("controlPointPositions",w)},initAnchorsAutomatically:!0,ignoredClasses:[],undoable:!1,anchorShapeSizeFactor:3,zIndex:999,bendRemovalSensitivity:8,addBendMenuItemTitle:"Add Bend Point",removeBendMenuItemTitle:"Remove Bend Point",removeAllBendMenuItemTitle:"Remove All Bend Points",addControlMenuItemTitle:"Add Control Point",removeControlMenuItemTitle:"Remove Control Point",removeAllControlMenuItemTitle:"Remove All Control Points",moveSelectedAnchorsOnKeyEvents:function(){return!0},enableMultipleAnchorRemovalOption:!1,useTrailingDividersAfterContextMenuOptions:!1,enableCreateAnchorOnDrag:!0},_=!1;c("core","edgeEditing",function(b){var w=this;return b==="initialized"?_:(b!=="get"&&(v=function(y,x){var C={};for(var E in y)C[E]=y[E];for(var E in x)if(E=="bendRemovalSensitivity"){var p=x[E];isNaN(p)||(C[E]=p>=0&&p<=20?x[E]:p<0?0:20)}else C[E]=x[E];return C}(m,b),_=!0,w.style().selector(".edgebendediting-hasbendpoints").css({"curve-style":"segments","segment-distances":function(y){return u.getDistancesString(y,"bend")},"segment-weights":function(y){return u.getWeightsString(y,"bend")},"edge-distances":"node-position"}),w.style().selector(".edgecontrolediting-hascontrolpoints").css({"curve-style":"unbundled-bezier","control-point-distances":function(y){return u.getDistancesString(y,"control")},"control-point-weights":function(y){return u.getWeightsString(y,"control")},"edge-distances":"node-position"}),w.style().selector("#nwt_reconnectEdge_dummy").css({width:"1",height:"1",visibility:"hidden"}),u.setIgnoredClasses(v.ignoredClasses),v.initAnchorsAutomatically&&u.initAnchorPoints(v.bendPositionsFunction,v.controlPositionsFunction,w.edges(),v.ignoredClasses),h(v,w)),_?{getAnchorsAsArray:function(y){return u.getAnchorsAsArray(y)},initAnchorPoints:function(y){u.initAnchorPoints(v.bendPositionsFunction,v.controlPositionsFunction,y)},deleteSelectedAnchor:function(y,x){u.removeAnchor(y,x)},getEdgeType:function(y){return u.getEdgeType(y)}}:void 0)})}},a.exports&&(a.exports=l),(s=(function(){return l}).call(i,o,i,a))===void 0||(a.exports=s),typeof cytoscape<"u"&&$&&Konva&&l(cytoscape,$,Konva)},171:a=>{a.exports={disconnectEdge:function(i,o,s,u){var l={data:{id:"nwt_reconnectEdge_dummy",ports:[]},renderedPosition:s};o.add(l);var c=u==="source"?{source:l.data.id}:{target:l.data.id};return i=i.move(c)[0],{dummyNode:o.nodes("#"+l.data.id)[0],edge:i}},connectEdge:function(i,o,s){if(i.isEdge()&&o.isNode()){var u={};if(s==="source")u.source=o.id();else{if(s!=="target")return;u.target=o.id()}return i.move(u)[0]}},copyEdge:function(i,o){this.copyAnchors(i,o),this.copyStyle(i,o)},copyStyle:function(i,o){i&&o&&(o.data("line-color",i.data("line-color")),o.data("width",i.data("width")),o.data("cardinality",i.data("cardinality")))},copyAnchors:function(i,o){if(i.hasClass("edgebendediting-hasbendpoints")){var s=i.data("cyedgebendeditingDistances"),u=i.data("cyedgebendeditingWeights");o.data("cyedgebendeditingDistances",s),o.data("cyedgebendeditingWeights",u),o.addClass("edgebendediting-hasbendpoints")}else i.hasClass("edgecontrolediting-hascontrolpoints")&&(s=i.data("cyedgecontroleditingDistances"),u=i.data("cyedgecontroleditingWeights"),o.data("cyedgecontroleditingDistances",s),o.data("cyedgecontroleditingWeights",u),o.addClass("edgecontrolediting-hascontrolpoints"));i.hasClass("edgebendediting-hasmultiplebendpoints")?o.addClass("edgebendediting-hasmultiplebendpoints"):i.hasClass("edgecontrolediting-hasmultiplecontrolpoints")&&o.addClass("edgecontrolediting-hasmultiplecontrolpoints")}}},961:a=>{a.exports=function(i,o,s){if(i.undoRedo!=null){var u=i.undoRedo({defaultActions:!1,isDebug:!0});u.action("changeAnchorPoints",l,l),u.action("moveAnchorPoints",c,c),u.action("reconnectEdge",f,f),u.action("removeReconnectedEdge",d,d)}function l(h){var v,m,_,b,w=i.getElementById(h.edge.id()),y=h.type!=="none"?h.type:o.getEdgeType(w);h.type!=="none"||h.set?(_=o.syntax[y].weight,b=o.syntax[y].distance,v=h.set?w.data(_):h.weights,m=h.set?w.data(b):h.distances):(v=[],m=[]);var x={edge:w,type:y,weights:v,distances:m,set:!0};if(h.set){var C=h.weights&&h.weights.length>0,E=C&&h.weights.length>1;C&&(w.data(_,h.weights),w.data(b,h.distances));var p=o.syntax[y].class,P=o.syntax[y].multiClass;C||E?C&&!E?(w.addClass(p),w.removeClass(P)):w.addClass(p+" "+P):w.removeClass(p+" "+P),C||(w.data(_,[]),w.data(b,[])),w.selected()&&w.unselect(),w.select()}return w.trigger("cyedgeediting.changeAnchorPoints"),x}function c(h){if(h.firstTime)return delete h.firstTime,h;var v=h.edges,m=h.positionDiff,_={edges:v,positionDiff:{x:-m.x,y:-m.y}};return function(b,w){w.forEach(function(y){var x=o.getEdgeType(y),C=o.getAnchorsAsArray(y),E=[];if(C!=null){for(var p=0;p<C.length;p+=2)E.push({x:C[p]+b.x,y:C[p+1]+b.y});x==="bend"?s.bendPointPositionsSetterFunction(y,E):x==="control"&&s.controlPointPositionsSetterFunction(y,E)}}),o.initAnchorPoints(s.bendPositionsFunction,s.controlPositionsFunction,w)}(m,v),_}function f(h){var v=h.edge,m=h.location,_=h.oldLoc,b={edge:v=v.move(m)[0],location:_,oldLoc:m};return v.unselect(),b}function d(h){var v=h.oldEdge;(m=i.getElementById(v.data("id")))&&m.length>0&&(v=m);var m,_=h.newEdge;return(m=i.getElementById(_.data("id")))&&m.length>0&&(_=m),v.inside()&&(v=v.remove()[0]),_.removed()&&(_=_.restore()).unselect(),{oldEdge:_,newEdge:v}}}}},n={};return function a(i){var o=n[i];if(o!==void 0)return o.exports;var s=n[i]={exports:{}};return t[i](s,s.exports,a),s.exports}(579)})()})})(b2);var Uz=b2.exports;const Hz=Aa(Uz);var w2={exports:{}};(function(r,e){(function(t,n){n()})(Ve,function(){function t(l,c){return typeof c>"u"?c={autoBom:!1}:typeof c!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(l.type)?new Blob(["\uFEFF",l],{type:l.type}):l}function n(l,c,f){var d=new XMLHttpRequest;d.open("GET",l),d.responseType="blob",d.onload=function(){u(d.response,c,f)},d.onerror=function(){console.error("could not download file")},d.send()}function a(l){var c=new XMLHttpRequest;c.open("HEAD",l,!1);try{c.send()}catch{}return 200<=c.status&&299>=c.status}function i(l){try{l.dispatchEvent(new MouseEvent("click"))}catch{var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),l.dispatchEvent(c)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Ve=="object"&&Ve.global===Ve?Ve:void 0,s=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),u=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(l,c,f){var d=o.URL||o.webkitURL,h=document.createElement("a");c=c||l.name||"download",h.download=c,h.rel="noopener",typeof l=="string"?(h.href=l,h.origin===location.origin?i(h):a(h.href)?n(l,c,f):i(h,h.target="_blank")):(h.href=d.createObjectURL(l),setTimeout(function(){d.revokeObjectURL(h.href)},4e4),setTimeout(function(){i(h)},0))}:"msSaveOrOpenBlob"in navigator?function(l,c,f){if(c=c||l.name||"download",typeof l!="string")navigator.msSaveOrOpenBlob(t(l,f),c);else if(a(l))n(l,c,f);else{var d=document.createElement("a");d.href=l,d.target="_blank",setTimeout(function(){i(d)})}}:function(l,c,f,d){if(d=d||open("","_blank"),d&&(d.document.title=d.document.body.innerText="downloading..."),typeof l=="string")return n(l,c,f);var h=l.type==="application/octet-stream",v=/constructor/i.test(o.HTMLElement)||o.safari,m=/CriOS\/[\d]+/.test(navigator.userAgent);if((m||h&&v||s)&&typeof FileReader<"u"){var _=new FileReader;_.onloadend=function(){var y=_.result;y=m?y:y.replace(/^data:[^;]*;/,"data:attachment/file;"),d?d.location.href=y:location=y,d=null},_.readAsDataURL(l)}else{var b=o.URL||o.webkitURL,w=b.createObjectURL(l);d?d.location=w:location.href=w,d=null,setTimeout(function(){b.revokeObjectURL(w)},4e4)}});o.saveAs=u.saveAs=u,r.exports=u})})(w2);var _2=w2.exports;function jz(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function Is(r){return function(e){if(Array.isArray(e))return Vp(e)}(r)||function(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}(r)||function(e,t){if(e){if(typeof e=="string")return Vp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vp(e,t)}}(r)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Vp(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}var Gx,Up,Ga,Hp,$x,xr=(Gx=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],Up=function(){function r(n){var a=n.targetModal,i=n.triggers,o=i===void 0?[]:i,s=n.onShow,u=s===void 0?function(){}:s,l=n.onClose,c=l===void 0?function(){}:l,f=n.openTrigger,d=f===void 0?"data-micromodal-trigger":f,h=n.closeTrigger,v=h===void 0?"data-micromodal-close":h,m=n.openClass,_=m===void 0?"is-open":m,b=n.disableScroll,w=b!==void 0&&b,y=n.disableFocus,x=y!==void 0&&y,C=n.awaitCloseAnimation,E=C!==void 0&&C,p=n.awaitOpenAnimation,P=p!==void 0&&p,T=n.debugMode,R=T!==void 0&&T;(function(M,N){if(!(M instanceof N))throw new TypeError("Cannot call a class as a function")})(this,r),this.modal=document.getElementById(a),this.config={debugMode:R,disableScroll:w,openTrigger:d,closeTrigger:v,openClass:_,onShow:u,onClose:c,awaitCloseAnimation:E,awaitOpenAnimation:P,disableFocus:x},o.length>0&&this.registerTriggers.apply(this,Is(o)),this.onClick=this.onClick.bind(this),this.onKeydown=this.onKeydown.bind(this)}var e,t;return e=r,(t=[{key:"registerTriggers",value:function(){for(var n=this,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];i.filter(Boolean).forEach(function(s){s.addEventListener("click",function(u){return n.showModal(u)})})}},{key:"showModal",value:function(){var n=this,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(this.activeElement=document.activeElement,this.modal.setAttribute("aria-hidden","false"),this.modal.classList.add(this.config.openClass),this.scrollBehaviour("disable"),this.addEventListeners(),this.config.awaitOpenAnimation){var i=function o(){n.modal.removeEventListener("animationend",o,!1),n.setFocusToFirstNode()};this.modal.addEventListener("animationend",i,!1)}else this.setFocusToFirstNode();this.config.onShow(this.modal,this.activeElement,a)}},{key:"closeModal",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,a=this.modal;if(this.modal.setAttribute("aria-hidden","true"),this.removeEventListeners(),this.scrollBehaviour("enable"),this.activeElement&&this.activeElement.focus&&this.activeElement.focus(),this.config.onClose(this.modal,this.activeElement,n),this.config.awaitCloseAnimation){var i=this.config.openClass;this.modal.addEventListener("animationend",function o(){a.classList.remove(i),a.removeEventListener("animationend",o,!1)},!1)}else a.classList.remove(this.config.openClass)}},{key:"closeModalById",value:function(n){this.modal=document.getElementById(n),this.modal&&this.closeModal()}},{key:"scrollBehaviour",value:function(n){if(this.config.disableScroll){var a=document.querySelector("body");switch(n){case"enable":Object.assign(a.style,{overflow:""});break;case"disable":Object.assign(a.style,{overflow:"hidden"})}}}},{key:"addEventListeners",value:function(){this.modal.addEventListener("touchstart",this.onClick),this.modal.addEventListener("click",this.onClick),document.addEventListener("keydown",this.onKeydown)}},{key:"removeEventListeners",value:function(){this.modal.removeEventListener("touchstart",this.onClick),this.modal.removeEventListener("click",this.onClick),document.removeEventListener("keydown",this.onKeydown)}},{key:"onClick",value:function(n){(n.target.hasAttribute(this.config.closeTrigger)||n.target.parentNode.hasAttribute(this.config.closeTrigger))&&(n.preventDefault(),n.stopPropagation(),this.closeModal(n))}},{key:"onKeydown",value:function(n){n.keyCode===27&&this.closeModal(n),n.keyCode===9&&this.retainFocus(n)}},{key:"getFocusableNodes",value:function(){var n=this.modal.querySelectorAll(Gx);return Array.apply(void 0,Is(n))}},{key:"setFocusToFirstNode",value:function(){var n=this;if(!this.config.disableFocus){var a=this.getFocusableNodes();if(a.length!==0){var i=a.filter(function(o){return!o.hasAttribute(n.config.closeTrigger)});i.length>0&&i[0].focus(),i.length===0&&a[0].focus()}}}},{key:"retainFocus",value:function(n){var a=this.getFocusableNodes();if(a.length!==0)if(a=a.filter(function(o){return o.offsetParent!==null}),this.modal.contains(document.activeElement)){var i=a.indexOf(document.activeElement);n.shiftKey&&i===0&&(a[a.length-1].focus(),n.preventDefault()),!n.shiftKey&&a.length>0&&i===a.length-1&&(a[0].focus(),n.preventDefault())}else a[0].focus()}}])&&jz(e.prototype,t),r}(),Ga=null,Hp=function(r){if(!document.getElementById(r))return console.warn("MicroModal: ❗Seems like you have missed %c'".concat(r,"'"),"background-color: #f8f9fa;color: #50596c;font-weight: bold;","ID somewhere in your code. Refer example below to resolve it."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<div class="modal" id="'.concat(r,'"></div>')),!1},$x=function(r,e){if(function(n){n.length<=0&&(console.warn("MicroModal: ❗Please specify at least one %c'micromodal-trigger'","background-color: #f8f9fa;color: #50596c;font-weight: bold;","data attribute."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<a href="#" data-micromodal-trigger="my-modal"></a>'))}(r),!e)return!0;for(var t in e)Hp(t);return!0},{init:function(r){var e=Object.assign({},{openTrigger:"data-micromodal-trigger"},r),t=Is(document.querySelectorAll("[".concat(e.openTrigger,"]"))),n=function(o,s){var u=[];return o.forEach(function(l){var c=l.attributes[s].value;u[c]===void 0&&(u[c]=[]),u[c].push(l)}),u}(t,e.openTrigger);if(e.debugMode!==!0||$x(t,n)!==!1)for(var a in n){var i=n[a];e.targetModal=a,e.triggers=Is(i),Ga=new Up(e)}},show:function(r,e){var t=e||{};t.targetModal=r,t.debugMode===!0&&Hp(r)===!1||(Ga&&Ga.removeEventListeners(),(Ga=new Up(t)).showModal())},close:function(r){r?Ga.closeModalById(r):Ga.closeModal()}});typeof window<"u"&&(window.MicroModal=xr);window.$=iy;Qr.use(eF);rF(Qr);aF(Qr);Hz(Qr,iy,Vz);uF(Qr);Qr.use(cF);let Ht;const Wz=function(r){let e=modal_node_id.value;e===""&&(e=Math.random().toString(32).substring(2));let t=ct.elements(),n=!1;if(t.forEach(function(a){a.data("id")===e&&(xr.show("alert-modal"),n=!0)}),n!==!0){let a=modal_node_parent.value;a===""&&(a=null);let i={group:"nodes",id:`${e}`,label:`${modal_node_label.value}`,parent:`${a}`},o=r.position||r.cyPosition,s={color:`${modal_node_labelcolor.value}`,"background-color":`${modal_node_backgroundcolor.value}`,shape:`${modal_node_shape.value}`};ct.add({data:i,position:{x:o.x,y:o.y},style:s}),xr.close("cxt_node_create")}};window.cxt_new_node_generate=Wz;const Kz=function(r){let e=modal_edge_id.value;e===""&&(e=Math.random().toString(32).substring(2));let t=ct.elements(),n=!1;t.forEach(function(s){s.data("id")===e&&(xr.show("alert-modal"),n=!0)});let a=ct.nodes(),i=!0,o=!0;if(a.forEach(function(s){s.data("id")===modal_edge_source.value&&(i=!1),s.data("id")===modal_edge_target.value&&(o=!1)}),n!==!0)if(i===!0||o===!0)xr.show("alert-modal-edge");else{let s={group:"edges",id:`${e}`,source:`${modal_edge_source.value}`,target:`${modal_edge_target.value}`,label:`${modal_edge_label.value}`},u=r.position||r.cyPosition,l={color:`${modal_node_labelcolor.value}`,"line-color":`${modal_edge_linecolor.value}`,"target-arrow-color":`${modal_edge_t_arr_color.value}`,"target-arrow-shape":`${modal_edge_t_arr_shape.value}`,"source-arrow-color":`${modal_edge_s_arr_color.value}`,"source-arrow-shape":`${modal_edge_s_arr_shape.value}`,"background-color":`${modal_node_backgroundcolor.value}`,shape:`${modal_node_shape.value}`};ct.add({data:s,position:{x:u.x,y:u.y},style:l}),xr.close("cxt_edge_create")}};window.cxt_new_edge_generate=Kz;const ha=function(r,e){r.selected()===!0?r.one("unselect",function(){r.one("style",function(){r.style("background-color",`${e}`)})}):r.style("background-color",`${e}`)},va=function(r,e){r.selected()===!0?r.one("unselect",function(){r.one("style",function(){r.style("line-color",`${e}`),r.style("target-arrow-color",`${e}`),r.style("source-arrow-color",`${e}`)})}):(r.style("line-color",`${e}`),r.style("target-arrow-color",`${e}`),r.style("source-arrow-color",`${e}`))},x2=function(r,e){let t;e==="none"?t=null:t=e;let n=Math.random().toString(32).substring(2),a={group:"nodes",id:n,label:`${r.data("label")}`,parent:t},i={color:`${r.style("color")}`,"background-color":`${r.style("background-color")}`,shape:`${r.style("shape")}`};ct.add({data:a,position:{x:r.position("x")+200,y:r.position("y")},style:i});let o=r.children();1<=o.length&&o.forEach(function(s){x2(s,n)})};xr.init({awaitOpenAnimation:!0,awaitCloseAnimation:!0,disableScroll:!1});let ct=window.cy=Qr({container:document.getElementById("cy"),autoungrabify:!1,autolock:!1,boxSelectionEnabled:!0,autounselectify:!1,wheelSensitivity:.1,layout:{name:"dagre"},style:[{selector:"node",css:{shape:"rectangle","background-color":"#9dbaea",content:"data(label)","text-valign":"center","text-halign":"center",width:"label",height:"label",padding:"12px","text-wrap":"wrap"}},{selector:'node[label =""]',css:{width:"12px",height:"12px"}},{selector:":parent",css:{"background-color":"white","text-valign":"top","text-halign":"center"}},{selector:"edge",style:{"text-background-opacity":1,"text-background-color":"#ffffff",width:4,content:"data(label)","target-arrow-shape":"triangle","line-color":"#DA1725","target-arrow-color":"#DA1725","text-valign":"top","curve-style":`${edge_curve.value}`,"text-wrap":"wrap"}},{selector:":selected",style:{}},{selector:".eh-handle",style:{"background-color":"red",width:12,height:12,shape:"ellipse","overlay-opacity":0,"border-width":12,"border-opacity":0}},{selector:".eh-hover",style:{"background-color":"red"}},{selector:".eh-source",style:{"border-width":2,"border-color":"red"}},{selector:".eh-target",style:{"border-width":2,"border-color":"red"}},{selector:".eh-preview, .eh-ghost-edge",style:{"background-color":"red","line-color":"red","target-arrow-color":"red","source-arrow-color":"red"}},{selector:".eh-ghost-edge.eh-preview-active",style:{opacity:0}}]});const Yz=ct.edgehandles({snap:!1});let Ls=[],Vx=ct.contextMenus({menuItems:[{id:"add-node",content:"上部分の設定で新規ノード作る",tooltipText:"add node",coreAsWell:!0,hasTrailingDivider:!0,onClickFunction:function(r){document.getElementById("modal_node_parent").value=document.getElementById("qmenu-elem-parent").value,window.cxt_event=r,xr.show("cxt_node_create")}},{id:"add-edge",content:"上部分の設定で新エッジ作る",tooltipText:"add node",coreAsWell:!0,hasTrailingDivider:!0,onClickFunction:function(r){document.getElementById("modal_edge_source").value=document.getElementById("qmenu-elem-source").value,document.getElementById("modal_edge_target").value=document.getElementById("qmenu-elem-target").value,window.cxt_event=r,xr.show("cxt_edge_create")}},{id:"add-edge-for-this-node",content:"このノードにエッジを追加する",tooltipText:"copy-id-parent",selector:"node",hasTrailingDivider:!0,onClickFunction:function(r){let e=r.target||r.cyTarget;Yz.start(e),console.log("このノードにエッジを追加")}},{id:"copy-node",content:"ノードを複製する(idはランダム)",tooltipText:"copy-id-parent",selector:"node",hasTrailingDivider:!0,onClickFunction:function(r){r.target.unselect();let e=r.target||r.cyTarget,t={group:"nodes",id:`${Math.random().toString(32).substring(2)}`,label:`${e.data("label")}`,parent:null},n=r.position||r.cyPosition,a={color:`${e.style("color")}`,"background-color":`${e.style("background-color")}`,shape:`${e.style("shape")}`};ct.add({data:t,position:{x:n.x+100,y:n.y+100},style:a})},submenu:[{id:"copy-node-child",content:"(親ノードのみ)子ノードもコピー",tooltipText:"copy-id-parent",selector:"node",hasTrailingDivider:!0,onClickFunction:function(r){r.target.unselect(),x2(r.target,"none")}}]},{id:"copy-id-parent",content:"🔶Qメニューのparentにidコピー",tooltipText:"copy-id-parent",selector:"node",hasTrailingDivider:!0,onClickFunction:function(r){let e=r.target||r.cyTarget;document.getElementById("qmenu-elem-parent").value=e.data("id")}},{id:"qmenue-copyes",content:"🔷Qメニューのエッジ用にidをコピー",tooltipText:"qmenue-copyes",selector:"node",hasTrailingDivider:!0,submenu:[{id:"copy-id-source",content:"sourceにidコピー",tooltipText:"copy-id-source",selector:"node",hasTrailingDivider:!0,onClickFunction:function(r){let e=r.target||r.cyTarget;document.getElementById("qmenu-elem-source").value=e.data("id")}},{id:"copy-id-target",content:"targetにidコピー",tooltipText:"copy-id-target",selector:"node",hasTrailingDivider:!0,onClickFunction:function(r){let e=r.target||r.cyTarget;document.getElementById("qmenu-elem-target").value=e.data("id")}}]},{id:"node-color",content:"🟩ノードの色を変更する",tooltipText:"change color",selector:"node",hasTrailingDivider:!0,submenu:[{id:"reverse_color-node",content:"現在の色の補色にする",tooltipText:"select-color",hasTrailingDivider:!0,onClickFunction:function(r){let e=r.target||r.cyTarget;e.unselect();let t=Yt(e.style("background-color"));e.selected()===!0?(console.log("bug"),e.one("unselect",function(n){e.one("style",function(){t=Yt(e.style("background-color")),e.style("background-color",`${Ei(t)}`)})})):ha(e,`${Ei(t)}`)}},{id:"reverse_color-node",content:"現在の色を反転させる",tooltipText:"select-color",hasTrailingDivider:!0,onClickFunction:function(r){let e=r.target||r.cyTarget;e.unselect();let t=Yt(e.style("background-color"));e.selected()===!0?(console.log("bug"),e.one("unselect",function(n){e.one("style",function(){t=Yt(e.style("background-color")),e.style("background-color",`${Ci(t)}`)})})):ha(e,`${Ci(t)}`)}},{id:"color-light-gray",content:"ライトグレー",tooltipText:"light-gray",hasTrailingDivider:!0,onClickFunction:function(r){let e=r.target||r.cyTarget;e.unselect(),ha(e,"#969998")}},{id:"color-blue",content:"ブルー",tooltipText:"blue",onClickFunction:function(r){let e=r.target||r.cyTarget;e.unselect(),ha(e,"blue")},submenu:[{id:"color-light-blue",content:"ライトブルー",tooltipText:"light blue",hasTrailingDivider:!0,onClickFunction:function(r){let e=r.target||r.cyTarget;e.unselect(),ha(e,"lightblue")}},{id:"color-dark-blue",content:"ダークブルー",tooltipText:"dark blue",hasTrailingDivider:!0,onClickFunction:function(r){let e=r.target||r.cyTarget;e.unselect(),ha(e,"darkblue")}}]},{id:"color-green",content:"グリーン",tooltipText:"green",hasTrailingDivider:!0,onClickFunction:function(r){let e=r.target||r.cyTarget;e.unselect(),ha(e,"green")}},{id:"color-red",content:"レッド",tooltipText:"red",onClickFunction:function(r){let e=r.target||r.cyTarget;e.unselect(),ha(e,"red")}}]},{id:"edge-color",content:"🟩エッジの色を変更する",tooltipText:"change color",selector:"edge",hasTrailingDivider:!0,submenu:[{id:"reverse_color-edge",content:"現在の色の補色にする",tooltipText:"select-color",hasTrailingDivider:!0,onClickFunction:function(r){let e=r.target||r.cyTarget;e.unselect();let t=Yt(e.style("line-color"));e.selected()===!0?e.one("unselect",function(){e.one("style",function(){t=Yt(e.style("line-color")),e.style("line-color",`${Ei(t)}`),e.style("target-arrow-color",`${Ei(t)}`),e.style("source-arrow-color",`${Ei(t)}`)})}):va(e,`${Ei(t)}`)}},{id:"reverse_color-edge",content:"現在の色を反転させる",tooltipText:"select-color",hasTrailingDivider:!0,onClickFunction:function(r){let e=r.target||r.cyTarget;e.unselect();let t=Yt(e.style("line-color"));e.selected()===!0?e.one("unselect",function(){e.one("style",function(){t=Yt(e.style("line-color")),e.style("line-color",`${Ci(t)}`),e.style("target-arrow-color",`${Ci(t)}`),e.style("source-arrow-color",`${Ci(t)}`)})}):va(e,`${Ci(t)}`)}},{id:"color-light-gray",content:"ライトグレー",tooltipText:"light-gray",onClickFunction:function(r){let e=r.target||r.cyTarget;e.unselect(),va(e,"#969998")}},{id:"color-blue",content:"ブルー",tooltipText:"blue",onClickFunction:function(r){let e=r.target||r.cyTarget;va(e,"blue")},submenu:[{id:"color-light-blue",content:"ライトブルー",tooltipText:"light blue",onClickFunction:function(r){let e=r.target||r.cyTarget;e.unselect(),va(e,"lightblue")}},{id:"color-dark-blue",content:"ダークブルー",tooltipText:"dark blue",onClickFunction:function(r){let e=r.target||r.cyTarget;e.unselect(),va(e,"darkblue")}}]},{id:"color-green",content:"グリーン",tooltipText:"green",onClickFunction:function(r){let e=r.target||r.cyTarget;e.unselect(),va(e,"green")}},{id:"color-red",content:"レッド",tooltipText:"red",onClickFunction:function(r){let e=r.target||r.cyTarget;e.unselect(),va(e,"red")}}]},{id:"change-node-parent",content:"🔶parentをQメニューの値に変更",tooltipText:"copy-id-target",selector:"node",hasTrailingDivider:!0,onClickFunction:function(r){let e=r.target||r.cyTarget;e=e.move({parent:`${document.getElementById("qmenu-elem-parent").value}`})}},{id:"delete-node-parent",content:"parentをnullにして削除する",tooltipText:"copy-id-target",selector:"node",hasTrailingDivider:!0,onClickFunction:function(r){let e=r.target||r.cyTarget;e=e.move({parent:null})}},{id:"undo-last-remove",content:"ノード/エッジを復元する",selector:"node, edge",show:!1,coreAsWell:!0,onClickFunction:function(r){1<=Ls.length?(Ls.pop().restore(),Ls.length===0&&Vx.hideMenuItem("undo-last-remove")):console.log("restore error")},hasTrailingDivider:!0},{id:"remove",content:"ノード/エッジを削除(復元可)",tooltipText:"remove",selector:"node, edge",onClickFunction:function(r){var e=r.target||r.cyTarget;Ls.push(e.remove()),Vx.showMenuItem("undo-last-remove")},hasTrailingDivider:!0}],contextMenuClasses:["context_menu"],menuItemClasses:["context_menu_item"]});ct.panzoom();ct.edgeEditing({undoable:!0,bendRemovalSensitivity:16,enableMultipleAnchorRemovalOption:!0,initAnchorsAutomatically:!1,useTrailingDividersAfterContextMenuOptions:!0,enableCreateAnchorOnDrag:!0});ct.style().update();const S2=document.getElementById("magnification-zoom-num");S2.value=ct.zoom();ct.on("scrollzoom",function(){S2.value=ct.zoom()});ct.on("click",function(r){r.target===ct&&(document.getElementById("editor-setting-panel").classList.remove("disabled"),document.getElementById("node-or-edge-setting-panel").classList.add("disabled"))});ct.on("click","node, edge",function(r){document.getElementById("editor-setting-panel").classList.add("disabled"),document.getElementById("node-or-edge-setting-panel").classList.remove("disabled"),Ht=r.target,console.log(r.target.group()),now_elem_group.value=r.target.group(),now_elem_id.value=r.target.data("id"),now_changelabel.value=r.target.data("label"),now_pos_x.value=r.target.position("x"),now_pos_y.value=r.target.position("y"),r.target.selected()===!0||(now_labelcolor.value=Yt(r.target.style("color")),now_labelcolor_str.value=Yt(r.target.style("color")));const e=document.getElementById("inspector-node"),t=document.getElementById("inspector-edge");r.target.group()==="nodes"?(e.classList.remove("disabled"),t.classList.add("disabled"),now_elem_type_node.checked=!0,now_parent.value=r.target.data("parent"),r.target.selected()===!0||(now_backgroundcolor.value=Yt(r.target.style("background-color")),now_backgroundcolor_str.value=Yt(r.target.style("background-color"))),now_shape.value=r.target.style("shape"),now_source.value="",now_target.value="",now_linecolor.value="",now_linecolor_str.value="",now_t_arr_color.value="",now_t_arr_color_str.value="",now_t_arr_shape.value="",now_s_arr_color.value="",now_s_arr_color_str.value="",now_s_arr_shape.value=""):(e.classList.add("disabled"),t.classList.remove("disabled"),now_elem_type_edge.checked=!0,now_parent.value="",now_backgroundcolor.value="",now_backgroundcolor_str.value="",now_shape.value="",now_source.value=r.target.data("source"),now_target.value=r.target.data("target"),now_t_arr_shape.value=r.target.style("target-arrow-shape"),now_s_arr_shape.value=r.target.style("source-arrow-shape"),r.target.selected()===!0||(now_linecolor.value=Yt(r.target.style("line-color")),now_linecolor_str.value=Yt(r.target.style("line-color")),now_t_arr_color.value=Yt(r.target.style("target-arrow-color")),now_t_arr_color_str.value=Yt(r.target.style("target-arrow-color")),now_s_arr_color.value=Yt(r.target.style("source-arrow-color")),now_s_arr_color_str.value=Yt(r.target.style("source-arrow-color")))),console.log(r.target.style("background-color"))});ct.on("mousemove",function(r){const e=r.position||r.cyPosition;document.getElementById("mousecursor-x-pos").value=e.x,document.getElementById("mousecursor-y-pos").value=e.y});ct.on("mouseover","node, edge",function(r){qmenu_mouseover_elem_id.value=r.target.data("id"),qmenu_mouseover_elem_label.value=r.target.data("label")});ct.on("select","node, edge",function(r){let e,t;r.target.group()==="nodes"?(e=r.target.style("color"),t=r.target.style("background-color"),r.target.isParent()===!0?r.target.style("color","#fc4d4d"):r.target.style("color","white"),r.target.style("background-color","#3894fc")):(e=r.target.style("color"),t=r.target.style("line-color"),r.target.style("color","#fc4d4d"),r.target.style("line-color","#3894fc"),r.target.style("target-arrow-color","#3894fc"),r.target.style("source-arrow-color","#3894fc")),r.target.one("unselect",function(){console.log("test:unselect"),r.target.group()==="nodes"?(r.target.style("color",e),r.target.style("background-color",t)):(r.target.style("color",e),r.target.style("line-color",t),r.target.style("target-arrow-color",t),r.target.style("source-arrow-color",t))})});const Yt=function(r){let e=/\d+/g,t=r.match(e),n="#";return t.forEach(function(a){let i=parseInt(a).toString(16);i.length==1?n+="0"+i:n+=i}),n},Ci=function(r){r=r.slice(1),r.indexOf("#")===0&&(r=r.slice(1));let e=(255-parseInt(r.slice(0,2),16)).toString(16),t=(255-parseInt(r.slice(2,4),16)).toString(16),n=(255-parseInt(r.slice(4,6),16)).toString(16);return"#"+Ri(e)+Ri(t)+Ri(n)},Ei=function(r){r=r.slice(1),r.indexOf("#")===0&&(r=r.slice(1));let e=parseInt(r.slice(0,2),16),t=parseInt(r.slice(2,4),16),n=parseInt(r.slice(4,6),16),a=Math.max(e,Math.max(t,n)),i=Math.min(e,Math.min(t,n)),o=a+i,s=Math.abs(e-o).toString(16),u=Math.abs(t-o).toString(16),l=Math.abs(n-o).toString(16);return"#"+Ri(s)+Ri(u)+Ri(l)},Ri=function(r){let e="";return r.length==1?e="0"+r:e=r,e},Xz=function(r,e){const t=document.getElementById(r),n=document.getElementById(e);t.value=n.value};window.apply_colorpick=Xz;const C2=function(r){let e=r;return["\\","/",":","*","?","<",">","|"].forEach(function(n){e=e.replace(n,"ぬ")}),e},pg=document.getElementById("png-scale"),gg=document.getElementById("png-scale-num");pg.addEventListener("change",function(){gg.value=pg.value});gg.addEventListener("change",function(){pg.value=gg.value});const E2=function(){let r={output:"blob",scale:parseFloat(document.getElementById("png-scale").value)};const e=document.getElementById("color-picker").value;return document.getElementById("png-tras-yes").checked===!0?r.bg="#00000000":r.bg=e,document.getElementById("png-full-yes").checked===!0?r.full=!0:r.full=!1,r},Zz=function(){const r=E2(),e=new Blob([window.cy.png(r)],{type:"image/png"}),t=URL.createObjectURL(e);window.open(t,"_target"),URL.revokeObjectURL(t)};document.getElementById("view-png-page-button").addEventListener("click",Zz);const Qz=function(){document.createElement("a");const r=E2(),e=new Blob([window.cy.png(r)],{type:"application/octet-stream"}),t=document.getElementById("png-name").value;_2.saveAs(e,C2(t)+".png")};document.getElementById("download-png-button").addEventListener("click",Qz);const Jz=function(){ct.layout({name:`${selectLayout.value}`,fit:!0,animate:!0}).run()};window.changeLayout=Jz;document.getElementById("load-text-json-button").addEventListener("click",function(){});document.getElementById("load-json-file").addEventListener("change",r=>{let e=r.target;if(e.files.length===0)return;const t=e.files[0],n=new FileReader;n.onload=()=>{const a=document.getElementById("loaded-graph-json");a.value=n.result,T2(n.result)},n.readAsText(t),xr.close("read-json-data-window")});document.getElementById("load-text-json-button").addEventListener("click",function(){const r=document.getElementById("load-text-json-data").value;T2(r),xr.close("read-json-data-window")});const T2=function(r){let e=ct.elements();ct.remove(e);const n=r.replaceAll(/ {2,}/g," ").replaceAll(/, *}/g,"}").replaceAll(/} +}/g,"}}").replaceAll(/,\n*]/g,`
]`);console.log(n),ct.add(JSON.parse(n))};document.getElementById("add-json-file").addEventListener("change",r=>{let e=r.target;if(e.files.length===0)return;const t=e.files[0],n=new FileReader;n.onload=()=>{const a=document.getElementById("added-graph-json");a.value=n.result,P2(n.result)},n.readAsText(t),xr.close("add-json-data-window")});document.getElementById("graph-add-text-json-button").addEventListener("click",function(){const r=document.getElementById("graph-add-text-json-data").value;P2(r),xr.close("add-json-data-window")});const P2=function(r){const t=r.replaceAll(/ {2,}/g," ").replaceAll(/, *}/g,"}").replaceAll(/} +}/g,"}}").replaceAll(/,\n*]/g,`
]`);ct.add(JSON.parse(t))},my=function(){let r="";r+=`[
`;let e="",t="";return ct.nodes().forEach(function(i){console.log(i.style()),console.log(JSON.stringify(i.json())),e+=JSON.stringify(i.json()),e=e.slice(0,-1),e+=', "style": {',e+=`"background-color": "${Yt(i.style("background-color"))}", `,e+=`"color": "${Yt(i.style("color"))}", `,e+=`"shape": "${i.style("shape")}"},`,e+=`},
`}),ct.edges().forEach(function(i){t+=JSON.stringify(i.json()),t=t.slice(0,-1),t+=', "style": {',t+=`"color": "${Yt(i.style("color"))}", `,t+=`"line-color": "${Yt(i.style("line-color"))}", `,t+=`"target-arrow-color": "${Yt(i.style("target-arrow-color"))}", `,t+=`"target-arrow-shape": "${i.style("target-arrow-shape")}", `,t+=`"source-arrow-color": "${Yt(i.style("source-arrow-color"))}", `,t+=`"source-arrow-shape": "${i.style("source-arrow-shape")}"},`,t+=`},
`}),r+=e+t,r+=`]
`,r},eG=function(){const r=/"removed":.*?,|"selected":.*?,|"selectable":.*?,|"locked":.*?,|"grabbable":.*?,|"pannable":.*?,/gi;let e=my();console.log(e),e=e.replaceAll(r,""),document.getElementById("save-json-data").value=e};window.graphJsonSave_ALL=eG;const tG=function(){const r=/"removed":.*?,|"selected":.*?,|"selectable":.*?,|"locked":.*?,|"grabbable":.*?,|"pannable":.*?,/gi;let e=my();e=e.replaceAll(r,"").replaceAll(",}","}").replaceAll(/,\n*]/g,`
]`),document.getElementById("save-json-data").value=e},Ux=function(r){console.log(r);let e=iy(`#${r}`).val();navigator.clipboard.writeText(e)};Ux.window=Ux;const rG=function(){const r=new Blob([document.getElementById("save-json-data").value],{type:"application/json"}),e=URL.createObjectURL(r);window.open(e,"_target"),URL.revokeObjectURL(e)};document.getElementById("graph-json-view-button").addEventListener("click",rG);const A2=function(r){const e=new Blob([document.getElementById("save-json-data").value],{type:"application/json"}),t=document.getElementById("json-data-filename").value;_2.saveAs(e,C2(t)+r),console.log("save as"+r)};document.getElementById("graph-json-save-txt-button").addEventListener("click",function(){A2(".txt")});document.getElementById("graph-json-save-json-button").addEventListener("click",function(){A2(".json")});const nG=function(){console.log("1:変更ボタンが押された"),Ht.selected()===!0?(console.log("2:選択中の要素だった"),Ht.one("unselect",function(){console.log("3:選択が解除された"),Hx()})):Hx()};window.chamgeElemJson_handle=nG;const Hx=function(){Ht.group(`${now_elem_group.value}`),Ht.data("id",`${now_elem_id.value}`),Ht.data("label",`${now_changelabel.value}`),Ht.position("x",parseFloat(now_pos_x.value)),Ht.position("y",parseFloat(now_pos_y.value)),Ht.style("color",`${now_labelcolor.value}`),now_elem_group.value==="nodes"?(now_parent.value===""?Ht=Ht.move({parent:null}):Ht=Ht.move({parent:`${now_parent.value}`}),console.log(`${now_backgroundcolor.value}`),Ht.style("background-color",`${now_backgroundcolor.value}`),console.log(Ht.style("background-color")+"WTF"),Ht.style("shape",`${now_shape.value}`)):now_elem_group.value==="edges"?(Ht=Ht.move({source:`${now_source.value}`,target:`${now_target.value}`}),Ht.data("source",`${now_source.value}`),Ht.data("target",`${now_target.value}`),Ht.style("line-color",`${now_linecolor.value}`),Ht.style("target-arrow-color",`${now_t_arr_color.value}`),Ht.style("target-arrow-shape",`${now_t_arr_shape.value}`),Ht.style("source-arrow-color",`${now_s_arr_color.value}`),Ht.style("source-arrow-shape",`${now_s_arr_shape.value}`)):console.log("error")};document.getElementById("editor-setting-change-button").addEventListener("click",function(){const r=document.getElementById("change-editor-color").value;document.getElementById("cy").style.background=r});document.getElementById("rest-qmenu-button").addEventListener("click",function(){document.getElementById("qmenu-elem-parent").value="",document.getElementById("qmenu-elem-source").value="",document.getElementById("qmenu-elem-target").value=""});const aG=function(){ct.style().selector("edge").style("curve-style",`${edge_curve.value}`).update()};window.change_cy_edge_layout=aG;window.addEventListener("beforeunload",function(r){ct.nodes().unselect(),ct.edges().unselect(),HiddenNowJsonData.value=my().replaceAll(",}","}").replaceAll(`,
]`,`
]`),cy_zoom.value=ct.zoom(),cy_pan_x.value=ct.pan("x"),cy_pan_y.value=ct.pan("y")});window.addEventListener("load",function(){console.log(HiddenNowJsonData.value),ct.add(JSON.parse(HiddenNowJsonData.value)),ct.zoom(parseFloat(cy_zoom.value)),ct.pan({x:parseFloat(cy_pan_x.value),y:parseFloat(cy_pan_y.value)})});document.getElementById("editor-setting-change-button").addEventListener("click",function(){document.getElementById("cy").style.backgroundColor=document.getElementById("change-editor-color").value});document.addEventListener("keydown",function(r){r.ctrlKey&&r.key=="z"?ct.undoRedo().undo():r.ctrlKey&&r.key=="y"&&ct.undoRedo().redo()},!0);const iG=document.getElementById("manual-help-button");iG.addEventListener("click",function(){xr.show("manual-help-window")});const oG=document.getElementById("read-json-func-button");oG.addEventListener("click",function(){xr.show("read-json-data-window")});const sG=document.getElementById("add-json-func-button");sG.addEventListener("click",function(){xr.show("add-json-data-window")});const uG=document.getElementById("save-json-func-button");uG.addEventListener("click",function(){tG(),xr.show("save-json-data-window")});const lG=document.getElementById("save-json-image-func-button");lG.addEventListener("click",function(){xr.show("save-json-image-window")});const pa=document.getElementById("inspector-folding-button");pa.addEventListener("click",function(){pa.classList.toggle("spread"),pa.classList.toggle("fold");const r=document.getElementById("inspector-panel");pa.dataset.mode==="-"?(pa.textContent="＋",pa.dataset.mode="+",r.classList.add("disabled")):(pa.textContent="ー",pa.dataset.mode="-",r.classList.remove("disabled"))});
</script>
  <style rel="stylesheet" crossorigin>body{white-space:nowrap;overflow:scroll;background:#cfd7fa}.top-meue{display:flex;flex-wrap:nowrap}.top-menu>button{all:unset;background:#f3e352;padding:16px;cursor:pointer;border-radius:10px}.graph-save-window,.graph-load-window,.graph-add-window{display:flex}.png-save-panel,.graph-load-textarea-panel,.graph-add-textarea-panel{margin-right:16px}.graph-load-json-panel,.graph-add-json-panel{padding-left:16px;border-left:1px solid black}#qmenu-clip-panel{padding:6px;background-color:#ffa07a}#magnification-panel{padding:6px;background-color:#87cefa}#edge-style-panel{padding:6px;background-color:#e0ffff}#node-style-panel{padding:6px;background-color:#ffb6c1}.graph-zone{position:relative;border:1px solid;width:100%;height:calc(100vh - 200px)}#cyWrapper{border:1px solid;width:100%;height:100%}#cy{width:100%;height:100%;z-index:1;background-color:#fcfbac;border:1px solid #949494;overflow:hidden}.inspector{background-color:#f0f8ff;padding:16px;margin-right:-2px;position:absolute;right:0;top:0;border:1px solid;z-index:2}#now_changelabel{resize:none}#inspector-folding-button{padding:6px;-webkit-user-select:none;user-select:none;position:absolute;right:0;top:0;border:1px solid;z-index:3}.spread{color:#fff;background-color:red}.fold{color:#fff;background-color:#2571fd}.disabled{display:none}.modal{z-index:2;font-family:-apple-system,BlinkMacSystemFont,avenir next,avenir,helvetica neue,helvetica,ubuntu,roboto,noto,segoe ui,arial,sans-serif}.modal__overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:#0009;display:flex;justify-content:center;align-items:center;z-index:4}.modal__container{background-color:#fff;padding:30px;max-width:90vw;max-height:100vh;border-radius:4px;overflow-y:auto;box-sizing:border-box;z-index:2}.modal__header{display:flex;justify-content:space-between;align-items:center;z-index:2}.modal__title{margin-top:0;margin-bottom:0;font-weight:600;font-size:1.25rem;line-height:1.25;color:#00449e;box-sizing:border-box;z-index:2}.modal__close{background:transparent;border:0;z-index:2}.modal__header .modal__close:before{content:"✕";z-index:2}.modal__content{margin-top:2rem;margin-bottom:2rem;line-height:1.5;color:#000c;z-index:2}.modal__btn{font-size:.875rem;padding:.5rem 1rem;background-color:#e6e6e6;color:#000c;border-radius:.25rem;border-style:none;border-width:0;cursor:pointer;-webkit-appearance:button;text-transform:none;overflow:visible;line-height:1.15;margin:0;will-change:transform;-moz-osx-font-smoothing:grayscale;-webkit-backface-visibility:hidden;backface-visibility:hidden;-webkit-transform:translateZ(0);transform:translateZ(0);transition:-webkit-transform .25s ease-out;transition:transform .25s ease-out;transition:transform .25s ease-out,-webkit-transform .25s ease-out;z-index:2}.modal__btn:focus,.modal__btn:hover{-webkit-transform:scale(1.05);transform:scale(1.05);z-index:2}.modal__btn-primary{background-color:#00449e;color:#fff;z-index:2}@keyframes mmfadeIn{0%{opacity:0}to{opacity:1}}@keyframes mmfadeOut{0%{opacity:1}to{opacity:0}}@keyframes mmslideIn{0%{transform:translateY(15%)}to{transform:translateY(0)}}@keyframes mmslideOut{0%{transform:translateY(0)}to{transform:translateY(-10%)}}.micromodal-slide{display:none}.micromodal-slide.is-open{display:block}.micromodal-slide[aria-hidden=false] .modal__overlay{animation:mmfadeIn .3s cubic-bezier(0,0,.2,1)}.micromodal-slide[aria-hidden=false] .modal__container{animation:mmslideIn .3s cubic-bezier(0,0,.2,1)}.micromodal-slide[aria-hidden=true] .modal__overlay{animation:mmfadeOut .3s cubic-bezier(0,0,.2,1)}.micromodal-slide[aria-hidden=true] .modal__container{animation:mmslideOut .3s cubic-bezier(0,0,.2,1)}.micromodal-slide .modal__container,.micromodal-slide .modal__overlay{will-change:transform}.cy-context-menus-cxt-menu{display:none;z-index:1000;position:absolute;border:1px solid #A0A0A0;padding:0;margin:0;width:auto}.cy-context-menus-cxt-menuitem{display:block;width:100%;padding:3px 20px;position:relative;margin:0;background-color:#f8f8f8;font-weight:400;font-size:12px;white-space:nowrap;border:0;text-align:left}.cy-context-menus-cxt-menuitem:enabled{color:#000}.cy-context-menus-ctx-operation:focus{outline:none}.cy-context-menus-cxt-menuitem:hover{color:#fff;text-decoration:none;background-color:#0b9bcd;background-image:none;cursor:pointer}.cy-context-menus-cxt-menuitem[content]:before{content:attr(content)}.cy-context-menus-divider{border-bottom:1px solid #A0A0A0}.cy-context-menus-submenu-indicator{position:absolute;right:2px;top:50%;transform:translateY(-50%)}
</style>
</head>

<body>

  <div class="top-menu">
    <button id="manual-help-button">説明＆ヘルプ</button>
    <button id="read-json-func-button">データを読み込む(json)</button>
    <button id="add-json-func-button">データを追加する(json)</button>
    <button id="save-json-func-button">データを保存する(json)</button>
    <button id="save-json-image-func-button">グラフを画像(PNG)として保存</button>
  </div>


  <div class="view-menu">

    <table>
      <tr>
        <td>
          <div id="qmenu-clip-panel">
            <span>操作用クリップボード|</span>
            <span>🔶[ノード用]parentのid：<input type="text" id="qmenu-elem-parent" value="" style="width:85px;"></span>
            <span></span>
            🔷[エッジ用]sourceのid：<input type="text" id="qmenu-elem-source" value="" style="width:85px;">
            targetのid：<input type="text" id="qmenu-elem-target" value="" style="width:85px;">
            <button id="rest-qmenu-button">リセット</button>
          </div>
        </td>
      </tr>
      <tr>
        <!-- <td>
          <span>
            🟨右クリでラベル変更する時のテキスト：<input type="text" id="select_changelabel" value="" style="width:75px;">
            🟩右クリで色変更する時の色：<input type="color" id="select_changecolor" value="#000000"
              onchange="apply_colorpick(`select_changecolor_str`,`select_changecolor`)">
            <input type="text" id="select_changecolor_str" value="#000000" style="width:55px;">
            <button onclick="apply_colorpick(`select_changecolor`,`select_changecolor_str`)">◎</button>
          </span>
        </td> -->
      </tr>

      <tr>
        <td>
          <span id="magnification-panel">
            拡大倍率:
            <input type="text" id="magnification-zoom-num" style="width:45px;" readonly>
          </span>

          <span id="edge-style-panel">
            <!-- エッジのスタイルを変える方法はないので無理だった -->
            [<a href="https://js.cytoscape.org/#style/bezier-edges" target="_blank">エッジの形式</a>]:
            <select id="edge_curve">
              <option value="haystack">haystack(高速だが色々と非対応)</option>
              <option value="straight">straight(ストレートなやつ)</option>
              <option value="straight-triangle">straight-triangle(先っぽが細い)</option>
              <option value="bezier" selected>bezier(多分普通のやつ、おすすめ)</option>
              <option value="unbundled-bezier">unbundled-bezier(曲がってる)</option>
              <option value="segments">segments(真ん中で折れてる)</option>
              <option value="taxi">taxi(階層のようなやつ、おすすめ)</option>
            </select>
            <button onclick="change_cy_edge_layout();"> 適用</button>
          </span>

          <span id="node-style-panel">
            <!-- レイアウト指定-->
            ノードの配置形式[<a href="https://js.cytoscape.org/#layouts" target="_blank">レイアウト</a>]:
            <select id="selectLayout">
              <option value="null" selected>null(全部0,0にする)</option>
              <option value="dagre">dagre(階層表示、おすすめ)</option>
              <option value="grid">grid(グリッド、おすすめ)</option>
              <option value="random">random(ランダムに配置)</option>
              <option value="circle">circle(サークル状にする)</option>
              <option value="concentric">concentric(同心円状にする)</option>
              <option value="breadthfirst">breadthfirst(幅優先探索)</option>
              <option value="cose">cose(わからない)</option>
            </select>
            <button id="changeLayout" onclick="changeLayout()">適用</button>
          </span>



          <br>
        </td>
      </tr>
    </table>

    <div class="graph-zone">


      <div id="cyWrapper">
        <div id="cy"></div>
      </div>

      <div id="inspector-folding-button" class="spread" data-mode="-">ー</div>


      <div id="inspector-panel" class="inspector">

        <div id="editor-setting-panel">
          <h3>エディタの設定をここに作る</h3>
          <br>

          <p>背景色を選択する<input type="color" id="change-editor-color" value="#fcfbac"></p>
          <hr>
          <button id="editor-setting-change-button">ここをクリックで設定を反映する</button>
        </div>

        <div id="node-or-edge-setting-panel" class="disabled">



          <h3>左クリックしたノード/エッジを編集</h3>


          <span>ノードorエッジ(変更不可)：<input type="text" id="now_elem_group" style="width:40px;" readonly></span>
          <label></label>
          <br>

          <span>id(識別用、変更不可)：<input type="text" id="now_elem_id" style="width:55px;" readonly></span>
          <br><br>
          <!-- <span>label(表示文字)：<input type="text" id="now_changelabel" style="width:80px;"></span> -->
          <span>label(表示文字)：<br> <textarea name="" id="now_changelabel" cols="26" rows="1"></textarea></span>


          <br><br>

          <span>
            <label>color(labelの色)：<input type="color" id="now_labelcolor" value="#000000"
                onchange="apply_colorpick(`now_labelcolor_str`,`now_labelcolor`)"></label>
            <input type="text" id="now_labelcolor_str" style="width:55px;">
            <button onclick="apply_colorpick(`now_labelcolor`,`now_labelcolor_str`)">◎</button>
          </span>
          <br><br>

          <div id="inspector-node" class="disabled">
            <hr>
            <!-- ここのラジオボタンはCSSでreadonlyを強引にやっています。 -->
            <span>ノードのみの情報<input id="now_elem_type_node" type="radio" name="now_elem_type" readonly></span>
            <br><br>

            <span>position：</span>
            <br>
            <span>x：<input type="text" id="now_pos_x" style="width:80px;"></span>
            <span>y：<input type="text" id="now_pos_y" style="width:80px;"></span>
            <br><br>

            <span>parent：<input type="text" id="now_parent" style="width:85px;"></span>
            <br><br>

            <span>
              <label>background-color：<br><input type="color" id="now_backgroundcolor" value="#000000"
                  onchange="apply_colorpick(`now_backgroundcolor_str`,`now_backgroundcolor`)"></label>
              <input type="text" id="now_backgroundcolor_str" style="width:55px;">
              <button onclick="apply_colorpick(`now_backgroundcolor`,`now_backgroundcolor_str`)">◎</button>
            </span>
            <br><br>

            <span>
              shape：<select id="now_shape">
                <option value="ellipse">ellipse</option>
                <option value="triangle">triangle</option>
                <option value="round-triangle">round-triangle</option>
                <option value="rectangle" selected>rectangle</option>
                <option value="round-rectangle">round-rectangle</option>
                <option value="barrel">barrel</option>
                <option value="rhomboid">rhomboid</option>
                <option value="diamond">diamond</option>
                <option value="round-diamond">round-diamond</option>
                <option value="pentagon">round-pentagon</option>
                <option value="round-pentagon">round-pentagon</option>
                <option value="hexagon">hexagon</option>
                <option value="round-hexagon">round-hexagon</option>
                <option value="heptagon">heptagon</option>
                <option value="round-heptagon">round-heptagon</option>
                <option value="octagon">octagon</option>
                <option value="round-octagon">round-octagon</option>
                <option value="star">star</option>
                <option value="tag">tag</option>
                <option value="round-tag">round-tag</option>
                <option value="vee">vee</option>
              </select>
            </span>
            <br>

          </div>

          <div id="inspector-edge" class="disabled">
            <hr>

            <span>エッジのみの情報<input id="now_elem_type_edge" type="radio" name="now_elem_type" readonly></span>
            <br>

            <span>source：<input type="text" id="now_source" value="" style="width:55px;"></span>
            <span>target：<input type="text" id="now_target" value="" style="width:55px;"></span>
            <br>

            <span>
              <label>line-color：<input type="color" id="now_linecolor" value="#000000"
                  onchange="apply_colorpick(`now_linecolor_str`,`now_linecolor`)"></label>
              <input type="text" id="now_linecolor_str" value="#000000" style="width:55px;">
              <button onclick="apply_colorpick(`now_linecolor`,`now_linecolor_str`)">◎</button>
            </span>
            <br><br>

            <span>
              <label>target-arrow-color：<input type="color" id="now_t_arr_color" value="#000000"
                  onchange="apply_colorpick(`now_t_arr_color_str`,`now_t_arr_color`)"></label>
              <input type="text" id="now_t_arr_color_str" value="#000000" style="width:55px;">
              <button onclick="apply_colorpick(`now_t_arr_color`,`now_t_arr_color_str`)">◎</button>
            </span>
            <br>

            <span>
              target-arrow-shape：<select id="now_t_arr_shape">
                <option value="none">none</option>
                <option value="triangle" selected>triangle</option>
                <option value="triangle-tee">triangle-tee</option>
                <option value="circle-triangle">circle-triangle</option>
                <option value="triangle-cross">triangle-cross</option>
                <option value="triangle-backcurve">triangle-backcurve</option>
                <option value="vee">vee</option>
                <option value="tee">tee</option>
                <option value="square">square</option>
                <option value="circle">circle</option>
                <option value="diamond">diamond</option>
                <option value="chevron">chevron</option>
              </select>
            </span>

            <br>

            <span>
              <label>source-arrow-color：<input type="color" id="now_s_arr_color" value="#000000"
                  onchange="apply_colorpick(`now_s_arr_color_str`,`now_s_arr_color`)"></label>
              <input type="text" id="now_s_arr_color_str" value="#000000" style="width:55px;">
              <button onclick="apply_colorpick(`now_s_arr_color`,`now_s_arr_color_str`)">◎</button>
            </span>
            <br>

            <span>
              source-arrow-shape：<select id="now_s_arr_shape">
                <option value="none" selected>none</option>
                <option value="triangle">triangle</option>
                <option value="triangle-tee">triangle-tee</option>
                <option value="circle-triangle">circle-triangle</option>
                <option value="triangle-cross">triangle-cross</option>
                <option value="triangle-backcurve">triangle-backcurve</option>
                <option value="vee">vee</option>
                <option value="tee">tee</option>
                <option value="square">square</option>
                <option value="circle">circle</option>
                <option value="diamond">diamond</option>
                <option value="chevron">chevron</option>
              </select>
            </span>
            <br>

          </div>

          <br>
          <hr>
          <button onclick="chamgeElemJson_handle()">ここをクリックで上記の設定を反映する</button><br><br>

        </div>


      </div>


    </div>
    <span>カーソルの座標</span>
    <label>x： <input type="text" id="mousecursor-x-pos" value="" style="width:150px;" readonly></label>
    <label>y： <input type="text" id="mousecursor-y-pos" value="" style="width:150px;" readonly></label>
    <span>
      カーソル上のノード/エッジのidを表示：<input type="text" id="qmenu_mouseover_elem_id" value="" style="width:85px;" readonly>
    </span>
    <span class="disabled">
      labelを表示：<input type="text" id="qmenu_mouseover_elem_label" value="" style="width:100px;" readonly>
    </span>

    <input type="hidden" value="" id="HiddenNowJsonData">
    <input type="hidden" value="1" id="cy_zoom">
    <input type="hidden" value="0" id="cy_pan_x">
    <input type="hidden" value="0" id="cy_pan_y">




    <!-- ここより下は、右クリックのノード編集機能で使用するモーダルメニューの領域であるああああああああああああああああああああ -->
    <!--  https://pengi-n.co.jp/blog/js-micromodal/#i-7-->
    <!--  -->
    <!-- css-library\micromodal.cssの各項目にz-indexを指定しないとcytoscape.jsと要素被ります -->
    <!-- これはサンプルのやつ →モーダルウィンドウ作成の雛形 -->
    <div class="modal micromodal-slide" id="modal-1" aria-hidden="true">
      <div class="modal__overlay" tabindex="-1" data-micromodal-close>
        <div class="modal__container" role="dialog" aria-modal="true" aria-labelledby="modal-1-title">
          <header class="modal__header">
            <h2 class="modal__title" id="modal-1-title">
              Micromodal
            </h2>
            <button class="modal__close" aria-label="Close modal" data-micromodal-close></button>
          </header>
          <main class="modal__content" id="modal-1-content">
            <p>
              Try hitting the <code>tab</code> key and notice how the focus stays within the modal itself. Also,
              <code>esc</code> to close modal.
            </p>
          </main>
          <footer class="modal__footer">
            <button class="modal__btn modal__btn-primary">Continue</button>
            <button class="modal__btn" data-micromodal-close aria-label="Close this dialog window">Close</button>
          </footer>
        </div>
      </div>
    </div>

    <!-- 開くボタン -->
    <!-- <button data-micromodal-trigger="modal-1">モーダルウィンドウテストのボタン</button> -->

    <!-- 説明とヘルプのモーダルウィンドウ -->
    <div class="modal micromodal-slide" id="manual-help-window" aria-hidden="true">
      <div class="modal__overlay" tabindex="-1" data-micromodal-close>
        <div class="modal__container" role="dialog" aria-modal="true" aria-labelledby="modal-1-title">
          <header class="modal__header">
            <h2 class="modal__title" id="modal-1-title">
              ヘルプ・JSONのデータ形式説明
            </h2>
            <button class="modal__close" aria-label="Close modal" data-micromodal-close></button>
          </header>
          <main class="modal__content" id="modal-1-content">
            <h2>あとで作る</h2>
          </main>
          <footer class="modal__footer">
            <button class="modal__btn" data-micromodal-close aria-label="Close this dialog window">Close</button>
          </footer>
        </div>
      </div>
    </div>

    <!-- JSONデータを読み込む部分のモーダルウィンドウ -->
    <div class="modal micromodal-slide" id="read-json-data-window" aria-hidden="true">
      <div class="modal__overlay" tabindex="-1" data-micromodal-close>
        <div class="modal__container" role="dialog" aria-modal="true" aria-labelledby="modal-1-title">
          <header class="modal__header">
            <h2 class="modal__title" id="modal-1-title">
              JSONファイルを読み込みグラフを表示する
            </h2>
            <button class="modal__close" aria-label="Close modal" data-micromodal-close></button>
          </header>
          <main class="modal__content" id="modal-1-content">

            <div class="graph-load-window">


              <div class="graph-load-textarea-panel">
                <h2 class="modal__title" id="modal-1-title">
                  JSONを↓にコピペして読み込む
                </h2><br>

                <textarea id="load-text-json-data" cols="36" rows="15">
[
{"data":{"group":"nodes","id":"04_A1","label":"A1","parent":"04_AAA1"},"position":{"x":275.3053023985838,"y":259.7812976793654},"group":"nodes","classes":"",
"style": {"background-color": "#ffffff", "color": "#000000", "shape": "rectangle"}},
{"data":{"group":"nodes","id":"04_A2","label":"A2","parent":"04_AAA1"},"position":{"x":342.3053023985838,"y":257.7812976793654},"group":"nodes","classes":"",
"style": {"background-color": "#ffffff", "color": "#000000", "shape": "rectangle"}},
{"data":{"group":"nodes","id":"04_AA1","label":"AA1"},"position":{"x":246.9052347599775,"y":231.40500589902263},"group":"nodes","classes":"",
"style": {"background-color": "#00ff00", "color": "#000000", "shape": "rectangle"}},
{"data":{"group":"nodes","id":"04_AAA1","label":"AAA1","parent":"04_AA1"},"position":{"x":308.8053023985838,"y":258.7812976793654},"group":"nodes","classes":"",
"style": {"background-color": "#9dbaea", "color": "#000000", "shape": "rectangle"}},
{"data":{"group":"nodes","id":"9u7b7pj38no","label":"AAA1","parent":"04_AA1"},"position":{"x":208.2321871780487,"y":152.87621549335773},"group":"nodes","classes":"",
"style": {"background-color": "#9dbaea", "color": "#000000", "shape": "rectangle"}},
{"data":{"group":"nodes","id":"11lf3mcuoqs","label":"A1","parent":"9u7b7pj38no"},"position":{"x":252.947281162102,"y":151.02165001948723},"group":"nodes","classes":"",
"style": {"background-color": "#ffffff", "color": "#000000", "shape": "rectangle"}},
{"data":{"group":"nodes","id":"mjs3onuq8hg","label":"A2","parent":"9u7b7pj38no"},"position":{"x":163.51709319399538,"y":154.73078096722824},"group":"nodes","classes":"",
"style": {"background-color": "#ffffff", "color": "#000000", "shape": "rectangle"}},
{"data":{"group":"nodes","id":"j50eu8l8t4","label":"AA1","parent":null},"position":{"x":600.2896917023926,"y":284.4002202125762},"group":"nodes","classes":"",
"style": {"background-color": "#00ff00", "color": "#000000", "shape": "rectangle"}},
{"data":{"group":"nodes","id":"6gt42mgd4r4","label":"AAA1","parent":"j50eu8l8t4"},"position":{"x":613.2823987422462,"y":350.5973488007082},"group":"nodes","classes":"",
"style": {"background-color": "#9dbaea", "color": "#000000", "shape": "rectangle"}},
{"data":{"group":"nodes","id":"20sh6qhdvk8","label":"A1","parent":"6gt42mgd4r4"},"position":{"x":559.8004404251507,"y":306.5961714508424},"group":"nodes","classes":"",
"style": {"background-color": "#ffffff", "color": "#000000", "shape": "rectangle"}},
{"data":{"group":"nodes","id":"64iv2lvho4c","label":"A2","parent":"6gt42mgd4r4"},"position":{"x":654.204268974308,"y":285.18512622852256},"group":"nodes","classes":"",
"style": {"background-color": "#ffffff", "color": "#000000", "shape": "rectangle"}},
{"data":{"group":"nodes","id":"pthbjqckv6s","label":"AAA1","parent":"j50eu8l8t4"},"position":{"x":561.2368965775086,"y":170.003608336581},"group":"nodes","classes":"",
"style": {"background-color": "#9dbaea", "color": "#000000", "shape": "rectangle"}},
{"data":{"group":"nodes","id":"30m5a0a6pm8","label":"A1","parent":"pthbjqckv6s"},"position":{"x":528.3078096722827,"y":169.29086905225864},"group":"nodes","classes":"",
"style": {"background-color": "#ffffff", "color": "#000000", "shape": "rectangle"}},
{"data":{"group":"nodes","id":"f0bdpncc8jg","label":"A2","parent":"pthbjqckv6s"},"position":{"x":594.1659834827344,"y":170.71634762090338},"group":"nodes","classes":"",
"style": {"background-color": "#ffffff", "color": "#000000", "shape": "rectangle"}},
{"data":{"group":"nodes","id":"sfcf0j9nlac","label":"AAA1","parent":"04_AA1"},"position":{"x":184.43425402659702,"y":327.5756224942357},"group":"nodes","classes":"",
"style": {"background-color": "#9dbaea", "color": "#000000", "shape": "rectangle"}},
{"data":{"group":"nodes","id":"v2800lc7dcg","label":"A1","parent":"sfcf0j9nlac"},"position":{"x":151.5051671213712,"y":326.8628832099134},"group":"nodes","classes":"",
"style": {"background-color": "#ffffff", "color": "#000000", "shape": "rectangle"}},
{"data":{"group":"nodes","id":"vt37bbuea3","label":"A2","parent":"sfcf0j9nlac"},"position":{"x":217.36334093182285,"y":328.288361778558},"group":"nodes","classes":"",
"style": {"background-color": "#ffffff", "color": "#000000", "shape": "rectangle"}},
{"data":{"group":"nodes","id":"rkoo3d4jjkc","label":"AAA1","parent":"6gt42mgd4r4"},"position":{"x":613.2823987422462,"y":396.9422666147009},"group":"nodes","classes":"",
"style": {"background-color": "#ff8040", "color": "#000000", "shape": "rectangle"}},
{"data":{"group":"nodes","id":"6cvbc66qfdo","label":"A1","parent":"rkoo3d4jjkc"},"position":{"x":567.7932237519898,"y":402.5095713728938},"group":"nodes","classes":"",
"style": {"background-color": "#ffffff", "color": "#000000", "shape": "rectangle"}},
{"data":{"group":"nodes","id":"vmj0gu0ve7s","label":"A2","parent":"rkoo3d4jjkc"},"position":{"x":658.7715737325025,"y":391.374961856508},"group":"nodes","classes":"",
"style": {"background-color": "#ffffff", "color": "#000000", "shape": "rectangle"}},
{"data":{"source":"6cvbc66qfdo","target":"04_AA1","id":"6f6b79db-9168-4a4c-88ec-89f87346213c"},"position":{"x":0,"y":0},"group":"edges","classes":"",
"style": {"color": "#000000", "line-color": "#da1725", "target-arrow-color": "#da1725", "target-arrow-shape":
"triangle", "source-arrow-color": "#999999", "source-arrow-shape": "none"}},
{"data":{"source":"64iv2lvho4c","target":"04_AA1","id":"a5d674a6-9f64-4a99-9a12-d2a73dc3c60a"},"position":{"x":0,"y":0},"group":"edges","classes":"",
"style": {"color": "#000000", "line-color": "#da1725", "target-arrow-color": "#da1725", "target-arrow-shape":
"triangle", "source-arrow-color": "#999999", "source-arrow-shape": "none"}},
{"data":{"source":"6gt42mgd4r4","target":"pthbjqckv6s","id":"73196cc3-887d-4500-a2b6-2610351f1eea"},"position":{"x":0,"y":0},"group":"edges","classes":"",
"style": {"color": "#000000", "line-color": "#da1725", "target-arrow-color": "#da1725", "target-arrow-shape":
"triangle", "source-arrow-color": "#999999", "source-arrow-shape": "none"}},
{"data":{"source":"vt37bbuea3","target":"9u7b7pj38no","id":"3929c163-4a49-4519-860f-8f5b559371dc"},"position":{"x":0,"y":0},"group":"edges","classes":"",
"style": {"color": "#000000", "line-color": "#da1725", "target-arrow-color": "#da1725", "target-arrow-shape":
"triangle", "source-arrow-color": "#999999", "source-arrow-shape": "none"}},
{"data":{"source":"04_A1","target":"sfcf0j9nlac","id":"5fe51854-2375-4986-b687-6627cc61a4c8"},"position":{"x":0,"y":0},"group":"edges","classes":"",
"style": {"color": "#000000", "line-color": "#da1725", "target-arrow-color": "#da1725", "target-arrow-shape":
"triangle", "source-arrow-color": "#999999", "source-arrow-shape": "none"}},
{"data":{"source":"v2800lc7dcg","target":"9u7b7pj38no","id":"46843aa6-c798-4a84-8988-ef6ee7126b91"},"position":{"x":0,"y":0},"group":"edges","classes":"",
"style": {"color": "#000000", "line-color": "#da1725", "target-arrow-color": "#da1725", "target-arrow-shape":
"triangle", "source-arrow-color": "#999999", "source-arrow-shape": "none"}},
{"data":{"source":"30m5a0a6pm8","target":"9u7b7pj38no","id":"63f8b5b2-78d0-4695-a5f7-4a79586033e1"},"position":{"x":0,"y":0},"group":"edges","classes":"",
"style": {"color": "#000000", "line-color": "#da1725", "target-arrow-color": "#da1725", "target-arrow-shape":
"triangle", "source-arrow-color": "#999999", "source-arrow-shape": "none"}},
{"data":{"source":"20sh6qhdvk8","target":"rkoo3d4jjkc","id":"b9628d37-ba3d-403d-91d6-3ecf8571944d"},"position":{"x":0,"y":0},"group":"edges","classes":"",
"style": {"color": "#000000", "line-color": "#da1725", "target-arrow-color": "#da1725", "target-arrow-shape":
"triangle", "source-arrow-color": "#999999", "source-arrow-shape": "none"}},
{"data":{"source":"64iv2lvho4c","target":"vmj0gu0ve7s","id":"6855473e-4a44-4631-9954-bae680918621"},"position":{"x":0,"y":0},"group":"edges","classes":"",
"style": {"color": "#000000", "line-color": "#da1725", "target-arrow-color": "#da1725", "target-arrow-shape":
"triangle", "source-arrow-color": "#999999", "source-arrow-shape": "none"}},
{"data":{"source":"pthbjqckv6s","target":"04_A2","id":"8088cc19-9e33-4b90-87da-124171b04905"},"position":{"x":0,"y":0},"group":"edges","classes":"",
"style": {"color": "#000000", "line-color": "#da1725", "target-arrow-color": "#da1725", "target-arrow-shape":
"triangle", "source-arrow-color": "#999999", "source-arrow-shape": "none"}},
{"data":{"source":"11lf3mcuoqs","target":"04_AA1","id":"a725f972-ce15-47a9-a11e-9406d4466107"},"position":{"x":0,"y":0},"group":"edges","classes":"",
"style": {"color": "#000000", "line-color": "#da1725", "target-arrow-color": "#da1725", "target-arrow-shape":
"triangle", "source-arrow-color": "#999999", "source-arrow-shape": "none"}},
{"data":{"source":"9u7b7pj38no","target":"j50eu8l8t4","id":"474cf218-172d-49c5-b4f8-4edf868d703d"},"position":{"x":0,"y":0},"group":"edges","classes":"",
"style": {"color": "#000000", "line-color": "#da1725", "target-arrow-color": "#da1725", "target-arrow-shape":
"triangle", "source-arrow-color": "#999999", "source-arrow-shape": "none"}},
{"data":{"source":"04_AA1","target":"mjs3onuq8hg","id":"4dcb7189-e2e4-4ccf-b3e1-563d27a03ab9"},"position":{"x":0,"y":0},"group":"edges","classes":"",
"style": {"color": "#000000", "line-color": "#da1725", "target-arrow-color": "#da1725", "target-arrow-shape":
"triangle", "source-arrow-color": "#999999", "source-arrow-shape": "none"}}
]
                </textarea><br>

                <button onclick="graphJsonCopy(`load-text-json-data`)">クリップボードにコピー</button><br><br>

                <button class="modal__btn modal__btn-primary" id="load-text-json-button"
                  data-micromodal-close>↑に貼ったJSONを読込みグラフ表示</button>
              </div>

              <div class="graph-load-json-panel">

                <h2 class="modal__title" id="modal-1-title">
                  PCからJSONを選択して読み込む
                </h2><br>

                選択するとすぐに読み込みます:<br>
                <input type="file" accept=".json" id="load-json-file">
                <br>
                <textarea id="loaded-graph-json" cols="36" rows="15" readonly></textarea><br>

              </div>


            </div>


          </main>

        </div>
      </div>
    </div>


    <!-- JSONデータを追加する部分のモーダルウィンドウ -->
    <div class="modal micromodal-slide" id="add-json-data-window" aria-hidden="true">
      <div class="modal__overlay" tabindex="-1" data-micromodal-close>
        <div class="modal__container" role="dialog" aria-modal="true" aria-labelledby="modal-1-title">
          <header class="modal__header">
            <h2 class="modal__title" id="modal-1-title">
              現在のグラフにJSONからデータを追加する
            </h2>
            <button class="modal__close" aria-label="Close modal" data-micromodal-close></button>
          </header>
          <main class="modal__content" id="modal-1-content">
            <p>要素のID重複すると追加失敗するので注意</p>

            <div class="graph-add-window">

              <div class="graph-add-textarea-panel">

                <h2 class="modal__title" id="modal-1-title">
                  JSONを↓にコピペして追加する
                </h2><br>


                <textarea id="graph-add-text-json-data" cols="36" rows="15"></textarea><br>
                <button onclick="graphJsonCopy(`graph-add-text-json-data`)">クリップボードにコピー</button>

                <br><br>
                <button class="modal__btn modal__btn-primary" id="graph-add-text-json-button"
                  data-micromodal-close>データを追加する</button>
              </div>

              <div class="graph-add-json-panel">
                <h2 class="modal__title" id="modal-1-title">
                  PCからJSONを選択して追加する
                </h2><br>

                選択するとすぐに追加します: <br>
                <input type="file" accept=".json" id="add-json-file">
                <br>
                <textarea id="added-graph-json" cols="36" rows="15" readonly></textarea><br>
              </div>


            </div>

            <br><br>

          </main>
        </div>
      </div>
    </div>


    <!-- 現在のグラフのJSONデータを保存する部分のモーダルウィンドウ -->
    <div class="modal micromodal-slide" id="save-json-data-window" aria-hidden="true">
      <div class="modal__overlay" tabindex="-1" data-micromodal-close>
        <div class="modal__container" role="dialog" aria-modal="true" aria-labelledby="modal-1-title">
          <header class="modal__header">
            <h2 class="modal__title" id="modal-1-title">
              JSONの保存
            </h2>
            <button class="modal__close" aria-label="Close modal" data-micromodal-close></button>
          </header>
          <main class="modal__content" id="modal-1-content">

            <!-- JSONの保存-->
            <!-- <p>ケツカンマが削除されていないJSONは、<br>処理しないとJSON.parseで読んだ時にエラー出る</p> -->
            <!-- <button id="IdBtnSave" onclick="graphJsonSave_ALL()">ケツカンマそのまま保存</button> -->
            <!-- <button id="IdBtnSave_P" onclick="graphJsonSave_P()">ケツカンマ削除して保存</button><br> -->
            <textarea id="save-json-data" cols="48" rows="10"></textarea><br>
            <button id="graph-json-copy-button" onclick="graphJsonCopy(`save-json-data`)">クリップボードにコピー</button>
            <button id="graph-json-view-button" class="modal__btn-primary modal__btn">別タブで開く(名前を付けて保存可能)</button>
            <br><br>

            <p>
              ファイル名
              <input type="text" id="json-data-filename" value="test" style="width:50px;" /><br>
              <button id="graph-json-save-txt-button" class="modal__btn-primary modal__btn">.txtで保存</button>
              <button id="graph-json-save-json-button" class="modal__btn-primary modal__btn">.jsonで保存</button>
            </p>



          </main>
        </div>
      </div>
    </div>

    <!-- 現在のグラフを画像として保存する部分のモーダルウィンドウ -->
    <div class="modal micromodal-slide" id="save-json-image-window" aria-hidden="true">
      <div class="modal__overlay" tabindex="-1" data-micromodal-close>
        <div class="modal__container" role="dialog" aria-modal="true" aria-labelledby="modal-1-title">
          <header class="modal__header">
            <h2 class="modal__title">グラフをPNG画像として保存</h2>
            <button class="modal__close" aria-label="Close modal" data-micromodal-close></button>
          </header>
          <main class="modal__content" id="modal-1-content">


            <div class="graph-save-window">

              <div class="png-save-panel">

                <fieldset>

                  <legend>保存の設定</legend>

                  <p>PNG画像の保存範囲</p>
                  <label><input type="radio" id="png-full-yes" name="png-full-image">全範囲</label>
                  <label><input type="radio" id="png-full-no" name="png-full-image">写ってる部分だけ</label>

                  <p>PNG画像のスケールの値(1が最低、5が普通、19が最大)</p>
                  <input type="range" id="png-scale" min="1" max="19" step="1" value="5" />
                  <input type="number" id="png-scale-num" min="1" max="19" value="5" style="width:55px;"><br>

                  <p>PNG画像の背景色(背景透過も可能)</p>
                  <p>
                    <label><input type="radio" id="png-tras-yes" name="png-transparent" value="yes">透過する</label>
                    <label><input type="radio" name="png-transparent" value="no" checked>透過しない</label>
                    <input type="color" input id="color-picker"
                      onchange="apply_colorpick(`color-picker-str`,`color-picker`)">
                    <input type="text" id="color-picker-str" style="width:55px;">
                    <button onclick="apply_colorpick(`color-picker`,`color-picker-str`)">◎</button>
                  </p>


                </fieldset>
                <p>PNG画像を閲覧する(別ページ開く＋右クリックで保存も可能)</p>
                <button id="view-png-page-button" class="modal__btn-primary modal__btn">ここをクリックでPNG画像を閲覧する</button>
                <br>
                <br>
                <p>ファイル名(拡張子含まず)</p>
                <input type="text" id="png-name" value="test" /><br>
                <button id="download-png-button" class="modal__btn-primary modal__btn">ここをクリックでPNG画像を保存する</button>
              </div>

            </div>

          </main>
          <!-- <footer class="modal__footer">
            <button class="modal__btn modal__btn-primary">Continue</button>
            <button class="modal__btn" data-micromodal-close aria-label="Close this dialog window">Close</button>
          </footer> -->
        </div>
      </div>
    </div>




    <!-- コンテキストメニュー→新規ノード作成で開くモーダルウィンドウ -->
    <div class="modal micromodal-slide" id="cxt_node_create" aria-hidden="true">
      <div class="modal__overlay" tabindex="-1" data-micromodal-close>
        <div class="modal__container" role="dialog" aria-modal="true" aria-labelledby="modal-1-title">
          <header class="modal__header">
            <h2 class="modal__title" id="modal-1-title">
              新規ノードを作るモーダルウィンドウです。
            </h2>
            <button class="modal__close" aria-label="Close modal" data-micromodal-close
              onclick="MicroModal.close('cxt_node_create')"></button>
          </header>
          <main class="modal__content" id="modal-1-content">
            🔘id(重複不可,後で変更不可)：<input type="text" id="modal_node_id" value="" style="width:85px;"><br>
            　※idを空白にするとランダム文字列にする<br><br>
            🔘ノードのラベル：<input type="text" id="modal_node_label" value="" style="width:85px;"><br>
            🔘color(labelの色)：<input type="color" id="modal_node_labelcolor" value="#000000"
              onchange="apply_colorpick(`modal_node_labelcolor_str`,`modal_node_labelcolor`)">
            <input type="text" id="modal_node_labelcolor_str" value="#000000" style="width:55px;">
            <button
              onclick="apply_colorpick(`modal_node_labelcolor`,`modal_node_labelcolor_str`)">◎</button><br><br><br>
            🔘parentのid：<input type="text" id="modal_node_parent" value="" style="width:85px;"><br>
            　※ここの値はQメニューと同期される<br><br>
            🔘background-color：<br><input type="color" id="modal_node_backgroundcolor" value="#9dbaea"
              onchange="apply_colorpick(`modal_node_backgroundcolor_str`,`modal_node_backgroundcolor`)">
            <input type="text" id="modal_node_backgroundcolor_str" style="width:55px;">
            <button onclick="apply_colorpick(`modal_node_backgroundcolor`,
            `modal_node_backgroundcolor_str`)">◎</button><br><br>
            🔘shape：<select id="modal_node_shape">
              <option value="ellipse">ellipse</option>
              <option value="triangle">triangle</option>
              <option value="round-triangle">round-triangle</option>
              <option value="rectangle" selected>rectangle</option>
              <option value="round-rectangle">round-rectangle</option>
              <option value="barrel">barrel</option>
              <option value="rhomboid">rhomboid</option>
              <option value="diamond">diamond</option>
              <option value="round-diamond">round-diamond</option>
              <option value="pentagon">round-pentagon</option>
              <option value="round-pentagon">round-pentagon</option>
              <option value="hexagon">hexagon</option>
              <option value="round-hexagon">round-hexagon</option>
              <option value="heptagon">heptagon</option>
              <option value="round-heptagon">round-heptagon</option>
              <option value="octagon">octagon</option>
              <option value="round-octagon">round-octagon</option>
              <option value="star">star</option>
              <option value="tag">tag</option>
              <option value="round-tag">round-tag</option>
              <option value="vee">vee</option>
            </select><br>
          </main>
          <footer class="modal__footer">
            <button class="modal__btn modal__btn-primary" onclick="cxt_new_node_generate(cxt_event)">新規ノードを作成する</button>
            <button class="modal__btn" data-micromodal-close aria-label="Close this dialog window"
              onclick="MicroModal.close('cxt_node_create')">やっぱりやめる(ESCでも可)</button>
          </footer>
        </div>
      </div>
    </div>


    <!-- コンテキストメニュー→新規エッジ作成で開くモーダルウィンドウ -->
    <div class="modal micromodal-slide" id="cxt_edge_create" aria-hidden="true">
      <div class="modal__overlay" tabindex="-1" data-micromodal-close>
        <div class="modal__container" role="dialog" aria-modal="true" aria-labelledby="modal-1-title">
          <header class="modal__header">
            <h2 class="modal__title" id="modal-1-title">
              新規エッジを作るモーダルウィンドウです。
            </h2>
            <button class="modal__close" aria-label="Close modal" data-micromodal-close
              onclick="MicroModal.close('cxt_edge_create')"></button>
          </header>
          <main class="modal__content" id="modal-1-content">
            🔘id(重複不可,後で変更不可)：<input type="text" id="modal_edge_id" value="" style="width:85px;"><br>
            　※idを空白にするとランダム文字列にする<br><br>
            🔘ノードのラベル：<input type="text" id="modal_edge_label" value="" style="width:85px;"><br>
            🔘color(labelの色)：<input type="color" id="modal_edge_labelcolor" value="#000000"
              onchange="apply_colorpick(`modal_edge_labelcolor_str`,`modal_edge_labelcolor`)">
            <input type="text" id="modal_edge_labelcolor_str" value="#000000" style="width:55px;">
            <button onclick="apply_colorpick(`modal_edge_labelcolor`,`modal_edge_labelcolor_str`)">◎</button><br><br>
            🔘source：<input type="text" id="modal_edge_source" value="" style="width:55px;"><br>
            🔘target：<input type="text" id="modal_edge_target" value="" style="width:55px;"><br>
            ※ここの値はQメニューと同期される<br><br>

            🔘line-color：<input type="color" id="modal_edge_linecolor" value="#F00000"
              onchange="apply_colorpick(`modal_edge_linecolor_str`,`modal_edge_linecolor`)">
            <input type="text" id="modal_edge_linecolor_str" value="#F00000" style="width:55px;">
            <button onclick="apply_colorpick(`modal_edge_linecolor`,`modal_edge_linecolor_str`)">◎</button><br><br>
            🔘target-arrow-color：<input type="color" id="modal_edge_t_arr_color" value="#F00000"
              onchange="apply_colorpick(`modal_edge_t_arr_color_str`,`modal_edge_t_arr_color`)">
            <input type="text" id="modal_edge_t_arr_color_str" value="#F00000" style="width:55px;">
            <button onclick="apply_colorpick(`modal_edge_t_arr_color`,`modal_edge_t_arr_color_str`)">◎</button><br>
            🔘target-arrow-shape：<select id="modal_edge_t_arr_shape">
              <option value="none">none</option>
              <option value="triangle" selected>triangle</option>
              <option value="triangle-tee">triangle-tee</option>
              <option value="circle-triangle">circle-triangle</option>
              <option value="triangle-cross">triangle-cross</option>
              <option value="triangle-backcurve">triangle-backcurve</option>
              <option value="vee">vee</option>
              <option value="tee">tee</option>
              <option value="square">square</option>
              <option value="circle">circle</option>
              <option value="diamond">diamond</option>
              <option value="chevron">chevron</option>
            </select><br>
            🔘source-arrow-color：<input type="color" id="modal_edge_s_arr_color" value="#F00000"
              onchange="apply_colorpick(`modal_edge_s_arr_color_str`,`modal_edge_s_arr_color`)">
            <input type="text" id="modal_edge_s_arr_color_str" value="#F00000" style="width:55px;">
            <button onclick="apply_colorpick(`modal_edge_s_arr_color`,`modal_edge_s_arr_color_str`)">◎</button><br>
            🔘source-arrow-shape：<select id="modal_edge_s_arr_shape">
              <option value="none" selected>none</option>
              <option value="triangle">triangle</option>
              <option value="triangle-tee">triangle-tee</option>
              <option value="circle-triangle">circle-triangle</option>
              <option value="triangle-cross">triangle-cross</option>
              <option value="triangle-backcurve">triangle-backcurve</option>
              <option value="vee">vee</option>
              <option value="tee">tee</option>
              <option value="square">square</option>
              <option value="circle">circle</option>
              <option value="diamond">diamond</option>
              <option value="chevron">chevron</option>
            </select><br>
          </main>
          <footer class="modal__footer">
            <button class="modal__btn modal__btn-primary" onclick="cxt_new_edge_generate(cxt_event)">新規エッジを作成する</button>
            <button class="modal__btn" data-micromodal-close aria-label="Close this dialog window"
              onclick="MicroModal.close('cxt_edge_create')">やっぱりやめる(ESCでも可)</button>
          </footer>
        </div>
      </div>
    </div>





    <!-- Cytoscape.js(3.25.0) 【MITライセンス】-->
    <!-- https://github.com/cytoscape/cytoscape.js -->
    <!-- <script src="js-library/cytoscape.min.js"></script> -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.25.0/cytoscape.min.js"
      integrity="sha512-QWYhhlZXfhMzyiML+xSFHYINwLvLsVd2Ex6QKA4JQzulKAsXiHoNXN1gCgB7GUaVL8xGI9L6XXyqPJVLASVP7g=="
      crossorigin="anonymous" referrerpolicy="no-referrer"></script> -->


    <!-- jquery-3.6.0 【MITライセンス】 -->
    <!-- https://jquery.org/license/ -->
    <!-- <script src="js-library/jquery-3.6.0.min.js"></script> -->
    <!-- <script src="https://code.jquery.com/jquery-3.6.0.min.js"
      integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> -->

    <!-- dagre.js(0.8.2)  【MITライセンス】-->
    <!-- https://github.com/dagrejs/dagre -->
    <!-- <script src="js-library/dagre.min.js"></script> -->
    <!-- <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/dagre/0.8.2/dagre.min.js"></script> -->

    <!-- cytoscape-dagre.js(2.5.0)  【MITライセンス】-->
    <!-- https://github.com/cytoscape/cytoscape.js-dagre -->
    <!-- <script src="js-library/cytoscape-dagre.js"></script> -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/cytoscape-dagre@2.5.0/cytoscape-dagre.min.js"></script> -->

    <!-- FileSaver.js(2.0.5)  【MITライセンス】-->
    <!-- https://github.com/eligrey/FileSaver.js/ -->
    <!-- <script src="js-library/FileSaver.js"></script> -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"
      integrity="sha512-Qlv6VSKh1gDKGoJbnyA5RMXYcvnpIqhO++MhIM2fStMcGT9i2T//tSwYFlcyoRRDcDZ+TYHpH8azBBCyhpSeqw=="
      crossorigin="anonymous" referrerpolicy="no-referrer"></script> -->

    <!-- cytoscape-panzoom.js(2.5.3) 【MITライセンス】 -->
    <!-- https://github.com/cytoscape/cytoscape.js-panzoom -->
    <!-- <script src="js-library/cytoscape-panzoom.min.js"></script> -->
    <!-- <link rel="stylesheet" href="css-library/cytoscape.js-panzoom.min.css"> -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape-panzoom/2.5.3/cytoscape-panzoom.min.js"
      integrity="sha512-coQmIYa/SKS8wyZw14FTLJhHmp5jqIO2WxyGhjAnLGdym6RsLX412wLO1hqnFifU0NacrJvlUukRJEwjRkm0Xg=="
      crossorigin="anonymous" referrerpolicy="no-referrer"></script> -->
    <!-- <link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/cytoscape-panzoom/2.5.3/cytoscape.js-panzoom.min.css"
      integrity="sha512-MJrzp+ZGajx6AWCCCmjBWo0rPFavM1aBghVUSVVa0uYv8THryrtEygjj5r2rUg/ms33SkEC5xJ3E4ycCmxWdrw=="
      crossorigin="anonymous" referrerpolicy="no-referrer" /> -->

    <!-- font-awesome(4.0.3) MITライセンス・SIL OFL 1.1・CC BY 4.0-->
    <!-- https://github.com/FortAwesome/Font-Awesome -->
    <!-- <link rel="stylesheet" href="css-library/font-awesome.min.css"> -->
    <!-- fontフォルダの中にある、font-awesomeのデータが必要なので注意 -->
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.0.3/css/font-awesome.min.css"> -->

    <!-- konva.js(7.0.3) 【MITライセンス】 -->
    <!-- https://github.com/konvajs/konva -->
    <!-- <script src="js-library/konva.min.js"></script> -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/konva/7.0.3/konva.min.js"
      integrity="sha512-aHYICHW4+q+fdjxz4J03gQvj2cm7BZsCoO5v6xZjyID2F/jnAzmOBy/X0nISDQGDziGzDgbE9UUKMN0HInL09A=="
      crossorigin="anonymous" referrerpolicy="no-referrer"></script> -->

    <!-- cytoscape.js-edge-editing(4.0)  【MITライセンス】-->
    <!-- ※CDNに4.0が無いため、GitHubからDLしたものを使用する -->
    <!-- https://github.com/iVis-at-Bilkent/cytoscape.js-edge-editing -->
    <!-- <script src="js-library/cytoscape-edge-editing.js"></script> -->
    <!-- <script
            src="https://cdn.jsdelivr.net/npm/cytoscape-edge-bend-editing@1.6.1/cytoscape-edge-bend-editing.min.js"></script> -->


    <!-- lodash.js(4.17.10)  【MITライセンス】-->
    <!-- https://github.com/lodash/lodash -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.10/lodash.js"></script> -->


    <!-- cytoscape-edgehandles.js(4.0.1)  【MITライセンス】-->
    <!-- https://github.com/cytoscape/cytoscape.js-edgehandles -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/cytoscape-edgehandles@4.0.1/cytoscape-edgehandles.min.js"></script> -->



    <!-- cytoscape-context-menus.js(4.1.0) 【MITライセンス】-->
    <!-- https://github.com/iVis-at-Bilkent/cytoscape.js-context-menus -->
    <!-- <script src="js-library/cytoscape-context-menus.js"></script> -->
    <!-- <link rel="stylesheet" href="css-library/cytoscape-context-menus.css"> -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/cytoscape-context-menus@4.1.0/cytoscape-context-menus.min.js"></script>
    <link rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/cytoscape-context-menus@4.1.0/cytoscape-context-menus.min.css"> -->



    <!-- cytoscape-undo-redo.js(1.3.3) 【MITライセンス】-->
    <!-- https://github.com/iVis-at-Bilkent/cytoscape.js-undo-redo -->
    <!-- <script src="js-library/cytoscape-undo-redo.js"></script> -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/cytoscape-undo-redo@1.3.3/cytoscape-undo-redo.min.js"></script> -->



    <!-- Micromodal.js(0.4.10) 【MITライセンス】-->
    <!-- https://github.com/ghosh/Micromodal -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/micromodal/0.4.10/micromodal.min.js"
      integrity="sha512-qcwcAul7d7yUcoz3MmQABiaGDa+gVkaDWgZX6wEd/z3I6z62nQCDW3EqioQG+O+QlGCpxmJLdH5snh4IaDPiPA=="
      crossorigin="anonymous" referrerpolicy="no-referrer"></script> -->
    <!-- <script src="js-library/micromodal.min.js"></script> -->



    <!-- 自分が作ったスクリプト【MITライセンス】-->


</body>

</html>